"Studio" by Charm Cochran

Volume 1 - The Guts

Book 1 - Options

Part 1 - Bibliographic data, use options, release options

The story headline is "An interactive home invasion scenario".
The story genre is "Horror".
The release number is 1.
The story description is "It's been a whirlwind few days, but you're finally just about settled in. New place, new city, no one here yet for you to lean on. You're absolutely exhausted. You've spent all day getting things set up, running errands, and stressing out, alone. The sun sits low on the horizon. You think it's just about time to secure the premises and head to bed."
The story creation year is 2024.

Use American dialect and the serial comma. Use persistent autosaves.
[NOTE: These are also true, but don't need to be declared as they're in effect by default: Use fast route-finding. Use full-length room descriptions. Use no scoring. Use VERBOSE room descriptions.]

Release along with a "Bisquixe" interpreter.
Release along with cover art ("A dark hallway terminating in a cracked door.").
Release along with a file of "Hand-drawn map" called "StudioMap.png".

Part 2 - Extensions

Chapter 1 - Include

Include Autosave by Daniel Stelzer.
Include Approaches by Emily Short. Include Postures by Emily Short. Include Basic Screen Effects by Emily Short. Include Glulx Text Effects by Emily Short. Include Punctuation Removal by Emily Short. Include Recorded Endings by Emily Short. Include Skeleton Keys by Emily Short. Include Room Description Control by Emily Short. Include Tailored Room Description by Emily Short. Include Plurality by Emily Short.
Include Alternatives by Eric Eve. Include Epistemology by Eric Eve. Include Hiding Under by Eric Eve. Include Underside by Eric Eve.
Include Enterable Underside by Gavin Lambert.
Include Far Away by Jon Ingold.
Include Simple Multimedia Effects For V10 by Mathbrush.
Include Planner by Nate Cull. Include Basic Plans by Nate Cull.

Include Computers by Emily Short.
Include Plugs and Sockets by Sean Turner.

Include Hiding Behind by Charm Cochran.
Include Remembering by Charm Cochran.

[Include Fluid Pronouns by Zed Lopez.]
	
[Section 1 - For testing only (not for release)

Include Response Assistant by Aaron Reed. Include Property Checking by Emily Short. Include Object Response Tests by Juhana Leinonen.]
	
Chapter 2 - Customization

[Section 1 - New in this context message fix for Remembering by Aaron Reed

The Remembering replace did not make sense in that context rule is not listed in any rulebook.

Rule for printing a parser error when the latest parser error is the noun did not make sense in that context error (this is the customized Remembering replace did not make sense in that context rule):
	if the player's command includes "call" or the player's command includes "dial" or the player's command includes "ring" or the player's command includes "text" or the player's command includes "message":
		make no decision;
	otherwise:
		now the latest parser error is the can't see any such thing error;
		make no decision.
		
Does the player mean remembering something (called the memory):
	if the memory is in the location, it is very unlikely;
	it is possible.]

Section 1 - New postures definitions (in place of Section 1 - The Concept in Postures by Emily Short)

A posture is a kind of value. The postures are seated, standing, crouched, and reclining.

A person has a posture. The posture of a person is usually standing.

Section 2 - Autosave & conclusions files

When play begins (this is the set the autosave file rule): now the autosave filename is "studio_autosave".

Table of Final Question Options (continued) 
final question wording	only if victorious	topic	final response rule	final response activity
"RESET to the beginning of the night"	false	"reset"	reset the night rule	--

This is the reset the night rule:
	clear only the main screen;
	autorestore the game.
	
The File of Conclusions is called "studioconclusions".

When play begins:
	choose a row with a final response rule of list endings rule in the Table of Final Question Options;
	now the final response rule entry is the adapted list endings rule.
	
This is the adapted list endings rule:
	read the endings;
	sort the Table of Possible Endings in description order;
	say "The endings you have encountered so far include: [paragraph break]";
	repeat through the Table of Possible Endings:
		say "  [description entry][line break]".
		
[To say (X - text) with roman numerals:
	let T be "[X]";
	repeat through the Table of Roman numerals:
		if T matches the text "[numeral entry]":
			replace the matched text with "[replacement entry]";
	say T.
		
Table of Roman Numerals
numeral	replacement
"10"	"X"
"1"	"I"
"2"	"II"
"3"	"III"
"4"	"IV"
"5"	"V"
"6"	"VI"
"7"	"VII"
"8"	"VIII"
"9"	"IX"]
	
Section 3 - Mention things that are running but should not be
[NOTE: Pulled pretty much verbatim from Modern Conveniences by Emily Short]

A last description-concealing rule (this is the running things aren't scenery rule): 
	now every visible open refrigerator is marked for listing;
	now every visible switched on tap is marked for listing.
	
Rule for writing a topic sentence about an open refrigerator (called item):
	say "[The item] [stand] open, letting all the cold air out. ";
	if the number of things in the item is 0:
		say "[There's] nothing inside. ";
		
Rule for writing a paragraph about a switched on tap (called item):
	say "[The item] [are] running. [nobr]";
	if the item is included by a sink (called basin):
		unless the number of mentionable things in basin is 0:
			now the current-subject is basin;
			choose row 2 in the relevant table;
			say "[disclosure entry][run paragraph on]";
	say "[paragraph break]".
	
A ranking rule for an open refrigerator (called special-target): 
	increase description-rank of the special-target by 1.
	
A ranking rule for a switched on tap (called special-target): 
	increase description-rank of the special-target by 1.
	
Section 4 - Adapting phrases from Tailored Room Description

To say mentioned-are:
	if the count-of-mentioned-contents is greater than one:
		say "[adapt the verb are from the third person plural]";
	otherwise if the first thing held by current-subject is plural-named:
		say "[adapt the verb are from the third person plural]";
	otherwise:
		say "[adapt the verb are from the third person singular]".

To say mentionable-are:
	if the count-of-mentionable-contents is greater than one:
		say "[adapt the verb are from the third person plural]";
	otherwise if the first thing held by current-subject is plural-named:
		say "[adapt the verb are from the third person plural]";
	otherwise:
		say "[adapt the verb are from the third person singular]".
	
To say holding-and-wearing:
	say "[if the prior named object is the current-subject][regarding current-subject][They][otherwise][The current-subject][end if] ";
	if the current-subject carries something mentionable and the current-subject wears something mentionable
	begin;
		if the number of mentionable things held by the current-subject is greater than 5
		begin;
			say "[regarding current-subject][have] [a list of things carried by the current-subject]. [regarding current-subject][They] [are] wearing [a list of things worn by the current-subject]. [run paragraph on]";
		otherwise;
			say "[are] carrying [a list of things carried by the current-subject] and wearing [a list of things worn by the current-subject]. [run paragraph on]";
		end if;
	otherwise if the current-subject carries something mentionable;
		if a random chance of 1 in 2 succeeds, say "[if it's Daytime][are] [optional also][otherwise]will [optional also]be [end if][one of]holding[or]carrying[at random] ";
		otherwise say "[regarding current-subject][have][run paragraph on] ";
		say "[a list of mentionable things carried by the current-subject]. [run paragraph on]";
	otherwise if the current-subject wears something mentionable;
		say "[are] wearing [a list of mentionable things worn by the current-subject]. [run paragraph on]";
	end if.
	
When play begins (this is the adapt tailored room description table text rule):
	now the disclosure in row 1 of the Table of Basic Sentences is "[if the current-subject is a person][The current-subject] [are] [here-there]. [otherwise][We] [can] see [a current-subject] [here-there]. [end if]";
	now the disclosure in row 1 of the Table of Room Content Disclosures is "[We] [if it's Daytime]can[otherwise]will [optional also]be able to[end if] see [a list of mentionable things in the current-subject] [if current-subject is the location][here-there][otherwise if the current-subject is not an underside and the current-subject is not a backside]in [the current-subject][otherwise][the current-subject][end if]. ";
	now the disclosure in row 1 of the Table of Container Content Disclosures is "[if the current-subject is not an underside and the current-subject is not a backside][The current-subject][otherwise][The printed name of the current-subject in sentence case][end if] [if it's Daytime and the current-subject is not an underside and the current-subject is not a backside][optional also][contain] [a list of mentionable things in the current-subject][otherwise if the current-subject is not an underside and the current-subject is not a backside]will [optional also]contain [a list of mentionable things in the current-subject][otherwise][is-are a list of mentionable things in the current-subject][end if]. ";
	now the disclosure in row 2 of the Table of Container Content Disclosures is "[if the current-subject is an underside or the current-subject is a backside][The printed name of the current-subject in sentence case][otherwise]In [the current-subject][end if] [is-are a list of mentionable things in the current-subject]. ";
	now the disclosure in row 3 of the Table of Container Content Disclosures is "[if the current-subject is an underside or the current-subject is a backside][The printed name of the current-subject in sentence case] [are-also][a list of mentionable things in the current-subject][otherwise]There [are-also] [a list of mentionable things in the current-subject] in [the current-subject]. ";
	now the disclosure in row 2 of the Table of Supporter Content Disclosures is "There [if it's Daytime][mentionable-are] [optional also][otherwise]will [optional also]be [end if][a list of mentionable things on the current-subject] on [the current-subject]. ";
	now the disclosure in row 1 of the Table of Prementioned Supporters is "[The list of mentioned things which are on the current-subject] [mentioned-are] on [a current-subject][if current-subject supports something mentionable], which [also-hold] [a list of mentionable things on the current-subject][end if]. ";
	now the disclosure in row 1 of the Table of Prementioned Containers is "[The list of mentioned things which are in the current-subject] [mentioned-are] [unless the current-subject is an underside or the current-subject is a backside]in [end unless][a current-subject][if current-subject contains something mentionable], which [also-hold] [a list of mentionable things in the current-subject][end if]. ";
	
To say also-hold: say "[if it's Daytime]also [hold][otherwise]will also hold[end if]".
To say are-also: say "[if it's Daytime][mentionable-are][optional also][otherwise]will [optional also]be[end if]".

Chapter 3 - CSS Styling

Section 1 - CSS set when play begins

When play begins (this is the import fonts rule):
	import-google-fonts "Lora:ital,wght@0,400;0,700;1,400;1,700"; [NOTE: Lora is used for main text of the game]
	import-google-fonts "Noto+Sans:ital,wght@0,400;0,500;1,400"; [NOTE: Noto Sans is used for text on the phone screen]
	[import-google-fonts "Protest+Revolution";] [NOTE: Was used briefly as the font for the title card]
	
When play begins (this is the customize padding and misc styling rule):
	css-set-fast ".coverimage; display; none";
	css-set-fast ".links; display; none";
	css-set-fast "#gameport; left; 20%";
	css-set-fast "#gameport; right; 20%";
	css-set-fast ".GridWindow; border-radius; 0px 0px 10px 10px";
	css-set-fast ".BufferWindow; padding-left; 12px";
	css-set-fast "::-webkit-scrollbar; display; none";
	css-set-fast ".BufferWindow .Style_header; font-size; 48px";
	css-set-fast ".BufferWindow .Style_header; font-style; italic";
	[css-set-fast ".Style_header; font-family; Protest Revolution, serif";]
	
When play begins (this is the establish initial formatting rule):
	follow the set default font rule;
	follow the conceal the status line rule;
	follow the set daytime colors rule.
	
This is the set default font rule:
	css-set-fast ".GridWindow; font-family; Lora, serif";
	css-set-fast ".BufferWindow; font-family; Lora, serif";

This is the set daytime colors rule:
	css-set-fast ".BufferWindow; background; #D8A86C"; [NOTE: background of game window: pale orange-yellow]
	css-set-fast ".BufferWindow; color; black"; [NOTE: text of game window]
	css-set-fast ".Input; color; #A53A76"; [NOTE: player's command as they type: sort of a dingy pink]
	css-set-fast ".Style_input; color; #550A69"; [NOTE: player's command once it's entered: dark purple]
	css-set-fast ".play; background; #D8A86C"; [NOTE: Everything on the page outside of the game window]
	css-set-fast ".interpretercredit; color; #550A69"; [NOTE: Customizing the color of the Quixe credits in the bottom left]
	css-set-fast "#gameport; background; #D8A86C"; [NOTE: So there's no white corners around the status line]
	css-set-fast "a; color; #550A69"; [NOTE: So that the interpreter credit matches (it's the only link in the interface)]

[Original BG colors: #EEAF61; #F0BB78]

This is the conceal the status line rule:
	css-set-fast ".GridWindow; background; #D8A86C";
	css-set-fast ".GridWindow; color; #D8A86C";
	css-set-fast ".interpretercredit; display; none";

This is the reveal the status line rule:
	css-set-fast ".GridWindow; background; #EE5D6C"; [NOTE: background of status line: pale orange-red]
	css-set-fast ".GridWindow; color; white"; [NOTE: text of status line]
	css-set-fast ".interpretercredit; display; block";
	
Section 2 - CSS to be called later

eveningnum is a number that varies. eveningnum is 0.
	
This is the first set the sun rule:
	css-set-fast ".BufferWindow; background; #FB9062"; [NOTE: background of game window: creamsicle-y orange]
	css-set-fast ".GridWindow; background; #CE4993"; [NOTE: background of status line: intense pink]
	css-set-fast ".play; background; #FB9062";
	css-set-fast "#gameport; background; #FB9062";
	css-set-fast ".BufferWindow; -webkit-animation-name; maintrans1";
	css-set-fast ".BufferWindow; -webkit-animation-duration; 2s";
	css-set-fast ".GridWindow; -webkit-animation-name; stattrans1";
	css-set-fast ".GridWindow; -webkit-animation-duration; 2s";
	css-set-fast ".play; -webkit-animation-name; maintrans1";
	css-set-fast ".play; -webkit-animation-duration; 2s";
	css-set-fast ".BufferWindow; animation-name; maintrans1";
	css-set-fast ".BufferWindow; animation-duration; 2s";
	css-set-fast ".GridWindow; animation-name; stattrans1";
	css-set-fast ".GridWindow; animation-duration; 2s";
	css-set-fast ".play; animation-name; maintrans1";
	css-set-fast ".play; animation-duration; 2s";
	
This is the second set the sun rule:
	css-set-fast ".BufferWindow; background; #EE5D6C"; [NOTE: background of game window: pale orange-red]
	css-set-fast ".BufferWindow; color; white";
	css-set-fast ".GridWindow; background; #6A0D83"; [NOTE: background of status line: purple]
	css-set-fast ".Input; color; #550A69";
	css-set-fast ".play; background; #EE5D6C";
	css-set-fast "#gameport; background; #EE5D6C";
	css-set-fast ".BufferWindow; -webkit-animation-name; maintrans2";
	css-set-fast ".BufferWindow; -webkit-animation-duration; 2s";
	css-set-fast ".GridWindow; -webkit-animation-name; stattrans2";
	css-set-fast ".GridWindow; -webkit-animation-duration; 2s";
	css-set-fast ".play; -webkit-animation-name; maintrans2";
	css-set-fast ".play; -webkit-animation-duration; 2s";
	css-set-fast ".BufferWindow; animation-name; maintrans2";
	css-set-fast ".BufferWindow; animation-duration; 2s";
	css-set-fast ".GridWindow; animation-name; stattrans2";
	css-set-fast ".GridWindow; animation-duration; 2s";
	css-set-fast ".play; animation-name; maintrans2";
	css-set-fast ".play; animation-duration; 2s";
	
[NOTE: Color schemes for the daytime portion inspired by the "City Sunset" color palette by pastelpixelegg on color-hex.com, which is made of the following colors:
Sandy Brown: #eeaf61 (238, 175, 97)
Atomic Tangerine: #fb9062 (251, 144, 98)
Light Carmine Pink: #ee5d6c (238, 93, 108)
Pink (Pantone): #ce4993 (206, 73, 147)
Metallic Violet: #6a0d83 (106, 13, 131)]

This is the set nighttime colors rule:
	css-set-fast ".BufferWindow; background; black"; [NOTE: background of game window]
	css-set-fast ".BufferWindow; color; white"; [NOTE: text of game window]
	css-set-fast ".GridWindow; background; #333333"; [NOTE: background of status line: dark gray, from Quixe's dark mode]
	css-set-fast ".GridWindow; color; #E5E5F7"; [NOTE: text of status line: light gray, from Quixe's dark mode]
	css-set-fast ".Input; color; PaleGreen"; [NOTE: player's command as they type]
	css-set-fast ".Style_input; color; MediumSpringGreen"; [NOTE: player's command once it's entered]
	css-set-fast ".play; background; black";
	css-set-fast ".interpretercredit; color; MediumSpringGreen";
	css-set-fast "#gameport; background; black";
	css-set-fast "a; color; MediumSpringGreen";
	css-set-fast ".BufferWindow; -webkit-animation-name; maintrans3";
	css-set-fast ".BufferWindow; -webkit-animation-duration; 300ms";
	css-set-fast ".GridWindow; -webkit-animation-name; stattrans3";
	css-set-fast ".GridWindow; -webkit-animation-duration; 300ms";
	css-set-fast ".play; -webkit-animation-name; maintrans3";
	css-set-fast ".play; -webkit-animation-duration; 300ms";
	css-set-fast ".BufferWindow; animation-name; maintrans3";
	css-set-fast ".BufferWindow; animation-duration; 300ms";
	css-set-fast ".GridWindow; animation-name; stattrans3";
	css-set-fast ".GridWindow; animation-duration; 300ms";
	css-set-fast ".play; animation-name; maintrans3";
	css-set-fast ".play; animation-duration; 300ms";
	css-set-fast "a; animation-name; linktrans";
	css-set-fast "a; animation-duration; 300ms";

[Color of Inform app quoted text: #5683F2]

Section 3 - CSS stlyes to be called within text

When play begins (this is the establish bold-italic font rule):
	css-set-fast ".Style_boldanditalic; font-family; Lora, serif";
	css-set-fast ".Style_boldanditalic; font-style; italic";
	css-set-fast ".Style_boldanditalic; font-weight; 700";
	
When play begins (this is the establish phone style rule):
	css-set-fast ".Style_phonetext; font-family; Noto Sans, serif";
	css-set-fast ".Style_phonetext; font-weight; 400";
	css-set-fast ".Style_italphonetext; font-family; Noto Sans, serif";
	css-set-fast ".Style_italphonetext; font-style; italic";
	css-set-fast ".Style_italphonetext; font-weight; 400";
	css-set-fast ".Style_boldphonetext; font-family; Noto Sans, serif";
	css-set-fast ".Style_boldphonetext; font-weight; 500";
	
When play begins (this is the establish email style rule):
	css-set-fast ".Style_emailheader; font-family; Noto Sans, serif";
	css-set-fast ".Style_emailheader; font-size; 175%";
	css-set-fast ".Style_emailheader; font-weight; 400";
	css-set-fast ".Style_emailheader; display; block";
	css-set-fast ".Style_emailheader; text-align; center";
	css-set-fast ".Style_emailtext; font-family; Noto Sans, serif";
	css-set-fast ".Style_emailtext; font-weight; 400";
	css-set-fast ".Style_emailtext; display; block";
	css-set-fast ".Style_emailtext; text-align; center";
	css-set-fast ".Style_emailtext; padding; 0px 40px 0px 40px";
	
When play begins (this is the establish timestamp style rule):
	css-set-fast ".Style_timestamp; font-family; Noto Sans, serif";
	css-set-fast ".Style_timestamp; font-weight; 400";
	css-set-fast ".Style_timestamp; display; block";
	css-set-fast ".Style_timestamp; text-align; center";
	css-set-fast ".Style_timestamp; width; 400px";
	css-set-fast ".Style_timestamp; color; #808080";
	css-set-fast ".Style_timestamp; font-size; 75%";
	css-set-fast ".Style_timestamp; margin; 0px 15px";
	css-set-fast ".Style_timestamp; padding; 0px 20px";
	css-set-fast ".Style_boldstamp; font-family; Noto Sans, serif";
	css-set-fast ".Style_boldstamp; font-weight; 500";
	css-set-fast ".Style_boldstamp; display; block";
	css-set-fast ".Style_boldstamp; text-align; center";
	css-set-fast ".Style_boldstamp; width; 400px";
	css-set-fast ".Style_boldstamp; color; #808080";
	css-set-fast ".Style_boldstamp; font-size; 75%";
	css-set-fast ".Style_boldstamp; margin; 0px 15px";
	css-set-fast ".Style_boldstamp; padding; 0px 20px";
	css-set-fast ".Style_receipt; font-family; Noto Sans, serif";
	css-set-fast ".Style_receipt; font-weight; 400";
	css-set-fast ".Style_receipt; display; block";
	css-set-fast ".Style_receipt; text-align; right";
	css-set-fast ".Style_receipt; color; #808080";
	css-set-fast ".Style_receipt; font-size; 75%";
	css-set-fast ".Style_receipt; width; 400px";
	css-set-fast ".Style_receipt; margin; 0px 0px 0px 15px";
	css-set-fast ".Style_receipt; padding; 0px 0px 0px 40px";
	
When play begins (this is the establish incoming text messages style rule):
	css-set-fast ".Style_messagetext; font-family; Noto Sans, serif";
	css-set-fast ".Style_messagetext; font-weight; 400";
	css-set-fast ".Style_messagetext; border-radius; 20px 20px 20px 20px";
	css-set-fast ".Style_messagetext; margin; 0 15px 10px";
	css-set-fast ".Style_messagetext; padding; 15px 20px";
	css-set-fast ".Style_messagetext; position; relative";
	css-set-fast ".Style_messagetext; display; block";
	css-set-fast ".Style_messagetext; width; 400px";
	css-set-fast ".Style_messagetext; background-color; #E5E4E9";
	css-set-fast ".Style_messagetext; color; #363636";
	css-set-fast ".Style_messagetext:before; transform; rotateY(180deg)";
	css-set-fast ".Style_messagetext:before;  border-color; #E5E4E9";
	css-set-fast ".Style_messagetext:before;  left; -50px";
 	css-set-fast ".Style_messagetext:before; border-color; #E5E4E9";
 	css-set-fast ".Style_messagetext:before; border-radius; 50% 50% 50% 50%";
 	css-set-fast ".Style_messagetext:before; border-style; solid";
 	css-set-fast ".Style_messagetext:before; border-width; 0 20px";
 	css-set-fast ".Style_messagetext:before; bottom; 0";
 	css-set-fast ".Style_messagetext:before; clip; rect(20px, 35px, 42px, 0px)";
 	css-set-fast ".Style_messagetext:before; content; ' '";
 	css-set-fast ".Style_messagetext:before; height; 40px";
 	css-set-fast ".Style_messagetext:before; position; absolute";
  	css-set-fast ".Style_messagetext:before;right; -50px";
 	css-set-fast ".Style_messagetext:before; width; 30px";

[NOTE: Much of the above rule was adapted from an example by Mathbrush, based on work by Sarah Willson, posted by B.J. Best to the Intfiction forums.]

When play begins (this is the establish outgoing text messages style rule):
	css-set-fast ".Style_replytext; font-family; Noto Sans, serif";
	css-set-fast ".Style_replytext; font-weight; 400";
	css-set-fast ".Style_replytext; border-radius; 20px 20px 20px 20px";
	css-set-fast ".Style_replytext; margin; 0 15px 10px";
	css-set-fast ".Style_replytext; padding; 15px 20px";
	css-set-fast ".Style_replytext; position; relative";
	css-set-fast ".Style_replytext; display; block";
	css-set-fast ".Style_replytext; width; 400px";
	css-set-fast ".Style_replytext; background-color; #2095FE";
	css-set-fast ".Style_replytext; color; #FFFFFF";
	css-set-fast ".Style_replytext:before; transform; rotateY(0deg)";
	css-set-fast ".Style_replytext:before; border-color; #2095FE";
	css-set-fast ".Style_replytext:before; left; 420px";
 	css-set-fast ".Style_replytext:before; border-color; #2095FE";
 	css-set-fast ".Style_replytext:before; border-radius; 50% 50% 50% 50%";
 	css-set-fast ".Style_replytext:before; border-style; solid";
 	css-set-fast ".Style_replytext:before; border-width; 0 20px";
 	css-set-fast ".Style_replytext:before; bottom; 0";
 	css-set-fast ".Style_replytext:before; clip; rect(20px, 35px, 42px, 0px)";
 	css-set-fast ".Style_replytext:before; content; ' '";
 	css-set-fast ".Style_replytext:before; height; 40px";
 	css-set-fast ".Style_replytext:before; position; absolute";
  	css-set-fast ".Style_replytext:before;right; 420px";
 	css-set-fast ".Style_replytext:before; width; 30px";
 	css-set-fast ".Style_replytext; text-align; right";
	
[NOTE: Much of the above rule was adapted from the same example as the previous rule.]

When play begins (this is the establish horizontal line rule):
	css-set-fast ".Style_line; display; block";
	css-set-fast ".Style_line; border-bottom; 1px solid";

Section 4 - Styling phrases

To say bold-italic type:
	set-any-class "boldanditalic".

To say bi: say bold-italic type.
To say /bi: say roman type.
	
To say phone type:
	set-any-class "phonetext".
	
To say italic phone type:
	set-any-class "italphonetext".
	
To say bold phone type:
	set-any-class "boldphonetext".
	
To say pt: say phone type.
To say ipt: say italic phone type.
To say bpt: say bold phone type.
To say /pt: say roman type.

To say received-text type:
	set-any-class "messagetext".
	
To say sent-text type:
	set-any-class "replytext".
	
To say timestamp type:
	set-any-class "timestamp".
	
To say bolded timestamp type:
	set-any-class "boldstamp".
	
To say read-receipt type:
	set-any-class "receipt".
	
To say inmsg: say received-text type.
To say outmsg: say sent-text type.
To say ts: say timestamp type.
To say tb: say bolded timestamp type.
To say rcpt: say read-receipt type.
To say /msg: say roman type.
To say /ts: say roman type.

To say email header:
	set-any-class "emailheader".
	
To say email type:
	set-any-class "emailtext".

To say header: say email header.
To say et: say email type.
To say /header: say roman type.
To say /et: say roman type.

To say line:
	set-any-class "line".
To say /line: say roman type.

Chapter 4 - Status line

When play begins (this is the set up the status line rule): 
	now left hand status line is "[location][if the holder of the player is not the location] ([in-on the holder of the player])[otherwise if the player is obscured by something and the location is not Kitchenette] (behind [the random thing obscuring the player])[end if]".

To say in-on (item - a thing): 
	if the item is an underside or the item is a backside:
		say "[the item]";
	otherwise if the item is a container:
		say "in [the item]"; 
	otherwise:
		say "on [the item]".
		
Chapter 5 - Punctuation

After reading a command (this is the clean up commands rule):
	remove stray punctuation;
	resolve punctuated titles.
	
Book 2 - Values

Chapter 1 - Relations

Obscuring relates various things to various things. The verb to obscure means the obscuring relation.
[NOTE: This enables hiding behind and under things to be meaningful.]

Connectivity relates rooms to each other. The verb to be connected with means the connectivity relation.
[NOTE: Since many of our "rooms" represent locations within one continuous area, this will allow characters to see around in large areas.]

Awareness relates various people to various things. The verb to be aware of means the awareness relation.
[NOTE: This allows the intruder to notice your effect on the environment, and potentially suss you out if you aren't subtle enough.]

Inclusion relates a thing (called X) to a thing (called Y) when Y is part of X. The verb to include (it includes, they include, it included, it is included) implies the inclusion relation.
[NOTE: Lifted directly from Modern Conveniences, and included (no pun intended) to make sure other code from that extension works.]

Illumination relates various things to various rooms. The verb to illuminate means the illumination relation.
Wiring relates one device to one thing. The verb to be wired to means the wiring relation. The verb to be powered by means the reversed wiring relation.
[NOTE: These relations make lightswitches and lighting work]

Chapter 2 - Either/or adjectives

A thing can be bright. A thing is seldom bright.
A room can be brightened or dim. A room is usually brightened.
[NOTE: To keep track of whether the lights are on without forcing the player into darkness.]

A thing can be bulky. A thing is seldom bulky. Scenery is usually bulky.
[NOTE: This is meant to cover things that are technically portable, but aren't worth lugging around in a high-stakes situation.]

A thing can be deadly. A thing is seldom deadly. [NOTE: These will be effective if you ATTACK the intruder WITH them.]
A thing can be sharp. A thing is seldom sharp. [NOTE: A subset of deadly things, which will draw blood]
A thing can be bloody or blood-free. A thing is usually blood-free. [NOTE: Used to represent the blood drawn by sharps]
A thing can be incapacitating. A thing is seldom incapacitating. [NOTE: These might knock the intruder out]

A thing can be hangable. A thing is seldom hangable.
[NOTE: To limit what can go on the hangers in the closet, since they're a general supporter.]

A thing can be legible. A thing is seldom legible.
[NOTE: To model things for which READing is a useful action.]

A thing can be unimportant. A thing is seldom unimportant.
[NOTE: This covers things that reasonably should be present, but will have exactly zero bearing on the game]

A thing can be noisemaking or soundless. A thing is usually soundless.
[NOTE: noisemaking things become the 'annoyance' of the intruder, and he'll stop what he's doing to go turn them off]

A thing can be electronic. A thing is seldom electronic. A computer is usually electronic.
[NOTE: For more intelligent refusals, especially about getting things wet]

Definition: a thing is sizable if the bulk of it is greater than 10.
[NOTE: For more intelligent responses and refusals]

A container can be eclipsing. A container is seldom eclipsing. An underside is usually eclipsing. A backside is usually eclipsing.
[NOTE: Used to define containers that, even if they're not closed, are unlikely to reveal their contents when examined from a distance]

A person can be alive or dead. A person is usually alive.
A person can be awake or asleep. A person is usually awake.

Software can be quittable. Software is seldom quittable.

A door is usually scenery.

Chapter 3 - Other adjectives and values

Section 1 - Examined and unexamined

A thing can be examined or unexamined. A thing is usually unexamined.

Carry out examining (this is the mark items as examined on examining rule): if the noun is a thing, now the noun is examined.

Section 2 - Default location

A thing has an object called the default location.

When play begins (this is the initially set default locations rule):
	repeat with obj running through things:
		now the default location of obj is the holder of obj.
		
To decide whether (obj - a thing) is in-place:
	if the holder of obj is the default location of obj, decide yes;
	decide no.
	
Section 3 - Most recent mention

The most-recent-mention is a thing that varies.

After printing the name of something (called special-target): now the most-recent-mention is the special-target.
	
Section 4 - Scenes
	
To decide whether it's/its (X - a scene):
	decide on whether or not X is happening.
	
Section 5 - Rooms
	
A room has some text called the noise-modifier. The noise-modifier of a room is usually "".

A room has some text called the casual descriptor. The casual descriptor of a room is usually "".

A room has some text called the prepositional entrance descriptor. The prepositional entrance descriptor of a room is usually "".
A room has some text called the prepositional exit descriptor. The prepositional exit descriptor of a room is usually "".

A room has a table name called the relative direction set.

The previous location is a room that varies.
First carry out going rule: now the previous location is the location.

Rule for printing the name of a room (called place) while asking which do you mean: say "[casual descriptor of place]".

Section 6 - Noisiness

noisiness is a kind of value. the noisinesses are silent, quiet, moderate, loud, and thunderous.
A noisiness can be notable or disregardable. A noisiness is usually disregardable. loud and thunderous are notable.

A thing has a noisiness called the noise volume. The noise volume of a thing is usually silent.

A room has a noisiness called the ambient noise level. The ambient noise level of a room is usually quiet.
Definition: a room (called place) is noisy if the ambient noise level of place is notable.

To increase ambient noise: now the ambient noise level of the location is the noisiness after the ambient noise level of the location.
To decrease ambient noise: now the ambient noise level of the location is the noisiness before the ambient noise level of the location.
To increase the ambient noise of (place - a room): now the ambient noise level of place is the noisiness after the ambient noise level of place.
To decrease the ambient noise of (place - a room): now the ambient noise level of place is the noisiness before the ambient noise level of place.

Section 7 - Matching
[NOTE: Pulled from Example 370 in the Inform Recipe Book]

Definition: a direction is matched if it fits the parse list. 
Definition: a room is matched if it fits the parse list. 
Definition: a thing is matched if it fits the parse list. 

To decide whether (N - an object) fits the parse list: 
    (- (FindInParseList({N})) -)

Include (- 
#ifndef FindInParseList;
[ FindInParseList obj i k marker; 
    marker = 0;  
    for (i=1 : i<=number_of_classes : i++) { 
    while (((match_classes-->marker) ~= i) && ((match_classes-->marker) ~= -i)) marker++; 
    k = match_list-->marker;  
    if (k==obj) rtrue; 
    } 
    rfalse; 
]; 
#endif;
-)

Rule for asking which do you mean when everything matched is direction:
	say "In which direction?"
	
The Remembering don't disambiguate while remembering rule does nothing when something matched is touchable.

Does the player mean doing something when the noun is not enclosed by the location: it is unlikely.
Does the player mean doing something when the second noun is not nothing and the second noun is not enclosed by the location: it is unlikely.

Rule for reaching inside a room while remembering: allow access.
Rule for reaching inside a closed container while remembering: allow access.
[Before trying remembering a direction (called way): try going way instead.]

Section 8 - Bulk-capacity for undersides and backsides

The bulk-capacity of an underside is usually 50.

The bulk-capacity of a backside is usually 200.

Section 9 - Taking no time

abort-turn-sequence is a truth state that varies. abort-turn-sequence is initially false.

This is the abort turn sequence rule:
	if abort-turn-sequence is true:
		now abort-turn-sequence is false;
		rule succeeds.
		
The abort turn sequence rule is listed before the every turn stage rule in the turn sequence rules.

To take no time: now abort-turn-sequence is true.

Section 10 - pulled from Helpful Functions by Daniel Stelzer

To decide whether we/there is/are/should/need a/an/the/-- (X - a truth state):
	decide on whether or not X is true.
To decide whether we/there don't/isn't/aren't/shouldn't need/have/-- a/an/the/-- (X - a truth state):
	decide on whether or not X is false.
	
[To decide whether (txt - indexed text) matches (top - topic): [This is a horrible, horrible hack by Vaporware. You can only compare topics to snippets, so this snippetifies indexed text to make a comparison.]
	let tmp be indexed text;
	let tmp be the player's command;
	change the text of the player's command to txt;
	let result be whether or not the player's command matches top;
	change the text of the player's command to tmp;
	decide on result.]
	
Section 11 - Pulled from Large Game Speedup by Nathanael Nerode

Definition: a container is empty rather than non-empty if the first thing held by it is nothing.
Definition: a supporter is empty rather than non-empty if the first thing held by it is nothing.

Chapter 4 - with great thanks to Zed Lopez

a dummy-thing is a thing.

a thing has a list of action names called the dispatch-me-not.
a thing has a thing called the dispatch-proxy.
the dispatch-proxy of a thing is usually the dummy-thing.

This is the dispatch rule:
	if the noun is something:
		if the action name part of the current action is not listed in the dispatch-me-not of the noun:
			if the dispatch-proxy of the noun is not the dummy-thing:
				now the noun is the dispatch-proxy of the noun;
				try the current action instead.

To dispatch everything but (l - a list of action names) for/from/of (item - thing) to (proxy - thing):
	now the dispatch-me-not of item is l;
	now the dispatch-proxy of item is the proxy;
  
the dispatch rule is listed before the before stage rule in the action-processing rules.

[Section 1 -  Debugging

This is the just checking in rule:
	say "The noun is [noun].";
	say "[action name part of the current action].";
	if the noun is a thing, say "[dispatch-me-not of the noun]";
	
the just checking in rule is listed before the dispatch rule in the action-processing rules.

last before:
	say "The noun is [noun].";
	if the noun is a thing, say "[dispatch-me-not of the noun]";]

Chapter 5 - Phrases

To say take/-- no time: take no time.
To say nt: take no time.
To say no time Nighttime:
	if it's Nighttime, take no time.
To say nnt: say no time Nighttime.

To say b: say bold type.
To say /b: say roman type.
To say i: say italic type.
To say /i: say roman type.

To say br: say line break.
To say nobr: say no line break.
To say ccbr: say command clarification break.
To say /p: say paragraph break.

To say can't exactly:
	if it's Daytime, say "can't exactly";
	otherwise say "won't exactly be able to".
		
To say it's:
	if it's Daytime, say "it's";
	otherwise say "it'll be".
		
To say It's:
	if it's Daytime, say "It's";
	otherwise say "It'll be".
		
To say there's:
	if it's Daytime, say "there's";
	otherwise say "there'll be".
		
To say There's:
	if it's Daytime, say "There's";
	otherwise say "There'll be".
	
To say it's already:
	if it's Daytime, say "it's already";
	otherwise say "it'll already be".
		
To say It's already:
	if it's Daytime, say "It's already";
	otherwise say "It'll already be".
	
To say they're already:
	if it's Daytime, say "they're already";
	otherwise say "they'll already be".
		
To say They're already:
	if it's Daytime, say "They're already";
	otherwise say "They'll already be".
		
To say there's already:
	if it's Daytime, say "there's already";
	otherwise say "there'll already be".
		
To say There's already:
	if it's Daytime, say "There's already";
	otherwise say "There'll already be".
	
To say you're already:
	if it's Daytime, say "you're already";
	otherwise say "you'll already be".
		
To say You're already:
	if it's Daytime, say "You're already";
	otherwise say "You'll already be".
	
To say is already:
	if it's Daytime, say "[regarding the noun][are] already";
	otherwise say "will already be".
	
To say are already: say is already.

To say has already been:
	if it's Daytime, say "has already been";
	otherwise say "will already have been".
	
To say can only:
	if it's Daytime, say "can only";
	otherwise say "will only be able to".
	
To say here-there:
	if it's Daytime, say "here";
	otherwise say "there".

To say don't in the present:
	if the prior naming context is plural:
		say "don't";
	otherwise:
		say "doesn't".
[NOTE: This rule includes a phrase that's typically only used in language extensions, because the "adapt (verb) in (tense)" phrase doesn't like the verb "don't" for whatever reason, so I needed to make a new phrase that applies its logic to "don't" manually.]

To decide which text is the switchedness of (obj - a device):
	if obj is switched on, decide on "switched on";
	decide on "switched off".
	
To decide which text is the concise switchedness of (obj - a device):
	if obj is switched on, decide on "on";
	decide on "off".
	
To decide which text is the openness of (obj - a container):
	if obj is open, decide on "open";
	decide on "closed".
	
To decide which text is the openness of (portal - a door):
	if portal is open, decide on "open";
	decide on "closed".
	
To decide which text is the lockedness of (obj - a thing):
	if obj is locked, decide on "locked";
	decide on "unlocked".
	
Chapter 6 - Verbs

To approach is a verb.

To begin (it begins, they begin, it began, it is begun, it is beginning) is a verb.
To beep is a verb. To brighten is a verb. To burble is a verb.

To call is a verb. To change is a verb. To chug is a verb. To clear is a verb. To come is a verb. To continue is a verb. To crouch is a verb.

To dig (it digs, they dig, it dug, it is dug, it is digging) is a verb.
To drive (it drives, they drive, it drove, it is driven, it is driving) is a verb.
To dance is a verb. To dangle is a verb. To describe is a verb. To dial is a verb. To ding is a verb. To disappear is a verb. To discard is a verb. To discuss is a verb. To drape is a verb. To drip is a verb. To drone is a verb.

To examine is a verb. To extend is a verb.

To finish is a verb. To flip is a verb. To flood is a verb. To flow is a verb. To flush is a verb.

To gush (it gushes, they gush, it gushed, it is gushed, it is gushing) is a verb.
To garner is a verb. To growl is a verb. To gurgle is a verb.

To hide (it hides, they hide, it hid, it is hidden, it is hiding) is a verb.
To hang (it hangs, they hang, it hung, it is hung, it is hanging) is a verb.
To hum is a verb. To hurl is a verb.

To insert is a verb. To inspect is a verb.

To lay (it lays, they lay, it laid, it is laid, it is laying) is a verb.
To let (it lets, they let, it let, it is allowed to, it is being allowed to) is a verb.
To lie (it lies, they lie, it lay, it is lain, it is lying) is a verb.
To languish is a verb. To lean is a verb. To list is a verb.

To make (it makes, they make, it made, it is made, it is making) is a verb.

To prove (it proves, they prove, it proved, it is proven, it is proving) is a verb.
To peek is a verb. To peer is a verb. To place is a verb. To play is a verb. To power is a verb. To prevent is a verb.

To read (it reads, they read, it read, it is read, it is reading) is a verb.
To ring (it rings, they ring, it rang, it is rung, it is ringing) is a verb.
To recap (it recaps, they recap, it recapped, it is recapped, it is recapping) is a verb.
To rake is a verb. To rap is a verb. To remain is a verb. To remove is a verb. To report is a verb. To retract is a verb. To return is a verb. To rush is a verb.

To shoot (it shoots, they shoot, it shot, it is shot, it is shooting) is a verb.
To shut (it shuts, they shut, it shut, it is shut, it is shutting) is a verb.
To sing (it sings, they sing, it sang, it is sung, it is singing) is a verb.
To skim (it skims, they skim, it skimmed, it is skimmed, it is skimming) is a verb.
To spin (it spins, they spin, it spun, it is spun, it is spinning) is a verb.
To stand (it stands, they stand, it stood, it is stood, it is standing) is a verb.
To strike (it strikes, they strike, it struck, it is struck, it is striking) is a verb.
To swing (it swings, they swing, it swung, it is swung, it is swinging) is a verb.
To scream is a verb. To seize is a verb. To skulk is a verb. To snatch is a verb. To snick is a verb. To sound is a verb. To squat is a verb. To squeak is a verb. To stalk is a verb. To step is a verb. To stick is a verb. To stop is a verb. To straighten is a verb. To surround is a verb. To survey is a verb.

To tell (it tells, they tell, it told, it is told, it is telling) is a verb.
To throw (it throws, they throw, it threw, it is thrown, it is throwing) is a verb.
To tap is a verb. To thump is a verb. To tune is a verb. To type is a verb.

To unfold is a verb. To utter is a verb.

To vanish is a verb. To vibrate is a verb.

To wash is a verb. To wrap is a verb.

[To enter is a verb. - already included by Enterable Underside
To lack is a verb. - already included by Approaches
To plug (it plugs, they plug, it plugged, it is plugged, it is plugging) is a verb. - already included by Plugs and Sockets
To reply (it replies, they reply, it replied, it is replied, it is replying) is a verb. - already included by Computers
[To sit (it sits, they sit, it sat, it is seated, it is sitting) is a verb.] - already included by Tailored Room Description]

Book 3 - Things

[NOTE: I've made an effort to name every rule in this code, with the exception of Instead rule suites for individual kinds or things.]

Chapter 1 - Things

Section 1 - Books

A book is a kind of thing. A book is usually legible. Understand "book" as a book. Understand "books" as the plural of book. The bulk of a book is usually 3.
A book can be pseudo-open or pseudo-closed. A book is usually pseudo-closed.

Instead of attacking or burning or cutting a book:
	if it's Daytime, say "[We] [have] no reason to destroy [the noun].";
	otherwise say "[nt][We] see no way that destroying [the noun] would help in that situation."

Instead of assaulting a book with: try attacking the noun.
Instead of consulting a book about: try reading the noun.
Instead of crouching behind or entering underneath or lying behind or sitting behind or slipping behind a book: say "[The noun] [aren't] substantial enough to effectively conceal you."
Instead of drinking or eating or tasting a book: say "[nnt]Books are more traditionally [']consumed['] in a different way.";
Instead of entering a book: say "[nnt]As a child, you often wanted to enter your favorite stories and become their protagonists. Alas, it is a power you never developed.";
Instead of giving something to a book: try inserting the noun into the second noun.

Instead of inserting something into a book:
	if the noun is a card:
		if it's Daytime:
			say "[The noun] [adapt the verb have in the present tense] better uses than being a bookmark.";
		otherwise:
			say "[We] think it would be better to hold on to [the noun], rather than leave it lying around.";
	otherwise:
		say "[The second noun] [if it's Daytime]can hardly[otherwise]will hardly be able to[end if] contain [the noun].";
	take no time.

Instead of kissing or hugging a book:
	if it's Daytime, say "While you [i]are[/i] fond of [the noun], you don't think you'd quite go [i]that[/i] far.";
	otherwise say "[nt]You don't think you'll have time for such sentimentalities, under the circumstances."

Instead of knocking on a book: say "The sound [regarding the noun][aren't] very impressive."
Instead of listening to a book: say "[nnt]They're more traditionally read than listened to."
Instead of looking behind a book: say "[The noun] [aren't] substantial enough to effectively conceal much of anything behind [themselves]."
Instead of looking under a book: say "[The noun] [aren't] substantial enough to effectively conceal much of anything under [themselves]."
Instead of opening a book: try reading the noun.
Instead of closing a book: say "[nnt][It's already] closed."
Instead of placing something under a book: say "[The second noun] [aren't] substantial enough to effectively conceal much of anything under [themselves]."
Instead of pulling or pushing or turning a book: say "[nnt]It [adapt the verb make from the third person singular] little difference."
Instead of pushing a book to: try pushing the noun.

Instead of putting something on a book:
	if the holder of the second noun is a supporter:
		try putting the noun on the holder of the second noun;
	otherwise if the holder of the second noun is a container:
		try inserting the noun into the holder of the second noun;
	otherwise if the holder of the second noun is the location:
		if it's Daytime:
			try dropping the noun;
		otherwise:
			try depositing the noun;
	otherwise:
		say "[nnt]It [adapt the verb make from the third person singular] little difference."

Instead of removing a book from: try taking the noun.
Instead of removing something from a book: try taking the noun.
Instead of rubbing or touching or squeezing a book: say "[if it's Daytime]It's[otherwise]You know it's[end if] high-quality."
Instead of searching a book: try reading the noun.
Instead of smelling a book: say "That distinct paper smell."
Instead of stowing something behind a book: say "[The second noun] [aren't] substantial enough to effectively conceal much of anything behind [themselves]."

Instead of throwing a book at something:
	if the second noun is the intruder:
		say "[The noun] [aren't] substantial enough to make an effective weapon.";
	otherwise:
		say "[nnt]You[if it's Daytime][']d rather not[otherwise] suspect you won't want to[end if] risk damaging [the noun]."

Instead of washing a book: say "[nt]You[if it's Nighttime] think you[end if][']d rather not get [the noun] all wet."
Instead of waving a book: try swinging the noun.

Section 2 - Cards and money

A card is a kind of thing. Money is a kind of card. The bulk of a card is usually 0.
[NOTE: Used to model which things can fit in the wallet. Too granular of detail? Maybe.]

Instead of attacking or burning or cutting a card: say "[nnt]That would render [the noun] worthless, and [if it's Daytime]you're not[otherwise]you don't think you'll be[end if] quite ready to part with [regarding the noun][them]."
Instead of assaulting a card with: try attacking the noun.
Instead of consulting a card about: try examining the noun.
Instead of crouching behind or sitting behind or slipping behind or lying behind or entering underneath a card: say "[no time][The noun] [can't] meaningfully conceal you."
Instead of drinking or eating or tasting a card: say "[nnt]You suspect that wouldn't be the healthiest course of action."

Instead of kissing a card:
	if it's Daytime, try tasting the noun;
	otherwise say "[nt]You don't think you'll have time for such sentimentalities, under the circumstances."
	
Instead of hugging a card:
	if it's Daytime, say "While you [i]are[/i] fond of [the noun], you don't think you'd quite go [i]that[/i] far.";
	otherwise say "[nt]You don't think you'll have time for such sentimentalities, under the circumstances."

Instead of knocking on a card: say "The sound [regarding the noun][aren't] very impressive."
Instead of listening to a card: say "[no time][The noun] doesn't really make noise."
Instead of looking behind or looking under or searching a card: say "[no time][The noun] [can't] meaningfully conceal anything."
Instead of removing a card from: try taking the noun.

Instead of rubbing or touching or squeezing a card:
	if the noun is money, say "Soft fabric-cloth.";
	otherwise say "Rigid plastic."

Instead of smelling a card: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."

Section 3 - Charging cables

A charging cable is a kind of thing. Understand "charging/-- cord/cable" or "charger" as a charging cable. Understand "charging/-- cables/cords" or "chargers" as the plural of charging cable. A charging cable is usually deadly and electronic.

Instead of attacking or burning or cutting a charging cable:
	if the count of occupied plugs of the noun > 0:
		say "You[if it's Nighttime][']ll[end if] have no reason to destroy [the noun]. Besides, accessing the wire while it's plugged in would probably be dangerous.";
	otherwise:
		say "You[if it's Nighttime][']ll[end if] have no reason to destroy [the noun].";
	take no time.

Instead of assaulting a charging cable with:
	if the second noun is the intruder:
		try assaulting the intruder with the noun;
	otherwise:
		try attacking the noun.
		
Instead of crouching behind or sitting behind or slipping behind or lying behind or entering underneath a charging cable: say "[no time][The noun] [can't] meaningfully conceal you."

Instead of drinking or eating or tasting or kissing a charging cable:
	if the count of occupied plugs of the noun > 0:
		say "You doubt [the noun] would taste very good. Besides, putting it in your mouth while it's plugged in would probably be dangerous.";
	otherwise:
		say "You doubt [the noun] would taste very good.";
	take no time.

Instead of knocking on a charging cable: say "The sound [regarding the noun][aren't] very impressive."
Instead of listening to a charging cable: say "[nnt]Chargers aren't known for their noisiness."
Instead of locking something with a charging cable: say "[nnt][We] could tie [the second noun] around [the noun] to hold [regarding the noun][them] shut, but [regarding the second noun][they] could just as easily be untied again."
Instead of looking behind or looking under or searching a charging cable: say "[no time][The noun] [can't] meaningfully conceal much."
Instead of opening or closing a charging cable: say "[nnt][We] [lack] the tools, not to mention the knowledge, to do that in any useful way."
Instead of pulling or pushing or turning a charging cable: say "[nnt]That's unlikely to be a useful course of action."
Instead of putting something on a charging cable: try plugging the second noun into the noun.
Instead of removing something from a charging cable: try unplugging the second noun.
Instead of rubbing or touching or squeezing a charging cable: say "Smooth, flexible rubber."
Instead of smelling a charging cable: say "It doesn't smell like much of anything[if Nighttime is happening], as far as you know[end if]."

Instead of swinging or waving a charging cable:
	if it's Daytime or intruder-inside is false:
		say "You have the vague sense that could damage [the noun].";
	otherwise:
		say "That would be a risky move[unicode 8212]it could easily give away your position in a way that wouldn't let you move before the intruder reached you.";
	take no time.
		
Instead of switching off or switching on a charging cable: say "[The noun] doesn't itself have a switch."

Check throwing a charging cable at:
	if the second noun is the intruder:
		try assaulting the intruder with the noun instead;
	continue the action.

Instead of tying a charging cable to:
	if the second noun is the intruder:
		try assaulting the intruder with the noun instead;
	otherwise:
		say "[nnt]You know you're not supposed to make knots in a charging cable[unicode 8212]it[if it's Daytime][']s[otherwise] would be[end if] harmful to the wiring."

Instead of tying something to a charging cable: try tying the second noun to the noun.
Instead of wearing a charging cable: say "[no time]It [adapt the verb make from the third person singular] little difference whether you carry [the noun] in your hand or draped over your shoulders."

Section 4 - Dishes and silverware

A dish is a kind of thing. Understand "dish/dishes" as a dish.
A dish can be shattered or intact. A dish is usually intact. Understand the shattered property as describing a dish.

Instead of attacking or burning or cutting or shooting a dish:
	if it's Daytime, say "[We] [have] no reason to destroy any of [the noun].";
	otherwise say "[nt]You see no way that the act of destroying [the noun] alone would help in that situation. If you could SMASH [them] as a noisy distraction, however...";

Instead of assaulting a dish with: try attacking the noun.
Instead of assaulting something with a dish: try attacking the second noun.
Instead of crouching behind or entering underneath or lying behind or sitting behind or slipping behind a dish: say "[no time][The noun] [can't] meaningfully conceal you."
Instead of giving something to a dish: try putting the noun on the second noun.
Instead of listening to a dish: say "[no time][The noun] [can't] make noise on [their] own."

Instead of looking behind or looking under or searching a dish:
	if the holder of the noun is a container or the holder of the noun is a supporter:
		try searching the holder of the noun;
	otherwise:
		say "[nt][The noun] [aren't] capable of concealing much."

Instead of placing something under a dish: try putting the noun on the second noun.
Instead of pulling or pushing or turning a dish: say "[nnt]It [adapt the verb make from the third person singular] little difference."
Instead of pushing a dish to: try pushing the noun.

Instead of putting something on a dish:
	if the holder of the second noun is a container:
		try inserting the noun into the holder of the second noun;
	otherwise if the holder of the second noun is a supporter:
		try putting the noun on the holder of the second noun;
	otherwise if the holder of the second noun is the location:
		if it's Daytime, try dropping the noun;
		otherwise try depositing the noun;
	otherwise:
		say "[nnt]It [adapt the verb make from the third person singular] little difference."

Instead of showing something to a dish: try putting the noun on the second noun.
Instead of smelling a dish: say "None of [the noun] smell like much of anything[if Nighttime is happening], as far as you know[end if]."
Instead of stowing something behind a dish: try putting the noun on the second noun.

Check taking a dish during Daytime (this is the leave dishes put away rule):
	if the noun is in the kitchen-cabinets, say "[no time][We] [have] no reason to carry around any of [the noun] with you right now." instead.

Instead of throwing something at a dish: say "[no time]Once you identify the impulse, [we] [find] you have no reason to actually follow through."
Instead of washing a dish: say "[no time][The noun] [are already] all clean."
Instead of waving a dish: try swinging the noun.

Silverware is a kind of thing. Understand "silverware" or "utensils" or "cutlery" as the plural of silverware.

Instead of attacking or shooting silverware: say "[no time][We] [have] no reason to destroy any of [the noun]."
Instead of burning silverware: say "[no time][We] [have] no reason to destroy any of [the noun]. You don't think burning [them] would be a very effective method of doing so, anyway."
Instead of crouching behind or entering underneath or lying behind or sitting behind or slipping behind silverware: say "[no time][The noun] [can't] meaningfully conceal you."
Instead of cutting silverware: say "[no time][We] [have] no reason to destroy any of [the noun]. You don't think cutting [them] up would be a very efficient method of doing so, anyway."

Instead of assaulting silverware with:
	if the second noun is either the burners or the stove or the oven:
		try burning the noun;
	otherwise if the second noun is sharp:
		try cutting the noun;
	otherwise:
		try attacking the noun.

Instead of assaulting something with silverware: try attacking the noun.
Instead of drinking or eating or tasting or kissing silverware: say "None of [the noun] taste like much of anything."
Instead of giving something to silverware: try putting the noun on the second noun.
Instead of knocking on silverware: say "[nnt]The sound [regarding the mattress][aren't] very impressive[if it's Nighttime]. Maybe there'll be another way you can use [the noun] to make noise[end if]."
Instead of inserting something into silverware: try putting the noun on the second noun.
Instead of listening to silverware: say "[no time][The noun] [can't] make noise on [their] own."

Instead of looking behind or looking under or searching silverware:
	if the holder of the noun is a container or the holder of the noun is a supporter:
		try searching the holder of the noun;
	otherwise:
		say "[nt][The noun] [aren't] capable of concealing much."

Instead of placing something under silverware: try putting the noun on the second noun.
Instead of pulling or pushing or turning silverware: say "[nnt]It [adapt the verb make from the third person singular] little difference."
Instead of pushing silverware to: try pushing the noun.

Instead of putting something on silverware:
	if the holder of the second noun is a container:
		try inserting the noun into the holder of the second noun;
	otherwise if the holder of the second noun is a supporter:
		try putting the noun on the holder of the second noun;
	otherwise if the holder of the second noun is the location:
		if it's Daytime, try dropping the noun;
		otherwise try depositing the noun;
	otherwise:
		say "[nnt]It [adapt the verb make from the third person singular] little difference."

Instead of rubbing or touching or squeezing silverware: say "Cool metal."
Instead of showing something to silverware: try putting the noun on the second noun.
Instead of smelling silverware: say "[regarding the noun][They] [smell] like soap[if it's Nighttime], you expect[end if]."
Instead of stowing something behind silverware: try putting the noun on the second noun.

Check taking silverware during Daytime (this is the leave silverware put away rule):
	if the noun is in the kitchen-cabinets, say "[nt][We] [have] no reason to carry around any of [the noun] with you." instead.

Instead of throwing something at silverware: say "[no time]Once you identify the impulse, [we] [find] you have no reason to actually follow through."
Instead of washing silverware: say "[no time][The noun] [are already] all clean."
Instead of waving silverware: try swinging the noun.

Section 5 - Electric outlets

An electric outlet is a kind of thing. An electric outlet is always scenery. The printed name of an electric outlet is usually "outlet". Understand "wall plug/socket/outlet" or "electric/electrical/-- outlet/outlets" or "socket" as an electric outlet.
Two PS-sockets are part of every electric outlet.
The description of an electric outlet is usually "A wall outlet like any other, with two sockets for cords to be plugged into. [if the count of occupied sockets of the noun is 2]Both are currently occupied[otherwise if the count of occupied sockets of the noun is 0]Both are currently available[otherwise]One of those sockets is currently occupied, but the other is available[end if]."
Does the player mean doing something to an electric outlet (called the particular-plug) (this is the specifying plugs rule):
	if the particular-plug is in the location, it is possible;
	it is unlikely.
	
Rule for printing the name of an electric outlet while examining: say "outlet in the wall".

Instead of remembering an electric outlet: say "There are[if it's Nighttime], you remember,[end if] outlets in the bedroom and office areas."
	
Instead of attacking or burning or cutting an electric outlet:
	if it's Daytime, say "[nt][We] [have] no reason to destroy [the noun].";
	otherwise say "[nt]You see no way that destroying [the noun] would help in that situation."

Instead of assaulting an electric outlet with: try attacking the noun.
Instead of climbing or crouching on or lying on or sitting on or standing up on an electric outlet: try climbing the bare walls.
Instead of crouching behind or entering underneath or lying behind or sitting behind or slipping behind an electric outlet: say "[no time][The noun] [can't] meaningfully conceal you."
Instead of drinking or eating or tasting or kissing an electric outlet: say "[nnt]Outlets aren't typically meant for consumption[unicode 8212]trying to do so would likely be dangerous."
Instead of entering an electric outlet: try entering the bare walls.

Instead of giving something to an electric outlet:
	if the noun is a PS-inserter or the noun is a PS-plug and the noun is not a firebolt plug and the noun is not a usb-c plug:
		try plugging the noun into the second noun;
	otherwise:
		try inserting the noun into the second noun.

Instead of inserting something into an electric outlet: say "[nnt]That [if it's Daytime]seems[otherwise]would be[end if] unlikely to be worthwhile, and [if it's Daytime]potentially[otherwise]possibly[end if] dangerous."
Instead of listening to an electric outlet: say "[no time]Outlets aren't known for their noisiness."
Instead of looking behind or looking under or searching an electric outlet: say "[no time][The noun] [can't] meaningfully conceal much."
Instead of opening or closing an electric outlet: say "[no time]Outlets don't typically open or close."
Instead of pushing an electric outlet to: try taking the noun.
Instead of rubbing or touching or squeezing an electric outlet: say "[if it's Daytime]It feels[otherwise]It'll feel[end if] smooth and unremarkable."
Instead of smelling an electric outlet: say "[regarding the noun][They] [don't] smell like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of switching off an electric outlet: say "[nnt]There's no switch you're aware of that controls this socket."
Instead of switching on an electric outlet: say "[nnt]There's no switch you're aware of that controls this socket."
Instead of pulling or turning or taking an electric outlet: say "[nnt]You're no electrician, and [regarding the player][can't] easily remove the outlet from the wall."

Instead of tying an electric outlet to:
	if the second noun is a PS-inserter or the second noun is a PS-plug and the second noun is not a firebolt plug and the second noun is not a usb-c plug:
		try plugging the second noun into the noun;
	otherwise:
		try inserting the second noun into the noun.

Instead of tying something to an electric outlet:
	if the noun is a PS-inserter or the noun is a PS-plug and the noun is not a firebolt plug and the noun is not a usb-c plug:
		try plugging the noun into the second noun;
	otherwise:
		try inserting the noun into the second noun.

Section 6 - Jewelry
	
Jewelry is a kind of thing. Understand "jewelry" as jewelry. Jewelry is usually wearable.

Instead of attacking or burning or cutting jewelry: say "[nnt][The noun] [adapt the verb are in the present tense] valuable; [we] [don't] want to risk destroying [regarding the noun][them]."
Instead of assaulting jewelry with: try attacking the noun.
Instead of assaulting something with jewelry: say "[nnt][The second noun] [adapt the verb are in the present tense] valuable; [we] [don't] want to risk destroying [regarding the second noun][them]."
Instead of crouching behind or entering underneath or lying behind or sitting behind or slipping behind jewelry: say "[nnt][The noun] [aren't] capable of effectively concealing you."
Instead of drinking or eating or tasting jewelry: say "[nnt][The noun] [adapt the verb are in the present tense]n't really meant for consumption."

Instead of kissing jewelry:
	if it's Daytime, try tasting the noun;
	otherwise say "[nt]You don't think you'll have time for such sentimentalities, under the circumstances."
	
Instead of hugging jewelry:
	if it's Daytime, say "While you [i]are[/i] fond of [the noun], you don't think you'd quite go [i]that[/i] far.";
	otherwise say "[nt]You don't think you'll have time for such sentimentalities, under the circumstances."

Instead of knocking on jewelry: say "The sound [if it's Daytime]isn't[otherwise]won't be[end if] very impressive."
Instead of looking behind or looking under or searching jewelry: say "[nnt][The noun] [aren't] capable of concealing much."
Instead of pushing jewelry to: try pulling the noun.
Instead of putting jewelry on nothing: try wearing the noun.

Instead of removing jewelry from:
	if the player wears the noun:
		try taking off the noun;
	otherwise:
		try taking the noun.

Instead of smelling jewelry: say "[regarding the noun][They] [don't in the present] smell like much of anything[if it's Nighttime], as far as you know[end if]."

Instead of swinging or waving jewelry:
	if it's Daytime or intruder-inside is false:
		say "You have the vague sense that could damage [the noun].";
	otherwise:
		say "That would be a risky move[unicode 8212]it could easily give away your position in a way that wouldn't let you move before the intruder reached you.";
	take no time.

Instead of throwing jewelry at something: say "[no time][The noun] [adapt the verb are in the present tense] valuable; [we] [don't] want to risk destroying [regarding the noun][them]."

Instead of tying jewelry to:
	if the second noun is the player:
		try wearing the noun;
	otherwise if the second noun is a container:
		try inserting the noun into the second noun;
	otherwise:
		try putting the noun on the second noun.

Instead of tying something to jewelry:
	if the noun is the player:
		try wearing the second noun;
	otherwise:
		say "[nnt]You doubt that would be a productive course of action."

Section 7 - Junk

Junk is a kind of thing. The printed name of junk is usually "junk". Understand "junk" or "stuff" or "miscellaneous/misc" as junk. The indefinite article of junk is usually "some". Junk is usually unimportant. The description of junk is usually "[if Nighttime is happening]A[otherwise]It's a[end if] pile of miscellaneous junk, that [if Nighttime is happening]won't yet have[otherwise]hasn't yet[end if] found a permanent home."
Rule for deciding whether all includes junk (this is the exclude junk from all rule): it does not.

Instead of remembering junk: say "[if it's Daytime]There's[otherwise]There'll still be[end if] junk all over the place."

Instead of attacking or burning or cutting junk:
	if it's Daytime, say "You shouldn't destroy it before you've had a chance to go through it thoroughly, just in case.";
	otherwise say "[nt] Even under the circumstances, you don't think it would be a good idea to destroy any of that stuff before you've had a chance to go through it thoroughly. Just in case."

Instead of assaulting junk with: try attacking the noun.
Instead of climbing or entering or crouching on or sitting on or standing up on or entering underneath junk: try entering the holder of the noun.
Instead of crouching behind or sitting behind or slipping behind or lying behind junk: try slipping behind the holder of the noun.
Instead of drinking or eating or tasting or kissing junk: say "[nnt]No part of [the noun] [are] edible."
Instead of emptying junk: try taking the noun.
Instead of giving something to junk: try inserting the noun into the holder of the second noun.
Instead of inserting something into junk: try inserting the noun into the holder of the second noun.
Instead of knocking on junk: say "The sound [if it's Daytime]isn't[otherwise]won't be[end if] very impressive."
Instead of listening to junk: say "[nnt]None of the junk [adapt the verb are from the third person singular] making any noise."

Instead of looking behind or looking under or searching junk:
	if the number of things in the holder of the noun is 1:
		say "[if it's Daytime]There's only[otherwise]There'll only be[end if] junk in [the holder of the noun][if it's Nighttime] by that point[end if].";
	otherwise:
		try searching the holder of the noun.

Instead of placing something under junk: try inserting the noun into the holder of the second noun.
Instead of pulling or pushing or turning junk: say "[nnt]You can move the junk around all you want; it won't make there be any less of it."
Instead of pushing junk to: try pushing the noun.
Instead of putting something on junk: try inserting the noun into the holder of the second noun.
Instead of removing junk from: try taking the noun.
Instead of removing something from junk: try taking the noun.
Instead of rubbing or touching or squeezing junk: say "[They] [don't] have one homogenous texture."

Instead of searching junk:
	if it's Daytime:
		say "You're too tired to sort through it now. That can be left for tomorrow.";
	otherwise:
		say "[nt]It probably won't be the ideal time for decluttering."

Instead of showing something to junk: try inserting the noun into the holder of the second noun.
Instead of smelling junk: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of stowing something behind junk: try inserting the noun into the holder of the second noun.
Instead of swinging or waving junk: try taking the noun.
Instead of switching on or switching off junk: say "[no time][We] [don't] see anything in the junk that switches."
Instead of taking junk: say "[nnt]None of it [if it's Daytime]seems[otherwise]will be[end if] worth carrying around with you[if it's Nighttime], under the circumstances[end if]."
Instead of throwing something at junk: try inserting the noun into the holder of the second noun.

Section 8 - Knives

A knife is a kind of thing. The plural of knife is knives. Understand "knife" as a knife. A knife is usually deadly and sharp. Understand the sharp property as describing a knife.

Instead of attacking or burning or cutting a knife: say "[nnt]They're more usually used to damage other things."

Instead of assaulting a knife with:
	if the second noun is the intruder:
		try assaulting the second noun with the noun;
	otherwise:
		try attacking the noun.

Instead of crouching behind or entering underneath or lying behind or sitting behind or slipping behind a knife: say "[no time][The noun] [can't] meaningfully conceal you."
Instead of drinking or eating or tasting or kissing a knife: say "[nnt]Knives aren't typically meant for consumption[unicode 8212]trying to do so would likely be dangerous."
Instead of hugging a knife: say "[no time]That [if it's Daytime]strikes you as[otherwise]seems like it would be[end if] dangerous."
Instead of knocking on a knife: say "The sound [regarding the noun][aren't] very impressive."
Instead of listening to a knife: say "[nnt][The noun] doesn't really make noise on its own."
Instead of looking behind or looking under or searching a knife: say "[no time][The noun] [aren't] capable of concealing much."

Check giving a knife to someone: if the second noun is the intruder, try assaulting the intruder with the noun instead.
Check inserting a knife into: if the second noun is the intruder, try assaulting the intruder with the noun instead.
Check putting something on a knife: if the noun is the intruder, try assaulting the intruder with the second noun instead.

Instead of pushing a knife to: try pushing the noun.
Instead of rubbing or touching or squeezing a knife: say "Cool metal."

Instead of swinging or waving a knife:
	if it's Daytime:
		say "That would likely be dangerous.";
	otherwise:
		if intruder-inside is false:
			say "That would likely be dangerous.";
		otherwise:
			say "That would be a dangerous, risky move[unicode 8212]it could easily give away your position in a way that wouldn't let you move before the intruder reached you.";
		take no time.

Instead of throwing a knife at something:
	if the second noun is the intruder:
		try assaulting the intruder with the noun;
	otherwise:
		say "[nt]That would likely be dangerous, and would almost certainly damage [the second noun]."

Instead of smelling a knife:
	if the noun is blood-free, follow the knives smell like soap rule;
	otherwise follow the bloody knives smell like blood rule.

This is the knives smell like soap rule:
	if it's Daytime:
		say "It smells like soap." (A);
	otherwise:
		say "Last you sniffed it, it smelled like soap." (B).
		
This is the bloody knives smell like blood rule:
	if it's Daytime:
		say "It smells like the blood that covers its blade." (A);
	otherwise:
		say "Last you sniffed it, it smelled like soap. By that point, though, it will likely smell like blood." (B).
		
Check washing a knife: if the noun is blood-free, follow the clean knives rule instead.
This is the clean knives rule: say "[nnt][It's already] clean."

Carry out washing a bloody knife:
	now the noun is blood-free;
	say "[We] [wash] all the blood off of [the noun]."
	
When Final Sweep begins:
	repeat with blade running through knives:
		now blade is fridgable;
		now blade is freezable.

Section 9 - Latchkeys

A latchkey is a kind of thing. [A latchkey is usually deadly and sharp.] Understand "keys" as the plural of latchkey.
[NOTE: Used instead of passkeys to extend the functionality of Locksmith's keychains, since you really ought to know what these unlock, but juggling them individually would be a pain.]

Instead of attacking or burning or cutting a latchkey:
	if it's Daytime, say "[We] [have] no reason to destroy [the noun].";
	otherwise say "[nt]You see no way that destroying [the noun] would help in that situation."

Instead of assaulting a latchkey with: try attacking the noun.
Instead of assaulting the intruder with a latchkey: say "[no time][The noun] might conceivably do some damage, but likely won't buy you enough time against this guy."
Instead of crouching behind or sitting behind or slipping behind or lying behind or entering underneath a latchkey: say "[no time][The noun] [can't] meaningfully conceal you."
Instead of drinking or eating or tasting a latchkey: say "[nnt]Keys aren't typically meant for consumption[unicode 8212]trying to do so would likely be dangerous."

Check dropping a latchkey (this is the redirect dropping keys to the keyring rule):
	if the noun is on the keyring and the keyring is carried:
		try dropping the keyring instead.

Check inserting a latchkey into (this is the convert inserting keys into to unlocking with rule):
	if the second noun is a door:
		if the second noun is locked:
			try unlocking the second noun with the noun instead;
		otherwise:
			try locking the second noun with the noun instead;
	otherwise if the second noun is locked and the noun unlocks the second noun:
		try unlocking the second noun with the noun instead.
		
Instead of inserting a latchkey into the open closet:
	if the location is Entryway, try inserting the noun into Within-Closet;
	otherwise try inserting the noun into Entryway.

Instead of kissing a latchkey:
	if it's Daytime, try tasting the noun;
	otherwise say "[nt]You don't think you'll have time for such sentimentalities, under the circumstances."
	
Instead of knocking on a latchkey: say "The sound [regarding the noun][aren't] very impressive."
Instead of looking behind or looking under or searching a latchkey: say "[no time][The noun] [can't] meaningfully conceal much."

Instead of listening to a latchkey: say "[no time][The noun] [aren't] capable of making much noise on its own."
Instead of locking a latchkey with: try locking the second noun with the noun.
Instead of locking keylessly or unlocking keylessly or pulling or pushing or turning a latchkey: say "[no time][i][bracket]You'll need to specify what you want to lock or unlock with [the noun].[close bracket][/i][line break]".
Instead of pushing a latchkey to: try pushing the noun.
Instead of rubbing or touching or squeezing a latchkey: say "Cool metal."
Instead of smelling a latchkey: say "[if it's Daytime]Smells[otherwise]You suspect [regarding the noun][they] [smell][end if] slightly metallic."

Instead of swinging or waving a latchkey when the noun is on the keyring:
	if it's Daytime, say "[The keyring] jingles.";
	otherwise try waving the keyring.

Instead of unlocking a latchkey with: try unlocking the second noun with the noun.

Section 10 - Materials and metaphors

A material is a kind of thing. A material is usually scenery. The bulk of a material is usually 0.
Rule for deciding whether all includes a material: it does not.
Does the player mean doing something with a material: it is unlikely.

A metaphor is a kind of thing. A metaphor is usually scenery. The bulk of a metaphor is usually 0.
Rule for deciding whether all includes a metaphor: it does not.
Does the player mean doing something with a metaphor: it is unlikely.

[NOTE: Mostly for my own use, to keep track of parts I mention or comparisons I make that shouldn't exactly be fully interactable.]

Section 11 - Positions

A position is a kind of thing. A position is always privately-named scenery. The bulk of a position is usually 0. A position can be roomish or thingish. A position is usually roomish.
[NOTE: Used to simulate the intruder's world knowledge. When he becomes aware of "you," he's really locking onto the nearest one of these.]
Rule for deciding whether all includes a position (this is the exclude positions from all rule): it does not.

Section 12 - Rugs

A rug is a kind of thing. A rug is usually bulky scenery. Understand "rug" as a rug.
Rule for deciding whether all includes a rug (this is the exclude rugs from all rule): it does not.

Instead of attacking or burning or cutting a rug:
	if it's Daytime, say "[We] [have] no reason to destroy [the noun].";
	otherwise say "[nt]You see no way that destroying [the noun] would help in that situation."

Instead of assaulting a rug with: try attacking the noun.
Instead of climbing a rug: abide by the rug position doesn't matter rule.
Instead of crouching behind or lying behind or sitting behind or slipping behind a rug: say "[no time]You doubt [the noun] would do a good job of concealing you behind itself, seeing as it's flat."
Instead of crouching on a rug: try crouching.
Instead of drinking or eating or tasting or kissing a rug: say "[nnt]You've never made a habit of putting things that have touched your feet anywhere near your mouth, and you're not about to start [if it's Nighttime]tonight[otherwise]now[end if]."
Instead of entering a rug: abide by the rug position doesn't matter rule.

Instead of entering underneath a rug:
	if it's Daytime, say "You see no reason to crawl underneath [the noun].";
	otherwise say "[nt][The noun] [are] unlikely to effectively conceal you."

Instead of getting off a rug: abide by the rug position doesn't matter rule.
Instead of giving something to a rug: try putting the noun on the second noun.
Instead of inserting something into a rug: try putting the noun on the second noun.
Instead of knocking on a rug: say "[nnt][The noun] [are] too soft to produce much noise."
Instead of listening to a rug: say "[no time]Rugs aren't known for their noisiness."
Instead of looking under a rug: say "Underneath [regarding the noun][are] just the floor."
Instead of lying on a rug: try lying down.
Instead of placing something under a rug: say "[no time][The noun] [are] unlikely to effectively conceal anything."
Instead of pulling or pushing or turning or taking a rug: abide by the not worth moving rugs rule.
Instead of pushing a rug to: try pushing the noun.

Instead of putting something on a rug:
	if it's Daytime, try dropping the noun;
	otherwise try depositing the noun.

Instead of removing a rug from: try taking the noun.
Instead of removing something from a rug: try taking the noun.
Instead of rubbing or touching or squeezing a rug: say "The material [regarding the noun][are] soft under your fingers."
Instead of showing something to a rug: try putting the noun on the second noun.
Instead of sitting on a rug: try sitting down.
Instead of smelling a rug: say "[no time]That seems unlikely to be a worthwhile course of action[if it's Nighttime], under the circumstances[end if]."
Instead of standing up on a rug: try standing up.
Instead of stowing something behind the a rug: try placing the noun under the second noun.
Instead of swinging or waving a rug: abide by the not worth moving rugs rule.

Instead of throwing something at a rug:
	if it's Daytime, try dropping the noun;
	otherwise try depositing the noun.

Instead of turning a rug: abide by the not worth moving rugs rule.

This is the rug position doesn't matter rule: say "[nnt]It [adapt the verb make from the third person singular] little practical difference whether you're [if the posture of the player is standing]standing [otherwise if the posture of the player is seated]sat [end if]on [the noun] or the floor." instead.

This is the not worth moving rugs rule:
	take no time;
	say "[if it's Nighttime]It probably won't be[else]It probably isn't[end if] worth moving around something so bulky[if it's Daytime][unicode 8212]you've done enough work for today[end if]." instead.
	
Section 13 - Shards

Remaining relates one thing (called the whole-body) to one thing. The verb to be the remnant of means the reversed remaining relation. [The verb to leave behind means the remaining relation.]

A shards-pile is a kind of thing. Understand "shard/shards" as a shards-pile. Understand "[something related by remaining] shard/shards/pieces" or "shard/shards/pieces of/from the/-- [something related by remaining]" as a shards-pile.

Instead of attacking or burning or cutting or shooting a shards-pile: say "[no time]You don't think [we] [can] meaningfully destroy [the whole-body of the noun] further than you [if it's Nighttime]will [end if]already have."
Instead of assaulting a shards-pile with: try attacking the noun.
Instead of assaulting something with a shards-pile: try taking the noun.
Instead of crouching on or entering or lying on or sitting on or standing up on a shards-pile: say "[no time]You[if it's Nighttime] think you[end if][']d rather avoid cutting up your bare feet."
Instead of drinking or eating or tasting or kissing a shards-pile: say "[no time]You don't think [if it's Daytime]you can even[otherwise]you'd even be able to[end if] [i]touch[/i] the shards without risking cutting yourself, much less put them in your mouth."
Instead of giving something to a shards-pile: try putting the noun on the second noun.
Instead of inserting something into a shards-pile: try putting the noun on the second noun.
Instead of looking behind or looking under a shards-pile: say "[no time][The noun] [if it's Daytime][aren't] really[otherwise]won't really be[end if] capable of effectively concealing anything."
Instead of placing something under a shards-pile: say "[no time][The noun] [are] unlikely to effectively conceal anything."
Instead of pulling or pushing or turning a shards-pile: say "[no time]It [adapt the verb make from the third person singular] little difference."
Instead of pushing a shards-pile to: try pushing the noun.

Instead of putting something on a shards-pile:
	if the holder of the second noun is a container:
		try inserting the noun into the holder of the second noun;
	otherwise if the holder of the second noun is a supporter:
		try putting the noun on the holder of the second noun;
	otherwise if the player encloses the second noun:
		say "[nt]It [adapt the verb make from the third person singular] little difference.";
	otherwise:
		say "It [adapt the verb make from the third person singular] little difference where on the floor [the noun] goes, and you[if it's Nighttime] think you[end if][']d rather not risk cutting yourself fishing [regarding the noun][them] back out of the shards. [We] [put] [regarding the noun][them] on the ground instead.";
		if it's Daytime, silently try dropping the noun;
		otherwise silently try depositing the noun.

Instead of rubbing or touching or squeezing or knocking on a shards-pile: say "[no time]You don't think [if it's Daytime]you can[otherwise]you'd be able to[end if] touch the shards without risking cutting yourself."
Instead of searching a shards-pile: say "[if it's Daytime]Just[otherwise]It'll just be[end if] a bunch of broken pieces."
Instead of showing something to a shards-pile: try putting the noun on the second noun.
Instead of smelling a shards-pile: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of stowing something behind a shards-pile: say "[no time][The noun] [are] unlikely to effectively conceal anything."

Instead of taking a shards-pile:
	if it's Daytime, say "You're too tired to deal with this. It can stay right where it is until tomorrow morning.";
	otherwise say "You don't think you'd be able to pick up any of the shards without risking cutting yourself. There must be another way.";
	take no time.

Instead of throwing a shards-pile at something: try taking the noun.
Instead of throwing something at a shards-pile: try putting the noun on the second noun.

Section 14 - Lighting

Lighting is a kind of backdrop. Understand "light/lights" or "lighting" as lighting. Lighting is always scenery. Lighting is usually distant.

A distant stuff rule for lighting (called bulb) (this is the block access to lighting rule):
	say "[The bulb] [are] attached to the ceiling, and thus far out of your reach.";
	take no time;
	rule fails.
	
A distant stuff rule for lighting while crouching behind or entering underneath or lying behind or sitting behind or slipping behind (this is the allow hiding by lighting rule): rule succeeds.

Instead of crouching behind or entering underneath or lying behind or sitting behind or slipping behind lighting: say "[no time]It [adapt the verb make from the third person singular] no practical difference[unicode 8212][if it's Daytime]you're already[otherwise]you'll already be[end if] under [regarding the noun][them]."

A distant stuff rule for lighting while listening to (this is the allow listening to lighting rule): rule succeeds.
A distant stuff rule for lighting while switching off (this is the allow switching off lighting rule): rule succeeds.
A distant stuff rule for lighting while switching on (this is the allow switching on lighting rule): rule succeeds.

Instead of listening to lighting:
	if the noun is switched off, say "[nnt][The noun] [don't] make any noise while switched off.";
	otherwise say "[nnt][We] [can't] make out whether [the noun] [adapt the verb are in the present tense from the third person singular] making any noise, since [they][if the noun is plural-named][']re[otherwise][']s[end if] so far away."
	
Before looking under or looking behind or searching lighting (this is the looking under lighting rule):
	if the noun is powered by something (called the controller):
		if the controller is switched on:
			say "[The noun] [are] illuminating the entire room.";
		otherwise:
			say "Everything in the room [adapt the verb are from the third person singular] under [the noun]."

A distant stuff rule for lighting while throwing:
	say "[no time]Once you identify the impulse, [we] [find] you have no reason to actually follow through.";
	rule fails.

Instead of assaulting lighting with: try attacking the noun.

Instead of rebooting lighting:
	silently try switching off the noun;
	silently try switching on the noun;
	say "[We] [switch] the lights off and back on again."

Instead of switching off lighting:
	if the noun is powered by something (called the controller):
		if the controller is switched on:
			if the controller is enclosed by the location:
				try switching off the controller;
			otherwise:
				say "[nnt]The lights in [if it's Daytime]this[otherwise]that[end if] part of the apartment are controlled by a light switch in [casual descriptor of the location of the controller].";
		otherwise:
			say "[nt][The noun] [is already] switched off."

Instead of switching on lighting:
	if the noun is powered by something (called the controller):
		if the controller is switched off:
			if the controller is enclosed by the location:
				try switching on the controller;
			otherwise:
				say "[nnt]The lights in [if it's Daytime]this[otherwise]that[end if] part of the apartment are controlled by a light switch in [casual descriptor of the location of the controller].";
		otherwise:
			say "[nt][The noun] [is already] switched on."

Chapter 2 - Containers

Section 1 - Cabinets

A cabinet is a kind of container. A cabinet is usually eclipsing, openable, closed, and scenery. Understand "cupboard/cupboards" or "cabinet/cabinets" as a cabinet.

Instead of attacking or burning or cutting a cabinet: say "[no time]That would be a great way to ensure you never see your security deposit again."
Instead of assaulting a cabinet with: try attacking the noun.
Instead of drinking or eating or tasting or kissing a cabinet: say "[no time]You doubt [the noun] would taste very good."
Instead of giving something to a cabinet: try inserting the noun into the second noun.
Instead of locking a cabinet with: try locking keylessly the noun.
Instead of locking keylessly a cabinet: say "[nnt][if it's Nighttime]You know [the noun][otherwise][The noun][end if] [don't] lock."
Instead of looking behind a cabinet: say "[The noun] [adapt the verb are in the present tense] right up against the wall. [regarding the noun][They] [can't] conceal anything behind [themselves]."
Instead of looking under a cabinet: say "[The noun] [can't] conceal anything under [themselves]."
Instead of placing something under a cabinet: try inserting the noun into the second noun.

Instead of pulling or pushing or turning a cabinet:
	if the noun is closed, try opening the noun;
	otherwise try closing the noun.

Instead of pushing a cabinet to: try pushing the noun.
Instead of putting something on a cabinet: try inserting the noun into the second noun.
Instead of removing something from a cabinet: try taking the noun.
Instead of rubbing or touching or squeezing a cabinet: say "Smooth, finished wood."
Instead of showing something to a cabinet: try inserting the noun into the second noun.
Instead of smelling a cabinet: say "[regarding the noun][They] [don't in the present] have much of a smell[if it's Nighttime], as far as you know[end if]."
Instead of stowing something behind a cabinet: try inserting the noun into the second noun.
Instead of throwing something at a cabinet: try inserting the noun into the second noun.
Instead of unlocking a cabinet with: try unlocking keylessly the noun.
Instead of unlocking keylessly a cabinet: say "[nnt][if it's Nighttime]You know [the noun][otherwise][The noun][end if] [don't] lock."

Section 2 - Sinks

A sink is a kind of container. A sink is usually open, not openable, unlocked, not lockable, fixed in place, and scenery. Understand "sink" as a sink. The bulk-capacity of a sink is usually 40.
A sink can be wet. A sink is usually not wet.

Instead of attacking or burning or cutting a sink: say "[no time]That would be a great way to ensure you never see your security deposit again."
Instead of assaulting a sink with: try attacking the noun.
Instead of climbing or crouching on or entering or lying on or sitting on or standing up on a sink: say "[no time]You[if it's Daytime][']d rather not[otherwise] suspect you won't want to[end if] test the limits of [the noun]'s weight capacity[if it's Daytime], today of all days[otherwise] in such a high-stakes situation[end if]."
Instead of drinking or eating or tasting or kissing a sink: say "[no time]You remember once being told sinks were actually incredibly dirty by default. [if it's Daytime]Better to refrain[otherwise]Knowing that, you don't think you'd follow through[end if]."
Instead of entering underneath a sink: say "[nnt]You're small, but not small enough to fit underneath the sink."
Instead of giving something to a sink: try inserting the noun into the second noun.

Instead of listening to a sink (called basin):
	if the basin incorporates a tap (called font):
		if font is switched on:
			try listening to the flowing water instead;
		otherwise:
			say "The sink [regarding the noun][aren't] making any noise [if it's Daytime]at the moment[otherwise]by that point[end if]."

Instead of opening or closing a sink: say "[no time]The sink is always open."
Instead of putting something on a sink: try inserting the noun into the second noun.
Instead of removing something from a sink: try taking the noun.
Instead of showing something to a sink: try inserting the noun into the second noun.
Instead of smelling a sink: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."

Instead of switching off a sink (called basin):
	if the basin incorporates a tap:
		try switching off a random tap included by the basin.

Instead of switching on a sink (called basin):
	if the basin incorporates a tap:
		try switching on a random tap included by the basin.

Instead of throwing something at a sink: try inserting the noun into the second noun.

Instead of washing a sink:
	if it's Daytime:
		say "That's a task that can wait for tomorrow.";
	otherwise:
		say "You doubt that would be your top priority, under the circumstances.";
	take no time.
	
Instead of waving a sink: try swinging the noun.
	
Check inserting something into a sink (called basin) (this is the no electronics in sinks rule):
	if the noun is electronic:
		take no time;
		if the basin is wet:
			say "Given that electronics and water don't tend to mix well, [if it's Daytime]it's probably not[otherwise]it probably wouldn't be[end if] a good idea to put [the noun] in the sink." (A) instead;
		otherwise:
			say "Given that electronics and water don't tend to mix well, [if it's Daytime]it's probably not[otherwise]it probably won't be[end if] a good idea to put [the noun] into the sink, even if there [if it's Daytime]isn't[otherwise]won't be[end if] any water there [if it's Daytime]currently[otherwise]at that point[end if]." (B) instead.

Section 3 - Drains

A drain is a kind of container. Understand "drain" or "plughole" as a drain. Understand "[something related by reversed incorporation] drain/plughole" as a drain. The bulk-capacity of a drain is usually 1. The bulk of a drain is usually 0. A drain is usually eclipsing, open, not openable, unlocked, and not lockable.
[NOTE: Pulled from Emily Short's Modern Conveniences]

Understand "plug [drain]" as closing. Understand "unplug [drain]" as opening.

Instead of attacking or burning or cutting a drain (called hole):
	if the hole is included by a sink (called basin):
		try attacking the basin.

Instead of assaulting a drain with: try attacking the noun.

Before climbing or crouching on or entering or lying on or sitting on or standing up on a drain (called hole):
	if the hole is included by a sink (called basin):
		now the noun is the basin;
		try the current action instead.

Instead of drinking or eating or tasting or kissing a drain (called hole):
	if the hole is included by a sink (called basin):
		try eating the basin.

Instead of entering underneath a drain (called hole):
	if the hole is included by a sink (called basin):
		try entering underneath the basin.

Instead of flushing or emptying a drain: say "[nnt][The noun] [are] perfectly capable of flushing itself out."
Instead of giving something to a drain: try inserting the noun into the second noun.

Instead of inserting something into a drain (called hole):
	if the hole is included by something (called basin):
		try inserting the noun into the basin instead.

Instead of looking under a drain: try searching the noun.
Instead of opening or closing a drain: say "[nnt][The noun] didn't come with a plug."
Instead of placing something under a drain: try inserting the noun into the second noun.

Instead of pulling or pushing or turning a drain:
	if the noun is closed, try opening the noun;
	otherwise try closing the noun.

Instead of pushing a drain to: try pushing the noun.
Instead of putting something on a drain: try inserting the noun into the second noun.
Instead of removing something from a drain: try taking the noun.
Instead of rubbing or touching or squeezing a drain: say "[nnt]It would be a bit awkward to attempt that, and the effort likely wouldn't yield any useful information."
Instead of searching a drain: say "[The noun] [are] empty, [if it's Daytime]as far as you can tell[otherwise]or at least won't contain anything useful[end if]."
Instead of showing something to a drain: try inserting the noun into the second noun.
Instead of smelling a drain: say "[if it's Daytime][regarding the noun][They] [don't][otherwise]You suspect [regarding the noun][they] won't[end if] smell like much of anything."
Instead of switching off a drain: try closing the noun.
Instead of switching on a drain: try opening the noun.
Instead of throwing something at a drain: try inserting the noun into the second noun.

Instead of washing a drain (called hole):
	if the hole is included by a sink (called basin):
		try washing the basin.
		
Instead of waving a drain: try swinging the noun.

Section 4 - Drawers

[NOTE: A good amount of the code around disambiguation and automation came from Automated Drawers by Emily Short. I chose not to include the entire extension because it makes some additional assumptions and alterations to the understanding of numbers that would have made things a bit complex for me.]

A drawer is a kind of container. A drawer is usually openable and closed. Understand "[something related by reversed incorporation] drawer" as a drawer. Understand "drawer of [something related by reversed incorporation]" as a drawer. Understand "drawers" as the plural of drawer. The bulk-capacity of a drawer is usually 15.
Understand the open property as describing a drawer. Understand "shut" as closed.
A thing can be drawered. A thing is seldom drawered.
Does the player mean doing something to a drawer (this is the deprioritize drawers rule): it is unlikely.
A drawer has some text called the described-position.

Rule for printing the name of a drawer (called target) while asking which do you mean (this is the abbreviating drawer names for special situations rule):
	let N be the number of things which incorporate matched drawers;
	if N is 1:
		if target is fourth dresser drawer or target is second desk drawer:
			say "[described-position of target] drawer" (A);
		otherwise:
			say "[described-position of target]" (B);
	otherwise if the number of matched drawers is N:
		say "drawer of [the random thing which incorporates the target]" (C);
	otherwise if the number of matched drawers is greater than four:
		say "[described-position of target]" (D);
	otherwise:
		say "[described-position of target] drawer of [the random thing which incorporates the target]" (E).
		
[Rule for clarifying the parser's choice of a drawer (called target) when everything matched is a drawer (this is the very specific parser choice of drawers rule):
	let N be the number of things which incorporate a matched drawer;
	if N is 1:
		make no decision;
	otherwise:
		say "([the target] of [the random thing which incorporates the target])[command clarification break]" (A).]
		
Does the player mean opening a closed drawer (this is the prefer to open closed drawers rule): it is very likely.
Does the player mean opening an open drawer (this is the avoid opening open drawers rule): it is very unlikely.
Does the player mean closing an open drawer (this is the prefer to close open drawers rule): it is very likely.
Does the player mean closing a closed drawer (this is the avoid closing closed drawers rule): it is very unlikely.

Instead of an actor opening something which incorporates exactly one closed drawer (called the target) (this is the pick one drawer for opening rule): try the actor opening the target.

After reading a command (this is the no drawers nearby rule):
	if the player's command includes "drawer":
		let N be the number of drawers enclosed by the location;
		if N is 0:
			say "There [adapt the verb are from the third person plural] no drawers in reach.";
			reject the player's command.
	
Rule for asking which do you mean when everything matched is a drawer (this is the identify drawers by ordinals when disambiguating rule):
	let N be the number of matched things enclosed by the location;
	if N > 0:
		say "Which drawer do you mean, the [nobr]";
		repeat with sel running from 1 to N:
			say "[ordinal of sel][nobr]";
			if sel is N minus 1:
				if sel is 1:
					say " or the [nobr]";
				otherwise:
					say ", or [nobr]";
			otherwise if sel is N:
				say "?";
			otherwise:
				say ", [nobr]";
	otherwise:
		say "There [adapt the verb are from the third person plural] no drawers in reach."

To say ordinal of (N - a number):
	if N is a number listed in the Table of Ordinals:
		choose row with a number of N in the Table of Ordinals;
		say ordinal entry;
		
Table of Ordinals
number	ordinal
1	"first"
2	"second"
3	"third"
4	"fourth"

[NOTE: Ordinal code adapted from Assorted Text Generation by Emily Short]

Instead of an actor opening something which incorporates less than one closed drawer (this is the can't open what is completely open rule):
	if the noun incorporates an open drawer:
		let N be the number of open drawers incorporated by the noun;
		if the player is the actor:
			take no time;
			say "[regarding the open drawers incorporated by the noun][if N is 1]The drawer [are][otherwise if N is 2]Both drawers [are][otherwise]Every drawer [are][end if] open already." (A);
	otherwise:
		continue the action;
		
Instead of an actor closing something which incorporates exactly one open drawer (called the target)  (this is the pick one drawer for closing rule): try the actor closing the target.

Instead of an actor closing something which incorporates less than one open drawer (this is the can't close what is completely closed rule):
	if the noun incorporates a closed drawer:
		let N be the number of closed drawers incorporated by the noun;
		if the player is the actor:
			take no time;
			say "[regarding the noun][if N is 1]The drawer [are][otherwise if N is 2]Both drawers [are][otherwise]Every drawer [are][end if] closed already." (A);
	otherwise:
		continue the action.
		
Last carry out examining a drawered thing (this is the describe drawered objects rule):
	carry out the describing the drawer layout activity with the noun.

Describing the drawer layout [of] something is an activity.

Rule for describing the drawer layout of something (called special-target) (this is the list total drawers rule):
	say "[The special-target] has [the number of drawers which are part of the special-target in words] drawer[s]. " (A);
	
After describing the drawer layout of something (called special-target) (this is the list open drawers rule):
	let O be the number of open drawers which are part of the special-target;
	let C be the number of closed drawers which are part of the special-target;
	let N be indexed text;
	if O is greater than C and C is greater than zero:
		let N be "[C in words] [if C is 1][adapt the verb are from the third person singular][otherwise][adapt the verb are from the third person plural][end if] closed, and the other [O in words] [adapt the verb are from the third person plural] open."; 
		say "[N in sentence case][paragraph break]" (A);
	otherwise:
		let N be "[if O is 0 and C is 2]Neither[otherwise if O is 0]None[otherwise if O is 2 and C is 0]Both[otherwise][O in words][end if] [if O is 1][adapt the verb are from the third person singular][otherwise if O is 0 and C is 2][adapt the verb are from the third person singular][otherwise][adapt the verb are from the third person plural][end if] open."; 
		say "[N in sentence case][paragraph break]" (B).

After searching something which incorporates a drawer (this is the search opens all drawers rule):
	repeat with item running through drawers which are part of the noun:
		if the item is closed:
			try opening the item;
		otherwise:
			try searching the item; 
	continue the action.

Instead of attacking or burning or cutting a drawer: say "[no time][We] [have] no reason to destroy [the noun]."
Instead of assaulting a drawer with: try attacking the noun.
Instead of climbing or entering a drawer: say "[no time][The noun] [are] unlikely to hold your weight."
Instead of crouching behind or sitting behind or slipping behind or lying behind or entering underneath a drawer: say "[nnt][We] [can't] access the space behind it."
Instead of drinking or eating or tasting or kissing a drawer: say "[no time]You doubt [the noun] would taste very good."
Instead of giving something to a drawer: try inserting the noun into the second noun.
Instead of locking a drawer with: say "[nnt][The noun] doesn't have a lock."
Instead of locking keylessly a drawer: say "[nnt][The noun] doesn't have a lock."
Instead of looking behind a drawer: say "[We] [can't] see into the space behind it."
Instead of looking under a drawer: say "[nnt]There's no false bottom[if it's Nighttime], as far as you know[end if]."

Instead of pulling or pushing or turning a drawer:
	if the noun is closed:
		try opening the noun;
	otherwise:
		try closing the noun.

Instead of putting something on a drawer: try inserting the noun into the second noun.
Instead of removing something from a drawer: try taking the noun.
Instead of rubbing or touching or squeezing a drawer: say "[regarding the noun][They] [feel] like normal wood[if it's Nighttime], as far as you know[end if]."
Instead of showing something to a drawer: try inserting the noun into the second noun.
Instead of sitting on or standing up on a drawer: say "[nnt][The noun] [are] unlikely to hold your weight."
Instead of smelling a drawer: say "It doesn't have much of a smell[if it's Nighttime], as far as you know[end if]."
Instead of stowing something behind a drawer: try inserting the noun into the second noun.
Instead of taking or waving a drawer: say "[nnt][if it's Daytime]It's probably not[otherwise]It probably won't be[end if] worth taking the whole drawer; better to take the things inside."
Instead of throwing something at a drawer: try inserting the noun into the second noun.
Instead of unlocking a drawer with: say "[nnt][The noun] doesn't have a lock."
Instead of unlocking keylessly a drawer: say "[nnt][The noun] doesn't have a lock."
Instead of wearing a drawer: say "[nt]Drawers don't tend to make for comfortable clothing."

The standard implicit taking rule does nothing when the noun is a drawer.

Section 5 - Pockets

A pocket is a kind of container. A pocket is usually eclipsing, open, and not openable. Understand "[something related by reversed incorporation] pocket/pockets" as a pocket. The bulk-capacity of a pocket is usually 5.

Instead of consulting a pocket about: try searching the noun.
Instead of entering a pocket: say "[no time]There's no way [if it's Daytime]you'll[otherwise]you'd[end if] fit."
Instead of giving something to a pocket: try inserting the noun into the second noun.
Instead of looking behind or looking under a pocket: try searching the noun.
Instead of opening or closing or pulling or pushing or turning a pocket: say "[nnt]It [adapt the verb make from the third person singular] little difference."
Instead of placing something under a pocket: try inserting the noun into the second noun.
Instead of pushing a pocket to: try pushing the noun.
Instead of putting something on a pocket: try inserting the noun into the second noun.
Instead of removing a pocket from: try taking the noun.
Instead of removing something from a pocket: try taking the noun.
Instead of showing something to a pocket: try inserting the noun into the second noun.
Instead of stowing something behind a pocket: try inserting the noun into the second noun.
Instead of throwing something at a pocket: try inserting the noun into the second noun.

Section 6 - Wastebaskets

A wastebasket is a kind of container. A wastebasket is usually open and not openable. Understand "waste" or "basket" or "trash/can/trashcan" or "garbage/bin/garbagebin" as a wastebasket. A wastebasket is usually bulky. The bulk-capacity of a wastebasket is usually 20.
Rule for deciding whether all includes a wastebasket: it does not.

Instead of attacking or burning or cutting a wastebasket:
	if it's Daytime, say "[We] [have] no reason to destroy [the noun].";
	otherwise say "[nt]You see no way that destroying [the noun] would help in that situation."

Instead of assaulting a wastebasket with: try attacking the noun.
Instead of climbing or crouching on or lying on or sitting on or standing up on a wastebasket: say "[no time]You[if it's Daytime][']d rather not[otherwise] suspect you won't want to[end if] test the limits of [the noun]'s weight capacity[if it's Daytime], today of all days[otherwise] in such a high-stakes situation[end if]."
Instead of crouching behind or entering underneath or lying behind or sitting behind or slipping behind a wastebasket: say "[nnt][The noun] [aren't] capable of concealing much, let alone you."
Instead of drinking or eating or tasting or kissing a wastebasket: say "[nnt]Given the kind of thing typically found inside [the noun], [if it's Nighttime]you suspect [end if]you'd [if it's Daytime]really [end if]rather not."
Instead of entering a wastebasket: say "[nnt]You [if it's Daytime]doubt you'd[otherwise]don't think you'd[end if] fit inside [the noun]."
Instead of giving something to a wastebasket: try inserting the noun into the second noun.
Instead of listening to a wastebasket: say "[no time]Trash cans aren't known for their noisiness."
Instead of locking a wastebasket with: try locking keylessly the noun.
Instead of locking keylessly a wastebasket: say "[no time][if it's Nighttime]You know [the noun][otherwise][The noun][end if] doesn't lock."
Instead of looking behind a wastebasket: say "[no time][The noun] [adapt the verb are in the present tense]n't really capable of concealing anything behind [regarding the noun][themselves]."
Instead of looking under a wastebasket: say "[no time][The noun] [adapt the verb are in the present tense]n't really capable of concealing anything under [regarding the noun][themselves]."
Instead of placing something under a wastebasket: try inserting the noun into the second noun.
Instead of pulling or pushing or turning a wastebasket: say "[nnt]It [adapt the verb make from the third person singular] little difference."
Instead of pushing a wastebasket to: try pushing the noun.
Instead of putting something on a wastebasket: try inserting the noun into the second noun.
Instead of removing something from a wastebasket: try taking the noun.
Instead of showing something to a wastebasket: try inserting the noun into the second noun.
Instead of smelling a wastebasket: say "[no time][if it's Daytime]Probably not[otherwise]That probably wouldn't be[end if] the best idea, given the kinds of things that one tends to find in wastebaskets."
Instead of stowing something behind a wastebasket: try inserting the noun into the second noun.
Instead of taking a wastebasket: say "[no time]It probably [if it's Daytime]isn't[otherwise]won't be[end if] worth carrying [the noun] around."
Instead of throwing something at a wastebasket: try inserting the noun into the second noun.
Instead of unlocking a wastebasket with: try unlocking keylessly the noun.
Instead of unlocking keylessly a wastebasket: say "[no time][if it's Nighttime]You know [the noun][otherwise][The noun][end if] doesn't lock."
Instead of waving a wastebasket: try swinging the noun.

Instead of inserting a dish into a wastebasket: say "Dishes don't go in the trash!"
Instead of inserting silverware into a wastebasket: say "Silverware doesn't go in the trash!"

Chapter 3 - Supporters

Section 1 - Chairs

A chair is a kind of enterable supporter. A chair is usually fixed in place. A chair is usually bulky. A chair is always seated. Understand "chairs" as the plural of chair.

Does the player mean sitting on a chair: it is likely.

Check sitting down (this is the prefer sitting on chairs over the floor rule):
	if a chair is touchable:
		if the holder of the player is the location:
			try sitting on a random touchable chair instead.

The can't use inappropriate postures rule does nothing when the holder of the player is a chair.

Does the player mean getting off a supporter (called the chaise):
	if the chaise encloses the player, it is likely;
	it is unlikely.
	
Rule for clarifying the parser's choice of a chair while getting off: do nothing.

Before entering a chair:
	repeat with obj running through visible things:
		if obj is not the intruder, now obj is mentioned.

Instead of attacking or burning or cutting a chair:
	if it's Daytime, say "[We] [have] no reason to destroy [the noun].";
	otherwise say "[nt]You see no way that destroying [the noun] would help in that situation."

Instead of assaulting a chair with: try attacking the noun.
Instead of climbing a chair: try sitting on the noun.

Instead of crouching behind a chair:
	follow the implicitly leave chairs rule;
	if the noun incorporates a backside:
		silently try slipping behind the noun;
		if the holder of the player is a backside:
			if the holder of the player does not allow crouched:
				say "[We] [are] able to slip behind [the noun], but crouching down in the space [adapt the verb prove from the third person singular] too tricky.";
				stop the action;
			otherwise:
				silently try taking position crouched;
				if the posture of the player is crouched:
					say "[We] [crouch] down behind [the noun].";
		otherwise:
			say "[We] [are] unable to slip behind [the noun].";
			stop the action;
	otherwise:
		silently try taking position crouched;
		if the posture of the player is crouched:
			now the noun obscures the player;
			say "[We] [crouch] down behind [the noun].";
		otherwise:
			stop the action.

Instead of crouching on a chair:
	follow the implicitly enter chairs rule;
	if the holder of the player is the noun:
		if the holder of the player does not allow crouched:
			say "[We] [are] able to get on [the noun], but crouching on [regarding the noun][them] [adapt the verb prove from the third person singular] too tricky.";
			stop the action;
		otherwise:
			silently try taking position crouched;
			if the posture of the player is crouched:
				say "[We] [crouch] atop [the noun].";
	otherwise:
		stop the action.

Instead of drinking or eating or tasting or kissing a chair: say "[nnt]You doubt [the noun] would taste very good."
Instead of entering underneath a chair (this is the no going under chairs rule): say "[nnt]There [regarding the noun][aren't] enough room under [the noun]. You're small, but not [i]that[/i] small."
Instead of giving something to a chair: try putting the noun on the second noun.
Instead of inserting something into a chair: try putting the noun on the second noun.
	
Instead of lying behind a chair:
	follow the implicitly leave chairs rule;
	if the noun incorporates a backside:
		silently try slipping behind the noun;
		if the holder of the player is a backside:
			if the holder of the player does not allow reclining:
				say "[We] [are] able to slip behind [the noun], but lying down in the space [adapt the verb prove from the third person singular] too tricky.";
				stop the action;
			otherwise:
				silently try taking position reclining;
				if the posture of the player is reclining:
					say "[We] [lie] down behind [the noun].";
		otherwise:
			say "[We] [are] unable to slip behind [the noun].";
			stop the action;
	otherwise:
		silently try taking position reclining;
		if the posture of the player is reclining:
			now the noun obscures the player;
			say "[We] [lie] down behind [the noun].";
		otherwise:
			stop the action.

Instead of lying on a chair:
	follow the implicitly enter chairs rule;
	if the holder of the player is the noun:
		if the holder of the player does not allow reclining:
			say "[We] [are] able to get on [the noun], but lying down on [regarding the noun][them] [adapt the verb prove from the third person singular] too tricky.";
			stop the action;
		otherwise:
			silently try taking position reclining;
			if the posture of the player is reclining:
				say "[We] [lie] down on [the noun].";
	otherwise:
		stop the action.

Instead of placing something under a chair: say "[nnt]It [adapt the verb make from the third person singular] little difference where on the floor [the noun] [are]."

Instead of pulling or pushing or turning a chair (this is the can't move chairs rule):	if it's Daytime, say "It [adapt the verb make from the third person singular] little difference[unicode 8212][the noun] [are] too heavy for you to effectively move on your own.";
	otherwise say "[one of][We] will try, but[or][nt][We][stopping] [can't][unicode 8212][the noun] [are] too heavy for you to effectively move on your own."

Check pushing a chair to: unless the noun is the rolling office chair, try pushing the noun instead.
Instead of removing something from a chair: try taking the noun.
Instead of showing something to a chair: try putting the noun on the second noun.

Instead of sitting behind a chair:
	follow the implicitly leave chairs rule;
	if the noun incorporates a backside:
		silently try slipping behind the noun;
		if the holder of the player is a backside:
			if the holder of the player does not allow seated:
				say "[We] [are] able to slip behind [the noun], but sitting down in the space [adapt the verb prove from the third person singular] too tricky.";
				stop the action;
			otherwise:
				silently try taking position seated;
				if the posture of the player is seated:
					say "[We] [sit] down behind [the noun].";
		otherwise:
			say "[We] [are] unable to slip behind [the noun].";
			stop the action;
	otherwise:
		silently try taking position seated;
		if the posture of the player is seated:
			now the noun obscures the player;
			say "[We] [sit] down behind [the noun].";
		otherwise:
			stop the action.

Check slipping behind a chair: unless the noun incorporates a backside, try crouching behind the noun instead.

Instead of standing up on a chair:
	follow the implicitly enter chairs rule;
	if the holder of the player is the noun:
		if the holder of the player does not allow standing:
			say "[We] [are] able to get on [the noun], but standing up on [regarding the noun][them] [adapt the verb prove from the third person singular] too tricky.";
			stop the action;
		otherwise:
			silently try taking position standing;
			if the posture of the player is standing:
				say "[We] [stand] up on [the noun].";
	otherwise:
		stop the action.

Check stowing something behind a chair:
	unless the second noun incorporates a backside:
		say "The best [if it's Daytime]you're[otherwise]you'll be[end if] able to do is put [the noun] on the ground near [the second noun].";
		if it's Daytime:
			try dropping the noun instead;
		otherwise:
			try depositing the noun instead.

Instead of taking a chair: say "[one of][or][nnt][stopping][The noun] [are] too heavy for you to pick up."
Instead of throwing something at a chair: try putting the noun on the second noun instead.

This is the implicitly enter chairs rule: unless the player is on the noun, silently try entering the noun.
This is the implicitly leave chairs rule: if the player is on the noun, silently try getting off the noun.

The prior-named seat is a chair that varies. The prior-named seat is the barstools.

Before when the noun is a chair: now the prior-named seat is the noun.
Before when the second noun is a chair: now the prior-named seat is the second noun.

Before sitting down (this is the prefer sitting on chairs rule):
	if the holder of the player is a room:
		if the prior-named seat is touchable:
			say "(on [the prior-named seat])[ccbr]" (A);
			try sitting on the prior-named seat instead;
		otherwise if a chair is touchable:
			let the chosen seat be a random touchable chair;
			say "(on [the chosen seat])[ccbr]" (B);
			try sitting on the chosen seat instead;
		otherwise if the location is Main-Bed:
			say "(on the bed)[ccbr]" (C);
			try sitting on the bed instead;
		otherwise:
			say "(on the floor)[ccbr]" (D);

Section 2 - Hooks

A hook is a kind of supporter. A hook is usually scenery. Understand "hook" as a hook.

Instead of putting something which is not hangable on a hook (this is the limiting hooks to hangables rule):
	say "[nnt][The noun] [are] unlikely to stay hung up." (A).
	
Instead of attacking or burning or cutting a hook:
	if it's Daytime, say "[We] [have] no reason to destroy [the noun].";
	otherwise say "[nt]You see no way that destroying [the noun] would help in that situation."

Instead of assaulting a hook with: try attacking the noun.
Instead of climbing or crouching on or entering or lying on or sitting on or standing up on a hook: say "[nnt][The noun] [are] unlikely to hold your weight."
Instead of drinking or eating or tasting or kissing a hook: say "[no time]You doubt [the noun] would taste very good."
Instead of giving something to a hook: try putting the noun on the second noun.
Instead of inserting something into a hook: try putting the noun on the second noun.

Instead of placing something under a hook:
	if it's Daytime, try dropping the noun;
	otherwise try depositing the noun.

Instead of pulling or pushing or turning a hook: say "[nnt]It [adapt the verb make from the third person singular] little difference."
Instead of pushing a hook to: try pushing the noun.
Instead of removing something from a hook: try taking the noun.
Instead of showing something to a hook: try putting the noun on the second noun.
Instead of smelling a hook: say "[regarding the noun][They] [don't in the present] smell like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of stowing something behind a hook: try putting the noun on the second noun.
Instead of throwing something at a hook: try putting the noun on the second noun.
Instead of tying something to a hook: try putting the noun on the second noun.

Chapter 4 - Devices

Section 1 - Lightswitches

A lightswitch is a kind of device. Understand "lightswitch" or "light switch" or "switch" as a lightswitch. The printed name of a lightswitch is usually "lightswitch". A lightswitch is always scenery. 
The description of a lightswitch is usually "A lightswitch, just like any other. [if it's Daytime]It's currently[otherwise][regarding the noun][They] [are][end if] switched [if the noun is switched on]on[otherwise]off[end if]."
The examine devices rule does nothing when the noun is a lightswitch.

Carry out switching on a lightswitch (this is the switch on lights with their switches rule):
	if the noun is wired to something (called the brightener):
		repeat with place running through rooms illuminated by the brightener:
			now place is brightened.
			
Carry out switching off a lightswitch (this is the switch off lights with their switches rule):
	if the noun is wired to something (called the dimmer):
		repeat with place running through rooms illuminated by the dimmer:
			now place is dim.

Instead of attacking or burning or cutting a lightswitch: say "[no time]That would be a great way to ensure you never see your security deposit again."
Instead of assaulting a lightswitch with: try attacking the noun.
Instead of climbing or crouching on or lying on or sitting on or standing up on a lightswitch: try climbing the bare walls.
Instead of crouching behind or entering underneath or lying behind or sitting behind or slipping behind a lightswitch: say "[no time][The noun] [can't] meaningfully conceal you."
Instead of drinking or eating or tasting or kissing a lightswitch: say "[no time]Light switches aren't typically meant for consumption[if the noun is switched on][unicode 8212]besides, trying while it's switched on would likely be dangerous[end if]."
Instead of entering a lightswitch: try entering the bare walls.
Instead of knocking on a lightswitch: try knocking on the bare walls.
Instead of listening to a lightswitch: say "[no time][The noun] [remain] stubbornly silent."
Instead of looking behind or looking under or searching a lightswitch: say "[no time][The noun] [can't] meaningfully conceal much."

Instead of opening or closing a lightswitch:
	if the noun is switched off, try switching on the noun;
	otherwise try switching off the noun.

Instead of pulling or pushing or turning a lightswitch:
	if the noun is switched off, try switching on the noun;
	otherwise try switching off the noun.

Instead of pushing a lightswitch to: try pushing the noun.

Instead of rebooting a lightswitch:
	if the noun is switched off:
		try switching on the noun;
	otherwise:
		silently try switching off the noun;
		silently try switching on the noun;
		say "You[if it's Nighttime][']ll[end if] switch the lights off and back on again."

Instead of rubbing or touching or squeezing a lightswitch: say "[if it's Daytime]It feels[otherwise]It'll probably feel[end if] about how you'd expect."
Instead of smelling a lightswitch: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of taking a lightswitch: say "[nnt]You're no electrician, and [regarding the player][can't] easily remove the switch from the wall."

Instead of waking a lightswitch:
	if the noun is switched off, try switching on the noun;
	otherwise try switching off the noun.
	
Report switching off a lightswitch: say "[We] [flip] the switch, and the lights [adapt the verb switch from the third person plural] off." instead.
Report switching on a lightswitch: say "[We] [flip] the switch, and the lights [adapt the verb switch from the third person plural] on." instead.

Section 2 - Other switches

[NOTE: Both the "switch" and "tap" kinds are pulled from Modern Conveniences]
A switch is a kind of device. Understand "[something related by reversed incorporation] switch" as a switch.

Instead of attacking or burning or cutting a switch:
	if it's Daytime, say "[We] [have] no reason to destroy [the noun].";
	otherwise say "[nt]You see no way that destroying [the noun] would help in that situation."

Instead of assaulting a switch with: try attacking the noun.

Before climbing or crouching on or crouching behind or entering or entering underneath or looking behind or looking under or lying behind or lying on or sitting behind or sitting on or slipping behind or standing up on a switch (called lever) (this is the redirect from switches to their apparati rule):
	if lever is included by something (called gadget):
		if lever is the noun, now the noun is gadget;
		if lever is the second noun, now the second noun is gadget;
		try the current action instead.

Instead of drinking or eating or tasting or kissing a switch: say "[nnt]Such things aren't typically meant for consumption."
Instead of giving something to a switch: try inserting the noun into the second noun.

Instead of inserting something into a switch (called lever):
	if lever is included by something (called gadget):
		try inserting the noun into gadget.

Instead of opening or closing or pulling or pushing or turning a switch:
	if the noun is switched on, try switching off the noun;
	otherwise try switching on the noun.

Instead of placing something under a switch (called lever):
	if lever is included by something (called gadget):
		if lever is a tap:
			try inserting the noun into gadget;
		otherwise:
			try placing the noun under gadget.

Instead of pushing a switch to: try pushing the noun.

Instead of putting something on a switch (called lever):
	if lever is included by something (called gadget):
		try putting the noun on gadget.

Instead of rebooting a switch:
	if the noun is switched off:
		try switching on the noun;
	otherwise:
		silently try switching off the noun;
		silently try switching on the noun;
		if the noun is part of something (called the corpus):
			say "[We] [switch] [the corpus] off and back on again.";
		otherwise:
			say "[We] [switch] [the noun] off and back on again."

Instead of removing a switch from: try taking the noun.
Instead of removing something from a switch: try taking the noun.
Instead of rubbing or touching or squeezing a switch: say "[if it's Daytime]It feels[otherwise]It'll probably feel[end if] about how you'd expect."
Instead of setting a switch to: say "[no time]You[if it's Nighttime][']ll[end if] really only need to switch [regarding the noun][them] on or off."

Instead of showing something to a switch (called lever):
	if lever is included by something (called gadget):
		if gadget is a container:
			try inserting the noun into gadget;
		otherwise:
			try putting the noun on gadget.

Instead of smelling a switch: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."

Instead of stowing something behind a switch (called lever):
	if lever is included by something (called gadget):
		try stowing the noun behind gadget.

Instead of throwing something at a switch (called lever):
	if lever is included by something (called gadget):
		try throwing the noun at gadget.

A tap is a kind of switch. Understand "faucet" or "taps" as a tap. Understand "[something related by reversed incorporation] tap/faucet/taps" as a tap. Understand "water" as a touchable tap when the item described is switched off. The bulk of a tap is usually 0.

A description-concealing rule (this is the don't say taps are in sinks rule): 
	now every tap is not marked for listing.

Instead of emptying a tap: try switching on the noun.
Instead of flushing a tap: try switching on the noun.

Instead of listening to a tap:
	if the noun is switched off, say "[regarding the noun][They] [aren't] making any noise [if it's Daytime]at the moment[otherwise]by that point[end if].";
	otherwise say "Water [adapt the verb rush from the third person singular] from the faucet."

Instead of washing a tap: say "[nnt]Faucets are more traditionally used to wash [i]other[/i] things."

The examine devices rule does nothing when the noun is a tap.

After reading a command (this is the redirect drinking unavailable water rule):
	if the player's command includes "drink" and the player's command includes "water":
		repeat with font running through touchable taps:
			if font is switched on, make no decision;
		say "The faucet [adapt the verb are from the third person singular][if it's Daytime] currently[end if] switched off[if it's Nighttime] by that point[end if].";
		reject the player's command.

Chapter 5 - Plugs and sockets

A firebolt plug is a kind of PS-plug. The PS-type of a firebolt plug is "firebolt".
A firebolt socket is a kind of PS-socket. The PS-type of a firebolt socket is "firebolt".
[NOTE: For the phone charger]

A USB-C plug is a kind of PS-plug. The PS-type of a USB-C plug is "USB-C".
A USB-C socket is a kind of PS-socket. The PS-type of a USB-C socket is "USB-C".
[NOTE: For the computer charger]

The bulk of a PS-plug is usually 0. The bulk of a PS-socket is usually 0.
	
Book 4 - New actions

Part 1 - In-world

Chapter 1 - Assaulting with

Assaulting it with is an action applying to two things. Understand "attack [something] with [something]" or "burn [something] with [something]" or "cut [something] with [something]" as assaulting it with. Understand "push [something] into/at [something]" as assaulting it with.

Check assaulting with (this is the only assault people with rule):
	unless the noun is a person:
		take no time;
		say "[if it's Nighttime]There would be[else]There's[end if] no reason to damage [the noun]." (A) instead.

Check assaulting with (this is the only assault with deadly or incapacitating things rule):
	if the second noun is not deadly and the second noun is not incapacitating:
		take no time;
		say "You doubt [the second noun] would make for an effective weapon." (A) instead.

potentially-ranged is a truth state that varies. potentially-ranged is false.
potentially-bloody is a truth state that varies. potentially-bloody is false.

Before throwing something at (this is the allow ranged attacks rule):
	if the noun is sharp:
		now potentially-bloody is true;
	now potentially-ranged is true.

Before assaulting something with something sharp (this is the sharp things draw blood rule): now potentially-bloody is true.

Last every turn (this is the reset attack variables rule):
	now potentially-ranged is false;
	now potentially-bloody is false.

Attack-distance is a kind of value. The attack-distances are melee and ranged.
The assaulting it with action has an attack-distance called the effective distance.

Setting action variables for assaulting something with:
	if potentially-ranged is true, now the effective distance is ranged;
	otherwise now the effective distance is melee.
	
The murder weapon is a thing that varies.

Last carry out assaulting with (this is the assign murder weapon rule): now the murder weapon is the second noun.

Chapter 2 - Bathing, Washing, and Rinsing with

Bathing is an action applying to nothing. Understand "bathe" or "wash" as bathing.

After reading a command (this is the convert taking baths to bathing rule):
	if the player's command matches "take shower" or the player's command matches "take a shower" or the player's command matches "take bath" or the player's command matches "take a bath":
		replace the player's command with "bathe".

The bathing action has an object called the faucet bathed with.

Setting action variables for bathing:
	if the location is Bathroom, now the faucet bathed with is tub-faucet.

Check an actor bathing (this is the restrict baths to the bathroom rule):
	if the location is not Bathroom:
		if the player is the actor:
			take no time;
			say "[There's] no good source of fresh water for bathing [if it's Daytime]here[otherwise]nearby. Besides, bathing won't exactly be your top priority in the moment[end if]." (A) instead;
		stop the action.

Check an actor bathing (this is the block bathing rule):
	if the player is the actor:
		if it's Daytime:
			say "You're too tired to worry about bathing right now. It can wait for the morning. It's fine." (A) instead;
		otherwise:
			take no time;
			say "You suspect bathing won't exactly be your top priority in the moment." (B) instead;
	stop the action.
	
Understand the command "clean" as something new.
	
Washing is an action applying to one thing. Understand "clean [something]" or "wet [something]" or "wash [something]" as washing.

Instead of an actor washing the actor (this is the convert washing yourself to bathing rule): try the actor bathing.

Check an actor washing (this is the restrict washing to the proximity of sinks rule):
	if the actor can touch a tap:
		do nothing;
	otherwise:
		if the player is the actor:
			take no time;
			say "[There's] no good source of fresh water for washing." (A) instead;
		stop the action;

Check an actor washing (this is the block washing rule):
	if the player is the actor and the noun is not a knife:
		take no time;
		say "[regarding nothing]It [don't] seem worth the bother." (A) instead;
	stop the action.
	
Rinsing it with is an action applying to two things. Understand "wash [something preferably held] with [something]" or "wet [something preferably held] with [something]" or "clean [something preferably held] with [something]" as rinsing it with.

Check rinsing it with (this is the limit what can rinse rule):
	unless the second noun is a sink or the second noun is a tap:
		take no time;
		say "[The second noun] [can't] be used to wash things." (A) instead.

Last check rinsing it with (this is the convert rinsing to washing rule): try washing the noun instead.

Handwashing is an action applying to nothing. Understand "wash hand/hands" or "handwash" or "handswash" or "hand wash" or "hands wash" or "clean hand/hands" or "wet hand/hands" as handwashing.

Check an actor handwashing (this is the restrict handwashing to the proximity of sinks rule):
	if the actor can touch a tap:
		do nothing;
	otherwise:
		if the player is the actor:
			take no time;
			say "[There's] no good source of fresh water for handwashing." (A) instead;
		stop the action;

Check an actor handwashing (this is the block handwashing rule):
	if the player is the actor and the noun is not a knife:
		take no time;
		if it's Daytime:
			say "[regarding nothing]It [don't] seem worth the bother." (A) instead;
		otherwise:
			say "You doubt handwashing will be your top priority, under the circumstances." (B) instead;
	stop the action.

Chapter 3 - Calling, Dialing, Ringing, and Buzzing
[NOTE: All of these actions use the same grammar, but are included to allow the player the most flexibility in phone use.
"Calling" lets the player contact people by name.
"Ringing" lets the player call phone numbers without area codes, while "Buzzing" lets the player call them with area codes.
"Dialing" lets the player call special numbers, like 911.]

Calling is an action applying to one thing. Understand "call [any thing]" or "dial [any thing]" or "ring [any thing]" as calling.

Check calling (this is the need a phone to call rule):
	unless the player encloses the smartphone:
		take no time;
		say "[It's] hard to make a call without a phone." (A) instead.
		
Check calling (this is the can only call people rule):
	unless the noun is a person:
		take no time;
		say "You [can't exactly] call [the noun] on the phone." (A) instead.
		
Check calling (this is the phone must be switched on to call rule):
	if the smartphone is switched off or the smartphone is protected:
		say "[nnt][We] [can't exactly] make a call with a locked phone." (A) instead.
		
The list of recognized special numbers is a list of numbers that varies. The list of recognized special numbers is { 911, 999 }.

Dialing is an action applying to one number. Understand "dial [number]" or "call [number]" as dialing.

Check dialing (this is the need a phone to dial rule):
	unless the player encloses the smartphone:
		take no time;
		say "[It's] hard to make a call without a phone." (A) instead.
		
Check calling (this is the phone must be switched on to dial rule):
	if the smartphone is switched off or the smartphone is protected:
		say "[nnt][We] [can't exactly] make a call with a locked phone." (A) instead.

Check dialing (this is the can only dial numbers rule):
	if the number understood is not listed in the list of recognized special numbers:
		take no time;
		say "That's not a phone number you know." (A) instead.
	
A phone number is a kind of value. 999-9999 specifies a phone number with parts telephone prefix and line number.

The list of recognized phone numbers is a list of phone numbers that varies. The list of recognized phone numbers is { 555-3845, 555-4663, 867-5309 }.

Ringing is an action applying to one phone number. Understand "dial [phone number]" or "call [phone number]" or "ring [phone number]" as ringing.

Check ringing (this is the need a phone to ring rule):
	unless the player encloses the smartphone:
		take no time;
		say "[It's] hard to make a call without a phone." (A) instead.
		
Check calling (this is the phone must be switched on to ring rule):
	if the smartphone is switched off or the smartphone is protected:
		say "[nnt][We] [can't exactly] make a call with a locked phone." (A) instead.

Check ringing (this is the can only ring phone numbers rule):
	if the phone number understood is not listed in the list of recognized phone numbers:
		take no time;
		say "That's not a phone number you know." (A) instead.

A telephone number is a kind of value. 999-999-9999 specifies a telephone number with parts area code and telephone prefix and line number.

The list of recognized telephone numbers is a list of telephone numbers that varies. The list of recognized telephone numbers is { 202-555-3845, 212-555-4663 }.
[800-588-2300
877-116-3558 (877-CASH-NOW)]

After reading a command (this is the allow for big numbers to be understood as telephone numbers rule):
	let comm be "[the player's command]";
	while comm matches the regular expression "(\d)(\d)(\d)(\d)(\d)(\d)(\d)(\d)(\d)":
		replace the regular expression "(\d)(\d)(\d)(\d)(\d)(\d)(\d)(\d)(\d)" in comm with "\1\2\3-\4\5\6-\7\8\9";
	change the text of the player's command to comm.

After reading a command (this is the allow for big numbers to be understood as phone numbers rule):
	let comm be "[the player's command]";
	while comm matches the regular expression "(\d)(\d)(\d)(\d)(\d)":
		replace the regular expression "(\d)(\d)(\d)(\d)(\d)" in comm with "\1\2\3-\4\5";
	change the text of the player's command to comm.
	
After reading a command (this is the don't let the above machinery break unlocking the phone rule):
	if the player's command includes "121-994":
		replace the matched text with "121994".

Buzzing is an action applying to one telephone number. Understand "dial [telephone number]" or "call [telephone number]" or "ring [telephone number]" as buzzing.

Check buzzing (this is the need a phone to buzz rule):
	unless the player encloses the smartphone:
		take no time;
		say "[It's] hard to make a call without a phone." (A) instead.
		
Check calling (this is the phone must be switched on to buzz rule):
	if the smartphone is switched off or the smartphone is protected:
		say "[nnt][We] [can't exactly] make a call with a locked phone." (A) instead.

Check buzzing (this is the can only buzz telephone numbers rule):
	if the telephone number understood is not listed in the list of recognized telephone numbers:
		take no time;
		say "That's not a phone number you know." (A) instead.

After deciding the scope of the player while calling or dialing or ringing or buzzing (this is the first allow contacting distant people rule):
	repeat with other party running through people:
		place other party in scope, but not its contents.
		
Rule for reaching inside a room while calling or dialing or ringing or buzzing (this is the second allow contacting distant people rule):
	allow access.

Section 1 - Reports for recognized people and numbers

Instead of calling yourself (this is the block calling yourself rule):
	if it's Daytime:
		say "You don't actually think that's possible to do.";
	otherwise:
		say "You don't actually think that's possible to do, and you doubt it would be useful to experiment with it in the moment.";
	take no time.

Instead of calling the intruder (this is the block calling the intruder rule):
	if it's Daytime, say "You aren't yet aware of anyone who you'd describe as an intruder.";
	otherwise say "[nt]You won't know his phone number."

Instead of ringing 555-3845 (this is the convert ringing brookwood to calling rule): try calling Arthur Brookwood.
Instead of buzzing 202-555-3845 (this is the convert buzzing brookwood to calling rule): try calling Arthur Brookwood.
Instead of calling Arthur Brookwood (this is the calling brookwood rule):
	if it's Daytime, say "You have nothing to report to Brookwood right now.";
	otherwise say "[one of][or][nt][stopping]Brookwood will be in the air by that point, and won't be able to receive the call."

Instead of ringing 555-4663 (this is the convert ringing camille to calling rule): try calling Camille Harmon.
Instead of buzzing 212-555-4663 (this is the convert buzzing camille to calling rule): try calling Camille Harmon.
Instead of calling Camille Harmon (this is the calling camille rule):
	if it's Daytime, say "You have no reason to bother Camille right now.";
	otherwise say "[nt]You doubt Camille would answer her phone outside of work hours."

Instead of calling a familial person (this is the redirect from calling one member to family rule): try calling family.
Instead of calling family (this is the block calling family rule):
	if it's Daytime:
		follow the can't contact family rule;
	otherwise:
		say "You are under strict instructions not to contact any member of your family until they next contact you, and none will be close enough to help anyway.";
	take no time.

Instead of dialing 999 (this is the convert dialing 999 rule): try dialing 911.
Before dialing 911: if it's Daytime, say "You have no reason to contact emergency services." instead.
Instead of dialing 911 (this is the calling 911 rule):
	say "[one of]As you dial the number, you will realize[or]You'll already know[stopping] you can't make the call[unicode 8212]the intruder would hear you talking. [if 911-texted is false]Texting it, on the other hand, might work[otherwise]You've already texted it, anyway[end if]."
	
Report ringing 867-5309 (this is the calling Jenny rule):
	take no time;
	say "You've heard that a scam artist bought that number to sell people's information, so it would be an especially bad idea for you to call it right now."

Chapter 4 - Emptying

Emptying is an action applying to one thing. Understand "empty [something] out/--" or "unload [something]" as emptying.

Before emptying (this is the open before emptying rule):
	if the noun is closed:
		say "(first opening [the noun])[command clarification break]";
		silently try opening the noun;
	make no decision.
	
Check emptying (this is the can't empty if locked rule):
	if the noun is locked, say "[We] [can't] empty [the noun] while [if the noun is plural-named]they're[otherwise]it's[end if] locked." (A) instead.
	
Check emptying (this is the can't empty if closed rule):
	if the noun is closed, say "[We] [can't] empty [the noun] while [if the noun is plural-named]they're[otherwise]it's[end if] closed." (A) instead.

Check emptying (this is the block emptying non-holders rule):
	unless the noun is a container or the noun is a supporter, say "[nt][The noun] [aren't] something [we] [can] empty." (A) instead.
	
Check emptying (this is the can't empty something that's already empty rule):
	if the noun is empty, say "[nt][The noun] [are] empty already." (A) instead.
	
Carry out emptying a container (called bag) (this is the standard emptying containers rule):
	let L be the list of things in bag;
	let M be a list of things;
	let N be a list of things;
	repeat with item running through L:
		if item is listed in the list of things unemptyable:
			remove item from L;
	repeat with obj running through L:
		silently try taking obj;
		if the player carries obj:
			add obj to M, if absent;
		otherwise:
			add obj to N, if absent;
	if M is empty:
		say "[We] [are], it [adapt the verb turn from the third person singular] out, unable to take anything from [the bag]." (A);
	otherwise:
		say "[We] [take] [M with definite articles] from [the bag][if the number of entries in N > 0]. [We] [are] unable to take [the list of things in the bag][end if]." (B).
	
Carry out emptying a supporter (called surface) (this is the standard emptying supporters rule):
	let L be the list of things on surface;
	let M be a list of things;
	let N be a list of things;
	repeat with item running through L:
		if item is listed in the list of things unemptyable:
			remove item from L;
	repeat with obj running through L:
		silently try taking obj;
		if the player carries obj:
			add obj to M, if absent;
		otherwise:
			add obj to N, if absent;
	if M is empty:
		say "[We] [are], it [adapt the verb turn from the third person singular] out, unable to take anything from [the bag]." (A);
	otherwise:
		say "[We] [take] [M with definite articles] from [the surface][if the number of entries in N > 0]. [We] [are] unable to take [the list of things on the surface][end if]." (B).
	
Chapter 5 - Flushing

A thing can be flushable. A thing is seldom flushable.

Flushing is an action applying to one thing. Understand "flush [something]" as flushing.

Check flushing (this is the can only flush if flushable rule):
	unless the noun is flushable, say "[nt]You [can't flush] [the noun]." instead.
	
Chapter 6 - Knocking

Knocking on is an action applying to one thing. Understand "knock on/-- [something]" or "tap on/-- [something]" or "rap on/-- [something]" as knocking on.

Knocking on something is noisy behavior.

knock-desc is some text that varies. knock-desc is "knock".

After reading a command (this is the set knock-desc rule):
	if the player's command includes "knock":
		now knock-desc is "knock";
	otherwise if the player's command includes "rap":
		now knock-desc is "rap";
	otherwise if the player's command includes "tap":
		now knock-desc is "tap";
		
Check knocking on (this is the must be touchable to be knockable rule):
	unless the noun is touchable, say "[We] [can't] reach [the noun], and so [can't] [knock-desc] on [regarding the noun][them]." (A) instead.
		
Report knocking on (this is the standard report knocking rule): say "[We] [if it's Nighttime]will [end if][knock-desc] on [the noun][if it's Nighttime]. The noise will be surprisingly loud in the space[end if]." (A).

Chapter 7 - Reading

Understand the command "read" as something new.

Reading is an action applying to one thing and requiring light. Understand "read [something]" as reading.

First check reading (this is the can't read in the dark rule):
	if in darkness, say "[nnt][We] [can't read] anything in the dark." (A) instead.

[Check reading (this is the convert reading to examining rule):
	unless the noun is legible, try examining the noun instead.]
	
Check reading (this is the can only read legible things rule):
	unless the noun is legible, say "[nnt][if it's Daytime]There's no[otherwise]There won't be any[end if] text on [the noun] to read." (A) instead.

Last report reading (this is the default reading rule):
	say "[We] [skim] the text on [the noun]." (A).
[NOTE: This is a failsafe, which will just catch any things I remember to make legible but forget to add text to.]

Chapter 8 - Ruminating about

Understand the command "think" as something new.

Ruminating about is an action applying to one thing. Understand "think about [any thing]" or "think [any thing]" or "ruminate about [any thing]" or "remember [any thing]" as ruminating about.

Rule for reaching inside a room while ruminating about: allow access.
Rule for reaching inside a closed container while remembering: allow access.

Last check ruminating about (this is the block ruminating rule):
	try remembering the noun instead.
	
Instead of remembering a familial person: try ruminating about the noun.

Nounless ruminating is an action applying to nothing. Understand "think" or "remember" or "ruminate" as nounless ruminating.

Last instead of nounless ruminating during Daytime:
	take no time;
	say "You're too tired to think right now."

Instead of nounless ruminating during Nighttime:
	take no time;
	say "You won't have any time to think[unicode 8212]you'll need to act."
	
Chapter 9 - Setting down
[NOTE: Basically a clone of dropping, but without redirecting to smashing]

Understand the command "put" as something new.

Depositing is an action applying to one thing.

Understand "put on [something preferably held]" as wearing. Understand "put [something preferably held] on" as wearing.
Understand "put [passkey] on [keychain]" as putting it on. Understand "put [latchkey] on [keychain]" as putting it on.
Understand "put [any seen thing] down" as remembering. Understand "put down [any seen thing]" as remembering.
Understand "put [other things] in/inside/into [something]" as inserting it into.
Understand "put [other things] on/onto [something]" as putting it on.
Understand "put [things preferably held] under/beneath/underneath [something]" as placing it under.
Understand "put [things preferably held] behind [something]" as stowing it behind.
Understand "put [things preferably held] down" as dropping when Daytime is happening. Understand "put down [things preferably held]" as dropping when Daytime is happening.
Understand "put [things preferably held] down" as depositing when Nighttime is happening. Understand "put down [things preferably held]" as depositing when Nighttime is happening.

Understand "lay [things preferably held] down" as dropping when Daytime is happening. Understand "lay down [things preferably held]" as dropping when Daytime is happening.
Understand "lay [things preferably held] down" as depositing when Nighttime is happening. Understand "lay down [things preferably held]" as depositing when Nighttime is happening.

Understand "set [things preferably held] down" as dropping when Daytime is happening. Understand "set down [things preferably held]" as dropping when Daytime is happening.
Understand "set [things preferably held] down" as depositing when Nighttime is happening. Understand "set down [things preferably held]" as depositing when Nighttime is happening.

Check an actor depositing (this is the can't deposit yourself rule):
	if the noun is the actor:
		if the actor is the player:
			say "[text of the can't drop yourself rule response (A)]" (A);
		stop the action.

Check an actor depositing something which is part of the actor (this is the can't deposit body parts rule):
	if the actor is the player:
		say "[text of the can't drop body parts rule response (A)]" (A);
	stop the action.

Check an actor depositing (this is the can't deposit what's already deposited rule):
	if the noun is in the holder of the actor:
		if the actor is the player:
			say "[text of the can't drop what's already dropped rule response (A)]" (A);
		stop the action.

Check an actor depositing (this is the can't deposit what's not held rule):
	if the actor is carrying the noun, continue the action;
	if the actor is wearing the noun, continue the action;
	if the actor is the player:
		say "[text of the can't drop what's not held rule response (A)]" (A);
	stop the action.

Check an actor depositing (this is the can't deposit clothes being worn rule):
	if the actor is wearing the noun:
		if the actor is the player:
			say "[text of the can't drop clothes being worn rule response (A)]" (A);
		silently try the actor trying taking off the noun;
		if the actor is wearing the noun, stop the action;

Check an actor depositing (this is the can't deposit if this exceeds carrying capacity rule):
	let the receptacle be the holder of the actor;
	if the receptacle is a room, continue the action;
	if the receptacle provides the property carrying capacity:
		if the receptacle is a supporter:
			if the number of things on the receptacle is at least the carrying capacity of the receptacle:
				if the actor is the player:
					now the prior named object is nothing;
					say "[text of the can't drop if this exceeds carrying capacity rule response (A)]" (A);
				stop the action;
		otherwise if the receptacle is a container:
			if the number of things in the receptacle is at least the carrying capacity of the receptacle:
				if the actor is the player:
					now the prior named object is nothing;
					say "[text of the can't drop if this exceeds carrying capacity rule response (B)]" (B);
				stop the action;

Carry out an actor depositing (this is the standard depositing rule):
	now the noun is in the holder of the actor.

Report an actor depositing (this is the standard report depositing rule):
	if the action is not silent:
	 	if the actor is the player:
			say "[if it's Daytime]Dropped[otherwise]You'll drop [the noun][end if]." (A);
		otherwise:
			say "[The actor] [put] down [the noun]." (B);
	
Chapter 10 - Shooting

Shooting is an action with past participle shot, applying to one thing. Understand "shoot at/-- [something]" or "fire [something]" as shooting.

Check shooting (this is the specify a target rule):
	if the noun is the gun:
		say "[no time]Probably better to shoot at something specific rather than firing the gun willy-nilly." instead.

Check shooting (this is the need a gun to shoot rule):
	unless the player carries the gun, say "[no time][We] [have] nothing to shoot with." instead.

Check shooting (this is the only allow shooting the intruder rule):
	if Nighttime is happening and the noun is not the intruder:
		say "[no time]That would only tear up [the noun] and alert the intruder to your location." instead.

After deciding the scope of the player while shooting (this is the allow shooting into connected rooms rule):
	follow the scopable connectivity rule.

Rule for reaching inside a room (called the otherplace) while shooting (this is the no bullets through walls rule):
	if the otherplace is connected with the location:
		allow access;
	otherwise:
		say "You [can't see] [the noun] from [if it's Nighttime]t[end if]here." (A);
		deny access.

[Add rules to make this actually do something]

Chapter 11 - Smashing

Understand the commands "break" and "smash" and "crack" and "destroy" as something new.

Smashing is an action applying to one thing. Understand "smash [something]" as smashing.
The item smashed with is an object that varies. The item smashed with is nothing.

Understand the commands "break" and "crack" and "destroy" and "shatter" as "smash".

Check smashing: if it's Daytime, try attacking the noun instead.

Check smashing: unless the noun provides the property shattered, try attacking the noun instead.

Chapter 12 - Spinning to

Spinning it to is an action applying to one thing and one number. Understand "spin [something] to [number]" or "turn [something] to [number]" as spinning it to. Understand "dial [something] to [number]" as spinning it to. Understand "dial [number] on [something]" as spinning it to (with nouns reversed).

Check spinning it to (this is the can only spin the safe rule):
	unless the noun is the safe, say "[no time][regarding the noun][Those] [don't] spin." instead.

Setting it numerically to is an action applying to one thing and one number. Understand "set [something] to [a number]" or "tune [something] to [a number]" as setting it numerically to.

Check setting it numerically to (this is the proper grammar for a command of set to rule):
	if the noun is the safe:
		try spinning the safe to the number understood instead;
	otherwise if the noun is the radio:
		continue the action;
	otherwise:
		say "[no time][regarding the noun][Those] [can't] be set to a number." instead.
		
After reading a command (this is the only tune to whole-number stations rule):
	if the player's command includes "tune " or the player's command includes "spin " or the player's command includes "set ":
		let comm be "[the player's command]";
		if comm matches the regular expression "(\d)\.(\d)":
			if the player's command includes "radio":
				say "[if it's Daytime]The[otherwise]If you remember right, the[end if] radio is only capable of tuning to whole-number stations[unicode 8212]it can find 100 or 101, but not 100.5.";
			otherwise if the player's command includes "safe" or the player's command includes "dial" or the player's command includes "knob":
				say "[if it's Daytime]The[otherwise]If you remember right, the[end if] safe only accepts whole numbers.";
			otherwise:
				say "[i][bracket]That number did not make sense in this context.[close bracket][/i][br]";
			reject the player's command.
		
Chapter 13 - Tasing

Tasing is an action applying to one thing. Understand "tase [something]" or "taze [something]" or "taser [something]" as tasing.

Before tasing (this is the need a taser to tase rule):
	unless the player carries the taser, say "[no time][It's] hard to tase some[if the noun is a person]one[otherwise]thing[end if] without a taser." instead.
	
Instead of tasing: try assaulting the noun with the taser.

Chapter 14 - Texting, Messaging, SMSing, and IMing
[NOTE: Like the calling variations above, all of these actions use the same grammar, but are included to allow the player the most flexibility in phone use.
"Texting" lets the player contact people by name.
"Messaging" lets the player text phone numbers without area codes, while "SMSing" lets the player text them with area codes.
"IMing" lets the player text special numbers, like 911.]

Texting is an action applying to one thing. Understand "text [any thing]" or "message [any thing]" as texting.

Check texting (this is the need a phone to text rule):
	unless the player encloses the smartphone or the laptop-computer is in the location:
		take no time;
		say "[if it's Nighttime]It'll be[else]It's[end if] hard to text anyone without a phone." instead.
		
Check texting (this is the can only text people rule):
	unless the noun is a person:
		say "[nnt][The noun] [can't exactly] read a text message." instead.

Check texting (this is the laptop needs to be switched on to text rule):
	if the smartphone is not touchable and the laptop-computer is switched off:
		take no time;
		say "[We] [can't] text anyone with a switched off computer." instead.

IMing is an action applying to one number. Understand "text [number]"  or "message [number]" as IMing.

Check IMing (this is the need a phone to IM rule):
	unless the player encloses the smartphone or the laptop-computer is in the location:
		take no time;
		say "[if it's Nighttime]It'll be[else]It's[end if] hard to text anyone without a phone." instead.
		
Check IMing (this is the laptop needs to be switched on to IM rule):
	if the smartphone is not touchable and the laptop-computer is switched off:
		take no time;
		say "[We] [can't] text anyone with a switched off computer." instead.

Check IMing (this is the can only IM numbers rule):
	if the number understood is not listed in the list of recognized special numbers:
		say "[nnt]That's not a phone number you know." instead.

Messaging is an action applying to one phone number. Understand "text [phone number]"  or "message [phone number]" as messaging.

Check messaging (this is the need a phone to message rule):
	unless the player encloses the smartphone or the laptop-computer is in the location:
		take no time;
		say "[if it's Nighttime]It'll be[else]It's[end if] hard to text anyone without a phone." instead.
		
Check messaging (this is the laptop needs to be switched on to message rule):
	if the smartphone is not touchable and the laptop-computer is switched off:
		take no time;
		say "[We] [can't] text anyone with a switched off computer." instead.

Check messaging (this is the can only message phone numbers rule):
	if the phone number understood is not listed in the list of recognized phone numbers:
		say "[nnt]That's not a phone number you know." instead.

SMSing is an action applying to one telephone number. Understand "text [telephone number]" or "message [telephone number]" as SMSing.

Check SMSing (this is the need a phone to SMS rule):
	unless the player encloses the smartphone or the laptop-computer is in the location:
		take no time;
		say "[if it's Nighttime]It'll be[else]It's[end if] hard to text anyone without a phone." instead.
		
Check SMSing (this is the laptop needs to be switched on to SMS rule):
	if the smartphone is not touchable and the laptop-computer is switched off:
		take no time;
		say "[We] [can't] text anyone with a switched off computer." instead.

Check SMSing (this is the can only SMS telephone numbers rule):
	if the telephone number understood is not listed in the list of recognized telephone numbers:
		say "[nnt]That's not a phone number you know." instead.

Understand "text [text]" as a mistake ("That's not the name of anyone you know.").
Understand "message [text]" as a mistake ("That's not the name of anyone you know.").
Understand "text [something] that/about [text]" as a mistake ("For ease of use, you can just TEXT whoever[unicode 8212]the content will be handled automatically.").
Understand "message [something] that/about [text]" as a mistake ("For ease of use, you can just TEXT whoever[unicode 8212]the content will be handled automatically.").
Understand "send message to [something]" as a mistake ("For ease of use, you can just TEXT whoever[unicode 8212]the content will be handled automatically.").
Understand "send message to [text]" as a mistake ("For ease of use, you can just TEXT whoever[unicode 8212]the content will be handled automatically.").

After deciding the scope of the player while texting or messaging or IMing or SMSing (this is the third allow contacting distant people rule):
	repeat with other party running through people:
		place other party in scope, but not its contents.
		
Rule for reaching inside a room while texting or messaging or IMing or SMSing (this is the fourth allow contacting distant people rule):
	allow access.
	
Section 1 - Reports for recognized people and numbers

Report texting yourself for the first time (this is the text yourself once rule):
	if it's Daytime:
		say "You shoot yourself a quick text. Yep, the number works." instead;
	otherwise:
		say "[no time]You don't think that will be helpful in the moment." instead.
		
Last report texting yourself (this is the don't text yourself twice rule):
	say "[no time]You've already confirmed your number works; any further experimentation would be superfluous."
		
Instead of texting yourself during Nighttime (this is the block texting yourself at night rule):
	say "[no time]You don't think that will be helpful in the moment."

Instead of texting the intruder (this is the block texting the intruder rule):
	if it's Daytime:
		say "You aren't yet aware of anyone who you'd describe as an intruder.";
	otherwise:
		say "You will have never met this man before, and so won't have his number.";
	take no time.
		
Instead of messaging 555-3845 (this is the convert messaging brookwood to texting rule): try texting Arthur Brookwood.
Instead of SMSing 202-555-3845 (this is the convert SMSing brookwood to texting rule): try texting Arthur Brookwood.
Instead of texting Arthur Brookwood (this is the texting brookwood rule):
	if it's Daytime, say "You have no pertinent updates to give Brookwood at the moment.";
	otherwise say "Brookwood will be in the air by that point[unicode 8212]you'll be on your own."

Instead of messaging 555-4663 (this is the convert messaging camille to texting rule): try texting Camille Harmon.
Instead of SMSing 212-555-4663 (this is the convert SMSing camille to texting rule): try texting Camille Harmon.
Instead of texting Camille Harmon (this is the texting camille rule):
	if it's Daytime, say "You'd rather not immediately make an impression as a needy tenant[unicode 8212]better for Camille to have no opinion on you at all.";
	otherwise say "Camille will likely be asleep by that point. You can't think of how she might help you, anyway.";
	take no time.

Instead of texting family (this is the block texting family rule): follow the can't contact family rule.

911-texted is a truth state that varies. 911-texted is false.

Instead of IMing 999 (this is the convert texting 999 rule): try IMing 911.
Check IMing 911: if it's Daytime, say "[no time]You have no reason to contact emergency services." instead.
Check IMing 911: if 911-texted is true, say "[no time]You will have already contacted the police." instead.
Carry out IMing 911: now 911-texted is true.
Report IMing 911 (this is the texting 911 rule): follow the the 911-messages rule.
	
Report messaging 867-5309 (this is the texting Jenny rule):
	say "[no time]You've heard that a scam artist bought that number to sell people's information, so it would be an especially bad idea for you to text it right now."
	
Chapter 15 - Text-replying

Text-replying is an action applying to nothing. Understand "reply" as text-replying when the controlling program of the laptop-computer is laptop-messages or the controlling program of the smartphone is messages and the number of switched on touchable computers > 0.

The applicable recipient is some text that varies. The applicable recipient is "Nobody".
	
Check text-replying (this is the block replying to Brookwood rule):
	if the applicable recipient is "Brookwood", try texting Arthur Brookwood instead.
	
Check text-replying (this is the block replying to Camille rule):
	if the applicable recipient is "Camille", try texting Camille Harmon instead.
	
Check text-replying (this is the block replying to 911 rule):
	if the applicable recipient is "911", say "The police will already be on their way." instead.
	
Check text-replying (this is the block replying to unknown number rule):
	if the applicable recipient is "Unknown", say "The message specifically said not to reply." instead.
	
Last check text-replying (this is the block replying to nobody rule):
	say "[nt][There's] nobody to reply to [if it's Daytime]at the moment[otherwise]by that point[end if]." instead.
	
Chapter 16 - Tuning

Tuning is an action applying to one thing. Understand "tune [something]" as tuning.

Check tuning (this is the can only tune the radio rule):
	unless the noun is the radio:
		take no time;
		say "[The noun] [adapt the verb are in the present tense]n't something you[if it's Daytime] can[otherwise][']ll be able to[end if] tune." (A) instead.
		
Check tuning (this is the must tune to a number rule):
	take no time;
	say "[i][bracket]You'll need to specify a number you want to tune the radio to.[close bracket][/i]" (A) instead.

Chapter 17 - More actions for Postures

Section 1 - Crouching command

Understand "crouch" or "crouch down" as crouching.

Crouching is an action applying to nothing.

Carry out an actor crouching (this is the standard carry out crouching rule):
	if the actor is not crouched, try the actor taking position crouched;
	otherwise follow the report taking position rules.

To decide whether (N - a person) can crouch here:
	if the holder of N is a thing and the holder of N allows crouched:
		yes;
	if the location of N is posture-friendly:
		yes;
	no.
	
Instead of an actor crouching (this is the convert crouching rule):
	if the actor can crouch here:
		try the actor taking position crouched; 
		if the posture of the actor is crouched:
			rule succeeds;
		rule fails;
	otherwise if the holder of the actor contains something (called target) which allows crouched:
		if the holder of the actor contains an enterable crouched thing (called the better target):
			now the target is the better target;
		try the actor crouching on the target;
		if the posture of the actor is crouched and the actor is on the target:
			rule succeeds;
		rule fails;
	otherwise:
		if the player is the actor:
			if the holder of the actor is a thing:
				say "[We] [if it's Daytime][can't][otherwise]won't be able to[end if] crouch on [the holder of the actor]." (A);
			otherwise:
				say "[if it's Daytime][There's] nothing[otherwise]There won't be anything[end if] to crouch on." (B);
			take no time;
		rule fails.
		
Section 2 - Crouching on and behind commands

Crouching behind is an action applying to one thing. Understand "crouch behind [something]" or "crouch down behind [something]" as crouching behind.
Crouching on is an action applying to one thing. Understand "crouch on [something]" or "crouch down on [something]" as crouching on.

Carry out an actor crouching on (this is the standard carry out crouching on rule):
	if the holder of the actor is not the noun, silently try the actor entering the noun;
	if the holder of the actor is the noun:
		if the actor is not crouched, try the actor taking position crouched;
		otherwise follow the report taking position rules.
		
Carry out an actor crouching behind (this is the standard carry out crouching behind rule):
	if the holder of the actor is not a backside, silently try the actor slipping behind the noun;
	if the holder of the actor is part of the noun:
		now the noun obscures the actor;
		if the actor is not crouched, try the actor taking position crouched;
		otherwise follow the report taking position rules.
		
Section 3 - Sitting and lying behind commands

Sitting behind is an action applying to one thing. Understand "sit behind [something]" as sitting behind.
Lying behind is an action applying to one thing. Understand "lie behind [something]" as lying behind.

Carry out an actor sitting behind (this is the standard carry out sitting behind rule):
	if the holder of the actor is not a backside, silently try the actor slipping behind the noun;
	if the holder of the actor is part of the noun:
		now the noun obscures the actor;
		if the actor is not seated, try the actor taking position seated;
		otherwise follow the report taking position rules.
		
Carry out an actor lying behind (this is the standard carry out lying behind rule):
	if the holder of the actor is not a backside, silently try the actor slipping behind the noun;
	if the holder of the actor is part of the noun:
		now the noun obscures the actor;
		if the actor is not reclining, try the actor taking position reclining;
		otherwise follow the report taking position rules.
		
Section 4 - Better standing

The convert standing up rule is not listed in any rulebook.

Instead of an actor standing up (this is the customized convert standing up rule):
	if the holder of the actor is a thing and the holder of the actor allows standing:
		try the actor taking position standing; 
		if something (called the barrier) obscures the actor:
			now the barrier does not obscure the actor;
		if the posture of the actor is standing:
			rule succeeds;
		rule fails;
	otherwise if the holder of the actor is not the location:
		let the source be the holder of the actor;
		try the actor exiting;
		if something (called the barrier) obscures the actor:
			now the barrier does not obscure the actor;
		if the holder of the actor is the source:
			rule fails;
		rule succeeds;
	otherwise:
		if the player is the actor:
			if the holder of the actor is a thing:
				say "[We] [can't] stand up on [the holder of the actor]." (A);
			otherwise:
				if the posture of the player is not standing:
					try taking position standing;
					if the posture of the actor is standing:
						if something (called the barrier) obscures the player:
							now the barrier does not obscure the player;
						rule succeeds;
				say "[There's] nothing to stand on [if it's Nighttime]t[end if]here." (B);
			take no time;
		rule fails.
		
Section 5 - Disambiguation

Does the player mean crouching on an enterable thing when the posture of the noun is crouched (this is the prefer crouching on crouched objects rule):
	it is very likely.
	
Does the player mean crouching behind something (called the obstacle) (this is the prefer crouching behind crouched things rule):
	if the obstacle incorporates a backside (called the backpart):
		if the backpart is crouched, it is very likely;
		it is likely;
	otherwise:
		it is unlikely.
		
Does the player mean lying behind something (called the obstacle) (this is the prefer lying behind reclining things rule):
	if the obstacle incorporates a backside (called the backpart):
		if the backpart is reclining, it is very likely;
		it is likely;
	otherwise:
		it is unlikely.
		
Does the player mean sitting behind something (called the obstacle) (this is the prefer sitting behind seated things rule):
	if the obstacle incorporates a backside (called the backpart):
		if the backpart is seated, it is very likely;
		it is likely;
	otherwise:
		it is unlikely.
		
Chapter 18 - Misc and memes

Understand "act" as a mistake ("[i][bracket]You'll have to be a little more specific than that. What specifically do you want to do?[close bracket][/i]").
Understand "hide" as a mistake ("[i][bracket]You'll need to specify where.[close bracket][/i]").

Section 1 - Breathing

Breathing is an action applying to nothing. Understand "breathe" or "inhale" or "exhale" as breathing.

Report breathing (this is the standard report breathing rule):
	say "[We] [take] a moment to breathe." (A).
	
Section 2 - Charging

Electronics-charging is an action applying to one thing. Understand "charge [something]" as electronics-charging.

First check electronics-charging (this is the can only charge electronics rule):
	if the noun is neither the smartphone nor the phone charger nor the laptop-computer nor the laptop-charger:
		say "[no time][regarding the noun][Those] [aren't] something [we] can charge." (A) instead.
		
Check electronics-charging (this is the can only charge specific electronics rule):
	if the noun is either the phone charger or the laptop-charger:
		say "[no time]Charging cables are more typically used to charge [i]other[/i] things[unicode 8212]they can't really hold a charge themselves." (A) instead.

Section 3 - Crying

Crying is an action applying to nothing. Understand "cry" or "weep" as crying. Understand "wail" as crying when Daytime is happening.

Instead of crying (this is the block crying rule):
	if Nighttime is happening:
		say "You won't have any time to cry. You'll need to stay focused.";
	otherwise:
		say "It's been a long day, sure, but you're not quite yet to the point of tears.";
	take no time.
		
Section 4 - Dancing

Dancing is an action applying to nothing. Understand "dance" as dancing.

Instead of dancing (this is the block dancing rule):
	if it's Daytime:
		say "You're too bone-tired. You just want to finish up your tasks and get to bed.";
	otherwise:
		say "You won't have any time to dance. You'll need to stay focused.";
	take no time.
		
Section 5 - Hugging

Understand the command "hug" as something new.

Hugging is an action applying to one thing. Understand "hug [something]" as hugging.

Last check hugging (this is the redirect hugging to kissing rule): try kissing the noun instead.
		
Section 6 - Magic words

Understand the command "say" as something new.

Magicking is an action applying to nothing. Understand "xyzzy" or "frotz" or "plugh" or "plover" or "yoho" or "cast magic/magick/spell/xyzzy/frotz/plugh/plover" or "cast magic/magick/frotz/plugh/plover spell" or "say xyzzy/frotz/plugh/plover/yoho" or "do magic/magick" as magicking.

Instead of magicking (this is the block magic rule):
	if it's Daytime:
		say "If only, right?";
	otherwise:
		say "If only you [i]could[/i] do magic, this situation would be a lot less deadly.";
	take no time.

Enchanting is an action applying to one thing. Understand "xyzzy [something]" or "frotz [something]" or "plugh [something]" or "plover [something]" or "yoho [something]" or "cast magic/magick/spell/xyzzy/frotz/plugh/plover/yoho on/-- [something]" or "cast magic/magick/frotz/plugh/plover/yoho spell on/-- [something]" or "do magic/magick on/-- [something]" as enchanting.

Carry out enchanting (this is the convert enchanting to magicking rule): try magicking instead.

Section 7 - Praying

Praying is an action applying to nothing. Understand "pray" as praying.

Check praying (this is the block praying not under duress rule):
	if it's Daytime:
		take no time;
		say "You lost touch with the Catholicism of your youth years ago." instead.

Report praying (this is the standard report praying rule):
	if a random chance of 1 in 100 succeeds:
		say "His words [adapt the verb drip from the third person plural] through you like oil.";
	otherwise:
		say "[one of]You lost touch with the Catholicism of your youth years ago, but if[or]If[stopping] needs must, you suppose. You [utter] a quick prayer under your breath.";
	take no time;
		
Section 8 - Screaming

Screaming is an action applying to nothing. Understand "scream" or "howl" or "shout" or "yell" as screaming. Understand "wail" as screaming when Nighttime is happening.

Instead of screaming (this is the block screaming rule):
	if it's Nighttime:
		say "That would only alert the intruder to your presence. You'll need to stay quiet.";
	otherwise:
		say "It's been a long day, sure, but you're not quite to that point yet.";
	take no time.
		
After reading a command (this is the screaming doesn't care where rule):
	if the player's command includes "scream" or the player's command includes "howl" or the player's command includes "shout" or the player's command includes "wail":
		if the player's command includes "into" or the player's command includes "in":
			change the text of the player's command to "scream".
		
Section 9 - Shaving

Shaving is an action applying to nothing. Understand "shave" or "use razor" as shaving.

Instead of shaving during Nighttime (this is the shaving will be unimportant rule):
	say "[no time]You doubt shaving will be your biggest priority, under the circumstances." (A).
	
Before shaving (this is the take the razor before shaving rule):
	unless the player encloses the razor:
		if the razor is touchable and it's Daytime:
			say "(first taking the razor)[command clarification break]";
			silently try taking the razor;
	make no decision.
	
Check shaving (this is the need a razor to shave rule):
	unless the player encloses the razor:
		say "[no time]You can't exactly shave without a razor." (A) instead.
		
Last check shaving (this is the not the time to shave rule):
	say "[no time]You're honestly too tired to care if your legs are stubbly. No one's going to see you before tomorrow, anyway." (A) instead.
	
Specific-shaving is an action applying to one topic. Understand "shave [text]" as specific-shaving.

Instead of specific-shaving: try shaving.
		
Section 10 - Showering

Showering is an action applying to nothing. Understand "shower" as showering.

Check showering (this is the can only shower in the bathroom rule):
	unless the location is Bathroom:
		say "[We] [can't] do that [if it's Daytime]here[otherwise]anywhere but the bathroom[end if]." (A) instead.
	
Check showering (this is the can't shower under duress rule):
	if it's Nighttime:
		take no time;
		say "That would only alert the intruder to your presence. You'll need to stay quiet." (A) instead.
		
Last check showering (this is the convert showering to bathing rule): try bathing instead.
		
Section 11 - Singing

Singing is an action applying to nothing. Understand "sing" or "hum" as singing.

Instead of singing (this is the block singing rule):
	if it's Daytime:
		say "You're too tired to be doing all that.";
	otherwise:
		say "Better not to risk detection.";
	take no time.
		
Section 12 - Tooth brushing

Teethbrushing is an action applying to nothing. Understand "brush teeth" or "brush" or "use toothbrush" as teethbrushing.

Instead of teethbrushing during Nighttime (this is the whole body heath over oral health rule):
	say "[no time]You doubt your oral health specifically will be your top priority, under the circumstances." (A).
	
Before teethbrushing (this is the take the toothbrush before brushing teeth rule):
	unless the player encloses the toothbrush:
		if the toothbrush is touchable and it's Daytime:
			say "(first taking the toothbrush)[command clarification break]";
			silently try taking the toothbrush;
	make no decision.

Check teethbrushing (this is the need a toothbrush to brush teeth rule):
	unless the player carries the toothbrush, say "[no time]Hard to do that without a toothbrush." (A) instead.
	
Check teethbrushing (this is the need a sink to brush teeth rule):
	if the location is neither Bathroom nor Kitchenette nor Main-By-Counter:
		take no time;
		say "You're not about to brush your teeth without a sink to lean over." (A) instead.

Report teethbrushing for the first time during Daytime (this is the brushing your teeth rule):
	say "You look around for some toothpaste, and realize you forgot it. With a sigh, you wet the toothbrush and brush without it. The action doesn't do much to make you feel clean, but at least it's done." (A) instead.
	
Report teethbrushing (this is the already brushed your teeth rule):
	say "[no time]You've already done that. You're not going to get your teeth any cleaner by massaging them with [i]more[/i] tap water." (A).
	
Section 13 - Waving at & waving to

Waving at is an action applying to one thing. Understand "wave at [something]" or "wave to [something]" as waving at.

Instead of waving at: try waving hands.

Waving to is an action applying to one topic. Understand "wave at [text]" or "wave to [text]" as waving to.

Instead of waving to: try waving hands.
		
Section 14 - Winning & Losing

Winning is an action applying to nothing. Understand "win" or "succeed" as winning.

Instead of winning (this is the block unearned winning rule): say "[no time]If only it were that easy."

Losing is an action applying to nothing. Understand "lose" or "fail" as losing.

Instead of losing (this is the block giving up rule): say "[no time]No[unicode 8212]you must go on."

[Covering is an action applying to one thing.
Jumping off/out/through is an action applying to one thing.
Knocking (on) is an action applying to one thing.]

[Covering it with is an action applying to two things.
Putting it near is an action applying to two things.]

Part 2 - Out of world

Chapter 1 - Resetting

Resetting is an action out of world. Understand "reset" as resetting.

Check resetting (this is the can't reset during the day rule):
	if it's Daytime, say "[no time][i][bracket]There's nothing to reset![close bracket][i][br]" (A) instead.
	
Carry out resetting:
	say "Are you sure you want to reset to the beginning of the night? > [run paragraph on]";
	if the player consents:
		clear only the main screen;
		autorestore the game;
	otherwise:
		say "[no time][i][bracket]Reset cancelled.[close bracket][/i][br]";
		reject the player's command.

Chapter 2 - Credits

Crediting is an action out of world. Understand "credits" as crediting.

Report crediting (this is the show the credits rule): say "[i]Studio[/i] was conceptualized, written, and programmed by Charm Cochran.

It includes the following extensions:[br]
Hiding Behind v1 and Remembering v1 by Charm Cochran (based on extensions and code by Eric Eve/Gavin Lambert and Aaron Reed, respectively);[br]
Autosave v2.0.231013 by Daniel Stelzer;[br]
Approaches v7.0.150410, Basic Screen Effects v8, Computers v8.2, Glulx Entry Points v10.0.150101, Glulx Text Effects v6, Locksmith v13, Plurality v9.0.101223, Postures v2, Punctuation Removal v5, Recorded Endings v5, Room Description Control v14.1.220524, Skeleton Keys v1, and Tailored Room Description v13.2.240108 by Emily Short;[br]
Alternatives v3.0.150410, Bulk Limiter v9, Epistemology v9, Hiding Under v4, and Underside v6.1 by Eric Eve;[br]
Enterable Underside v2.0.200926 and Prepositional Correctness v2.0.200926 by Gavin Lambert;[br]
Far Away v5.0.160517 by Jon Ingold;[br]
Simple Multimedia Effects For V10 v6 by Mathbrush;[br]
Basic Plans v3.0.211124 and Planner v3.0.240130 by Nate Cull; and[br]
Plugs and Sockets v4.2 by Sean Turner.

It uses code from Achievements v1.0.151231 by Juhana Leinonen; Large Game Speedup v6.0.220524 by Nathanael Nerode; Extended Grammar v8.0.140501 by Aaron Reed; Assorted Text Generation v5.0.150410, Automated Drawers v6, and Modern Conveniences v5 by Emily Short; and Helpful Functions v1 by Daniel Stelzer.

It uses code by Graham Nelson, which was included in the Inform Recipe Book[unicode 8212]specifically, it pulls from Example 24 - 'Neighborhood Watch,' Example 366 - 'Rock Garden,' Example 370 - 'Walls and Noses,' Example 408 - 'Timeless,' and Example 432 - 'Eyes, Fingers, Toes.' It also uses publicly released code by Emily Short, Mathbrush, Sarah Willson, and Zed Lopez.

Object Response Tests v7 by Juhana Leinonen was used during testing.

Feelie map by Julia Byrne.

Special thanks to my testers, who deserve much credit and no blame: Julia Byrne, Mel Jason, Nathan Ray, Peter M.J. Gross, Rovarsson, Tabitha O'Connell, and Tommy Sullivan-Lovett.

Special thanks, too, to Zed Lopez for invaluable programming help.

Additional special thanks to Graham Nelson for Inform 7, and Mathbrush for the Bisquixe interpreter."

Chapter 3 - About

Section 1 - About Studio

After looking for the first time: say "[first time][i](First-time players should type ABOUT. Credits are available via CREDITS.)[/i][only]".

Requesting information is an action out of world. Understand "about" or "info" or "help" or "hint" as requesting information.

Report requesting information:
	say "In [i]Studio,[/i] you play as a woman in a very difficult situation.
	
	Development began in August of 2022. Version 1 was released as an entrant to the Spring Thing Festival in April of 2024.
	
	[i]Studio[/i] is a horror game, intended for mature audiences only. More specific information about its content can be found by typing CONTENT.
	
	For  information about parser IF in general, type ABOUT IF. Even if you're familiar with the format, you may want to type COMMANDS to see a list of non-standard commands used in this game.
	
	A note to seasoned IF players: due to the way [i]Studio[/i] handles action processing and input, it is not recommended that you enter multiple commands on the same line. Doing so may cause otherwise valid commands to be unrecognized, or have unintended in-game consequences."

Section 2 - About IF

Requesting IF info is an action out of world. Understand "about interactive fiction" or "about if/interactive/fiction" or "info interactive fiction" or "info if/interactive/fiction" or "help interactive fiction" or "help if/interactive/fiction" as requesting IF info.

ifabouted is a truth state that varies. ifabouted is false.

Carry out requesting IF info: now ifabouted is true.

Report requesting IF info:
	say "Interactive fiction (IF) is a genre of game like any other, with a model world, player character, things and NPCs to interact with, etc. It's also a genre of story, where you control the protagonist.
	
	[i]Studio[/i] is parser IF, which means you interact with the world by typing commands in the form VERB NOUN, like this:
	
	TAKE APPLE[br]OPEN DOOR[br]TALK TO FRANCIS[br]THROW ROCK AT WINDOW
	
	There are, of course, many more things to do besides those listed above. If an action would make sense to do in any circumstance, give it a try! You never know when you might stumble into the solution to a puzzle.
	
	If you're brand new to IF, feel free to type COMMON COMMANDS at any time for a list of general actions that should usually work. If you're [i]not[/i] brand new (or even if you are), you might want to type COMMANDS sans the [']common['] to see a few unusual commands that are important in this game (this list may contain spoilers)."
	
Section 3 - Common Commands

Requesting command info is an action out of world. Understand "common commands" as requesting command info.

Report requesting command info:
	say "The first thing you want to do when starting any piece of IF is acquaint yourself with your surroundings. You should read the introductory text carefully. Pay attention to where you are. Notice which directions are available to go to, and what objects are described here. If any of these seem interesting, you may want to EXAMINE them (X for short). You can (and should) examine just about everything[unicode 8212]even yourself! TAKE INVENTORY (or INVENTORY for short, [']I['] for shorter) will tell you what you're carrying, as well.
	
	Once you've gotten your bearings, you may want to explore. Move from place to place, and check out every location available. At any given time, you are in a specific location in the game world. When you go to a new place, the game will print a description of what you can see there. This description will contain two vital kinds of information: things in the room you can interact with or take, and (sometimes) a list of directions you can go from there. If you want to see the description again, you may just type LOOK ([']L['] for short).
	
	When you want to leave a location and go to another one, you may communicate this to the game using compass directions: e.g., GO NORTH. For simplicity's sake, you are allowed to omit the word GO, and to abbreviate the compass directions. So you may use NORTH, SOUTH, EAST, and WEST, or in short form N, S, E, and W. The program is capable of understanding additional directions, but they are not necessary in this game.
	
	Don't limit yourself to looking[unicode 8212]you can also try to LISTEN (or LISTEN TO), SMELL, TASTE, and TOUCH things. Sometimes you may not want to drop something directly on the ground. If that's the case, you could try to PUT it ON a surface, or INSERT it INTO a container. Speaking of, you might be able to OPEN or CLOSE certain things (like doors, cabinets, etc.). You may, at some point, find a device that you can SWITCH ON and then SWITCH OFF again.
	
	There are other, less common, actions available to you. When the time is right, you could try to ATTACK things, CLIMB things, CUT things, SIT ON things, LOCK or UNLOCK things, or LOOK UNDER things.
	
	There are a few simple commands for controlling the game itself. SAVE saves a snapshot of the game as it is now. RESTORE puts the game back to a previous saved state. You may keep as many saved games as you like. RESTART puts the game back to the way it was at the beginning. QUIT ends the game.
	
	This list might look overwhelming, but in the moment think of what makes sense to do[unicode 8212]as a wise uncle once said, 'doors are for opening; buttons are for pushing; pie is for eating.'"

Section 4 - Special Commands

Requesting the commands is an action out of world. Understand "commands" or "verbs" as requesting the commands.

Report requesting the commands:
	say "The following is a list of non-standard commands used in this game. There are a few additional commands not listed here[unicode 8212]rest assured, you will be cued to them as needed.
	
	[b]LOOKING COMMANDS[/b][br]LOOK BEHIND (something), PEEK BEHIND (something)[br]LOOK UNDER (something)[br]READ (something)
	
	[b]MOVEMENT COMMANDS[/b][br]CROUCH, CROUCH DOWN[br]CROUCH BEHIND (something)[br]CROUCH ON (something)[br]GET BEHIND (something), GO BEHIND (something)[br]GET UNDER (something), HIDE UNDER (something)[br]LIE DOWN[br]LIE BEHIND (something)[br]LIE ON/IN (something)[br]SIT, SIT DOWN/UP[br]SIT BEHIND (something)[br]SIT ON/IN (something)[br]STAND, STAND UP[br]STAND ON/IN (something)
	
	[b]OBJECT COMMANDS[/b][br]CALL (someone or a number)[br]CLICK (something)[br]EMPTY (something)[br]KNOCK ON (something)[br]PLUG (something) INTO (something)[br]PUT (something) BEHIND (something)[br]PUT (something) UNDER (something else)[br]REBOOT (something)[br]SMASH (something)[br]SPIN/TUNE (something) TO (a number)[br]TEXT (someone or a number)[br]TYPE (something)[br]UNPLUG (something), UNPLUG (something) FROM (something)
	
	[b]META COMMANDS[/b][br]ABOUT[br]ABOUT IF[br]COMMANDS[br]COMMON COMMANDS[br]CONTENT[br]CREDITS[br]".

Section 5 - Content

Requesting the content is an action out of world. Understand "content" as requesting the content.

Report requesting the content for the first time:
	say "Be warned that the content notes contain major spoilers for the entire game, and reading them is likely to alter your experience. If you would like to see them anyway, type the same command again." instead.

Report requesting the content:
	say "CONTENT WARNING: This story contains strong language, frightening scenes, and depictions of a home invasion, violence, and murder. It contains brief references to but no depictions of sexual assault. It is intended for mature audiences."
	
Section 6 - Endings during game

[NOTE: This is just grammar to make the listing the endings machinery from Recorded Endings accessible during play.]

Requesting the endings is an action out of world. Understand "review" or "ending" or "endings" or "review ending/endings" as requesting the endings.

Carry out requesting the endings:
	read the endings;
	
Report requesting the endings:
	let N be the number of filled rows in the Table of Possible Endings;
	if N is 0:
		say "You have not yet found any endings.";
	otherwise:
		follow the list endings rule.
		
Book 5 - Additional functionality for actions

Part 1 - Removed actions

Understand nothing as buying.

Understand the command "cover" as something new.

Understand the command "key" as something new.

Part 2 - Synonyms

Understand the commands "injure" or "kick" or "smack" or "strike" or "tear" or "whack" as "attack".
Understand the commands "choke" or "garrotte" or "strangle" or "suffocate" as "attack".

Understand the commands "bake" or "ignite" or "incinerate" or "kindle" or "melt" or "sear" or "toast" as "burn".

Understand the command "bend" as "close".

Understand the commands "hunker" or "kneel" or "squat" as "crouch".

Understand the command "carve" or "slash" or "stab" as "cut".

Understand the commands "inspect" or "observe" or "study" or "view" as "examine".

Understand the commands "depart" or "escape" as "exit".

Understand the commands "crawl" or "creep" or "explore" or "proceed" or "wander" as "go".

Understand the commands "recline" or "sprawl" as "lie".

Understand the command "h" as "listen".

Understand the command "see" as "look".

Understand the command "unfold" as "open".

Understand the command "emerge" as "out".

Understand the command "roll" as "push".

Understand the commands "place" or "shove" or "stick" or "stuff" as "put".

Understand the commands "decipher" or "peruse" or "scan" as "read".

Understand the commands "recall" or "recollect" as "remember".

Understand the commands "flop" or "perch" as "sit".

Understand the commands "activate" or "start" as "switch".
Understand the commands "deactivate" or "stop" as "switch".

Understand the commands "acquire" or "bring" or "dig" or "grab" or "pluck" or "reach" or "snatch" or "steal" as "take".

Understand the commands "electrocute" or "shock" as "tase".

Understand the command "lick" as "taste".

Understand the commands "fling" or "hurl" or "toss" as "throw".

Understand the command "flip" as "turn".

[Understand "put [something preferably held] on floor/ground" as dropping.

Understand "throw [something preferably held] away" as dropping.
Understand "throw away [something preferably held]" as dropping. - turn this into inserting into a trash can?]

Understand "enter [any room]" as approaching.

Understand "fold up/-- [something]" as closing.
Understand "close [things]" as closing.
Understand "cover [something]" as closing.

Understand "climb on/onto/in/into [something enterable]" as entering.
Understand "exit through/using/by/out/-- [a door]" as entering.
Understand "hang from/on [something]" as entering.
Understand "hide in [something]" as entering.
Understand "jump on/in/into/onto [something]" as entering.

Understand "get under [something]" or "go under [something]" or "hide under [something]" as entering underneath.

Understand "examine [things]" as examining.

Understand "go to [direction]" as going.

Understand "lie down on/in [something]" as lying on.

Understand "listen [something]" as listening to.

Understand "look around/about" as looking.

Understand "look around [something]" as looking behind.
Understand "look behind [something]" as looking behind.
Understand "peek behind [something]" as looking behind.

Understand "peek under [something]" as looking under.

Understand "straighten out/-- [something]" as opening.
Understand "open [things]" as opening.
Understand "open [any thing]" as opening.

Understand "plug in [something]" as plugging it into.
Understand "plug [something] in [something]" as plugging it into.

Understand "cover [something] with [something]" as putting it on (with nouns reversed).
Understand "drape [something] on/over [something]" as putting it on.
Understand "hang [something] on/from [something]" as putting it on.
Understand "put [latchkey] on [keychain]" as putting it on.

Understand "okay" or "ok" or "fine" as saying yes.

Understand "dig in/through [something]" as searching.

Understand "choose [text] with [a selection device]" or "tap [text] with [a selection device]" or "open [text] with [a selection device]" as selecting it with.
Understand "choose [text] with [something]" or "tap [text] with [something]" or "open [text] with [something]" as selecting it with.
Understand "choose [text]" or "tap [text]" or "open [text]" as selecting it with.

Understand "spin [something] to [text]" or "tune [something] to [text]" as setting it to.

Understand "hide behind [something]" as slipping behind.

Understand "rise" as standing up.

Understand "step on/onto/in [something]" as standing up on.

Understand "throw [something preferably held] into/through/to [something]" as throwing it at.

Understand "input [text]" or "search [text]" as typing it on.

Part 3 - Scope

After deciding the scope of the player while attacking or burning or climbing or closing or cutting or drinking or eating or entering underneath or opening or pulling or pushing or rubbing or slipping behind or smelling or squeezing or swinging or tasting or touching or turning or waving or wearing (this is the try accessing things in visible rooms rule):
	follow the scopable connectivity rule.
	
After deciding the scope of the player while looking under: follow the scopable connectivity rule.
	
Rule for reaching inside a room (called otherplace) while looking under:
	if otherplace is connected with the location:
		allow access;
	deny access.
		
Check looking under:
	if the location of the noun is not the location, say "[We] [if it's Daytime]can't quite[otherwise]won't quite be able to[end if] get a good angle from [if it's Nighttime]t[end if]here." instead;

After deciding the scope of the player while entering (this is the try entering things in visible rooms rule): follow the scopable connectivity rule.
After deciding the scope of the player while giving to (this is the try giving to things in visible rooms rule): follow the scopable connectivity rule.
After deciding the scope of the player while inserting into (this is the try inserting into things in visible rooms rule): follow the scopable connectivity rule.
After deciding the scope of the player while locking with (this is the try locking things with in visible rooms rule): follow the scopable connectivity rule.
After deciding the scope of the player while pushing to (this is the try pushing things to in visible rooms rule): follow the scopable connectivity rule.
After deciding the scope of the player while putting on (this is the try putting on things in visible rooms rule): follow the scopable connectivity rule.
After deciding the scope of the player while showing to (this is the try showing to things in visible rooms rule): follow the scopable connectivity rule.
After deciding the scope of the player while taking (this is the try taking things in visible rooms rule): follow the scopable connectivity rule.
[After deciding the scope of the player while throwing at (this is the try throwing at things in visible rooms rule): follow the scopable connectivity rule.]
After deciding the scope of the player while tying to (this is the try tying to things in visible rooms rule): follow the scopable connectivity rule.
After deciding the scope of the player while unlocking with (this is the try unlocking things with in visible rooms rule): follow the scopable connectivity rule.

This is the scopable connectivity rule:
	repeat with otherplace running through rooms:
		if otherplace is connected with the location:
			place otherplace in scope;
			place the contents of otherplace in scope.
			
The scopable connectivity rule does nothing when the time of day is 9:00 AM.

Check taking (this is the can't take while in a backside or underside rule): abide by the limit scope to underside and backside rule.
Check touching (this is the can't touch while in a backside or underside rule): abide by the limit scope to underside and backside rule.
Check rubbing (this is the rub take while in a backside or underside rule): abide by the limit scope to underside and backside rule.
Check squeezing (this is the can't squeeze while in a backside or underside rule): abide by the limit scope to underside and backside rule.
First check opening (this is the can't open while in a backside or underside rule): abide by the limit scope to underside and backside rule.
First check closing (this is the can't close while in a backside or underside rule): abide by the limit scope to underside and backside rule.
Check setting something to (this is the can't set while in a backside or underside rule): abide by the limit scope to underside and backside rule.
Check setting something numerically to (this is the can't set numerically while in a backside or underside rule): abide by the limit scope to underside and backside rule.
Check spinning something to (this is the can't spin while in a backside or underside rule): abide by the limit scope to underside and backside rule.
Check inserting something into (this is the first can't insert while in a backside or underside rule): abide by the limit scope to underside and backside rule.
Check inserting something into (this is the second can't insert while in a backside or underside rule): abide by the second-noun limit scope to underside and backside rule.
Check putting something on (this is the first can't put while in a backside or underside rule): abide by the limit scope to underside and backside rule.
Check putting something on (this is the second can't put while in a backside or underside rule): abide by the second-noun limit scope to underside and backside rule.
Check removing something from (this is the first can't remove while in a backside or underside rule): abide by the limit scope to underside and backside rule.
Check removing something from (this is the second can't remove while in a backside or underside rule): abide by the second-noun limit scope to underside and backside rule.
Check placing something under (this is the first can't place under while in a backside or underside rule): abide by the limit scope to underside and backside rule.
Check placing something under (this is the second can't place under while in a backside or underside rule): abide by the second-noun limit scope to underside and backside rule.
Check stowing something behind (this is the first can't stow behind while in a backside or underside rule): abide by the limit scope to underside and backside rule.
Check stowing something behind (this is the second can't stow behind while in a backside or underside rule): abide by the second-noun limit scope to underside and backside rule.

This is the limit scope to underside and backside rule:
	if the holder of the player is an underside or the holder of the player is a backside:
		if the noun is not enclosed by the holder of the player:
			take no time;
			say "[We] [can't] reach that far from [holder of the player]." (A) instead;
	make no decision.
	
This is the second-noun limit scope to underside and backside rule:
	if the holder of the player is an underside or the holder of the player is a backside:
		if the second noun is not enclosed by the holder of the player:
			take no time;
			say "[We] [can't] reach that far from [holder of the player]." (A) instead;
	make no decision.
	
Check examining (this is the can't examine things atop things you're under rule): abide by the can't see atop things you're under rule.
Check searching (this is the can't search things atop things you're under rule): abide by the can't see atop things you're under rule.
	
This is the can't see atop things you're under rule:
	if the holder of the player is an underside (called the underpart):
		let obj be the holder of the underpart;
		if the noun is on obj:
			take no time;
			say "[We] [can't] see anything on top of [the obj] while you're underneath [regarding obj][them]." (A) instead;
	make no decision.
			
Check examining (this is the can't examine things atop things you're behind rule): abide by the can't see atop things you're behind rule.
Check searching (this is the can't search things atop things you're behind rule): abide by the can't see atop things you're behind rule.

This is the can't see atop things you're behind rule:
	if the holder of the player is an backside (called the backpart):
		let obj be the holder of the backpart;
		if the noun is on obj:
			take no time;
			say "[We] [can't] see anything on top of [the obj] while you're hiding behind [regarding obj][them]." (A) instead;
	make no decision.
			
Check examining (this is the special can't examine things atop the counter while you're behind it rule): abide by the can't see atop the counter while you're behind it rule.
Check searching (this is the special can't search things atop the counter while you're behind it rule): abide by the can't see atop the counter while you're behind it rule.

This is the can't see atop the counter while you're behind it rule:
	if the player is obscured by the furniture-counter:
		if the noun is on the countertop:
			take no time;
			say "[We] [can't] see anything on top of the counter while you're [if the location is Kitchenette]behind[otherwise]underneath[end if] it." (A) instead;
	make no decision.
			
Check examining (this is the special can't examine things atop the dresser while you're under the bed rule): abide by the can't see atop the dresser while you're under the bed rule.
Check searching (this is the special can't search things atop the dresser while you're under the bed rule): abide by the can't see atop the dresser while you're under the bed rule.

This is the can't see atop the dresser while you're under the bed rule:
	if the holder of the player is under#bed:
		if the noun is on the dresser or the noun is enclosed by something on the dresser:
			take no time;
			say "[We] [can't] see anything on top of the dresser from under [if it's Nighttime]t[end if]here." (A) instead;
		otherwise if the noun is enclosed by the dresser:
			take no time;
			say "[We] [can't] see into of the dresser drawers from under [if it's Nighttime]t[end if]here." (B) instead;
	make no decision.

Check examining (this is the special can't examine things atop the table while you're under or behind the couch rule): abide by the can't see atop the table while you're under or behind the couch rule.
Check searching (this is the special can't search things atop the table while you're under or behind the couch rule): abide by the can't see atop the table while you're under or behind the couch rule.

This is the can't see atop the table while you're under or behind the couch rule:
	if the holder of the player is under#couch or the holder of the player is behind#couch:
		if the noun is on the coffee table:
			take no time;
			say "[We] [can't] see anything on top of the coffee table from [if the holder of the player is under#couch]under[otherwise]back[end if] [if it's Nighttime]t[end if]here." (A) instead;
	make no decision.

Part 4 - New rules

Chapter 1 - Approaching
			
Check approaching Kitchenette (this is the direct to how to get to Kitchenette rule):
	if the location is not Entryway and Kitchenette is unvisited:
		take no time;
		if the location is Main-Office:
			say "You [can't] get [if it's Daytime]there[otherwise]to the kitchenette[end if] in one move from [if it's Nighttime]t[end if]here[unicode 8212]you'll need to go [b]north[/b] to the entryway, [i]then[/i] you can go [b]east[/b] from there to get to the kitchenette." (A) instead;
		otherwise if the location is Main-By-Counter:
			say "You [can't] get [if it's Daytime]there[otherwise]to the kitchenette[end if] in one move from [if it's Nighttime]t[end if]here[unicode 8212]you'll need to go [b]west[/b] to the office area, then [b]north[/b] to the entryway, and [i]then[/i] you can go [b]east[/b] from there to get to the kitchenette." (B) instead;
		otherwise if the location is Main-Bed:
			say "You [can't] get [if it's Daytime]there[otherwise]to the kitchenette[end if] in one move from [if it's Nighttime]t[end if]here[unicode 8212]you'll need to go [b]north[/b] towards the counter, then [b]west[/b] to the office area, then [b]north[/b] to the entryway, and [i]then[/i] you can go [b]east[/b] from there to get to the kitchenette." (C) instead;
		otherwise:
			say "You [can't] get [if it's Daytime]there[otherwise]to the kitchenette[end if] in one move from [if it's Nighttime]t[end if]here, but you [if it's Daytime]know[otherwise]remember that[end if] [it's] generally to the [b]north[/b] of [if it's Daytime]where you are[otherwise]you[end if]." (D) instead.
			
Check approaching (this is the go instead of approaching when possible rule):
	if the noun is an adjacent room:
		let way be the best route from the location to the noun, using doors;
		if way is a direction:
			try going way instead;
		otherwise:
			say "[nt][We] [can't] go that way." instead;

Check approaching (this is the customized go through doors instead of approaching rule):
	if the location is Entryway:
		if the noun is Bathroom, try going west instead;
		if the noun is either Outside Hall or Down-the-Hall, try going north instead;
		if the noun is Within-Closet, try going inside instead;
	otherwise if the location is Bathroom:
		if the noun is Entryway, try going east instead;
	otherwise if the location is Outside Hall:
		if the noun is Entryway, try going south instead;
	otherwise if the location is Within-Closet:
		if the noun is Entryway, try going outside instead;
		
Last check approaching (this is the generally block approaching rule):
	take no time;
	if it's Daytime:
		say "You don't yet know the apartment well enough to navigate it automatically[unicode 8212]you'll need to be sure of the exact route you're taking." (A) instead;
	otherwise:
		say "You can't be sure nothing will change in the time it'll take you to get there. You'll need to plan the journey, step-by-step." (B) instead.

Chapter 2 - Entering underneath

Carry out an actor entering underneath (this is the obscure someone underneath rule):
	now the noun obscures the actor.
	
Chapter 3 - Examining

Instead of examining down: say "[We] [can only] see the floor in that direction."
Last instead of examining up: say "[We] [can only] see the ceiling in that direction."

After examining something which includes a switched on tap (called relevant tap) (this is the report flowing water rule):
	say "Water [flow] from [the relevant tap]." (A)

Understand "examine [any room]" as examining.

Definition: a room is another if it is not the location.
Definition: a room is nearby if it is connected with the location.

Before examining a room (called the spot) (this is the can only examine visible rooms rule):
	if the spot is not nearby and the spot is not adjacent and the spot is another:
		take no time;
		say "[We] [can't see] [negative casual descriptor of the noun] from [if it's Nighttime]t[end if]here." (A) instead;
	make no decision.
	
The you-can-also-see rule does nothing when the noun is not the location.
The disclosing-rooms rule does nothing when the noun is not the location.
	
To say negative casual descriptor of (spot - a room):
	if spot is Main-By-Counter:
		say "the area by [nobr]";
	otherwise if spot is either Outside Hall or Down-the-Hall:
		say "out into [nobr]";
	otherwise if spot is either Within-Closet or Kitchenette or Entryway or Bathroom:
		say "into [nobr]";
	say the casual descriptor of spot.

Does the player mean examining a room: it is unlikely.

The Remembering replace did not make sense in that context rule does nothing when the noun is a room.

Rule for reaching inside a room (called the otherplace) while examining (this is the allow seeing into rooms rule):
	if the otherplace is connected with the location:
		allow access;
	otherwise:
		say "[We] [can't see] [the noun] from [if it's Nighttime]t[end if]here." (A);
		deny access.
		
After deciding the scope of the player while examining or searching:
	if the location is Entryway:
		place the countertop in scope;
		place the contents of the countertop in scope.
		
After deciding the scope of the player while examining or searching:
	if the location is Bathroom and Bathroom is connected with Entryway and the player is not obscured by the shower curtain:
		place the countertop in scope;
		place the contents of the countertop in scope.

First before remembering (this is the examine things even in other connected rooms rather than remembering rule):
	if the player's command includes "examine " or the player's command includes "x " or the player's command includes "look at " or the player's command includes "look for ":
		if the location of the noun is connected with the location and the holder of the noun is not a closed container and the holder of the noun is not an eclipsing container:
			try examining the noun instead.
			
Before remembering (this is the special examine things on the countertop rather than remembering when appropriate rule):
	if the player's command includes "examine " or the player's command includes "x " or the player's command includes "look at " or the player's command includes "look for ":
		if the noun is the countertop or the noun is enclosed by the countertop:
			if the location is Entryway:
				try examining the noun instead;
			otherwise if the location is Bathroom and Bathroom is connected with Entryway and the player is not obscured by the shower curtain:
				try examining the noun instead.
				
The special examine things on the countertop rather than remembering when appropriate rule is listed after the examine things even in other connected rooms rather than remembering rule in the before rules.

Last instead of examining northeast: say "[nnt][There's] a wall in that direction."
Last instead of examining northwest: say "[nnt][There's] a wall in that direction."
Last instead of examining southeast: say "[nnt][There's] a wall in that direction."
Last instead of examining southwest: say "[nnt][There's] a wall in that direction."

Chapter 4 - Exiting and getting off

First carry out an actor exiting (this is the reveal someone hidden rule):
	now nothing obscures the actor.
		
After exiting (this is the intruder can see you exiting even if you're moving rule):
	if the intruder can spot the player:
		now the player is found;
		follow the intruder kills you on sight rule;
		stop the action;
	otherwise:
		continue the action.
		
The intruder can see you exiting even if you're moving rule is listed after the standard exiting rule in the carry out exiting rules.

The can't exit closed containers rule does nothing when the actor is in a backside.
The can't exit closed containers rule does nothing when the actor is in an underside.
		
Chapter 5 - Going

First carry out an actor going (this is the stop hiding when going rule):
	if something (called the barrier) obscures the actor:
		now the barrier does not obscure the actor.
		
Instead of going down: say "[no time][We] [are] unable to phase through the floor."
Instead of going up: say "[no time][We] [can't] reach the ceiling, and wouldn't have much to do up there if you could."

The can't travel in what's not a vehicle rule does nothing when the holder of the actor is an underside.
The can't travel in what's not a vehicle rule does nothing when the holder of the actor is a backside.

Check an actor going when the actor is in an underside (called the space) (this is the leave undersides before going rule):
	if the actor is the player:
		say "(first [present participle of exiting preposition of the space] [the holder of the space])[command clarification break]" (A);
	silently try the actor exiting.
	
Check an actor going when the actor is in a backside (called the space) (this is the leave backsides before going rule):
	if the actor is the player:
		say "(first [present participle of exiting preposition of the space] [the holder of the space])[command clarification break]" (A);
	silently try the actor exiting.

[NOTE: This was originally blocked with the rule below, but testing found it was more annoying than realistic and gritty.

Check an actor going (this is the can't travel in an underside or a backside rule):
	let space be the holder of the actor;
	if space is an underside:
		if the actor is the player:
			say "[We] [would have] to [infinitive of exiting preposition of space] [the holder of space] first." (A);
		stop the action;
	otherwise if space is a backside:
		if the actor is the player:
 			say "[We] [would have] to [infinitive of exiting preposition of space] [the holder of space] first." (B);
		stop the action.
	
The can't travel in an underside or a backside rule is listed before the can't travel in what's not a vehicle rule in the check going rules.]
		
Chapter 6 - Inserting into

Instead of an actor inserting something into a drain (this is the no clogging drains rule):
	if the player is the actor:
		take no time;
		say "You doubt that would be a productive course of action." (A);
	stop the action.

Chapter 7 - Listening

listened-this-turn is a truth state that varies. listened-this-turn is false.

Before listening:
	now listened-this-turn is true;
	continue the action.
	
Last every turn: now listened-this-turn is false.

Rule for reaching inside a room (called space) while listening (this is the can hear throughout the space rule):
	unless space is green room:
		allow access.
		
Rule for reaching inside a closed container while listening (this is the can hear noisemakers inside of containers rule): allow access.
		
Chapter 8 - Looking

The describe what's on scenery supporters in room descriptions rule is not listed in any rulebook.

After looking (this is the announce notable noise after looking rule):
	if the ambient noise level of the location is notable:
		say "[With all this noise], [it's] [if the ambient noise level of the location is thunderous]quite [end if]noisy in [if it's Nighttime]t[end if]here." (A);
	continue the action.
	
After listening (this is the announce notable noise after listening rule):
	if the ambient noise level of the location is notable:
		say "[With all this noise], [it's] [if the ambient noise level of the location is thunderous]quite [end if]noisy in [if it's Nighttime]t[end if]here." (A);
	continue the action.
	
To say With all this noise:
	say "With [nobr]";
	if the radio is listenable:
		say "the radio playing[nobr]";
	if the location is Bathroom:
		if the bathroom faucet is noisemaking or the tub-faucet is noisemaking:
			if the radio is listenable, say " and [nobr]";
			if the bathroom faucet is switched on:
				if the tub-faucet is switched on:
					say "both faucets running[nobr]";
				otherwise:
					say "the sink running[nobr]";
			otherwise if the tub-faucet is switched on:
				say "the tub's faucet running[nobr]";
			if the windows are shattered:
				say ", not to mention the noise from outside[nobr]";
		otherwise if the windows are shattered:
			if the radio is listenable, say " and [nobr]";
			say "the noise from outside[nobr]";
	otherwise if the location is either Kitchenette or Main-By-Counter:
		if the kitchen faucet is noisemaking or the stove light is noisemaking or the dishwasher is noisemaking:
			if the radio is listenable, say " and [nobr]";
			let L be a list of texts;
			if the kitchen faucet is noisemaking, add "kitchen sink" to L;
			if the stove light is noisemaking, add "stove hood fan" to L;
			if the dishwasher is noisemaking, add "dishwasher" to L;
			say "the [L] going[nobr]";
			if the windows are shattered:
				say ", not to mention the noise from outside[nobr]";
		otherwise if the windows are shattered:
			if the radio is listenable, say " and [nobr]";
			say "the noise from outside[nobr]";
	otherwise if the windows are shattered:
		if the radio is listenable, say ", not to mention [nobr]";
		say "the noise from outside[nobr]";

Announcing notable exits of something is an activity.

Last carry out looking (this is the announce notable exits rule):
	carry out the announcing notable exits activity with the location;
	
Chapter 9 - Looking behind

This is the looking behind equates to examining rule:
	if a backside (called the backpart) is part of the noun:
		now the backpart is examined.

The customized clever looking behind rule is listed instead of the standard looking behind rule in the carry out looking behind rules.		
The looking behind equates to examining rule is listed before the customized clever looking behind rule in the carry out looking behind rules.
			
This is the customized clever looking behind rule:
	if the actor is the player:
		if a backside (called the backpart) is part of the noun and something is in the backpart:
			now the backpart is open;
			if the number of locale-supportable things in the backpart is 0:
				if getting-behind is true:
					do nothing;
				otherwise:
					say "[There's] nothing behind [the noun]." (A);
			otherwise:
				say "Behind [the noun] [is-are a list of locale-supportable things in the backpart]." (B);
		otherwise:
			follow the standard looking under rule.
		
getting-behind is a truth state that varies. getting-behind is false.
First before: now getting-behind is false.
First carry out slipping behind: now getting-behind is true.

Chapter 10 - Looking under

This is the looking under equates to examining rule:
	if an underside (called the underpart) is part of the noun:
		now the underpart is examined.

The customized clever looking under rule is listed instead of the clever looking under rule in the carry out looking under rules.
The looking under equates to examining rule is listed before the customized clever looking under rule in the carry out looking under rules.

This is the customized clever looking under rule:
	if an underside (called the underpart) is part of the noun and something is in the underpart:
		now the underpart is open;
		if the number of locale-supportable things in the underpart is 0:
			if getting-under is true:
				do nothing;
			otherwise:
				say "[There's] nothing under [the noun]." (A);
		otherwise:
			say "Under [the noun] [is-are a list of locale-supportable things in the underpart]." (B);
	otherwise:
		follow the standard looking under rule.
		
getting-under is a truth state that varies. getting-under is false.
First before: now getting-under is false.
First carry out entering underneath: now getting-under is true.
		
Chapter 11 - Opening and closing

Carry out an actor closing a container (this is the obscure when closing rule):
	repeat with obj running through things in the noun:
		now the noun obscures obj.
		
Carry out an actor opening a container (this is the reveal when opening rule):
	repeat with obj running through things in the noun:
		now the noun does not obscure obj.
		
Instead of pulling or pushing or turning a door (called the portal) (this is the convert pulling and pushing doors to opening and closing rule):
	if the portal is open:
		try closing the portal;
	otherwise:
		try opening the portal.
		
Instead of an actor opening a tap (this is the convert opening taps to switching rule):
	try the actor switching on the noun. 

Instead of an actor closing a tap (this is the convert closing taps to switching rule): 
	try the actor switching off the noun.
	
Chapter 12 - Rebooting

First check rebooting (this is the switch on things switched off instead of rebooting rule):
	if the noun is switched off, try switching on the noun instead.
	
Chapter 13 - Remembering

Report remembering (this is the report remembering things that should be nearby rule):
	if the remembered location of the noun is enclosed by the location or the remembered location of the noun is the location:
		if the remembered location of the noun is a closed container:
			abide by the Remembering specific report remembering rule;
		otherwise if the remembered location of the noun is not the holder of the noun:
			say "[no time]The last time [we] [saw] [the noun], [they] [was-were of noun] [i]right here[/i][if it's Nighttime]. [The intruder] [have] moved [regarding the noun][them][end if]." (A);
			stop the action;
		otherwise:
			try examining the noun;
			stop the action.
			
The report remembering things that should be nearby rule is listed first in the report remembering rules.

Report remembering (this is the report remembering things already carried rule):
	if the player carries the noun or the player wears the noun:
		say "[no time][We] [if it's Nighttime]will [end if]already have [the noun]." (A);
		stop the action.

The report remembering things already carried rule is listed first in the report remembering rules.
		
Chapter 14 - Searching

Understand "room" as a room.

Instead of searching a room (called the spot):
	if the spot is the location, try looking;
	otherwise try examining the spot.

After deciding the scope of the player while searching (this is the allow searching the location rule):
	place the location in scope.

After deciding the scope of the player while searching (this is the allow searching visible rooms rule):
	follow the scopable connectivity rule.
		
Rule for reaching inside a room (called the otherplace) while searching (this is the allow searching rooms rule):
	if the otherplace is connected with the location:
		allow access;
	otherwise:
		say "[no time]You [can't see] [the noun] from [if it's Nighttime]t[end if]here." (A);
		deny access.
	
Chapter 15 - Standing up and standing up on

First carry out an actor standing up (this is the stop hiding when standing up rule):
	if something (called the barrier) obscures the actor:
		now the barrier does not obscure the actor.
		
First carry out an actor standing up on (this is the stop hiding when standing up on rule):
	if something (called the barrier) obscures the actor:
		now the barrier does not obscure the actor.
		
First carry out an actor exiting (this is the stop hiding when exiting rule):
	if something (called the barrier) obscures the actor:
		now the barrier does not obscure the actor.
		
Chapter 16 - Switching on and off

Setting action variables for switching on something which includes a switch (this is the adapted redirecting switches for switching on rule):
	if the noun is the oven:
		now the noun is the oven-switch;
	otherwise if the noun is the stove:
		now the noun is the stove-knobs;
	otherwise:
		let relevant switch be a random switch which is part of the noun;
		now the noun is the relevant switch.
		
Setting action variables for switching off something which includes a switch (this is the adapted redirecting switches for switching off rule):
	if the noun is the oven:
		now the noun is the oven-switch;
	otherwise if the noun is the stove:
		now the noun is the stove-knobs;
	otherwise:
		let relevant switch be a random switch which is part of the noun;
		now the noun is the relevant switch.
		
Report switching on a tap (this is the standard report switching taps on rule):
	say "[We] [turn] on [the noun]." (A) instead. [since "switch on" sounds weird in this context.]

Report switching off a tap (this is the standard report switching taps off rule):
	say "[We] [turn] off [the noun]." (A) instead.

Report someone switching on a tap (this is the standard report someone switching taps on rule):
	say "[The actor] [turn] on [the noun]." (A) instead. [since "switch on" sounds weird in this context.]

Report someone switching off a tap (this is the standard report someone switching taps off rule):
	say "[The actor] [turn] off [the noun]." (A) instead.
		
Chapter 17 - Taking

Check taking (this is the not worth dealing with unimportant things rule):
	if the noun is unimportant:
		say "[no time]It probably [if it's Nighttime]won't be[else]isn't[end if] worth carrying [the noun] around." (A) instead.

Last check taking (this is the not worth carrying bulk rule):
	if the noun is bulky:
		say "[no time]It probably [if it's Nighttime]won't be[else]isn't[end if] worth carrying around something so bulky." (A) instead.
		
Before (this is the carry enclosed things rule):
	if action requires a carried noun:
		if the noun is not nothing and the player encloses the noun:
			if the player does not carry the noun:
				say "(first taking [the noun])[command clarification break]" (A);
				silently try taking the noun;
	if action requires a carried second noun:
		if the second noun is not nothing and the player encloses the second noun:
			if the player does not carry the second noun:
				say "(first taking [the second noun])[command clarification break]" (B);
				silently try taking the second noun;
		
Chapter 18 - Taking inventory

A thing can be previously-opened. A thing is seldom previously-opened. A supporter is usually previously-opened.

When play begins (this is the things that are open must have been previously opened rule):
	repeat with obj running through open things:
		now obj is previously-opened.

Carry out opening (this is the opening causes the noun to be previously opened rule):
	now the noun is previously-opened.

Instead of taking inventory (this is the customized inventory rule):
	let L be the list of things carried by the player;
	let M be the list of things worn by the player;
	repeat with obj running through L:
		if obj is listed in the list of parts unrecognized, remove obj from L;
		if obj is a PS-connector, remove obj from L;
		if obj is part of the smartphone, remove obj from L;
	if L is empty:
		if it's Nighttime:
			say "By that point, you won't be carrying anything. [nobr]";
		otherwise:
			say "You're not carrying anything. [nobr]";
	otherwise:
		say "[if it's Nighttime]By that point, you'll be[otherwise]You're[end if] carrying [L with indefinite articles]. [nobr]";
		let N be a list of things;
		let O be a list of things;
		repeat with that running through things enclosed by the player:
			if that is a container or that is a supporter:
				if the player carries that:
					add that to N;
				otherwise:
					add that to O;
		add O to N;
		repeat with X running from 1 to 3:
			repeat with obj running through N:
				[if obj is not a container and obj is not a supporter, remove obj from N;]
				if obj is a pocket, remove obj from N, if present;
			repeat with obj running through N:
				if obj is empty, remove obj from N, if present;
			repeat with obj running through N:
				unless obj is previously-opened, remove obj from N, if present;
			repeat with obj running through N:
				if obj is the keyring, remove obj from N, if present;
			repeat with obj running through N:
				if obj is the pill bottles, remove obj from N, if present;
			[remove the smartphone from N, if present;]
		unless N is empty:
			repeat with X running from 1 to the number of entries in N:
				let item be entry X of N;
				if X is 1:
					say "[if item is a supporter]On[otherwise]In[end if] [the item] [nobr]";
				otherwise:
					say "[if item is a supporter]on[otherwise]in[end if] [the item] [nobr]";
				if item is a container:
					say "[is-are a list of things in the item][nobr]";
				if item is a supporter:
					say "[is-are a list of things on the item][nobr]";
				if X is the number of entries in N:
					say ". [nobr]";
				otherwise if X is the number of entries in N minus 1:
					say "; and [nobr]";
				otherwise:
					say "; [nobr]";
	say paragraph break;
	say "[if L is empty]However[otherwise]Additionally[end if], [if it's Daytime]you're[otherwise]you'll be[end if] wearing [M with indefinite articles][nobr]";
	if the player wears the leather jacket and the jacket-pockets are not empty:
		say "; in the pockets of the leather jacket [is-are a list of things in the jacket-pockets][nobr]";
	if the player wears the trenchcoat and the coat-pockets are not empty:
		say "; in the pockets of the trenchcoat [is-are a list of things in the coat-pockets][nobr]";
	if the sweatpants-pockets are not empty:
		say ", and in the pockets of the sweatpants [is-are a list of things in the sweatpants-pockets].";
	otherwise:
		say "."
		
To add (X - value) to the end of (L - list of values):
	let N be the number of entries in L;
	increment N;
	add X at entry N in L.
	
To add (X - list of values) to the end of (L - list of values):
	let N be the number of entries in L;
	increment N;
	add X at entry N in L.
		
Chapter 19 - Waking

The customized block waking rule is listed instead of the block waking rule in the check waking rules.

This is the customized block waking rule:
	if the actor is the player:
		if the noun is a person:
			take no time;
			say "[The noun] [if it's Daytime]is already clearly[otherwise]will already clearly be[end if] awake." (A) instead;
		otherwise if the noun is a device:
			try switching on the noun instead;
		otherwise:
			take no time;
			say "That seems[if it's Nighttime] like it would be[end if] unnecessary." (B) instead;
	stop the action.

Chapter 20 - Stuff with keys

The extended limiting keychains rule is listed instead of the limiting keychains rule in the instead rules.

Instead of putting something which is not keyish on a keychain (this is the extended limiting keychains rule):
	say "[The noun] [are] not a key." (A).
	
Definition: a thing is keyish:
	if it is a passkey, decide yes;
	if it is a latchkey, decide yes;
	decide no.
	
Book 6 - Behavior

Answering something that is verbal behavior. Asking something about is verbal behavior. Asking something for is verbal behavior. Saying no is verbal behavior. Saying sorry is verbal behavior. Saying yes is verbal behavior. Telling something about is verbal behavior.

Answering something that is noisy behavior. Asking something about is noisy behavior. Asking something for is noisy behavior. Drinking is noisy behavior. Jumping is noisy behavior. Locking something with is noisy behavior. Locking keylessly something is noisy behavior. Pushing something to is noisy behavior. Saying no is noisy behavior. Saying sorry is noisy behavior. Saying yes is noisy behavior. Telling something about is noisy behavior. Throwing something at is noisy behavior. Unlocking something with is noisy behavior. Unlocking keylessly something is noisy behavior.

Attacking is obvious behavior. Closing is obvious behavior. Depositing is obvious behavior. Dropping is obvious behavior. Eating is obvious behavior. Getting off is obvious behavior. Entering is obvious behavior. Exiting is obvious behavior. Inserting something into is obvious behavior. Kissing is obvious behavior. Opening is obvious behavior. Pulling is obvious behavior. Placing something under is obvious behavior. Pushing is obvious behavior. Putting something on is obvious behavior. Removing something from is obvious behavior. Rubbing is obvious behavior. Searching is obvious behavior. Setting something to is obvious behavior. Sitting on is obvious behavior. Standing up is obvious behavior. Standing up on is obvious behavior. Swinging is obvious behavior. Switching off is obvious behavior. Switching on is obvious behavior. Taking off is obvious behavior. Turning is obvious behavior. Tying something to is obvious behavior. Waving is obvious behavior. Waving hands is obvious behavior. Wearing is obvious behavior.

A person can be being noisy, being obvious, or being subtle. The player is being subtle. The intruder is being subtle.
Yourself can be found or unfound. The player is unfound.

Last every turn (this is the everyone is subtle by default rule):
	now the intruder is being subtle;
	now the player is being subtle.

Before an actor noisy behavior (this is the behaving noisily rule):
	now the actor is being noisy;
	continue the action.
	
Before an actor obvious behavior (this is the behaving obviously rule):
	now the actor is being obvious;
	continue the action.
	
[NOTE: the below is adapted from example 408 - 'Timeless' from the Inform Recipe Book]
	
Taking inventory is acting fast. Remembering is acting fast. Ruminating about something is acting fast. Waking up is acting fast. Thinking is acting fast. Crying is acting fast. Dancing is acting fast. Magicking is acting fast. Enchanting something is acting fast. Praying is acting fast. Screaming is acting fast. Singing is acting fast. Winning is acting fast. Losing is acting fast. Shaving is acting fast. Teethbrushing is acting fast.

The take rapid actions out of world rule is listed before the every turn stage rule in the turn sequence rules.

This is the take rapid actions out of world rule:
	if it's Nighttime:
		if acting fast, rule succeeds.
	
Book 7 - Customized responses

Chapter 1 - Standard rules responses

[adjust light rule response (A): "[It] [are] [if story tense is present tense]now [end if]pitch dark in [if story tense is present tense]here[else]there[end if]!"]
The basic accessibility rule response (A) is "[i][bracket]You must name something more substantial.[close bracket][/i]".
[    requested actions require persuasion rule response (A): "[The noun] [have] better things to do."]
The access through barriers rule response (A) is "[i][bracket][regarding the noun][Those] [aren't] available.[close bracket][/i]".
The can't reach inside rooms rule response (A) is "[We] [can't] reach [if it's Daytime]over there from here[otherwise]that far from there[end if]."
The action processing internal rule response (A) is "[i][bracket]That command asks to do something outside of play, so it can only make sense from you to me. [The noun] cannot be asked to do this.[close bracket][/i]".
The action processing internal rule response (B) is "[i][bracket]You must name an object.[close bracket][/i]".
The action processing internal rule response (C) is "[i][bracket]You may not name an object.[close bracket][/i]".
The action processing internal rule response (D) is "[i][bracket]You must supply a noun.[close bracket][/i]".
The action processing internal rule response (E) is "[i][bracket]You may not supply a noun.[close bracket][/i]".
The action processing internal rule response (F) is "[i][bracket]You must name a second object.[close bracket][/i]".
The action processing internal rule response (G) is "[i][bracket]You may not name a second object.[close bracket][/i]".
The action processing internal rule response (H) is "[i][bracket]You must supply a second noun.[close bracket][/i]".
The action processing internal rule response (I) is "[i][bracket]You may not supply a second noun.[close bracket][/i]".
The action processing internal rule response (K) is "[i][bracket]I didn't understand that instruction.[close bracket][/i]".
The parser error internal rule response (A) is "[i][bracket]I didn't understand that sentence.[close bracket][/i]".
The parser error internal rule response (B) is "I only understood you as far as wanting to ".
The parser error internal rule response (C) is "I only understood you as far as wanting to (go) ".
The parser error internal rule response (D) is "[i][bracket]I didn't understand that number.[close bracket][/i]".
The parser error internal rule response (F) is "[i][bracket]You seem to have said too little![close bracket][/i]".
The parser error internal rule response (H) is "[i][bracket]You can't use multiple objects with that verb.[close bracket][/i]".
The parser error internal rule response (I) is "[i][bracket]You can only use multiple objects once on a line.[close bracket][/i]".
The parser error internal rule response (J) is "[i][bracket]I'm not sure what ['][pronoun i6 dictionary word]['] refers to.[close bracket][/i]".
The parser error internal rule response (N) is "[i][bracket]That's not a verb I recognize.[close bracket][/i]".
The parser error internal rule response (O) is "[i][bracket]That's not something you need to refer to in the course of this game.[close bracket][/i]".
The parser error internal rule response (P) is "[i][bracket]I didn't understand the way that finished.[close bracket][/i]".
The parser error internal rule response (Q) is "[i][bracket][if number understood is 0]None[otherwise]Only [number understood in words][end if] of those [regarding the number understood][are] available.[close bracket][/i]".
The parser error internal rule response (R) is "[i][bracket]That noun did not make sense in this context.[close bracket][/i]".
The parser error internal rule response (S) is "[i][bracket]To repeat a command like 'frog, jump', just say 'again', not 'frog, again'.[close bracket][/i]".
The parser error internal rule response (T) is "[i][bracket]You can't begin with a comma.[close bracket][/i]".
The parser error internal rule response (U) is "[i][bracket]You seem to want to talk to someone, but I can't see whom.[close bracket][/i]".
The parser error internal rule response (V) is "[i][bracket]You can't talk to [the noun].[close bracket][/i]".
The parser error internal rule response (W) is "[i][bracket]To talk to someone, try 'someone, hello' or some such.[close bracket][/i]".
The parser error internal rule response (X) is "[i][bracket]I beg your pardon?[close bracket][/i]".
The parser nothing error internal rule response (A) is "[i][bracket]Nothing to do![close bracket][/i]".
The parser nothing error internal rule response (B) is "[i][bracket][There] [adapt the verb are from the third person plural] none at all available![close bracket][/i]".
The parser command internal rule response (A) is "[i][bracket]Sorry, that can't be corrected.[close bracket][/i]".
The parser command internal rule response (B) is "[i][bracket]Think nothing of it.[close bracket][/i]".
The parser command internal rule response (C) is "[i][bracket]'Oops' can only correct a single word.[close bracket][/i]".
The parser command internal rule response (D) is "[i][bracket]You can hardly repeat that.[close bracket][/i]".
The parser clarification internal rule response (C) is "[i][bracket]Sorry, you can only have one item here. Which exactly?[close bracket][/i]".
The immediately undo rule response (A) is "[i][bracket]The use of 'undo' is forbidden in this story.[close bracket][/i]".
The immediately undo rule response (B) is "[i][bracket]You can't 'undo' what hasn't been done![close bracket][/i]".
The immediately undo rule response (C) is "[i][bracket]Your interpreter does not provide 'undo'. Sorry![close bracket][/i]".
The immediately undo rule response (D) is "[i][bracket]'Undo' failed. Sorry![close bracket][/i]".
The immediately undo rule response (E) is "[i][bracket]Previous turn undone.[close bracket][/i]".
The immediately undo rule response (F) is "[i][bracket]'Undo' capacity exhausted. Sorry![close bracket][/i]".
The quit the game rule response (A) is "[i][bracket]Are you sure you want to quit?[close bracket][/i] ".
The save the game rule response (A) is "[i][bracket]Save failed.[close bracket][/i]".
The save the game rule response (B) is "[i][bracket]Game saved.[close bracket][/i]".
The restore the game rule response (A) is "[i][bracket]Restore failed.[close bracket][/i]".
The restore the game rule response (B) is "[i][bracket]Game restored.[close bracket][/i][updatecolors][run paragraph on]".
The restart the game rule response (A) is "[i][bracket]Are you sure you want to restart?[close bracket][/i] ".
The restart the game rule response (B) is "[i][bracket]Restart failed.[close bracket][/i] ".
The verify the story file rule response (A) is "[i][bracket]The game file has verified as intact.[close bracket][/i]".
The verify the story file rule response (B) is "[i][bracket]The game file did not verify as intact, and may be corrupt.[close bracket][/i]".
The switch the story transcript on rule response (A) is "[i][bracket]Transcripting is already on.[close bracket][/i]".
The switch the story transcript on rule response (C) is "[i][bracket]Attempt to begin transcript failed.[close bracket][/i]".
The switch the story transcript off rule response (A) is "[i][bracket]Transcripting is already off.[close bracket][/i]".
The switch the story transcript off rule response (B) is "[br][i][bracket]End of transcript.[close bracket][/i]".
The switch the story transcript off rule response (C) is "[i][bracket]Attempt to end transcript failed.[close bracket][/i]".
The announce the score rule response (C) is "[i][bracket]There is no score in this story.[close bracket][/i]".
The block vaguely going rule response (A) is "[i][bracket]You'll have to say which compass direction to go in.[close bracket][/i]".
The standard respond to final question rule response (A) is "[i][bracket]Please give one of the answers above.[close bracket][/i]".
The you-can-also-see rule response (D) is "[if it's Daytime]can also[otherwise]will also be able to[end if] see ".
The you-can-also-see rule response (E) is "[if it's Daytime]can[otherwise]will be able to[end if] see ".
The you-can-also-see rule response (F) is " [if it's Nighttime and the location is not Main-Bed]t[end if]here".
The print empty inventory rule response (A) is "[nt][We] [if it's Daytime][are] carrying nothing[otherwise]won't be carrying anything[end if]."
The report other people taking inventory rule response (A) is "[The actor] [dig] through [their] possessions."
The can't take yourself rule response (A) is "[nt]You'd better have ahold of yourself[if it's Daytime] already[otherwise], if you're going to survive this[end if]."
The can't take component parts rule response (A) is "[nnt][regarding the noun][Those] [are] part of [the whole], and [can't] be separated from [regarding the whole][them]."
The can't take items out of play rule response (A) is "[nnt][regarding the noun][Those] [aren't] available."
The can't take what you're inside rule response (A) is "[nnt][We] [would have] to get [if noun is a supporter]off[otherwise]out of[end if] [the noun] first."
The can't take what's already taken rule response (A) is "[nnt][We] [if it's Nighttime]will [end if]already have [regarding the noun][those]."
The can't take scenery rule response (A) is "[nt][if it's Daytime][regarding the noun][They're] hardly[otherwise][regarding the noun][They][']ll hardly be[end if] portable."
The can only take things rule response (A) is "[nt][We] [can't] carry [the noun]."
The can't take what's fixed in place rule response (A) is "[nnt][regarding the noun][They're] fixed in place."
The can't exceed carrying capacity rule response (A) is "[nnt][We]['re] carrying too many things already."
The standard report taking rule response (A) is "[if it's Daytime]Taken[otherwise]You'll take [the noun][end if]."
The can't remove what's not inside rule response (A) is "[nt]But [regarding the noun][they] [aren't] there [if it's Daytime]now[otherwise]by that point[end if]."
The can't drop yourself rule response (A) is "[nt]You'd better keep ahold of yourself[if it's Nighttime], if you're going to survive this[end if]."
The can't drop body parts rule response (A) is "[nnt][We] [can't drop] part of [ourselves]."
The can't drop what's already dropped rule response (A) is "[nnt][The noun] [are already] [if it's Nighttime]t[end if]here."
The can't drop what's not held rule response (A) is "[nnt][We] [if the player encloses the noun][can't drop] something you're not directly carrying[otherwise if it's Daytime][haven't] got [regarding the noun][those][otherwise]won't have [regarding the noun][those][end if]."
The can't drop if this exceeds carrying capacity rule response (A) is "[nnt][There] [if it's Daytime][are] no[otherwise]won't be any[end if] more room [at the receptacle]."
The can't drop if this exceeds carrying capacity rule response (B) is "[nnt][There] [if it's Daytime][are] no[otherwise]won't be any[end if] more room [at the receptacle]."
The standard report dropping rule response (A) is "[if it's Daytime]Dropped[otherwise]You'll drop [the noun][end if]."
The can't put something on itself rule response (A) is "[nnt][We] [can't put] something on top of itself."
The can't put onto what's not a supporter rule response (A) is "[nnt]You doubt putting things on [the second noun] would be a productive course of action."
The can't put if this exceeds carrying capacity rule response (A) is "[nnt][There] [if it's Daytime][are] no[otherwise]won't be any[end if] more room on [the second noun]."
The concise report putting rule response (A) is "[if it's Daytime]Done[otherwise]You'll put [the noun] on [the second noun][end if]."
The can't insert what's already inserted rule response (A) is "[nnt][The noun] [are already] there."
The can't insert something into itself rule response (A) is "[nnt][We] [can't put] something inside itself."
The can't insert into closed containers rule response (A) is "[nnt][The second noun] [are] closed."
The can't insert into what's not a container rule response (A) is "[nnt][regarding the second noun][Those] can't contain things."
The can't insert if this exceeds carrying capacity rule response (A) is "[nnt][There] [if it's Daytime][are] no[otherwise]won't be any[end if] more room in [the second noun]."
The concise report inserting rule response (A) is "[if it's Daytime]Done[otherwise]You'll put [the noun] into [the second noun][end if]."
The can't eat unless edible rule response (A) is "[nnt][regarding the noun][They're] not something you[if it's Daytime] can[otherwise][']ll be able to[end if] eat."
The can't eat other people's food rule response (A) is "[nnt][The owner] [might not appreciate] that."
The can't travel in what's not a vehicle rule response (A) is "[nnt][We] [would have] to get off [the nonvehicle] first."
The can't travel in what's not a vehicle rule response (B) is "[nnt][We] [would have] to get out of [the nonvehicle] first."
The can't go through undescribed doors rule response (A) is "[nnt][We] [can't go] that way."
The can't go that way rule response (A) is "[nnt][There's] a wall in that direction."
The can't enter what's already entered rule response (A) is "[nnt]But [you're already] [at the noun]."
The can't enter what's already entered rule response (B) is "[nnt]But [you're already] [at the noun]."
The can't enter what's not enterable rule response (A) is "[nnt][if the noun is plural-named]Those aren't[otherwise]That's not[end if] something [if it's Daytime][we] [can][otherwise]you'll be able to[end if] stand on."
The can't enter what's not enterable rule response (B) is "[nnt][if the noun is plural-named]Those aren't[otherwise]That's not[end if] something [if it's Daytime][we] [can][otherwise]you'll be able to[end if] sit down on."
The can't enter what's not enterable rule response (C) is "[nnt][if the noun is plural-named]Those aren't[otherwise]That's not[end if] something [if it's Daytime][we] [can][otherwise]you'll be able to[end if] lie down on."
The can't enter what's not enterable rule response (D) is "[nnt][if the noun is plural-named]Those aren't[otherwise]That's not[end if] something [if it's Daytime][we] [can][otherwise]you'll be able to[end if] enter."
The can't enter closed containers rule response (A) is "[nnt][We] [if it's Daytime][can't][otherwise]won't be able to[end if] [adapt entering preposition of the noun] the closed [noun]."
The can't enter if this exceeds carrying capacity rule response (A) is "[nnt][There] [if it's Daytime][are] no[otherwise]won't be any[end if] more room [at the noun]."
The can't enter if this exceeds carrying capacity rule response (B) is "[nnt][There] [if it's Daytime][are] no[otherwise]won't be any[end if] more room [at the noun]."
The can't enter something carried rule response (A) is "[nnt][We] [can't] get into anything."
The can't exit when not inside anything rule response (A) is "[nt]But [we] [aren't] in anything [if story tense is present tense]at the moment[otherwise]by that point[end if]."
The can't exit closed containers rule response (A) is "[nnt]You [can't] get out of the closed [cage]."
The can't get off things rule response (A) is "[nt]But [we] [aren't] [at the noun] [if story tense is present tense]at the moment[otherwise]by that point[end if]."
The room description body text rule response (A) is "[It] [are] too dark to see in [if it's Daytime]here[otherwise]there[end if]."
The can't search closed opaque containers rule response (A) is "[nnt][We] [if it's Daytime][can't see][otherwise]won't be able to see[end if] [preposition of the noun], since [the noun] [are] closed."
The block consulting rule response (A) is "[We] [discover] nothing notable in [the noun]."
The can't lock without a lock rule response (A) is "[nnt][if it's Daytime][regarding the noun][Those][otherwise]You already know [regarding the noun][those][end if] [if the noun is singular-named]doesn't[otherwise]don't[end if] lock."
The can't lock what's already locked rule response (A) is "[nt][if it's Daytime][regarding the noun][They're][otherwise][regarding the noun][They][']ll already be[end if] locked [if story tense is present tense]at the moment[otherwise]by that point[end if]."
The can't lock what's open rule response (A) is "[nnt]First [we] [would have] to close [the noun]."
The can't lock without the correct key rule response (A) is "[nnt][regarding the second noun][Those] [don't] fit the lock."
The can't unlock without a lock rule response (A) is "[nnt][if it's Daytime][regarding the noun][Those][otherwise]You already know [regarding the noun][those][end if] [if the noun is singular-named]doesn't[otherwise]don't[end if] unlock."
The can't unlock what's already unlocked rule response (A) is "[nt][if it's Daytime][regarding the noun][They're][otherwise][regarding the noun][They][']ll already be[end if] unlocked [if story tense is present tense]at the moment[otherwise]by that point[end if]."
The can't unlock without the correct key rule response (A) is "[regarding the second noun][Those] [don't] fit the lock."
The can't switch on unless switchable rule response (A) is "[nnt][regarding the noun][They] [aren't] something [if it's Daytime][we] [can][otherwise]you'll be able to[end if] switch."
The can't switch on what's already on rule response (A) is "[nt][if it's Daytime][regarding the noun][They're] already[otherwise][regarding the noun][They][']ll already be[end if] on."
The can't switch off unless switchable rule response (A) is "[nnt][regarding the noun][They] [aren't] something [if it's Daytime][we] [can][otherwise]you'll be able to[end if] switch."
The can't switch off what's already off rule response (A) is "[nt][if it's Daytime][regarding the noun][They're] already[otherwise][regarding the noun][They][']ll already be[end if] off."
The can't open unless openable rule response (A) is "[nnt][regarding the noun][They] [aren't] something [if it's Daytime][we] [can][otherwise]you'll be able to[end if] open."
The can't open what's locked rule response (A) is "[nnt][regarding the noun][They]['re] locked[if it's Nighttime] by that point[end if]."
The can't open what's already open rule response (A) is "[nt][if it's Daytime][regarding the noun][They're] already[otherwise][regarding the noun][They][']ll already be[end if] open."
The can't close unless openable rule response (A) is "[nnt][regarding the noun][They] [aren't] something [if it's Daytime][we] [can][otherwise]you'll be able to[end if] close."
The can't close what's already closed rule response (A) is "[nt][if it's Daytime][regarding the noun][They're] already[otherwise][regarding the noun][They][']ll already be[end if] closed."
The can't wear what's not clothing rule response (A) is "[nt][We] [can't wear] [regarding the noun][those]!"
The can't wear what's not held rule response (A) is "[nnt][We] [aren't] holding [regarding the noun][those]!"
The can't wear what's already worn rule response (A) is "[nt][You're already] wearing [regarding the noun][those]!"
The can't take off what's not worn rule response (A) is "[nnt][if it's Daytime][We]['re] already not[otherwise][We] [aren't][end if] wearing [the noun][if it's Nighttime] anyway[end if]."
The can't exceed carrying capacity when taking off rule response (A) is "[nt][We]['re] carrying too many things already."
The can't give what you haven't got rule response (A) is "[nnt][We] [aren't] holding [the noun]."
The can't give to yourself rule response (A) is "[nt]You[if it's Nighttime][']ll[end if] already have [the noun]."
The can't give to a non-person rule response (A) is "[nt][The second noun] [aren't] able to receive things."
The can't exceed carrying capacity when giving rule response (A) is "[nt][The second noun] [are] carrying too many things [if it's Daytime]already[otherwise]by that point[end if]."
The can't show what you haven't got rule response (A) is "[nnt][We] [if it's Daytime][aren't][otherwise]won't be[end if] holding [the noun][if it's Nighttime] by that point[end if]."
The block waking rule response (A) is "[nt]That seems[if it's Nighttime] like it would be[end if] unnecessary."
The futile to throw things at inanimate objects rule response (A) is "[nt]Once you identify the impulse, [we] [find] you have no reason to actually follow through."
The block throwing at rule response (A) is "[nt]Once you identify the impulse, [we] [find] you have no reason to actually follow through."
The block attacking rule response (A) is "[nt]Violence [aren't] the answer to this one."
The kissing yourself rule response (A) is "[nt][if it's Daytime]Not the time[otherwise]You definitely won't have any time for that kind of thing[end if]."
The block kissing rule response (A) is "[nt][The noun] probably wouldn't like that."
The telling yourself rule response (A) is "[nt]You've always been able to think just fine without having to vocalize to yourself."
The standard report waiting rule response (A) is "[if it's Daytime]Time [pass][otherwise]You will hold your breath and stay perfectly still[end if]."
The report touching yourself rule response (A) is "[nt][if it's Daytime]Not the time[otherwise]You definitely won't have any time for that kind of thing[end if]."
The report touching other people rule response (A) is "[nt][The noun] probably wouldn't welcome that."
The can't wave what's not held rule response (A) is "[nt]But [we] [aren't] holding [regarding the noun][those]."
The can't pull what's fixed in place rule response (A) is "[nnt]It [adapt the verb make from the third person singular] little difference."
The can't pull scenery rule response (A) is "[nt][We] [are] unable to."
The can't pull people rule response (A) is "[nt][The noun] probably wouldn't welcome that."
The report pulling rule response (A) is "[nnt]It [adapt the verb make from the third person singular] little difference."
The can't push what's fixed in place rule response (A) is "[nnt]It [adapt the verb make from the third person singular] little difference."
The can't push scenery rule response (A) is "[nt][We] [are] unable to."
The can't push people rule response (A) is "[nt][The noun] probably wouldn't welcome that."
The report pushing rule response (A) is "[nnt]It [adapt the verb make from the third person singular] little difference."
The can't turn what's fixed in place rule response (A) is "[nnt]It [adapt the verb make from the third person singular] little difference."
The can't turn scenery rule response (A) is "[nt][We] [are] unable to."
The can't turn people rule response (A) is "[nt][The noun] probably wouldn't welcome that."
The report turning rule response (A) is "[nnt]It [adapt the verb make from the third person singular] little difference."
The can't push unpushable things rule response (A) is "[nnt][The noun] [negate the verb can in the present tense] be pushed from place to place."
The can't push to non-directions rule response (A) is "[nt][regarding the noun][They] [negate the verb are in the present tense] a direction."
The can't push from within rule response (A) is "[nt][We] [can't push] [the noun] while you're inside [them]."
The block pushing in directions rule response (A) is "[nnt][The noun] [negate the verb can in the present tense] be pushed from place to place."
The innuendo about squeezing people rule response (A) is "[nt][The noun] probably wouldn't welcome that."
The report squeezing rule response (A) is "[nt]You doubt that would be a productive course of action."
The block saying yes rule response (A) is "[nt][i][bracket]That was a rhetorical question.[close bracket][/i]".
The block saying no rule response (A) is "[nt][i][bracket]That was a rhetorical question.[close bracket][/i]".
The block burning rule response (A) is "[nt]You suspect that course of action would be more dangerous than productive."
The block waking up rule response (A) is "[nt]You're fairly certain you're not asleep."
The block thinking rule response (A) is "[nt]Don't think. Just act."
The block cutting rule response (A) is "[nt]You doubt that would be a productive course of action."
The block tying rule response (A) is "[nt]You doubt that would be a productive course of action."
The block drinking rule response (A) is "[nt][if it's Daytime]There's nothing[otherwise]There won't be anything[end if] suitable to drink [if it's Nighttime]t[end if]here."
The block saying sorry rule response (A) is "[nt]No need to apologize."
The block swinging rule response (A) is "[nt]You doubt that would be a productive course of action."
The can't rub another person rule response (A) is "[nt][The noun] probably wouldn't welcome that."
The block setting it to rule response (A) is "[nt][if it's Nighttime]You know [the noun][otherwise][The noun][end if] can't be [']set to['] anything."
The block buying rule response (A) is "[nt]Nothing [are] on sale."
The block climbing rule response (A) is "[nt]Little [are] to be achieved by that."
The block sleeping rule response (A) is "[nt][We] [aren't] feeling especially drowsy at the moment."

Chapter 2 - Locksmith responses

The standard printing key lack rule response (A) is "[nnt][We] [lack] a key that fits [the locked-thing]."
The right second rule response (A) is "[nnt][The second noun] [do not fit] [the noun]."
The  limiting keychains rule response (A) is "[nnt][The noun] [are] not a key."
The noun must be accessible rule response (A) is "[nnt]Without holding [the noun], [we] [if it's Daytime][can] do nothing[otherwise]won't be able to do anything[end if]."
The second noun must be accessible rule response (A) is "[nnt]Without holding [the second noun], [we] [if it's Daytime][can] do nothing[otherwise]won't be able to do anything[end if]."

Chapter 3 - Approaches responses

The  tell the player when blocked at a door rule response (A) is "[nt]Unfortunately, [we] [find] [we] [lack] a key fitting [the locked-thing].[no line break]".
The can't approach our current location rule response (A) is "[nt][You're already] there!"
The refusing bad headings rule response (A) is "[nt][We] [can't] think how to get there from here."

Chapter 4 - Postures responses

The convert lying down rule response (A) is "[nnt][We] [can't] lie down on [the holder of the actor]."
The convert lying down rule response (B) is "[nnt][There's] nothing to lie on [if it's Nighttime]t[end if]here."
The  convert sitting down rule response (A) is "[nnt][We] [can't] sit down on [the holder of the actor]."
The convert sitting down rule response (B) is "[nnt][There's] nothing to sit on [if it's Nighttime]t[end if]here."
The convert standing up rule response (A) is "[nnt][We] [can't] stand up on [the holder of the actor]."
The convert standing up rule response (B) is "[nnt][There's] nothing to stand on."
The can't use inappropriate postures rule response (A) is "[nnt][We] [can't] take that position [in-on the holder of the actor]."
The can't use already used posture rule response (A) is "[nnt][We] [if it's Daytime][are] already[otherwise]will already be[end if] [the posture understood]."
The can't use already used posture rule response (B) is "[nt][The actor] [is already] [the posture understood]."
[    standard position report rule response (A): "[We] [are] [if the story tense is present tense]now [end if][the posture of the player][if the holder of the player is not the location] [in-on the holder of the player][end if]."]
The refuse jumping while not standing rule response (A) is "[nt][We] [can't] jump while [the posture of the player]."

Chapter 5 - Basic Screen Effects responses

The standard pausing the game rule response (A) is "[/p][i][bracket]Please press SPACE to continue.[close bracket][/i]".

Chapter 6 - Bulk Limiter responses

The bulk test rule response (A) is "[nnt][The noun] [are] too big to fit in [the second noun]."
The bulk test rule response (B) is "[nnt][There] [are not] enough room left in [the second noun] for [the noun]."
The person bulk test rule response (A) is "[nt][The noun] [are] too big for [if the actor is the player][us][otherwise][the actor][end if] to pick up."
The person bulk test rule response (B) is "[nt][If the player is the actor][We] [don't][otherwise][The actor] [don't][end if] have enough room left to carry [the noun]."

Chapter 7 - Underside responses

The take before placing under rule response (A) is "[nnt][The noun] [are already] under [the second noun]."
The can't put anything under itself rule response (A) is "[nt]Nothing can go under itself."
The can't put under any old thing rule response (A) is "[nnt][We] [can't] put anything under [the second noun]."
The test bulk underneath rule response (A) is "[nnt][The noun] [are] too big to fit under [the second noun]."
The test bulk underneath rule response (B) is "[nnt][There] [if it's Daytime][are not][otherwise]won't be[end if] enough room left under [the second noun] for [the noun]."
The standard report place under rule response (A) is "[We] [put] [the noun] under [the second noun]."

Chapter 8 - Enterable Underside responses

The can't drop what won't fit by bulk rule response (A) is "[nnt][The noun] [are] too big to fit under [the holder of the receptacle]."
The can't drop what won't fit by bulk rule response (B) is "[nnt][The noun] [are] too big to fit in [the receptacle]."
The can't drop what won't fit by bulk rule response (C) is "[nnt][There] [if it's Daytime][are not][otherwise]won't be[end if] enough room left under [the holder of the receptacle] for [the noun]."
The can't drop what won't fit by bulk rule response (D) is "[nnt][There] [if it's Daytime][are not][otherwise]won't be[end if] enough room left in [the receptacle] for [the noun]."
The can't enter underneath something with no underside rule response (A) is "[nnt][if it's Daytime]There's not[otherwise]There won't be[end if] enough space under [the noun]."
The can't enter underneath something already entered rule response (A) is "[nt]But [you're already] under [the noun]."
The can't enter underneath something not enterable rule response (A) is "[nnt][We] [if it's Daytime][can't enter][otherwise]won't be able to enter[end if] [regarding the noun][those]."
The can't fit underneath something rule response (A) is "[nt][if it's Daytime]You already know you're[otherwise][We]['re][end if] too big to fit under [the noun]."
The can't fit underneath something rule response (B) is "[nnt][There] [if it's Daytime][are not][otherwise]won't be[end if] enough room left under [the noun]."

Chapter 9 - Computers responses

The can only reboot computers rule response (A) is "[nt][The noun] [are] not rebootable."
The view software when looking at a screen rule response (A) is "[nnt][The noun] [are] closed."
The correct insufficient trackpad information rule response (A) is "[nt][i][bracket]Try CLICK ON (some option) WITH [the noun], or just CLICK ON (option), to make a selection.[close bracket][/i]".
The inability to act on parts of a closed laptop rule response (A) is "[nnt][The N] [are] closed [if it's Daytime]at the moment[otherwise]by that point[end if]."
The inability to act on secondary parts of a closed laptop rule response (A) is "[nnt][The N] [are] closed [if it's Daytime]at the moment[otherwise]by that point[end if]."
The block replying to email rule response (A) is "[nnt][We] [don't] have an internet connection."
The refuse to reply to nonexistent messages rule response (B) is "[nt][regarding the noun]No such message [are] available."
The guess a keyboard while typing rule response (A) is "[nt][i][bracket]You'll have to specify what you want to type on.[close bracket][/i]".
The reject typing on non-keyboards rule response (A) is "[nt][The second noun] won't be effective at doing that[unicode 8212][if the second noun is singular-named]it's[otherwise]they're[end if] not a keyboard."
The reject typing on switched off computers rule response (A) is "[nnt][The relevant computer] [are][if it's Daytime] currently[end if] switched off[if it's Nighttime] by that point[end if]."
The guess a keyboard while contentlessly typing rule response (A) is "[nt][i][bracket]You'll have to specify what you want to type.[close bracket][/i]".
The check whether typing nothing rule response (A) is "[nt][i][bracket]You'll have to specify what you want to type.[close bracket][/i]".
The guess a selection device while selecting rule response (A) is "[nt][i][bracket]You'll have to specify what you want to click with.[close bracket][/i]".
The click only with mice rule response (A) is "[nt][The second noun] won't be effective at doing that[unicode 8212][if the second noun is singular-named]it's[otherwise]they're[end if] not a selection tool."
The reject mousing on switched off computers rule response (A) is "[nnt][The relevant computer] [are][if it's Daytime] currently[end if] switched off[if it's Nighttime] by that point[end if]."

Chapter 10 - Plugs and Sockets responses

The leaving room whilst attached to fixed things rule response (A) is "[nt]It [would] be unwise to leave, since [we] [are] carrying [the item] which [are] attached to [the holder of the connectee]."
The plugging-a-plug rule response (A) is "[nnt][The noun] [are already] plugged into [the holder of the attachment of the noun]."
The plugging-something-other-than-a-plug rule response (A) is "[nnt][The noun] [have] no plug."
The plugging-into-a-socket rule response (A) is "[nnt][The second noun] [if it's Nighttime]will [end if]already [if it's Daytime][have][otherwise]have[end if] [the holder of the attachment of the second noun] plugged into [regarding the second noun][them]."
The plugging-into-something-other-than-a-socket rule response (A) is "[nnt][The second noun] [have] no socket."
The already-plugged-together rule response (A) is "[nnt][The candidate inserter] [are already] plugged into [the candidate receiver]."
The plug-unknown-socket-known rule response (A) is "[nnt][The candidate inserter] [have] no free plugs that match [the candidate socket]."
The plug-known-socket-unknown rule response (A) is "[nnt][The candidate receiver] [have] no free sockets that match [the candidate plug]."
The plug-unknown-socket-unknown rule response (A) is "[nt][i][bracket][regarding PS-plugs]There [are] multiple types of matching plugs and sockets available for [the candidate inserter] and [the candidate receiver]. Try specifying which plug or socket you wish to use.[close bracket][/i]".
The plug-unknown-socket-unknown rule response (B) is "[nnt][The candidate inserter] [have] no free plugs available."
The plug-unknown-socket-unknown rule response (C) is "[nnt][The candidate receiver] [have] no free sockets that [would] allow [the candidate inserter] to be plugged in."
The plug-known-socket-known rule response (A) is "[nnt][The candidate plug] and [the candidate socket][regarding things] aren't of the same type."
The cannot-unplug-plugs-from rule response (A) is "[nt][i][bracket]You cannot specify a particular plug when unplugging something.[close bracket][/i]".
The cannot-unplug-from-sockets rule response (A) is "[nt][i][bracket]You cannot specify a particular socket when unplugging something.[close bracket][/i]".
The cannot-unplug-plugs rule response (A) is "[nt][i][bracket]You cannot specify a particular plug when unplugging something.[close bracket][/i]".
The item-must-be-plugged-into-second-item rule response (A) is "[nnt][The noun] [aren't] plugged into [the second noun]."
The ensure-item-only-plugged-into-1-thing rule response (A) is "[nnt][The noun] [aren't] plugged into anything."
The ensure-item-only-plugged-into-1-thing rule response (B) is "[nt][i][bracket][The noun] [are] plugged into more than one thing. Try UNPLUG [item] FROM something.[close bracket][/i][line break]".
The catch-invalid-unplugging-it rule response (A) is "[nnt][The noun] [aren't] plugged into anything."

Chapter 11 - Hiding Behind responses

The take before stowing behind rule response (A) is "[nnt][The noun] [are already] behind [the second noun]."
The can't stow anything behind itself rule response (A) is "[nt]Nothing can go behind itself."
The can't stow behind any old thing rule response (A) is "[nnt][We] [can't exactly] put anything behind [the second noun]."
The standard report stow behind rule response (A) is "[We] [put] [the noun] behind [the second noun]."
The test bulk behind rule response (A) is "[nnt][The noun] [are] too big to fit behind [the second noun]."
The test bulk behind rule response (B) is "[nnt][There] [are not] enough room left behind [the second noun] for [the noun]."
The extended can't drop what won't fit by bulk rule response (A) is "[nnt][The noun] [are] too big to fit under [the holder of the receptacle]."
The extended can't drop what won't fit by bulk rule response (B) is "[nnt][The noun] [are] too big to fit behind [the holder of the receptacle]."
The extended can't drop what won't fit by bulk rule response (C) is "[nnt][The noun] [are] too big to fit in [the receptacle]."
The extended can't drop what won't fit by bulk rule response (D) is "[nnt][There] [if it's Daytime][are not][otherwise]won't be[end if] enough room left under [the holder of the receptacle] for [the noun]."
The extended can't drop what won't fit by bulk rule response (E) is "[nnt][There] [if it's Daytime][are not][otherwise]won't be[end if] enough room left behind [the holder of the receptacle] for [the noun]."
The extended can't drop what won't fit by bulk rule response (F) is "[nnt][There] [if it's Daytime][are not][otherwise]won't be[end if] enough room left in [the receptacle] for [the noun]."
The can't slip behind something with no backside rule response (A) is "[nnt][There's] no space behind [regarding the noun][those]."
The can't slip behind something already entered rule response (A) is "[nt]But [you're already] behind [the noun]."
The can't slip behind something not enterable rule response (A) is "[nnt][We] [if it's Daytime][can't get][otherwise]won't be able to get[end if] behind [regarding the noun][those]."
The can't fit behind something rule response (A) is "[nnt][We]['re] too big to fit behind [the noun]."
The can't fit behind something rule response (B) is "[nnt][There] [if it's Daytime][are not][otherwise]won't be[end if] enough room left behind [the noun]."

Chapter 12 - Prepositional Correctness

The can't travel in what's not a vehicle rule response (A) is "[nt][We] [would have] to [exit the nonvehicle] first."
The can't travel in what's not a vehicle rule response (B) is "[nt][We] [would have] to [exit the nonvehicle] first."

Chapter 13 - Remembering responses

The Remembering specific report remembering rule response (A) is "[nnt][as the parser]The last time [we] [saw] [the noun], [they] [was-were of noun] [if the remembered location of the noun is either Main-Behind-Shelf or Main-By-Counter]by [otherwise if the remembered location of the noun is a room]in [otherwise][end if][if the remembered location of noun is a room][casual descriptor of the remembered location of noun][otherwise][at the remembered location of noun][end if].[as normal][line break]".

Volume 2 - Bones

Book 1 - General backdrops

Chapter 1 - Concrete floor

The concrete floor is a backdrop. It is everywhere. Understand "flooring" or "ground" as the concrete floor.
The description of the concrete floor is "The [one of]entire floor of the apartment [or]floor [stopping]is a uniform gray concrete."

Instead of remembering the concrete floor: say "The concrete floor is everywhere in the apartment."

Instead of attacking or burning or cutting the concrete floor: say "[no time]You doubt [if it's Daytime]you'll[otherwise]you'd[end if] be able to do much damage to the floor."
Instead of assaulting the concrete floor with: try attacking the concrete floor.
Instead of climbing the concrete floor: say "[no time][We] [don't] need to climb it[unicode 8212]it's flat."
Instead of consulting the concrete floor about: try examining the noun.
Instead of crouching on the concrete floor: try crouching.
Instead of drinking or eating or tasting or kissing or tasting the concrete floor: say "[no time]You've never made a habit of putting things that have touched your feet anywhere near your mouth, and [if it's Nighttime]you don't see yourself breaking that pattern tonight[otherwise]you're not about to start now[end if]."

Instead of entering the concrete floor:
	if the player is on a supporter:
		try getting off the holder of the player;
	otherwise if the player is in a container:
		try exiting;
	otherwise:
		say "[nt][You're already] on the floor."

Instead of entering underneath the concrete floor: say "[no time]You [can't exactly] lift up the floor to slide underneath."
Instead of getting off the concrete floor: say "[no time][i][bracket]You'll need to decide which thing specifically you want to get [/i]on[i] to.[close bracket][/i][line break]".

Instead of giving something to the concrete floor:
	if it's Daytime, try dropping the noun;
	otherwise try depositing the noun.

Instead of inserting something into the concrete floor:
	if it's Daytime, try dropping the noun;
	otherwise try depositing the noun.

Instead of listening to the concrete floor: say "The floor is thick enough that [we] [can't] hear anything from the apartment below."
Instead of looking under the concrete floor: say "[no time]You [can't exactly] lift up the floor to look underneath."
Instead of lying on the concrete floor: try lying down.
Instead of placing something under the concrete floor: say "[no time]You [can't exactly] lift up the floor to stuff [the noun] underneath."
Instead of pulling or pushing or turning the concrete floor: say "[no time]You [can't exactly] move the entire floor."
Instead of pushing the concrete floor to: try pushing the concrete floor.

Instead of putting something on the concrete floor:
	if it's Daytime, try dropping the noun;
	otherwise try depositing the noun.

Instead of removing something from the concrete floor: try taking the noun.
Instead of rubbing or touching or squeezing the concrete floor: say "[It's] cold."

Instead of showing something to the concrete floor:
	if it's Daytime, try dropping the noun;
	otherwise try depositing the noun.

Instead of sitting on the concrete floor: try sitting down.
Instead of smelling the concrete floor: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of standing up on the concrete floor: try standing up.
Instead of taking the concrete floor: say "[no time]You [can't exactly] lift up the entire floor."

Instead of throwing something at the concrete floor:
	if it's Daytime, try dropping the noun;
	otherwise try depositing the noun.
	
Instead of waving the concrete floor: try swinging the concrete floor.

The uniform is a metaphor. It is part of the concrete floor.
Before doing something when the current action involves the uniform: say "[no time]Uniform as in all the same, not as in a kind of outfit." instead.

Chapter 2 - Bare walls

Some bare walls are a backdrop. The bare walls are everywhere.  Understand "wall" or "blank" or "beige" as the bare walls.
The description of the bare walls is "All of the walls are painted the same corporate beige[unless the location is Main-Sitting and the painting is hung-up], almost entirely unadorned[end unless]."

Carry out examining the bare walls (this is the take note of light switches and outlets rule):
	if the location encloses a lightswitch:
		if the location is not Kitchenette:
			say "At about eye level[if it's Nighttime],[end if] [there's] a light switch[nobr]" (A);
			if the location encloses an electric outlet:
				say "; lower down [adapt the verb are from the third person singular] an electrical outlet[nobr]" (B);
			say "." (C);
	otherwise if the location encloses an electric outlet:
		say "Low on one wall [adapt the verb are from the third person singular] an electrical outlet." (D).
		
The take note of light switches and outlets rule is listed after the standard examining rule in the carry out examining rules.

Instead of remembering the bare walls: say "The bare walls are everywhere in the apartment."

Instead of attacking or burning or cutting the bare walls: say "[no time]You[if it's Nighttime][']ll[end if] have no reason to damage the walls[unicode 8212]at least, not if you want your security deposit back."
Instead of assaulting the bare walls with: try attacking the bare walls.
Instead of climbing the bare walls: say "[no time]The walls [regarding the noun][are] too vertical to literally climb."
Instead of consulting the bare walls about: try examining the noun.
Instead of drinking or eating or tasting or kissing or tasting the bare walls: say "[no time]You doubt the walls would taste very good."

Instead of emptying the bare walls:
	if the location is Main-Sitting and the nail is not empty:
		try emptying the nail;
	otherwise:
		say "[no time][They're already] an empty expanse."

Instead of entering the bare walls: say "[no time]You can't enter walls[unicode 8212]that's what doors are for."
Instead of listening to the bare walls: say "The walls are thick enough that [we] [can't] hear anything on the other side."
Instead of looking behind the bare walls: say "[no time]The walls aren't transparent, thank goodness."
Instead of looking under the bare walls: say "[no time]There[if it's Daytime][']s no[otherwise] won't be any[end if] way for something to be meaningfully [']under['] the walls."
Instead of opening or closing the bare walls: say "[no time]You can't open or close walls[unicode 8212]that's what doors are for."

Instead of placing something under the bare walls:
	if it's Daytime, try dropping the noun;
	otherwise try depositing the noun.

Instead of pulling or pushing or turning or taking the bare walls: say "[no time][We] [can't] move the walls."
Instead of pushing the bare walls to: try pushing the bare walls.

Instead of putting something on the bare walls:
	if the location is Main-Sitting:
		try putting the noun on the nail;
	otherwise:
		say "[if it's Daytime]There's nothing here[otherwise]There won't be anything there[end if] to hang [the noun] on."

Instead of removing something from the bare walls: try taking the noun.
Instead of rubbing or touching or squeezing the bare walls: say "Rough plaster."

Instead of searching the bare walls:
	if the location is Main-Sitting:
		if the nail is empty:
			say "[There's] a nail in the wall, and a[if the safe is open]n open[end if] safe below it.";
		otherwise:
			say "[A random thing on the nail] [are] hung up on the wall.";
	otherwise if the location is Main-Behind-Shelf:
		try searching the windows;
	otherwise:
		say "[regarding the noun][They]['re] an empty expanse."

Instead of smelling the bare walls: say "They don't smell like much of anything[if it's Nighttime], as far as you know[end if]."

Instead of throwing something at the bare walls:
	if the noun is hangable and the location is Main-Sitting:
		try putting the noun on the nail instead;
	otherwise:
		say "[no time]That seems like it would be a waste of time."
		
Instead of waving the bare walls: try swinging the bare walls.
		
Check plugging something into the bare walls:
	if the player can touch an electric outlet:
		let rel-plug be a random touchable electric outlet;
		try plugging the noun into rel-plug instead;
	otherwise:
		say "[nnt]There [if it's Daytime]aren't[otherwise]won't be[end if] any available outlets [if it's Nighttime]t[end if]here." instead.

Chapter 3 - Dust

The dust is a backdrop. It is in under#bed, behind#couch, and Within-Closet. Understand "dirt" or "grime" as the dust. The bulk of the dust is 0.
The description of the dust is "It would seem no one was sent to clean ahead of your arrival[unicode 8212]or maybe whoever was did a poor job."

Instead of remembering the dust: say "Dust collects in all sorts of places, though [we] [can't] see any [if it's Daytime]right now[otherwise]at that point[end if]."

Instead of attacking or burning or cutting the dust: say "[no time]Trying would probably be a waste of time."
Instead of assaulting the dust with: try attacking the dust.
Instead of consulting the dust about: try examining the noun.
Instead of drinking or eating or tasting or kissing or tasting or wearing the dust: say "[no time]Gross, no."

Instead of entering or lying on or sitting on or crouching on or slipping behind or entering underneath the dust:
	if the location is Main-Bed and the player is not in under#bed:
		try entering underneath the bed;
	otherwise if the location is Main-Sitting and the player is not in behind#couch:
		try slipping behind the couch;
	otherwise:
		say "[no time][We] [can't] see any dust [if it's Daytime]where you are[otherwise]at the moment[end if]."

Instead of giving something to the dust:
	if it's Daytime, try dropping the noun;
	otherwise try depositing the noun.

Instead of inserting something into the dust:
	if it's Daytime, try dropping the noun;
	otherwise try depositing the noun.

Instead of knocking on the dust: say "The sound [regarding the noun][aren't] very impressive."
Instead of looking behind the dust: try looking under the dust.

Instead of looking under or searching the dust:
	if the location is Main-Bed:
		if the player is in under#bed:
			try searching under#bed;
		otherwise:
			try looking under the bed;
	otherwise if the location is Main-Sitting:
		if the player is in behind#couch:
			try searching behind#couch;
		otherwise:
			try looking behind the couch;
	otherwise:
		say "[no time][We] [can't] see any dust [if it's Daytime]where you are[otherwise]at the moment[end if]."

Instead of placing something under the dust:
	if the location is Main-Bed:
		if the player is in under#bed:
			if it's Daytime, try dropping the noun;
			otherwise try depositing the noun;
		otherwise:
			try placing the noun under the bed;
	otherwise if the location is Main-Sitting:
		if the player is in behind#couch:
			if it's Daytime, try dropping the noun;
			otherwise try depositing the noun;
		otherwise:
			try stowing the noun behind the couch;
	otherwise:
		if it's Daytime, try dropping the noun;
		otherwise try depositing the noun.

Instead of pulling or pushing or turning or swinging or waving the dust: say "[no time][There's] too much of it to meaningfully move in that way."
Instead of pushing the dust to: try pushing the dust.

Instead of putting something on the dust:
	if it's Daytime, try dropping the noun;
	otherwise try depositing the noun.

Instead of removing the dust from: try taking the dust.
Instead of removing something from the dust: try taking the noun.
Instead of rubbing or touching or squeezing the dust: say "[if it's Daytime]It's[otherwise]You suspect it'll be[end if] gritty on your fingers."
Instead of smelling the dust: say "[if it's Daytime]It[otherwise]You expect it[end if] smells musty."
Instead of taking the dust: say "[no time][There's] too much of it to meaningfully take."
Instead of throwing the dust at something: try taking the dust.

Instead of throwing something at the dust:
	if it's Daytime, try dropping the noun;
	otherwise try depositing the noun.

Instead of washing the dust:
	if it's Daytime, say "Dusting can wait for tomorrow. You're exhausted.";
	otherwise say "You doubt dusting will be your top priority, under the circumstances.";
	take no time.

Chapter 4 - Overhead lights

Some overhead lights are lighting. The overhead lights are in Main-Bed, Main-By-Counter, Main-Office, Main-Sitting, Main-Behind-Shelf, and Kitchenette. The overhead lights illuminate Main-Bed, Main-By-Counter, Main-Office, Main-Sitting, Main-Behind-Shelf, and Kitchenette. Understand "collection" as the overhead lights.
The description of the overhead lights is "An eclectic collection of ancient [overhead lights], all of which [are][if it's Daytime] currently[end if] [switchedness of the main-room-lightswitch][if it's Nighttime] by that point[end if]."

Instead of remembering the overhead lights: say "[The overhead lights] [can] be found anywhere in the main area of the apartment."

Chapter 5 - Ceiling

The ceiling is a distant backdrop. The ceiling is everywhere.
The description of the ceiling is "Plain and beige, obviously with several sloppy coats of paint."

Before climbing the ceiling:
	now the noun is the bare walls;
	try the current action instead.
	
A distant stuff rule for the ceiling while entering underneath:
	say "[no time][You're already] under the ceiling.";
	rule fails.
	
A distant stuff rule for the ceiling while looking under:
	say "[no time]Everything in the [if the location is within-closet]space[otherwise if the location is in Open Space]apartment[otherwise]room[end if] [adapt the verb are from the third person singular] under the ceiling.";
	rule fails.
	
A distant stuff rule for the ceiling while placing under:
	if the second noun is the ceiling:
		rule succeeds;
	otherwise:
		say "[no time][The ceiling] is very high, [if it's Nighttime]and will be [end if]far out of your reach.";
		rule fails.
		
A distant stuff rule for the ceiling while throwing at: rule succeeds.

A distant stuff rule for the ceiling:
	say "[no time][The ceiling] is very high, [if it's Nighttime]and will be [end if]far out of your reach.";
	rule fails.
	
Instead of placing something under the ceiling:
	if it's Daytime, try dropping the noun;
	otherwise try depositing the noun.

Instead of throwing something at the ceiling: say "Once you identify the impulse, [we] [find] you have no reason to actually follow through."

Chapter 6 - Water
[NOTE: Based on code from Modern Conveniences by Emily Short.]
	
The flowing water is a backdrop. The indefinite article of the flowing water is "some". The printed name of the flowing water is "water". Understand "flow" or "gushing/gush" as the flowing water.
The description of the flowing water is "[Flowing water sentence case] [flow] from [the random visible switched on tap]."

To say Flowing water sentence case: say "[Flowing water]" in sentence case.

Instead of remembering the flowing water: say "[We] [can't] see any water flowing [if it's Daytime]at the moment[otherwise]by that point[end if]."

The standard implicit taking rule does nothing when the noun is the flowing water.

Instead of inserting the flowing water into (this is the no filling containers rule):
	take no time;
	if the second noun is the vase:
		if it's Daytime:
			say "The vase is decorative enough without any flowers in it, and thus doesn't need to be filled with water." (A);
		otherwise:
			say "You will have no reason to lug around a vase full of water with you[unicode 8212]your adversary won't be the Wicked Witch of the West[if intruder-inside is true]. Besides, there's no way you'd be able to do that quietly[end if]." (B);
	otherwise if the second noun is worn:
		try washing the second noun;
	otherwise if the second noun is a container:
		if the second noun is empty:
			if it's Daytime:
				say "You can think of no good reason to lug around [a second noun] full of water with you[plant-already-watered]." (C);
			otherwise:
				say "You will have no reason to lug around [a second noun] full of water with you[unicode 8212]your adversary won't be the Wicked Witch of the West[if intruder-inside is true]. Besides, there's no way you'd be able to do that quietly[end if]." (D);
		otherwise:
			say "That would get [if the number of things in the second noun is 1][the first thing held by the second noun][otherwise][regarding the second noun][their] contents[end if] all wet." (E);
	otherwise if the second noun is either the bowls or the cups:
		if it's Daytime:
			say "You're not particularly thirsty at the moment, and have no other reason to carry water around with you[plant-already-watered]." (F);
		otherwise:
			say "You doubt you'll have time for a refreshing beverage, under the circumstances." (G);
	otherwise if the noun is electronic:
		say "Given that electronics and water don't tend to mix well, [if it's Daytime]it's probably[otherwise]it would probably be[end if] better to refrain." (H) instead;
	otherwise:
		try washing the second noun.
		
To say plant-already-watered: say "[first time]. You already watered the potted plant earlier today[only]".

A room can be water-supplying.

When play begins (this is the initialize water supply rule):
	move the flowing water backdrop to all water-supplying rooms.
	
Last carry out an actor switching on a tap (this is the move water supply rule):
	now the location is water-supplying;
	update backdrop positions.
	
Last carry out an actor switching off a tap (this is the remove water supply rule):
	now the location is not water-supplying;
	update backdrop positions.
	
Instead of attacking or cutting the flowing water: say "[no time]That would probably be futile."
Instead of burning the flowing water: say "[no time]That would [i]definitely[/i] be futile."
Instead of assaulting the flowing water with: try attacking the flowing water.
[Instead of assaulting something with the flowing water: say "X."]
Instead of drinking or eating or tasting or kissing the water: say "[no time]Not until you can get a filtered pitcher you won't."
Instead of inserting something into the flowing water: try washing the noun.
Instead of knocking on the flowing water: say "The water [regarding the noun][aren't] capable of making much sound when knocked on."
Instead of listening to the flowing water: say "[regarding the noun][They] [one of][gurgle][or][burble][or][flow] gently[or][gush][at random]."

Instead of looking behind or looking under or searching the flowing water:
	let spigot be a random touchable switched on tap;
	if spigot is included by something (called corpus):
		try searching corpus.

Instead of placing something under the flowing water: try washing the noun.

Instead of pushing the flowing water to: try pushing the flowing water.
Instead of putting the flowing water on: try washing the second noun.
Instead of putting something on the flowing water: try washing the noun.

Instead of rebooting the flowing water:
	let spigot be a random touchable switched on tap;
	silently try switching off spigot;
	silently try switching on spigot;
	say "[We] [turn] [the spigot] off and back on again."

Instead of rubbing or touching or squeezing the flowing water: say "[It's] quite wet."

Instead of smelling the flowing water: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."

Instead of switching off or closing or pulling or pushing or turning the flowing water:
	let spigot be a random touchable switched on tap;
	try switching off spigot.

Instead of switching on or opening the flowing water:
	let spigot be a random touchable switched off tap;
	try switching on spigot.

Instead of taking the flowing water: say "[no time]You [if it's Daytime]see no reason[otherwise]don't think you'll want[end if] to carry water around in your cupped hands."
Instead of throwing something at the flowing water: say "[no time][if it's Nighttime]You think that would be[otherwise]That's[end if] unlikely to be a productive course of action."
Instead of washing the flowing water: say "[no time][if it's Nighttime]You think that would be[otherwise]That's[end if] unlikely to be a productive course of action."

Chapter 7 - Wall pipes

Some wall-pipes are a distant scenery backdrop. The wall-pipes are everywhere. The printed name of the wall-pipes is "pipes in the wall". Understand "wall/-- pipe/pipes" or "pipe/pipes in the/-- wall/walls" as the wall-pipes. Understand "water" as the wall-pipes when the flowing water is invisible.
The description of the wall-pipes is "You've been in the apartment for less than a day and already their noise is getting on your nerves."

A distant stuff rule for the wall-pipes:
	say "[no time]The pipes [regarding the wall-pipes][are] inaccessible to you inside the wall.";
	rule fails.
	
Instead of listening to or remembering the wall-pipes: try examining the wall-pipes.
Instead of looking behind or looking under the wall-pipes: say "[no time]The pipes [regarding the wall-pipes][are] inaccessible to you inside the wall."
Instead of throwing something at the wall-pipes: say "[no time]The pipes [regarding the wall-pipes][are] inaccessible to you inside the wall."

Chapter 8 - Things still packed away

Some towels are a scenery backdrop. The towels are everywhere. Understand "towel" or "hand/dish towel/towels" or "rag/rags" or "dish-towel/dish-towels/hand-towel/hand-towels" or "dishtowel/dishtowels/handtowel/handtowels" as the towels.
Before doing something when the current action involves the towels: say "[no time]All of your towels [if it's Daytime]are still[otherwise]will still be[end if] packed away in some box[unicode 8212]who knows if [it's] one in the apartment, or one still in transit." instead.

The soap is a scenery backdrop. The soap is everywhere. Understand "hand/dish soap" or "hand-soap/dish-soap" or "handsoap/dishsoap" or "dish/-- detergent" or "dish-detergent" or "soap bar" as the soap.
Before doing something when the current action involves the soap: say "[no time]You have both dish and hand soap from home, but both [if it's Daytime]are still[otherwise]will still be[end if] packed away in some box[unicode 8212]who knows if [it's] one in the apartment, or one still in transit." instead.

Book 2 - Main Room

Part 1 - Bed section

Chapter 1 - The room

Main-Bed is a room. "[if it's Daytime]This is[otherwise][You'll-be-in][end if] the area reserved for your bedroom[if it's Daytime], a space much more exposed than you're used to sleeping in[end if]." The printed name is "Main Room[if the holder of the player is the location] [roman type](near the bed)".
Understand "bedroom area/space" or "bedroom" or "bed room/area/space" as Main-Bed.
The relative direction set of Main-Bed is the Table of Bedroom Direction Descriptors.
The casual descriptor of Main-Bed is "the bedroom area".
For saying the location name of Main-Bed: say "in the bedroom area".
The prepositional entrance descriptor of Main-Bed is "into the bedroom area".
The prepositional exit descriptor of Main-Bed is "out of the bedroom area".

To say You'll-be-in:
	if we restored from an autosave, say "You'll [one of]start back[or]be[stopping] in";
	otherwise say "You'll be in".

For announcing notable exits of Main-Bed:
	say "[We] [can] go [if the previous location is Main-By-Counter]back [end if][b]north[/b] towards the counter, or [if the previous location is Main-Behind-Shelf]back [end if][b]west[/b] behind the bookshelf. [if the time of day is 9:00 AM][br][otherwise][/p]".
	
Instead of examining Main-Bed when the location is not Main-Bed:
	say "The area reserved for your bedroom[if it's Daytime], a space much more exposed than you're used to sleeping in[end if].";
	describe locale for Main-Bed;
	if the number of locale-supportable things in Main-Bed > 0:
		say "[We] [if it's Daytime]can also see[otherwise]will also be able to see[end if] [a list of locale-supportable things in Main-Bed]."
	
Instead of examining north when the location is Main-Bed: try examining Main-By-Counter.
Instead of examining east when the location is Main-Bed: say "[nnt][There's] a wall in that direction."
Instead of examining south when the location is Main-Bed: say "[nnt][There's] a wall in that direction."
Instead of examining west when the location is Main-Bed: try examining Main-Behind-Shelf.
Instead of examining southwest when the location is Main-Bed: try examining south.

Instead of listening to Main-Bed:
	if the radio is listenable:
		try listening to the radio;
	otherwise if it's Daytime:
		if the dishwasher-switch is switched on:
			say "From the kitchenette, you hear the dishwasher going.";
		otherwise if the kitchen faucet is switched on:
			say "From the kitchenette, you hear a faucet running.";
		otherwise if the laptop-computer is switched on and the laptop-computer is in the location:
			say "You hear the computer's fan whirring slightly.";
		otherwise:
			say "You hold your breath and listen, and can just hear the noise of the street below.";
	otherwise:
		now player-listening is true.

Instead of smelling Main-Bed: follow the smelling rooms rule.

This is the smelling rooms rule: say "The space [adapt the verb smell from the third person singular] about like the rest of the apartment[if it's Nighttime], you expect[end if]."

Table of Bedroom Direction Descriptors
other place	descriptor
Bathroom	"somewhere near the entryway"
Entryway	"somewhere near the entryway"
Kitchenette	"in the kitchenette"
Main-Behind-Shelf	"behind the bookshelf"
Main-By-Counter	"over by the counter"
Main-Office	"on the other side of the divider"
Main-Sitting	"on the other side of the divider"
Outside Hall	"out in the hall"
Within-Closet	"somewhere near the entryway"

by-the-bed is a position in Main-Bed.

Chapter 2 - The bed

Section 1 - The bed itself

The bed is an enterable supporter in Main-Bed. "Your [bed] [are] set up with its headboard against [one of]a[or]the[stopping] bamboo slat barrier." The bed allows seated, crouched, and reclining. The bed is reclining. The bed is fixed in place and bulky. [The bulk-capacity of the bed is 1000.]
The description of the  bed is "It's got a spartan metal frame, the first mattress you could find, and the only sheet set you brought with you[first time]. [if it's Nighttime]Thinking about it, you[otherwise]You[end if] remind yourself that it's only for now[only]."

Instead of remembering the bed: say "That, you expect, [regarding the noun][remain] in the bedroom area."

Instead of attacking or burning or cutting the bed: say "[nnt]You only just got it set up [if it's Daytime]this[otherwise]yesterday[end if] morning. You[if it's Nighttime]'ll[end if] have no good reason to destroy it [if it's Daytime]now[otherwise]in the moment[end if]."
Instead of assaulting the bed with: try attacking the bed.
Instead of climbing the bed: try entering the bed.

Instead of crouching behind the bed:
	follow the implicitly leave the bed rule;
	silently try taking position crouched;
	if the posture of the player is crouched:
		now the bed obscures the player;
		say "[We] [crouch] down behind the bed.";
	otherwise:
		stop the action.

Instead of drinking or eating or tasting or kissing the bed: say "[no time]You know you sleep in it, but you also know that the average bed is dirtier than the average toilet seat. That thought alone [are] enough to dissuade you from letting any part of it touch your tongue."
Instead of giving something to the bed: try putting the noun on the bed.
Instead of inserting something into the bed: try putting the noun on the bed.
Instead of knocking on the bed: try knocking on the headboard.
Instead of listening to the bed: say "[nnt]Beds aren't known for making noise on their own."
Instead of looking behind the bed: say "[nnt]The headboard is flush against the barrier that separates the bedroom area from the sitting room area, and you [if it's Daytime]can[otherwise]will be able to[end if] see the floor on both sides of the bed. Therefore, nothing [if it's Daytime]can meaningfully be said to be[otherwise]will be able to be meaningfully said to be[end if] [']behind['] the bed."

Instead of lying behind the bed:
	follow the implicitly leave the bed rule;
	silently try taking position reclining;
	if the posture of the player is reclining:
		now the bed obscures the player;
		say "[We] [lie] down behind the bed.";
	otherwise:
		stop the action.

Instead of pulling or pushing or turning the bed:
	if it's Daytime, say "The bed is way too heavy to be pushing around.";
	otherwise say "[nnt][You-can-try-but you] know [the bed] [are] too heavy to push on your own."
	
To say You-can-try-but you: say "You[first time] can try, but you[only]".

Instead of pushing the bed to: try pushing the bed.
Instead of removing something from the bed: try taking the noun.
Instead of rubbing or touching or squeezing the bed: say "[if it's Daytime]The[otherwise]You know the[end if] mattress is firm, just the way you like it."
Instead of showing something to the bed: try putting the noun on the bed.

Instead of sitting behind the bed:
	follow the implicitly leave the bed rule;
	silently try taking position seated;
	if the posture of the player is seated:
		now the bed obscures the player;
		say "[We] [sit] down behind the bed.";
	otherwise:
		stop the action.

Instead of slipping behind the bed: try crouching behind the bed.
Instead of smelling the bed: say "[if it's Nighttime]You know it[otherwise]It[end if] [smell] fine[unicode 8212]you only just got it set up."
Instead of stowing something behind the bed: try placing the noun under the bed.

Instead of taking the bed: 
	if it's Daytime, say "The bed is way too heavy for you to lift.";
	otherwise say "[nnt][You-can-try-but you] know [the bed] [are] too heavy to lift."

Instead of throwing something at the bed: try putting the noun on the bed.
Instead of washing the bed: say "[no time][There's] no reason to[unicode 8212]you only just got it set up today."
Instead of waving or swinging the bed: try taking the bed.

This is the implicitly leave the bed rule:
	if the player is on the bed:
		try getting off the bed;
	if the player is in under#bed:
		try the player exiting;
	if the player is on the bed or the player is in under#bed:
		stop the action.
		
The spartan is a metaphor. It is part of the bed.
Before doing something other than remembering when the current action involves the spartan: say "[nt]There[if it's Daytime][']s not[otherwise] won't be[end if] a literal Spartan warrior [if it's Nighttime]t[end if]here." instead.

Instead of remembering the spartan: say "The spartan bed, you expect, [regarding the noun][remain] in the bedroom area."

Understand "make bed" as a mistake ("[if it's Daytime]You're too tired to worry about such formality[otherwise]You doubt presentability will be your top priority, under the circumstances[end if].") when the location is Main-Bed.
Understand "unmake bed" as a mistake ("[if it's Daytime]It's already a bit of a mess[otherwise]You doubt that will be your top priority, under the circumstances[end if].") when the location is Main-Bed.
		
Section 2 - Parts of the bed

The mattress is part of the bed.
The description of the mattress is "It's neither particularly thick nor thin, nor firm nor soft. It was quite cheap, as far as mattresses go."

Instead of remembering the mattress: say "That, you expect, [regarding the noun][remain] on the bed."

Before pushing the mattress to: try pushing the mattress instead.

After starting the virtual machine (this is the redirect from mattress to bed rule):
	dispatch everything but { examining action, inserting it into action, knocking on action, listening to action, pulling action, pushing action, turning action, taking action, removing it from action, rubbing action, touching action, squeezing action, remembering action } for the mattress to the bed;

Instead of inserting something into the mattress: try putting the noun on the mattress.
Instead of knocking on the mattress: say "The sound [regarding the mattress][aren't] very impressive."
Instead of listening to the mattress: say "[nnt]Mattresses aren't known for making noise on their own."

Instead of looking behind or looking under the mattress:
	say "[no time][The noun] [are] on a platform and [can't] itself conceal anything, but the bed [are] a different story.";
	try looking under the bed.

Instead of pulling or pushing or turning or taking the mattress: say "[no time][The noun] [are] fine [if it's Daytime]right where it is[otherwise]left in place[end if]."
Instead of removing the mattress from: try taking the noun.
Instead of removing something from the mattress: try taking the noun.
Instead of rubbing or touching or squeezing the mattress: say "Nice and firm."

The fitted sheet is part of the bed. Understand "sheets" as the fitted sheet.
The description of the fitted sheet is "Not the highest thread count in the world, but it'll have to do for [if it's Daytime]now[otherwise]the time being[end if]."

Before pushing the fitted sheet to: try pushing the fitted sheet instead.
	
After starting the virtual machine (this is the redirect from sheet to bed rule):
	dispatch everything but { examining action, entering underneath action, knocking on action, listening to action, looking under action, placing it under action, pulling action, pushing action, turning action, removing it from action, rubbing action, touching action, squeezing action, smelling action, taking action, remembering action } for the fitted sheet to the bed;
	
Instead of remembering the fitted sheet: say "That, you expect, [regarding the noun][remain] on the bed."

Instead of entering underneath the fitted sheet: say "[no time]You doubt getting under the fitted sheet would be a productive course of action."
Instead of knocking on the fitted sheet: say "The sound [regarding the fitted sheet][aren't] very impressive."
Instead of listening to the fitted sheet: say "[nnt]Sheets aren't known for their noisiness."
Instead of looking under the fitted sheet: say "[no time]You [if it's Daytime]don't[otherwise]doubt you'll[end if] want to pull the fitted sheet up to look underneath."
Instead of placing something under the fitted sheet: say "[no time]You [if it's Daytime]don't[otherwise]doubt you'll[end if] want to pull the fitted sheet up to get [the noun] underneath."
Instead of pulling or pushing or turning or taking the fitted sheet: say "[no time]You only just got the bed made. You[if it's Daytime][']re not[otherwise] doubt you'll be[end if] eager to undo that[if it's Nighttime] in the moment[end if]."
Instead of removing the fitted sheet from: try taking the noun.
Instead of removing something from the fitted sheet: try taking the noun.
Instead of rubbing or touching or squeezing the fitted sheet: say "Not as soft as you'd like, but serviceable."
Instead of smelling the fitted sheet: say "It smells like detergent."
Instead of washing the fitted sheet: follow the no in-unit laundry rule.

This is the no in-unit laundry rule: say "[no time]It's brand-new and perfectly clean. Besides, this apartment doesn't have in-unit laundry."

The bedframe is part of the bed. The printed name of the bedframe is "bed frame". Understand "bed frame" or "bed-frame" or "frame" as the bedframe.
The description of the bedframe is "It took you hours to set up, including a trip to the hardware store for a screwdriver, but at least you did a good job on it."
	
After starting the virtual machine (this is the redirect from frame to bed rule):
	dispatch everything but { examining action, drinking action, eating action, kissing action, listening to action, tasting action, rubbing action, touching action, squeezing action, smelling action, tying it to action, remembering action } for the bedframe to the bed;
	
Instead of remembering the bedframe: say "That's part of the bed."

Instead of drinking or eating or tasting or kissing the bedframe: say "[nnt]You doubt the bed frame would taste very good."
Instead of listening to the bedframe: say "[nnt]Bedframes aren't known for making noise on their own."
Instead of rubbing or touching or squeezing the bedframe: say "Cool metal."
Instead of smelling the bedframe: say "It doesn't smell like much of anything."
Instead of tying the bedframe to: try tying the second noun to the bedframe.
Instead of tying something to the bedframe: say "[no time]That seems like it'd be a waste of time."

The headboard is part of the bed. Understand "head board" or "head-board" as the headboard.
The description of the headboard is "You always need a headboard, even when you first move in. It makes the place feel like home."
	
After starting the virtual machine (this is the redirect from headboard to bed rule):
	dispatch everything but { examining action, knocking on action, listening to action, removing it from action, taking action, remembering action } for the headboard to the bed;

Instead of listening to the headboard: say "[nnt]Bedframes aren't known for making noise on their own."
Instead of remembering the headboard: try remembering the bed.
Instead of removing the headboard from: try taking the headboard.
Instead of taking the headboard: say "[no time]You only just got the bed assembled. You[if it's Daytime][']re not[otherwise] doubt you'll be[end if] eager to tear it back apart[if it's Nighttime] in the moment[end if]."

Section 3 - Things on the bed

in-bed is a thingish position on the bed.

A pillow is on the bed. Understand "fluffy/fluff" or "plush" as the pillow. The bulk of the pillow is 45. The pillow is deadly.
The description of the pillow is "The pillow is fluffy and plush."

Instead of assaulting the pillow with: try attacking the pillow.
Instead of attacking or burning or cutting the pillow:
	if the pillow is on the bed:
		say "[nnt]You only just got the bed set up [if it's Daytime]this[otherwise]yesterday[end if] morning. You[if it's Nighttime]'ll[end if] have no good reason to destroy it or its accoutrements [if it's Daytime]now[otherwise]in the moment[end if].";
	otherwise:
		if it's Daytime:
			say "[We] [have] no reason to destroy the pillow.";
		otherwise:
			say "[nt]You see no way that destroying the pillow would help in that situation."

Instead of crouching on or entering or lying on or sitting on or standing up on the pillow:
	if the holder of the pillow is a container or the holder of the pillow is a supporter:
		try entering the holder of the pillow;
	otherwise if the player encloses the pillow:
		say "[nt][We] [can't] get onto anything you're carrying. Besides, it [adapt the verb make from the third person singular] little difference whether you're on the pillow or the floor.";
	otherwise:
		say "[nt]It [adapt the verb make from the third person singular] little difference whether you're on the pillow or the floor."

Instead of drinking or eating or tasting or kissing the pillow:
	if the pillow is on the bed:
		try tasting the bed;
	otherwise:
		say "[no time]You doubt the pillow would taste very good."

Instead of entering underneath or lying behind or crouching behind or sitting behind or slipping behind the pillow: say "[no time][if it's Nighttime]You don't think the pillow would[otherwise]The pillow wouldn't[end if] make a very effective hiding place."

Instead of getting off the pillow:
	if the holder of the player is a supporter and the holder of the pillow is the holder of the player:
		try getting off the holder of the player;
	otherwise if the holder of the player is a container and the holder of the pillow is the holder of the player:
		try exiting;
	otherwise:
		say "[nt][if it's Daytime]You're not[otherwise]You won't be[end if] on the pillow[if it's Nighttime] at that point[end if]."

Instead of giving something to the pillow: try putting the noun on the pillow.
Instead of hugging the pillow: say "[We] [give] the pillow a squeeze. [It's] quite soft."
Instead of inserting something into the pillow: try putting the noun on the pillow.
Instead of knocking on the pillow: say "The sound [regarding the noun][aren't] very impressive."
Instead of listening to the pillow: say "[nnt]Pillows aren't known for their noisiness."
Instead of looking behind or looking under or searching the pillow: say "[no time][The pillow] [can't] meaningfully conceal much."
Instead of opening or closing the pillow: try opening the pillowcase.

Instead of placing something under the pillow:
	if the holder of the pillow is a container:
		try inserting the noun into the holder of the pillow;
	otherwise if the holder of the pillow is a supporter:
		try putting the noun on the holder of the pillow;
	otherwise:
		say "[no time]The pillow [can't] meaningfully conceal much. [if it's Daytime]It's probably[otherwise]It'll probably be[end if] better to just hold on to [the noun] yourself."

Instead of putting something on the pillow:
	if the holder of the pillow is a container:
		try inserting the noun into the holder of the pillow;
	otherwise if the holder of the pillow is a supporter:
		try putting the noun on the holder of the pillow;
	otherwise:
		say "[no time]You think the outside of the pillow [if it's Daytime]is probably[otherwise]will probably be[end if] too lumpy and uneven to make for an effective surface. [if it's Daytime]It's probably[otherwise]It'll probably be[end if] better to just hold on to [the noun] yourself."

Instead of removing the pillow from: try taking the pillow.
Instead of removing something from the pillow: try taking the noun.
Instead of rubbing or touching or squeezing the pillow: say "[if it's Daytime]I[otherwise]You know i[end if]t's soft memory foam."
Instead of showing something to the pillow: try putting the noun on the pillow.
Instead of smelling the pillow: say "It doesn't smell like much of anything, or maybe it smells so much like you that you can't detect the scent."
Instead of stowing something behind the pillow: try placing the noun under the pillow.
Instead of swinging or waving the pillow: say "[no time][if it's Nighttime]You think that would be[otherwise]That's[end if] unlikely to be a productive course of action."

Instead of throwing the pillow at something:
	if the second noun is the intruder, try assaulting the intruder with the pillow;
	otherwise say "[no time][if it's Nighttime]You think that would be[otherwise]That's[end if] unlikely to be a productive course of action."
	
Instead of assaulting the intruder with the pillow: say "[no time]Of all the things you know for sure, primary among them is that it's a bad idea to bring a pillow to a gun fight."

Instead of throwing something at the pillow: try putting the noun on the pillow.
Instead of wearing the pillow: say "[no time]You doubt the pillow would be very effective as clothing. the best you could do would be to balance it on your head, which [if it's Daytime]seems like it would be a waste of time[otherwise]would likely be a waste of time, under the circumstances[end if]."
Instead of washing the pillow: follow the no in-unit laundry rule.

A pillowcase is part of the pillow. Understand "pillow-case" or "case" as the pillowcase. The bulk of the pillowcase is 0.
The description of the pillowcase is "Silk, obviously."

After starting the virtual machine (this is the redirect from the pillowcase to the pillow rule):
	dispatch everything but { closing action, drinking action, eating action, examining action, looking behind action, looking under action, opening action, placing it under action, removing it from action, rubbing action, squeezing action, stowing it behind action, taking action, tasting action, touching action, wearing action, remembering action } for the pillowcase to the pillow;
	
Instead of closing or opening the pillowcase: say "[nnt]It [adapt the verb make from the third person singular] little difference whether the pillowcase is open or closed."

Instead of drinking or eating or tasting or kissing the pillowcase:
	if the pillow is on the bed:
		try tasting the bed;
	otherwise:
		say "[no time]You doubt the pillowcase would taste very good."

Instead of inserting the pillowcase into something: try inserting the pillow into the second noun.
Instead of inserting something into the pillowcase: try placing the noun under the pillowcase.
Instead of looking behind or looking under the pillowcase: say "[no time]The pillowcase[if it's Nighttime], you know,[end if] isn't substantial enough to effectively conceal anything."
Instead of placing the pillowcase under something: try placing the pillow under the second noun.

Instead of placing something under the pillowcase:
	if the holder of the pillow is a container:
		try inserting the noun into the holder of the pillow;
	otherwise if the holder of the pillow is a supporter:
		try putting the noun on the holder of the pillow;
	otherwise:
		say "[no time]The pillowcase[if it's Nighttime], you know,[end if] isn't substantial enough to effectively conceal anything."

Instead of rubbing or touching or squeezing the pillowcase: say "Soft silk."
Instead of stowing the pillowcase behind something: try stowing the pillow behind the second noun.
Instead of stowing something behind the pillowcase: try placing the noun under the pillowcase.
Instead of removing the pillowcase from: try taking the pillowcase.

Instead of taking the pillowcase:
	take no time;
	if it's Daytime, say "You only just got everything set up[unicode 8212]you see no reason to remove the pillowcase from the pillow now.";
	otherwise say "You doubt that would be a productive course of action."

Instead of wearing the pillow: say "[no time]You doubt the pillowcase would be very effective as clothing."

A comforter is on the bed. Understand "blanket" as the comforter. The comforter is wearable and incapacitating. The bulk of the comforter is 105.
The description of the comforter is "The comforter is heavy and warm."

Report wearing the comforter: say "[We] [drape] the comforter over your shoulders." instead.

Instead of assaulting the comforter with: try attacking the comforter.
Instead of attacking or burning or cutting the comforter:
	if the comforter is on the bed:
		say "[nnt]You only just got the bed set up [if it's Daytime]this[otherwise]yesterday[end if] morning. You[if it's Nighttime]'ll[end if] have no good reason to destroy it or its accoutrements [if it's Daytime]now[otherwise]in the moment[end if].";
	otherwise:
		if it's Daytime:
			say "[We] [have] no reason to destroy the comforter.";
		otherwise:
			say "[nt]You see no way that destroying the comforter would help in that situation."

Instead of climbing or crouching on or entering or lying on or sitting on or standing up on the comforter:
	if the holder of the comforter is a container or the holder of the comforter is a supporter:
		try entering holder of the comforter;
	otherwise if the player encloses the comforter:
		say "[nt][We] [can't] get onto anything you're carrying. Besides, it [adapt the verb make from the third person singular] little difference whether you're on the comforter or the floor.";
	otherwise:
		say "[nt]It [adapt the verb make from the third person singular] little difference whether you're on the comforter or the floor."

Instead of crouching behind or entering underneath or lying behind or sitting behind or slipping behind the comforter: say "[no time][if it's Nighttime]You don't think the comforter would[otherwise]The comforter wouldn't[end if] make a very effective hiding place."

Instead of drinking or eating or tasting or kissing the comforter:
	if the comforter is on the bed:
		try tasting the bed;
	otherwise:
		say "[no time]You doubt the comforter would taste very good."

Instead of getting off the comforter:
	if the holder of the player is a supporter and the holder of the comforter is the holder of the player:
		try getting off the holder of the player;
	otherwise if the holder of the player is a container and the holder of the comforter is the holder of the player:
		try exiting;
	otherwise:
		say "[nt][if it's Daytime]You're not[otherwise]You won't be[end if] on the comforter[if it's Nighttime] at that point[end if]."

Instead of giving something to the comforter: try inserting the noun into the comforter.
Instead of hugging the comforter: say "[We] [give] the comforter a squeeze. [It's] quite soft."

Instead of inserting something into the comforter: 
	if the holder of the comforter is a container:
		try inserting the noun into the holder of the comforter;
	otherwise if the holder of the comforter is a supporter:
		try putting the noun on the holder of the comforter;
	otherwise:
		say "[no time]You think the comforter [if it's Daytime]is probably[otherwise]will probably be[end if] too bulky and uneven to make for an effective container. [if it's Daytime]It's probably[otherwise]It'll probably be[end if] better to just hold on to [the noun] yourself."

Instead of knocking on the comforter: say "The sound [regarding the noun][aren't] very impressive."
Instead of listening to the comforter: say "[nnt]Blankets aren't known for their noisiness."
Instead of looking behind or looking under or searching the comforter: say "[The noun] [aren't] concealing anything."
Instead of opening or closing or pulling or pushing or turning the comforter: say "[nnt]It [adapt the verb make from the third person singular] little difference."
Instead of placing something under the comforter: try inserting the noun into the comforter.
Instead of pushing the comforter to: try pushing the comforter.
Instead of putting something on the comforter: try inserting the noun into the comforter.
Instead of removing the comforter from: try taking the comforter.
Instead of removing something from the comforter: try taking the noun.
Instead of rubbing or touching or squeezing the comforter: say "[if it's Daytime]I[otherwise]You know i[end if]t's quite soft."
Instead of showing something to the comforter: try inserting the noun into the comforter.
Instead of smelling the comforter: say "It smells like detergent."
Instead of stowing something behind the comforter: try inserting the noun into the comforter.
Instead of swinging or waving the comforter: say "[no time]It's a bit too bulky for you to[if it's Nighttime] be able to[end if] do that effectively."
Instead of throwing something at the comforter: try inserting the noun into the comforter.
Instead of tying the comforter to: say "[nnt][The noun][if it's Nighttime], you suspect,[end if] [are] too bulky to effectively knot."
Instead of tying something to the comforter: try tying the comforter to the noun.
Instead of washing the comforter: follow the no in-unit laundry rule.

Check assaulting something with the comforter:
	unless the noun is the intruder, say "Once you identify the impulse, [we] [find] you have no reason to actually follow through." instead.

Check throwing the comforter at something:
	unless the second noun is the intruder, say "[no time]That doesn't strike you as a productive course of action. You could try putting it on [the second noun], if you wanted." instead.

Section 4 - Underneath

An underside called under#bed is part of the bed. Under#bed is enterable. Under#bed allows reclining.

Instead of examining up when the player is enclosed by under#bed: say "[We] [can only] see the bottom of the mattress in that direction."

Instead of examining the bed when the player is enclosed by under#bed: say "[We] [if it's Daytime]can only[otherwise]will only be able to[end if] see the bottom of the mattress from [if it's Nighttime]t[end if]here. [if it's Daytime]It's[otherwise]It is, you remember,[end if] dusty, but otherwise entirely unremarkable."

Before entering underneath the bed (this is the can't enter underneath the bed twice rule):
	if the player is in under#bed:
		say "[if it's Daytime]You're already[otherwise]You'll already be[end if] there!" instead.

under-the-bed is a thingish position in under#bed.

Chapter 3 - The dresser

Section 1 - The dresser itself

The dresser is a supporter in Main-Bed. "Pushed up against one wall [regarding the dresser][are] a faux-wood dresser with four drawers. An electrical [bedroom-outlet] [sit] low on the wall next to the dresser." Understand "wardrobe" as the dresser. The dresser is drawered, fixed in place, and bulky.
The description of the dresser is "It's a bit beat up[if it's Nighttime], if you remember right[end if], but it was here before you."
Does the player mean opening the dresser: it is unlikely.
Does the player mean closing the dresser: it is unlikely.

The open before emptying rule does nothing when the noun is the dresser.

Instead of remembering the dresser: say "That, you expect, [regarding the noun][remain] in the bedroom area."

Instead of attacking or burning or cutting the dresser:
	if it's Daytime, say "[We] [have] no reason to destroy the dresser.";
	otherwise say "[nt]You see no way that destroying the dresser would help in that situation."

Instead of assaulting the dresser with: try attacking the dresser.
Instead of climbing or crouching on or entering or lying on or sitting on or standing up on the dresser: say "[no time]You[if it's Daytime][']d rather not[otherwise] suspect you won't want to[end if] test the limits of the dresser's weight capacity[if it's Daytime], today of all days[otherwise] in such a high-stakes situation[end if]."
Instead of crouching behind or lying behind or sitting behind or slipping behind the dresser: say "[nnt]The dresser [if it's Daytime]won't[otherwise]wouldn't[end if] effectively conceal you from any relevant angle."
Instead of drinking or eating or tasting or kissing the dresser: say "[no time]You doubt the dresser would taste very good."
Instead of emptying the dresser: say "[no time]That[if it's Daytime][']s[else] would be[end if] a big task. Better to specify which drawer you want to empty."
Instead of entering underneath the dresser: abide by the no space under the dresser rule.
Instead of giving something to the dresser: try inserting the noun into the dresser.

Instead of inserting something into the dresser:
	if the number of open drawers incorporated by the dresser > 0:
		try inserting the noun into a random open drawer incorporated by the dresser;
	otherwise:
		try putting the noun on the dresser.

Instead of locking the dresser with: say "[nnt]None of the dresser drawers lock."
Instead of locking keylessly the dresser: say "[nnt]None of the dresser drawers lock."
Instead of looking behind the dresser: follow the no space behind the dresser rule.
Instead of looking under the dresser: abide by the no space under the dresser rule.
Instead of opening the dresser: say "[nt][i][bracket]You'll have to specify which of the four drawers you want to open.[close bracket][/i][line break]".
Instead of closing the dresser: say "[nt][i][bracket]You'll have to specify which of the four drawers you want to close.[close bracket][/i][line break]".
Instead of placing something under the dresser: abide by the no space under the dresser rule.

Instead of pulling or pushing or turning or taking or swinging or waving the dresser:
	if it's Daytime, say "The dresser is way too heavy to be pushing around[first time]. It probably weighs more than you do[only].";
	otherwise say "[nnt][You-can-try-but you] know [the dresser] [are] too heavy to push on your own."

Instead of pushing the dresser to: try pushing the dresser.
Instead of removing something from the dresser: try taking the noun.
Instead of rubbing or touching or squeezing the dresser: say "Smooth wood."
Instead of searching the dresser: say "[nt]That[if it's Daytime][']s[else] would be[end if] a big task. Better to specify which drawer you want to search."
Instead of showing something to the dresser: try inserting the noun into the dresser.
Instead of smelling the dresser: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of stowing something behind the dresser: follow the no space behind the dresser rule.
Instead of unlocking the dresser with: say "[nnt]None of the dresser drawers lock."
Instead of unlocking keylessly the dresser: say "[nnt]None of the dresser drawers lock."

This is the no space under the dresser rule: say "[nnt][if it's Nighttime]You remember that the[otherwise]The[end if] bottom of the dresser is flush with the ground. There's no space underneath." instead.

This is the no space behind the dresser rule: say "[nnt]The dresser is right up against the wall. [if it's Daytime]Nothing will[otherwise]You doubt anything would[end if] fit behind it."

Section 2 - Things on the dresser

The phone charger is a privately-named charging cable on the dresser. The phone charger is hangable. Understand "phone cord/cable/charger" or "phone charging cord/cable" or "charger" as the phone charger. The indefinite article of the phone charger is "your". The bulk of the phone charger is 3.
The description of the phone charger is "Your phone's charging cord, pretty much fresh out of the package."
Incorporated by the phone charger is a firebolt plug and a PS-plug.
Does the player mean unplugging the phone charger from the smartphone:
	if the smartphone is attached, it is likely;
	it is unlikely.
Does the player mean unplugging the phone charger from the phone charger: it is very unlikely.
Does the player mean taking the phone charger:
	if the phone charger is carried, it is very unlikely;
	it is possible.

A ranking rule for the phone charger while disclosing contents:
	decrease the description-rank of the phone charger by 10.
	
Rule for disclosing contents of a container (called bin) when the phone charger is in bin and the number of locale-supportable things in bin is 1:
	say "Your [phone charger] [adapt the verb are from the third person singular] [unless the bin is an underside or the bin is a backside]in [end unless][the bin]. ".
	
Rule for disclosing contents of a supporter (called surface) when the phone charger is on surface and the number of locale-supportable things on surface is 1:
	say "Your [phone charger] [adapt the verb are from the third person singular] on [the surface]. ".

the Remembering don't disambiguate while remembering rule does nothing when the noun is a charging cable.
Instead of remembering something incorporated by the phone charger: try remembering the phone charger.

Instead of giving something to the phone charger: try plugging the phone charger into the noun.

Before inserting the phone charger into a container (this is the disconnect the phone charger first rule):
	if the count of occupied plugs of the phone charger is 2:
		if the smartphone is enclosed by the second noun:
			repeat with connector running through PS-plugs incorporated by the phone charger:
				let the test-socket be the attachment of connector;
				if the test-socket is incorporated by an electric outlet:
					say "(first disconnecting your phone charger from the outlet)[ccbr]" (A);
					silently try unplugging connector from the test-socket;
		otherwise:
			say "(first disconnecting your phone charger from your phone and the outlet)[ccbr]" (B);
			repeat with connector running through PS-plugs incorporated by the phone charger:
				let the test-socket be the attachment of connector;
				if the test-socket is not nothing:
					silently try unplugging connector from the test-socket;
	otherwise if the count of occupied plugs of the phone charger is 1:
		repeat with connector running through PS-plugs incorporated by the phone charger:
			let the test-socket be the attachment of connector;
			if the test-socket is incorporated by an electric outlet:
				say "(first disconnecting your phone charger from the outlet)[ccbr]" (C);
				silently try unplugging connector from the test-socket;
			otherwise if the test-socket is incorporated by the smartphone:
				if the smartphone is enclosed by the second noun:
					continue the action;
				otherwise:
					say "(first disconnecting your phone charger from your phone)[ccbr]" (D);
					silently try unplugging connector from the test-socket;

Check pulling the phone charger: abide by the convert pulling the phone charger to unplugging rule.
Check pushing the phone charger: abide by the convert pulling the phone charger to unplugging rule.
Check turning the phone charger: abide by the convert pulling the phone charger to unplugging rule.

This is the convert pulling the phone charger to unplugging rule:
	if the count of occupied plugs of the phone charger > 0:
		repeat with connector running through PS-plugs incorporated by the phone charger:
			let the test-socket be the attachment of connector;
			if the test-socket is not nothing:
				try unplugging connector from the test-socket;
		stop the action;
	otherwise:
		continue the action.

Instead of pushing the phone charger to: try pushing the phone charger.
Instead of putting something on the phone charger: try plugging the phone charger into the noun.
Instead of removing the phone charger from: try unplugging the phone charger from the second noun.
Instead of showing something to the phone charger: try plugging the phone charger into the noun.

Check throwing the phone charger at:
	if the second noun is the intruder:
		if the intruder is in the location:
			try assaulting the intruder with the phone charger instead;
		otherwise:
			take no time;
			say "The charger won't be much use as a projectile. However, if you're able to get closer, it might make an effective garrotte." instead.
			
The phonecord-package is a metaphor. The phonecord-package is part of the phone charger. The printed name of the phonecord-package is "phone charger's package". Understand "package" or "phone/-- cord/cord's/cords/charger/charger's/chargers package" as the phonecord-package.
Before doing something other than remembering when the current action involves the phonecord-package: say "[no time]You threw the package itself away [if it's Daytime]earlier today[otherwise]yesterday[end if]." instead.

Instead of remembering the phonecord-package: say "[nnt][as the parser]The last time [we] [saw] the phone charger (whose package you discarded), it [was-were of phone charger] [if the remembered location of the phone charger is either Main-Behind-Shelf or Main-By-Counter]by [otherwise if the remembered location of the phone charger is a room]in [otherwise][end if][if the remembered location of phone charger is a room][casual descriptor of the remembered location of phone charger][otherwise][at the remembered location of phone charger][end if].[as normal][line break]".

[NOTE: The smartphone (see below) is also initially here.]

Section 3 - First drawer and its contents

A drawer called the first dresser drawer is part of the dresser. Understand "1st" or "one" or "top" or "drawer 1" as the first dresser drawer.
The description of the first dresser drawer is "The topmost drawer in the dresser[if it's Daytime], currently[otherwise]. It will be[end if] standing [openness of the first dresser drawer]."
The described-position of first dresser drawer is "first".
Does the player mean doing something to first dresser drawer:
	if the location is Main-Bed, it is possible;
	it is very unlikely.
	
Instead of remembering a drawer incorporated by the dresser: try remembering the dresser.
Instead of listening to first dresser drawer: say "[nnt]Drawers, generally, aren't known for being particularly noisy while still."

Some folded shirts are in the first dresser drawer. The folded shirts are unimportant. Understand "tops" as the folded shirts. The bulk of the folded shirts is 0.
The description of the folded shirts is "A bunch of your tops, all folded and put away."

Instead of remembering the folded shirts: say "Those, you expect, [regarding the noun][remain] in the dresser."

Instead of attacking or burning or cutting the folded shirts: say "[nnt][if it's Daytime]You only just got them all folded nicely. [end if][We] [have] no reason to destroy your shirts."
Instead of assaulting the folded shirts with: try attacking the folded shirts.
Instead of climbing or crouching on or entering or entering underneath or lying behind or lying on or sitting behind or sitting on or slipping behind or standing up on the folded shirts: try entering first dresser drawer.
Instead of drinking or eating or tasting or kissing the folded shirts: say "[no time]You doubt your shirts would taste very good."
Instead of emptying the folded shirts: try taking the folded shirts.
Instead of giving something to the folded shirts: try inserting the noun into first dresser drawer.
Instead of inserting something into the folded shirts: try inserting the noun into first dresser drawer.
Instead of knocking on the folded shirts: say "The sound [regarding first dresser drawer][aren't] very impressive."
Instead of listening to the folded shirts: say "[nnt]Clothing isn't known for making noise while inert."

Instead of looking behind or looking under the folded shirts:
	if the number of things in first dresser drawer > 1:
		try searching first dresser drawer;
	otherwise:
		say "[There's] nothing else in the drawer."

Instead of opening or closing the folded shirts: say "[nnt][if it's Daytime]You just got the shirts[otherwise]The shirts will all be[end if] nicely put away. [There's] no reason to mess with them[if it's Daytime] now[end if]."
Instead of placing something under the folded shirts: try inserting the noun into first dresser drawer.
Instead of pulling or pushing or turning the folded shirts: try taking the folded shirts.
Instead of pushing the folded shirts to: try pushing the folded shirts.
Instead of putting something on the folded shirts: try inserting the noun into first dresser drawer.
Instead of removing the folded shirts from: try taking the folded shirts.
Instead of removing something from the folded shirts: try taking the noun.
Instead of rubbing or touching or squeezing the folded shirts: say "[if it's Daytime]They're[otherwise]You know they're[end if], for the most part, soft."

Instead of searching the folded shirts:
	if the number of things in first dresser drawer > 1:
		try searching second dresser drawer;
	otherwise:
		say "The shirts [regarding the noun][are] the only thing in the drawer."

Instead of showing something to the folded shirts: try inserting the noun into first dresser drawer.
Instead of smelling the folded shirts: say "[if it's Daytime]They[otherwise]You know they[end if] smell fresh and clean."
Instead of stowing something behind the folded shirts: try inserting the noun into first dresser drawer.
Instead of swinging or waving the folded shirts: try taking the folded shirts.
Instead of throwing something at the folded shirts: try inserting the noun into first dresser drawer.
Instead of washing the folded shirts: say "[no time][regarding the noun][They're] clean already."

Instead of wearing the folded shirts:
	if it's Daytime:
		say "You're already all dressed for bed[unicode 8212]no reason to get changed now.";
	otherwise:
		say "It probably won't be the best moment to change outfits.";
	take no time.

Section 4 - Second drawer and its contents

A drawer called the second dresser drawer is part of the dresser. Understand "2nd" or "two" or "drawer 2" as the second dresser drawer.
The description of the second dresser drawer is "The second dresser drawer from the top[if it's Daytime], currently[otherwise]. It will be[end if] standing [openness of the second dresser drawer]."
The described-position of second dresser drawer is "second".
Does the player mean doing something to second dresser drawer:
	if the location is Main-Bed, it is possible;
	it is very unlikely.
	
Instead of listening to second dresser drawer: say "[nnt]Drawers, generally, aren't known for being particularly noisy while still."

Some folded pants are in the second dresser drawer. The folded pants are unimportant. Understand "trousers" or "pants" as the folded pants. The bulk of the folded pants is 0.
The description of the folded pants is "All of your various pants. The skirts [if it's Daytime]are still[otherwise]will still be[end if] on the way."

Instead of remembering the folded pants: say "Those, you expect, [regarding the noun][remain] in the dresser."

Instead of attacking or burning or cutting the folded pants: say "[nnt][if it's Daytime]You only just got them all folded nicely. [end if][We] [have] no reason to destroy your pants."
Instead of assaulting the folded pants with: try attacking the folded pants.
Instead of climbing or crouching on or entering or entering underneath or lying behind or lying on or sitting behind or sitting on or slipping behind or standing up on the folded pants: try entering second dresser drawer.
Instead of drinking or eating or tasting or kissing the folded pants: say "[no time]You doubt your pants would taste very good."
Instead of emptying the folded pants: try taking the folded pants.
Instead of giving something to the folded pants: try inserting the noun into second dresser drawer.
Instead of inserting something into the folded pants: try inserting the noun into second dresser drawer.
Instead of knocking on the folded pants: say "The sound [regarding second dresser drawer][aren't] very impressive."
Instead of listening to the folded pants: say "[nnt]Clothing isn't known for making noise while inert."

Instead of looking behind or looking under the folded pants:
	if the number of things in second dresser drawer > 1:
		try searching second dresser drawer;
	otherwise:
		say "[There's] nothing else in the drawer."

Instead of opening or closing the folded pants: say "[nnt][if it's Daytime]You just got the pants[otherwise]The pants will all be[end if] nicely put away. [There's] no reason to mess with them[if it's Daytime] now[end if]."
Instead of placing something under the folded pants: try inserting the noun into second dresser drawer.
Instead of pulling or pushing or turning the folded pants: try taking the folded pants.
Instead of pushing the folded pants to: try pushing the folded pants.
Instead of putting something on the folded pants: try inserting the noun into second dresser drawer.
Instead of removing the folded pants from: try taking the folded pants.
Instead of removing something from the folded pants: try taking the noun.
Instead of rubbing or touching or squeezing the folded pants: say "[if it's Daytime]They[otherwise]You know they[end if] have as much diversity in texture as they do in material."

Instead of searching the folded pants:
	if the number of things in second dresser drawer > 1:
		try searching second dresser drawer;
	otherwise:
		say "The pants [regarding the noun][are] the only thing in the drawer."

Instead of showing something to the folded pants: try inserting the noun into second dresser drawer.
Instead of smelling the folded pants: say "[if it's Daytime]They[otherwise]You know they[end if] smell fresh and clean."
Instead of stowing something behind the folded pants: try inserting the noun into second dresser drawer.
Instead of swinging or waving the folded pants: try taking the folded pants.
Instead of throwing something at the folded pants: try inserting the noun into second dresser drawer.
Instead of washing the folded pants: say "[no time][regarding the noun][They're] clean already."

Instead of wearing the folded pants:
	if it's Daytime:
		say "You're already all dressed for bed[unicode 8212]no reason to get changed now.";
	otherwise:
		say "It probably won't be the best moment to change outfits.";
	take no time.

Section 5 - Third drawer and its contents

A drawer called the third dresser drawer is part of the dresser. Understand "3rd" or "three" or "drawer 3" as the third dresser drawer.
The description of the third dresser drawer is "The next dresser drawer up from the bottom[if it's Daytime], currently[otherwise]. It will be[end if] standing [openness of the third dresser drawer]."
The described-position of third dresser drawer is "third".
[NOTE: This one squeaks]
Closing the third dresser drawer is noisy behavior. Opening the third dresser drawer is noisy behavior. 
Does the player mean doing something to third dresser drawer:
	if the location is Main-Bed, it is possible;
	it is very unlikely.

Report closing the third dresser drawer: say "The drawer [regarding the noun][squeak] as you close it." instead.

Report opening the third dresser drawer:
	if the actor is the player:
		say "The drawer [regarding the noun][squeak] as you open it.";
		say line break;
		say "Inside [if the number of things in third dresser drawer is 1][adapt the verb are from the third person singular][otherwise][adapt the verb are from the third person plural][end if] [nobr]";
		list the contents of the third dresser drawer, as a sentence, tersely, not listing concealed items;
		say "." instead.
		
Instead of listening to third dresser drawer: say "[nnt][if it's Daytime]It only squeaks[otherwise]You know it'll only squeak[end if] while it's being opened or closed."

The taser is in the third dresser drawer. The taser is deadly.
The description of the taser is "A small plastic thing with metal prongs on one end. [if it's Daytime]It's[otherwise]You remember that it's[end if] the melee-only kind: no wires to shoot out or anything like that."
The flexible appearance of the taser is "The taser lies [if the holder of the taser is an underside or the holder of the taser is a backside][otherwise if the holder of the taser is a container]in [otherwise]on [end if][if the holder of the taser is not a room][the holder of the taser][otherwise]the floor[end if]."
Rule for disclosing exterior of the taser:
	say "The taser lies [if the holder of the taser is a container]in[otherwise]on[end if] [if the holder of the taser is not a room][the holder of the taser][otherwise]the floor[end if]. "

Instead of attacking or burning or cutting the taser: say "[no time]Tasers are more typically used as tools of violence, rather than being victims of violence themselves."

Instead of assaulting the taser with:
	if the second noun is the intruder:
		try assaulting the second noun with the taser instead;
	otherwise:
		try attacking the taser.

Instead of closing the taser: say "[no time][It's already] all closed up."
Instead of crouching behind or lying behind or slipping behind or sitting behind or entering underneath the taser: say "[nnt][The taser] [aren't] capable of concealing you."
Instead of drinking or eating or tasting or kissing the taser: say "[nnt]That seems[if it's Nighttime] like it would be[end if] dangerous."
Instead of giving the taser to someone: try assaulting the second noun with the taser.
Instead of hugging or lying on or sitting on or washing the taser: say "[no time]That [if it's Daytime]strikes you as[otherwise]seems like it would be[end if] dangerous."
Instead of knocking on the taser: say "The sound [regarding the noun][aren't] very impressive."
Instead of listening to the taser: say "It [if it's Daytime]doesn't make[otherwise]won't be making[end if] any noise when it's not activated."
Instead of looking under or looking behind or searching the taser: say "[nnt][The taser] [aren't] capable of concealing much."
Instead of opening the taser: say "[no time]You fear that if you [if it's Daytime]tried, you'd[otherwise]try, you'll[end if] just break the thing."
Instead of rubbing or touching or squeezing the taser: say "Smooth plastic, made to fit easily into your hand."
Instead of setting the taser to: say "[nnt][if it's Nighttime]It'll be b[otherwise]B[end if]etter not to mess around with it until it's time to actually use it."
Instead of showing the taser to someone: try assaulting the second noun with the taser.
Instead of smelling the taser: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of swinging or waving or switching on the taser: say "[nnt][if it's Nighttime]It'll be b[otherwise]B[end if]etter not to mess around with it until it's time to actually use it."
Instead of switching off the taser: say "[nnt][It's already] off."
Instead of throwing the taser at something: say "[nnt][if it's Nighttime]It'll be better to hold on to it if you plan to use it. Besides, that would[otherwise]That might[end if] damage the taser."

Check inserting something into the taser: abide by the convert to tasering the noun rule.
Check inserting the taser into: abide by the convert to tasering the second noun rule.
Check placing something under the taser: abide by the convert to tasering the noun rule.
Check putting the taser on: abide by the convert to tasering the second noun rule.

This is the convert to tasering the noun rule:
	if the noun is the intruder:
		try assaulting the noun with the taser instead;
	otherwise:
		continue the action.
		
This is the convert to tasering the second noun rule:
	if the second noun is the intruder:
		try assaulting the second noun with the taser instead;
	otherwise:
		continue the action.
		
Some prongs are a material. The prongs are part of the taser. Understand "prong" as the prongs.
The description of the prongs is "Deadly little bits of metal."

After starting the virtual machine (this is the redirect from prongs to taser rule):
	dispatch everything but { examining action, removing it from action, taking action, remembering action } for the prongs to the taser;

Instead of removing the prongs from: try taking the prongs.
Instead of taking the prongs: say "[no time]That would render the taser useless. Besides, you don't know how."

The dresser-junk is junk in the third dresser drawer.

Does the player mean doing something to the dresser-junk:
	if the location is not Main-Bed, it is very unlikely;
	it is possible.

Section 6 - Fouth drawer and its contents

A drawer called the fourth dresser drawer is part of the dresser. Understand "4th" or "four" or "bottom" or "drawer 4" as the fourth dresser drawer.
The description of the fourth dresser drawer is "The bottom drawer in the dresser[if it's Daytime], currently[otherwise]. It will be[end if] standing [openness of the fourth dresser drawer]."
The described-position of fourth dresser drawer is "fourth".
Does the player mean doing something to fourth dresser drawer:
	if the location is Main-Bed, it is possible;
	it is very unlikely.
	
Instead of listening to fourth dresser drawer: say "[nnt]Drawers, generally, aren't known for being particularly noisy while still."

A description-concealing rule (this is the don't need to be informed of dresser drawer contents rule):
	now every thing enclosed by the first dresser drawer is not marked for listing;
	now every thing enclosed by the second dresser drawer is not marked for listing;
	now every thing enclosed by the third dresser drawer is not marked for listing;
	now every thing enclosed by the fourth dresser drawer is not marked for listing.

The jewellery box is a container in the fourth dresser drawer. It is closed, openable, lockable, and locked. Understand "jewelry box" as the jewellery box. The indefinite article of the jewellery box is "your". The bulk of the jewellery box is 7. The bulk-capacity of the jewellery box is 5.
The description of the jewellery box is "Your jewellery box from home. You've had it since you were a kid, and given the choice you'd never part with it. The box itself is more precious to you than any treasures it might contain."

Does the player mean doing something to the jewellery box:
	if the jewellery box is touchable, it is possible;
	it is unlikely.
	
A ranking rule for the jewellery box while disclosing contents:
	decrease the description-rank of the jewellery box by 5.
	
Rule for disclosing contents of a container (called bin) when the jewellery box is in bin and the number of locale-supportable things in bin is 1:
	say "Your [jewellery box] [adapt the verb are from the third person singular] [unless the bin is an underside or the bin is a backside]in [end unless][the bin]. ".
	
Rule for disclosing contents of a supporter (called surface) when the jewellery box is on surface and the number of locale-supportable things on surface is 1:
	say "Your [jewellery box] [adapt the verb are from the third person singular] on [the surface]. ".

Instead of attacking or burning or cutting the jewellery box: say "[no time]You[if it's Nighttime] think you[end if][']d rather not damage the jewellery box[unless the jewellery box is empty], or its contents[end if]."
Instead of assaulting the jewellery box with: try attacking the jewellery box.
Instead of assaulting something with the jewellery box: try attacking the jewellery box.
Instead of crouching behind or lying behind or slipping behind or sitting behind or entering underneath the jewellery box: say "[nnt][The jewellery box] [aren't] capable of concealing you."
Instead of drinking or eating or tasting the jewellery box: say "[nnt]As good as[if it's Nighttime] you know[end if] the jewellery box smells, you don't think it would taste very good."
Instead of entering the jewellery box: say "[no time]There's no way you['][if it's Daytime]ll[otherwise]d[end if] fit inside."
Instead of getting off the jewellery box: say "[no time]But [we] [aren't] [if the jewellery box is open]in[otherwise]on[end if] the jewellery box [if it's Daytime]at the moment[otherwise]by that point[end if]."
Instead of giving something to the jewellery box: try inserting the noun into the jewellery box.
Instead of kissing or hugging the jewellery box: say "[no time]The things inside are valuable, sure, but you[if it's Daytime][']re not[otherwise] don't think you're[end if] in love with them enough to go [i]that[/i] far."
Instead of listening to the jewellery box: say "[no time][The jewellery box] [don't] really make much noise while inert."

Instead of locking keylessly the jewellery box:
	if the player encloses the tiny silver key:
		try locking the jewellery box with the tiny silver key;
	otherwise:
		say "[nnt]You'll need the tiny silver key that came with the box if you want to lock it."

Instead of putting something on the jewellery box: try inserting the noun into the jewellery box.
Instead of removing something from the jewellery box: try taking the noun.
Instead of rubbing or touching or squeezing the jewellery box: say "[if it's Nighttime]You know it's[otherwise]It's[end if] made of smooth, lacquered wood."
Instead of showing something to the jewellery box: try inserting the noun into the jewellery box.
Instead of sitting on or standing up on or crouching on or lying on the jewellery box: say "[no time][if it's Daytime]You're not[otherwise]You don't think you'd be[end if] particularly interested in testing the weight limit of the jewellery box[if it's Nighttime], under the circumstances[end if]."
Instead of smelling the jewellery box: say "[if it's Nighttime]You know it[otherwise]It[end if] smells like cedar."

Instead of swinging or waving the jewellery box:
	if the jewellery box is empty:
		say "You don't really see [if it's Nighttime]what the point of doing that would be, under the circumstances[otherwise]the point of that[end if].";
	otherwise:
		say "You[if it's Nighttime] think you[end if][']d rather not risk damaging the jewellery box's contents.";
	take no time.

Instead of throwing the jewellery box at something: say "You[if it's Nighttime] think you[end if][']d rather not risk damaging the jewellery box[unless the jewellery box is empty], or its contents[end if]."

Instead of throwing something at the jewellery box:
	if the jewellery box is open:
		try inserting the noun into the jewellery box;
	otherwise:
		say "[nt]You[if it's Nighttime] think you[end if][']d rather not risk damaging the jewellery box, or its contents."

Instead of unlocking keylessly the jewellery box:
	if the player encloses the tiny silver key:
		try unlocking the jewellery box with the tiny silver key;
	otherwise if the player encloses the lockpick:
		try unlocking the jewellery box with the lockpick;
	otherwise:
		say "[nnt]You'll need the tiny silver key that came with the box if you want to unlock it."
		
Instead of wearing or taking off the jewellery box: say "[no time]It's the things [i]inside[/i] the jewellery box that are meant to be worn, not the box itself."
		
Some treasures are a metaphor. They are part of the jewellery box. Understand "treasure" as the treasures.

Before doing something other than remembering when the current action involves the treasures:
	if the jewellery box is open:
		try searching the jewellery box instead;
	otherwise:
		say "[nnt][They're] hidden inside, each and every one." instead.

Instead of remembering the treasures: say "[nnt][as the parser]The last time [we] [saw] [the jewellery box], [they] [was-were of jewellery box] [if the remembered location of the jewellery box is either Main-Behind-Shelf or Main-By-Counter]by [otherwise if the remembered location of the jewellery box is a room]in [otherwise][end if][if the remembered location of jewellery box is a room][casual descriptor of the remembered location of jewellery box][otherwise][at the remembered location of jewellery box][end if].[as normal][line break]".

The heirloom ring is jewelry in the jewellery box. Understand "gold/golden" or "simple" or "band" or "graduation" as the heirloom ring. The indefinite article of the heirloom ring is "an". The heirloom ring is legible.
The description of the heirloom ring is "A simple golden band that you got at your high school graduation."

Report reading the heirloom ring: say "[if it's Daytime]It[otherwise]You know well that it[end if] has your high school graduation year written on it."

Instead of listening to the heirloom ring: say "[no time]The ring doesn't make much noise while it's inert."
Instead of opening or closing the heirloom ring: say "[nnt]The ring[if it's Nighttime], you know,[end if] doesn't open."
Instead of pulling or pushing or turning the heirloom ring: say "[nnt]It [adapt the verb make from the third person singular] little difference."
Instead of rubbing or touching or squeezing the heirloom ring: say "Textured metal."
First instead of swinging or waving the heirloom ring: say "[no time]You doubt that would be a productive course of action."
Instead of turning the heirloom ring during Daytime: say "You turn the ring over in your hands. Beautiful."

Some silver earrings are jewelry in the jewellery box. Understand "earring" or "little/-- violin/violins/fiddle/fiddles" or "little/-- silver violin/violins/fiddle/fiddles" as the silver earrings.
The description of the silver earrings is "They're in the shape of little violins[one of]![or].[stopping] They're your favorite pair."

Instead of listening to the silver earrings:
	take no time;
	if it's Daytime, say "Unfortunately, the violins are non-functional.";
	otherwise say "You know that the violins are unfortunately non-functional."

Instead of pulling the silver earrings:
	if the silver earrings are worn, try taking off the silver earrings instead;
	otherwise say "[nnt]It [adapt the verb make from the third person singular] little difference."

Instead of opening or closing the silver earrings: say "[nnt]It [adapt the verb make from the third person singular] little practical difference."
Instead of pushing or turning the silver earrings: say "[nnt]It [adapt the verb make from the third person singular] little difference."
Instead of rubbing or touching or squeezing the silver earrings: say "Cool metal."

The tanzanite necklace is jewelry in the jewellery box. Understand "gems/gemstones/gem/gemstone/stone" or "blue/violet/blue-violet/purple/blue-purple" or "heavy" as the tanzanite necklace. The tanzanite necklace is hangable.
The description of the tanzanite necklace is "The [one of](many)[or]many[stopping] blue-violet gemstones make the necklace memorably heavy[first time]. You put up with it because that's your birthstone[only]."

Instead of listening to the tanzanite necklace: say "[no time]The necklace doesn't make much noise while it's inert."
Instead of opening or closing the tanzanite necklace: say "[nnt]It [adapt the verb make from the third person singular] little practical difference."
Instead of pulling or pushing or turning the tanzanite necklace: say "[nnt]It [adapt the verb make from the third person singular] little difference."
Instead of rubbing or touching or squeezing the tanzanite necklace: say "Cool, smooth gems."

Chapter 4 - Barrier

The bamboo slat barrier is a backdrop. It is in Main-Bed and Main-Sitting. Understand "bamboo-slat" or "bamboo-slats" or "bamboo-slatted" or "slats/slatted" or "wood/wooden" or "fence" or "divider" as the bamboo slat barrier.
The description of the bamboo slat barrier is "A divider made of vertical bamboo slats you got to break up the space."

Instead of remembering the bamboo slat barrier: say "[The noun] separates the bedroom area from the sitting area."

Instead of attacking or burning or cutting the bamboo slat barrier:
	if it's Daytime, say "You only just got the barrier set up. You[if it's Nighttime] think you[end if][']d rather not damage it.";
	otherwise say "[nt]You only just got the barrier set up. You see no way that destroying it would help in that situation."

Instead of assaulting the bamboo slat barrier with: try attacking the bamboo slat barrier.
Instead of climbing or crouching on or entering or lying on or sitting on or standing up on the bamboo slat barrier: say "[no time]You don't think the bamboo slat barrier [if it's Daytime]will[otherwise]would[end if] hold your weight, and [if it's Daytime]you're not[otherwise]you don't think you'd be[end if] particularly interested in testing its load limit[if it's Nighttime], under the circumstances[end if]."

Instead of crouching behind the bamboo slat barrier:
	silently try taking position crouched;
	say "[We] [crouch] down, but [the noun] [aren't] doing any better at concealing you than before."

Instead of drinking or eating or tasting or kissing the bamboo slat barrier: say "[no time]You doubt the wood would taste very good."
Instead of entering underneath the bamboo slat barrier: say "[nnt]The bamboo slat barrier is flush with the floor. You [can't exactly] fit underneath it."
Instead of getting off the bamboo slat barrier: say "But [we] [aren't] on the bamboo slat barrier [if it's Daytime]at the moment[otherwise]by that point[end if]."
Instead of giving something to the bamboo slat barrier: try putting the noun on the bamboo slat barrier.
Instead of inserting something into the bamboo slat barrier: try putting the noun on the bamboo slat barrier.
Instead of listening to the bamboo slat barrier: say "[nnt][The bamboo slat barrier] [have], so far, maintained a stoic silence."

Instead of looking behind the bamboo slat barrier:
	if the location is Main-Bed:
		say "[We] [can't] peek far enough around the barrier to see the sitting area from [if it's Nighttime]t[end if]here.";
	otherwise if the location is Main-Sitting:
		say "[We] [can't] peek far enough around the barrier to see the bedroom area from [if it's Nighttime]t[end if]here.";
	otherwise:
		say "[nt][The noun] [aren't][if it's Daytime] currently[end if] blocking your view."

Instead of looking under the bamboo slat barrier: say "[nnt]The bamboo slat barrier is flush with the floor. You [can't] see underneath it."

Instead of lying behind the bamboo slat barrier:
	silently try taking position reclining;
	say "[We] [lie] down, but [the noun] [aren't] doing any better at concealing you than before."

Instead of opening or closing the bamboo slat barrier: say "[no time]It doesn't really do that."
Instead of placing something under the bamboo slat barrier: say "[nnt]The bamboo slat barrier is flush with the floor. You [can't exactly] put anything underneath it."

Instead of pulling or pushing or turning or swinging or taking or waving the bamboo slat barrier:
	if it's Daytime, say "It was enough work to lug it into place. There's no point in moving it around now.";
	otherwise say "It was enough work to lug it into place. It'll be too difficult to effectively maneuver it around in the moment.";
	take no time.

Instead of pushing the bamboo slat barrier to: try pushing the bamboo slat barrier.
Instead of putting something on the bamboo slat barrier: say "[nnt]The barrier doesn't have any shelves or other surfaces to put things on."
Instead of rubbing or touching or squeezing the bamboo slat barrier: say "The texture [adapt the verb are from the third person singular] nice under your fingers."
Instead of showing something to the bamboo slat barrier: try putting the noun on the bamboo slat barrier.

Instead of sitting behind the bamboo slat barrier:
	silently try taking position seated;
	say "[We] [sit] down, but [the noun] [aren't] doing any better at concealing you than before."

Instead of slipping behind the bamboo slat barrier: say "[nnt]It [adapt the verb make from the third person singular] little difference."
Instead of smelling the bamboo slat barrier: say "It doesn't smell like much of anything. Maybe a little woody."

Instead of stowing something behind the bamboo slat barrier:
	if it's Daytime, silently try dropping the noun;
	otherwise silently try depositing the noun;
	say "[We] [drop] [the noun] near the barrier, but [if it's Nighttime]will likely [end if]find it's not very well concealed."

Instead of throwing something at the bamboo slat barrier: say "[no time]Once you identify the impulse, [we] [find] you have no reason to actually follow through."
Instead of tying something to the bamboo slat barrier: try putting the noun on the bamboo slat barrier.

Chapter 5 - Other things - soft rug & outlet

The soft rug is a rug in Main-Bed. Understand "cheap/plush/white" as the soft rug.
The description of the soft rug is "It's a soft[unicode 8212]if cheap[unicode 8212]and plush white rug."

Instead of remembering the soft rug: say "You expect [if it's Daytime]that's still[otherwise]it'll still be[end if] in the bedroom area."

The bedroom-outlet is an electric outlet in Main-Bed.

Part 2 - Phone
[NOTE: This is technically also in the bedroom section, but for ease of navigating the code its component parts need the help of two levels of sectioning]

Chapter 1 - The phone itself

The smartphone is a switched off computer. The player carries the smartphone. The printed name of the smartphone is "phone". Understand "phone" or "smart" or "iphone" or "cell/cellphone" or "new phone" as the smartphone. The indefinite article of the smartphone is "your".
The smartphone can be locked. The smartphone is unlocked.
The description of the smartphone is "Your phone, [if it's Daytime]currently[otherwise]by that point[end if] [switchedness of the smartphone][if the smartphone is charging] and charging[end if]."
The smartphone has a number called the on-count. The on-count of the smartphone is 0.
The smartphone has a number called the passcode-attempts. The passcode-attempts of the smartphone is 0.

Definition: the smartphone is charging if the count of occupied plugs of the phone charger is 2.

A ranking rule for the smartphone while disclosing contents:
	decrease the description-rank of the smartphone by 5.
	
Rule for disclosing contents of a container (called bin) when the smartphone is in bin and the number of locale-supportable things in bin is 1:
	say "Your [smartphone] [adapt the verb are from the third person singular] [unless the bin is an underside or the bin is a backside]in [end unless][the bin]. ".
	
Rule for disclosing contents of a supporter (called surface) when the wallet is on smartphone and the number of locale-supportable things on surface is 1:
	say "Your [smartphone] [adapt the verb are from the third person singular] on [the surface]. ".
	
Rule for disclosing contents of a container (called bin) when the phone charger is in bin and the smartphone is in bin and the number of locale-supportable things in bin is 2:
	now the phone charger is mentioned;
	say "Your [smartphone] [if the smartphone is charging][are] plugged in to charge[otherwise]and its charger [adapt the verb are from the third person plural][end if] [unless the bin is an underside or the bin is a backside]in [end unless][the bin]. ".
	
Rule for disclosing contents of a supporter (called surface) when the phone charger is on surface and the smartphone is on surface and the number of locale-supportable things on surface is 2:
	now the phone charger is mentioned;
	say "Your [smartphone] [if the smartphone is charging][are] plugged in to charge[otherwise]and its charger [adapt the verb are from the third person plural][end if] on [the surface]. ".

The examine devices rule does nothing when the noun is the smartphone.
The list attached things when examining receiver or inserter rule does nothing when the noun is the smartphone and the count of occupied sockets of the smartphone is 0.

Instead of examining the smartphone when the intruder carries the smartphone: say "The intruder will be clutching it in such a way that you won't be able to see the screen."

A thing can be phonish. A thing is seldom phonish. The smartphone is phonish. The phone charger is phonish.

Does the player mean doing something to the smartphone when everything matched is phonish (this is the prioritize the phone rule): it is likely.

Does the player mean plugging the phone charger into the smartphone:
	if the count of occupied sockets of the smartphone is 1, it is possible;
	it is likely.
	
Does the player mean plugging the smartphone into the phone charger:
	if the count of occupied sockets of the smartphone is 1, it is possible;
	it is likely.
	
Does the player mean plugging the phone charger into an electric outlet:
	if the count of occupied sockets of the smartphone is 1, it is likely;
	it is possible.
	
Does the player mean plugging the laptop-charger into the smartphone: it is unlikely.

Rule for supplying a missing second noun while plugging the smartphone into:
	if the phone charger is touchable, now the second noun is the phone charger.
	
Rule for supplying a missing second noun while plugging the phone charger into:
	if the smartphone is touchable and the count of occupied sockets of the smartphone is 0:
		now the second noun is the smartphone;
	otherwise if an electric outlet is touchable:
		now the second noun is a random touchable electric outlet.

Report taking the smartphone: say "[if it's Daytime]Taken[otherwise]You'll take your phone[end if]." instead.

Report an actor plugging the phone charger into (this is the announce phone charging rule):
	if the smartphone is charging:
		say "Your [smartphone] [ding] to indicate that it's[if it's Daytime] now[end if] charging." (A).

The announce phone charging rule is listed after the report-plugging it into rule in the report plugging it into rules.

Check unplugging the smartphone:
	if the count of occupied sockets of the smartphone is 1:
		if the smartphone is charging:
			try unplugging the phone charger from the smartphone instead;
		otherwise:
			try unplugging the phone charger instead.

[Before listing contents while taking inventory: group phonish things together.
Rule for grouping together phonish things:
	[if listing group size is 2,] say "your phone and its charger".]
	
Check electronics-charging (this is the redirect charging the phone to plugging it in rule):
	if the noun is the smartphone:
		if the phone charger is touchable:
			if the smartphone is charging:
				say "[nt]Your phone [is already] charging." (A) instead;
			otherwise if the count of occupied sockets of the smartphone is 0:
				try plugging the phone charger into the smartphone instead;
			otherwise:
				if the player can touch an electric outlet:
					try plugging the phone charger into a random touchable electric outlet instead;
				otherwise:
					say "[nt]There [if it's Daytime]aren't[otherwise]won't be[end if] any outlets within reach to plug the charging cable into." (B) instead;
		otherwise:
			say "[nt]It'll be hard to charge your phone without its charging cable. The last time [we] [saw] that, [regarding the phone charger][they] [was-were of phone charger] [at the remembered location of phone charger]." (C) instead.

After examining the smartphone for the first time:
	say "Well, you probably should say your [i]new[/i] phone. Your old one is probably at the bottom of the Hudson by now.";
	continue the action.

Instead of attacking or burning or cutting or swinging or waving the smartphone: say "[no time]Given that the smartphone is brand new, [if it's Daytime]you're not[otherwise]you doubt you'll be[end if] eager to risk breaking it."
Instead of assaulting the smartphone with: try attacking the smartphone.
Instead of calling or texting the smartphone: say "[no time]You [first time]realize you [only]don't actually know the number of this phone."

Instead of closing the smartphone:
	if the smartphone is switched on, try switching off the smartphone;
	otherwise say "[no time]It's not a flip phone. There's no hinge."

Instead of consulting the smartphone about: say "[nnt]The phone, notably [if it's Daytime]does[otherwise]did[end if] not have a web browser[if it's Nighttime], last you checked[end if]."
Instead of drinking or eating or tasting the smartphone: say "[no time]You doubt the phone would taste very good."
Instead of entering underneath or slipping behind or sitting behind or lying behind or crouching behind the smartphone: say "[no time]You doubt the noun would do even an adequate job of concealing you."
Instead of kissing or hugging the smartphone: say "[no time]You're not quite [i]that[/i] attached to it."
Instead of knocking on the smartphone: say "The sound [regarding the noun][aren't] very impressive."
Instead of listening to the smartphone: say "[The smartphone] [aren't] [if it's Daytime]currently [end if]making any noise[if it's Nighttime] by that point[end if]."

Instead of locking keylessly the smartphone:
	if the smartphone is switched on, try switching off the smartphone;
	otherwise say "[no time][It's already] off and locked."
	
Check looking under the smartphone:
	if the smartphone is carried, say "[no time][We]['re] carrying the [smartphone], so [they] [can't] conceal much of anything from you." instead.

Instead of opening the smartphone:
	if the smartphone is switched off, try switching on the smartphone;
	otherwise say "[no time]It's not a flip phone. There's no hinge."

Instead of rubbing or touching or squeezing the smartphone: say "Sleek and smooth."
Instead of searching the smartphone: try examining the smartphone.
Instead of setting the smartphone to: try typing the topic understood on the smartphone.
Instead of smelling the smartphone: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of throwing the smartphone at something: say "[no time]Given that the smartphone is brand new, [if it's Daytime]you're not[otherwise]you doubt you'll be[end if] eager to risk breaking it."

Check typing the topic understood on the smartphone:
	if the smartphone's keyboard is inaccessible:
		take no time;
		say "You [can't] type anything on the smartphone [if it's Daytime]right now[otherwise]by that point[end if], because the keyboard [aren't] available." instead.

Instead of contentlessly typing the smartphone:
	take no time;
	if the smartphone's keyboard is inaccessible:
		say "You [can't] type anything on the smartphone [if it's Daytime]right now[otherwise]by that point[end if], because the keyboard [aren't] available.";
	otherwise:
		say "[i][bracket]You'll need to specify what you want to type.[close bracket][/i]".

Instead of unlocking keylessly the smartphone:
	if the smartphone is switched off:
		try switching on the smartphone;
	otherwise if the smartphone is protected and the smartphone runs lockscreen:
		say "[nnt]You'll need to type in the passcode to do that.";
	otherwise:
		say "[no time][if it's Daytime]It's[otherwise]It'll already be[end if] on and unlocked."
		
Instead of plugging the smartphone into a charging cable: try plugging the second noun into the smartphone.

Check plugging the smartphone into an electric outlet:
	if the phone charger is inserted into the smartphone, try plugging the phone charger into the second noun instead;
	otherwise say "[no time][We] [can't] plug the phone into the wall directly[unicode 8212]you'll need to use the phone's charger as an intermediary." instead.
	
First before going (this is the set down or unplug plugged in phone before going rule):
	if the player encloses the smartphone and the smartphone is attached:
		if it's Daytime:
			if the smartphone is charging:
				if the room gone from is Main-Bed:
					say "(first setting down your phone on the dresser so that it stays plugged in)[command clarification break]" (A);
					now the smartphone is on the dresser;
					if the player encloses the phone charger:
						now the phone charger is on the dresser;
				otherwise if the room gone from is Main-Office:
					say "(first setting down your phone on the desk so that it stays plugged in)[command clarification break]" (B);
					now the smartphone is on the desk;
					if the player encloses the phone charger:
						now the phone charger is on the desk;
			otherwise:
				unless the player encloses the phone charger:
					say "(bringing the phone charger with you, since it's plugged into your phone)[command clarification break]" (C);
					now the player carries the phone charger;
		otherwise:
			if the smartphone is charging:
				say "(first unplugging your phone)[command clarification break]" (D);
				silently try unplugging the phone charger from the smartphone;
			otherwise:
				unless the player encloses the phone charger:
					say "(bringing the phone charger with you, since it'll be plugged into your phone)[command clarification break]" (E);
					now the player carries the phone charger;
					
Before inserting the smartphone into a container: follow the disconnect the phone first rule.
Before placing the smartphone under: follow the disconnect the phone first rule.
Before stowing the smartphone behind: follow the disconnect the phone first rule.

This is the disconnect the phone first rule:
	if the smartphone is attached:
		say "(first unplugging your phone)[ccbr]" (A);
		silently try unplugging the phone charger from the smartphone;

Chapter 2 - Parts of the phone

The bulk of a selection device is usually 0. The bulk of a screen is usually 0. The bulk of a keyboard is usually 0. The bulk of software is usually 0.

Instead of remembering something incorporated by the smartphone: try remembering the smartphone.

The startup noise of the smartphone is "The phone screen [regarding the smartphone][brighten]."

The smartphone has some text called the unlock noise. The unlock noise of the smartphone is "The phone unlocks with a click."

Incorporated by the smartphone is a firebolt socket.

The printed name of the smartphone's screen is "phone screen". Understand "phone/-- screen" as the smartphone's screen.

The printed name of the smartphone's keyboard is "digital keyboard". Understand "digital" or "number pad" as the smartphone's keyboard. The description of the smartphone's keyboard is "A keyboard made of digital buttons."
Definition: the smartphone's keyboard is accessible:
	if the smartphone runs lockscreen, decide yes;
	if the software priority of messages is 1, decide yes;
	decide no.
Definition: the smartphone's keyboard is inaccessible if it is not accessible.

The pointer finger is a privately-named selection device. It is part of the smartphone.
[NOTE: This allows us to use the Computers logic on something without a mouse.]

Chapter 3 - Rules for the phone

Carry out switching on the smartphone (this is the brighten the phone rule):
	now the smartphone is bright;
	now the smartphone is lit.
		
Carry out switching off the smartphone (this is the dim the phone rule):
	now the smartphone is not bright;
	now the smartphone is not lit;
	now the on-count of the smartphone is 0.
	
[NOTE: See also later rule that relies on parts of the smartphone being defined]

After reading a command (this is the enter the phone's password on the phone only rule):
	if the player's command includes "121994":
		if the laptop-computer is touchable and the laptop-computer is switched on and the smartphone is touchable and the smartphone is switched on:
			change the text of the player's command to "enter 121994 on phone".

This is the picking up the phone rule:
	if the player does not enclose the smartphone and the smartphone is touchable:
		say "(first taking your phone)[command clarification break]";
		silently try taking the smartphone;
		if the player does not carry the smartphone:
			stop the action;
	continue the action.
			
Before buzzing: abide by the picking up the phone rule.
Before calling: abide by the picking up the phone rule.
Before dialing: abide by the picking up the phone rule.
Before ringing: abide by the picking up the phone rule.
Before an actor switching off the smartphone: if the actor is the player, abide by the picking up the phone rule.
Before an actor switching on the smartphone: if the actor is the player, abide by the picking up the phone rule.
Before an actor contentlessly typing the smartphone: if the actor is the player, abide by the picking up the phone rule.
Before an actor contentlessly typing the smartphone's keyboard: if the actor is the player, abide by the picking up the phone rule.
Before an actor typing the topic understood on the smartphone: if the actor is the player, abide by the picking up the phone rule.
Before an actor typing the topic understood on the smartphone's keyboard: if the actor is the player, abide by the picking up the phone rule.
Before an actor selecting the topic understood with the pointer finger: if the actor is the player, abide by the picking up the phone rule.

Before an actor texting:
	unless the laptop-computer is touchable and the laptop-computer is switched on and the laptop-computer is not protected and the controlling program of the laptop-computer is messages:
		if the actor is the player, abide by the picking up the phone rule.

Before an actor messaging:
	unless the laptop-computer is touchable and the laptop-computer is switched on and the laptop-computer is not protected and the controlling program of the laptop-computer is messages:
		if the actor is the player, abide by the picking up the phone rule.

Before an actor IMing:
	unless the laptop-computer is touchable and the laptop-computer is switched on and the laptop-computer is not protected and the controlling program of the laptop-computer is messages:
		if the actor is the player, abide by the picking up the phone rule.
		
Before an actor SMSing:
	unless the laptop-computer is touchable and the laptop-computer is switched on and the laptop-computer is not protected and the controlling program of the laptop-computer is messages:
		if the actor is the player, abide by the picking up the phone rule.

Chapter 4 - Software on the phone

Section 1 - Lockscreen

The smartphone runs a password-lock program called lockscreen.
The description of lockscreen is "A factory preset wallpaper [regarding the smartphone][appear] on the screen briefly before giving way to a number pad and an invitation to type a six-digit passcode[first time]. Brookwood told you the passcode would be your birth month and year: December 1994[only]."
The password of lockscreen is "121994". [NOTE: PC's birthday month & year.]
The rejection of lockscreen is "[passcode-attempts up]The phone [regarding the smartphone][vibrate] slightly. The screen [read] 'Password incorrect' briefly, before the number pad reappears."
The success of lockscreen is "[passcode-attempts reset]The phone [regarding the smartphone][vibrate] slightly, and the password field [vanish]."

[After reading a command (this is the no need to specify the number pad rule):
	if the player's command includes "on number pad":
		cut the matched text.]

To say passcode-attempts up: increment the passcode-attempts of the smartphone.
To say passcode-attempts reset: now the passcode-attempts of the smartphone is 0.

The default typing rule is not listed in any rulebook.

Player-inputting is a truth state that varies. player-inputting is true.
This is the reset inputting party rule: now player-inputting is true.
The reset inputting party rule is listed first in the turn sequence rules.

Carry out an actor typing the topic understood on a keyboard which is part of a computer (this is the customized typing rule):
	unless the actor is the player:
		now player-inputting is false;
	abide by the input handling rules for the software in question.

An input handling rule for lockscreen (this is the customized check for correct lockscreen password rule):
	let N be "[the topic understood]"; 
	if N is the password of lockscreen:
		carry out the rewarding successful answering activity with lockscreen;
		rule succeeds;
	otherwise:
		if the passcode-attempts of the smartphone is 6:
			if player-inputting is true:
				say "The phone [vibrate] slightly, and the number pad [disappear]. In its place [are] some text:
			
				[pt]There have been too many unsuccessful attempts to unlock this phone. It has been temporarily disabled. Please try again in [remaining time of disabled-screen] minutes.[/pt]";
			otherwise:
				follow the extended report the intruder typing on the smartphone rule;
			now the smartphone is locked;
			now the smartphone does not run lockscreen;
			now the software priority of disabled-screen is 1;
		otherwise if player-inputting is true:
			say "[rejection of lockscreen][paragraph break]" (A);
		otherwise:
			follow the extended report the intruder typing on the smartphone rule;
		rule fails.

Last every turn (this is the lock the phone when it's off rule):
	if the smartphone is switched off:
		[reset to home screen;]
		now the smartphone runs lockscreen.

The smartphone runs some software called disabled-screen. The software priority of disabled-screen is 10. 
disabled-screen has a number called the remaining time. The remaining time of disabled-screen is 60.
The description of disabled-screen is "The screen remains blank except for some text that reads:

[pt]There have been too many unsuccessful attempts to unlock this phone. It has been temporarily disabled. Please try again in [remaining time of disabled-screen] minutes.[/pt]".

Every turn when the smartphone is locked (this is the count down on the disabled screen rule):
	decrement the remaining time of disabled-screen;
	if the remaining time of disabled-screen is 0:
		now the smartphone is unlocked;
		now the smartphone runs lockscreen;
		now the software priority of disabled-screen is 10;
		now the remaining time of disabled-screen is 60.
		
Definition: the smartphone is protected:
	if it runs a password-lock program, yes;
	if the software priority of disabled-screen is 1, yes;
	no.

The invitation is a metaphor. It is part of  lockscreen.
Before doing something other than remembering when the current action involves the invitation: say "It [regarding the invitation][aren't] a literal pen-and-paper invitation[unicode 8212]just text on the screen." instead.

Instead of remembering the invitation: say "[nnt][as the parser]The last time [we] [saw] the smartphone and its inviting lockscreen, it [was-were of smartphone] [if the remembered location of the smartphone is either Main-Behind-Shelf or Main-By-Counter]by [otherwise if the remembered location of the smartphone is a room]in [otherwise][end if][if the remembered location of smartphone is a room][casual descriptor of the remembered location of smartphone][otherwise][at the remembered location of smartphone][end if].[as normal][line break]".

Section 2 - Homescreen

The smartphone runs a multiple-choice program called homescreen. The options table of the homescreen is the Table of Homescreen Options. The software priority of homescreen is 3.
The description of homescreen is "[customized homescreen options-list]".
The out-of-bounds response of a multiple-choice program is usually "[Our] selection, '[topic understood]', [if it's Daytime]is not[otherwise]won't be[end if] one of the available choices."

To say customized homescreen options-list:
	say "[one of]A second factory-preset wallpaper [if it's Nighttime]will appear[otherwise]appears[end if], overlaid with[or]The screen [if it's Nighttime]will display[otherwise]displays[end if][stopping] the following apps:[/p]";
	repeat through the options table of homescreen:
		say "[title entry][br]";
	say "[run paragraph on]".

Table of Homescreen Options
topic	title	effect
"contacts" or "anonymous/-- silohuette"	"[contacts-title]"	open-contacts rule
"text/texts/messages" or "text messages"	"[messages-title]"	open-messages rule
"phone" or "landline"	"[phone-title]"	open-dialing rule
"settings" or "gear"	"[settings-title]"	open-settings rule

To say contacts-title: say "CONTACTS, represented by an anonymous silhouette".
To say messages-title: say "MESSAGES, represented by a speech bubble".
To say phone-title: say "The PHONE, represented by an old-fashioned landline".
To say settings-title: say "SETTINGS, represented by a gear".

[TO ADD:
	- Flashlight
	- Camera?]
	
A first input handling rule for quittable software (called chosen software) (this is the quit quittable software rule):
	let N be indexed text;
	let N be the topic understood;
	if N is "quit" or N is "back" or N is "close" or N is "close app" or N is "close program" or N is "close contacts" or N is "close messages" or N is "close texts" or N is "home":
		now the applicable recipient is "Nobody";
		if chosen software is run by smartphone:
			reset to home screen;
			say "[We] [return] to the home screen.";
			try examining homescreen;
		otherwise:
			reset to operating system;
			say "[We] [close] the window and return to the desktop.";
			try examining LaptopOS;
		rule succeeds.
		
After reading a command (this is the closing apps equates to tapping close rule):
	if the smartphone is switched on and the smartphone is unprotected and the player encloses the smartphone:
		if the player's command matches "close" or the player's command matches "back" or the player's command matches "home" or the player's command matches "quit" or the player's command matches "close app" or the player's command matches "close program" or the player's command matches "close contacts" or the player's command matches "close messages" or the player's command matches "close texts" or the player's command matches "quit program" or the player's command matches "quit contacts" or the player's command matches "quit messages" or the player's command matches "quit texts":
			change the text of the player's command to "tap close".

To decide whether (user - a person) is interacting with electronics:
	if user carries the smartphone and the smartphone is switched on, decide yes;
	if the location of user is the location of the laptop-computer and the laptop-computer is switched on, decide yes;
	decide no.
		
To reset to home screen:
	repeat with item running through software run by the smartphone:
		unless item is either homescreen or lockscreen or disabled-screen:
			now the software priority of item is 5.
	
After examining a quittable software (called chosen software) (this is the alert the player to quittability rule):
	if chosen software is run by smartphone:
		say "You can also CLOSE the app to return to the home screen.";
	otherwise:
		say "You can also select QUIT to return to the operating system."
		
The factory is a metaphor. It is part of homescreen. Understand "preset" or "factory-preset" as the factory.
Before doing something other than remembering when the current action involves the factory: say "Factory-preset, as in default[unicode 8212]not a literal factory." instead.

Instead of remembering the invitation: say "[nnt][as the parser]The last time [we] [saw] the smartphone and its factory-preset wallpaper, it [was-were of smartphone] [if the remembered location of the smartphone is either Main-Behind-Shelf or Main-By-Counter]by [otherwise if the remembered location of the smartphone is a room]in [otherwise][end if][if the remembered location of smartphone is a room][casual descriptor of the remembered location of smartphone][otherwise][at the remembered location of smartphone][end if].[as normal][line break]".

Section 3 - Contacts app

This is the open-contacts rule:
	repeat with item running through software run by the smartphone:
		unless item is either homescreen or disabled-screen:
			now the software priority of item is 5;
	now the software priority of contacts is 2;
	say "[We] [tap] the contacts app.";
	try examining contacts.
	
The smartphone runs a multiple-choice program called contacts. Contacts is quittable. The options table of contacts is the Table of Contacts Options.

Table of Contacts Options
topic	title	effect
"realtor" or "camille" or "woman"	"[pt]Camille Realtor[/pt]"	camille-contact-listing rule
"mr/arthur/-- brookwood" or "arthur" or "man"	"[pt]Mr Brookwood[/pt]"	brookwood-contact-listing rule

This is the introduce contact rule:
	if Nighttime is happening:
		say "Tapping the name will bring the following info up on the screen:";
	otherwise:
		say "You tap the name, and the contact info opens on your screen.";
	say line break.
		
This is the exit contact rule:
	if Nighttime is happening:
		say "Once you've read it, you'll return to the contacts menu.";
	otherwise:
		say "You read through the information, then return to the contacts menu."
	
This is the brookwood-contact-listing rule:
	follow the introduce contact rule;
	say "     [bpt]Mr. Brookwood";
	say paragraph break;
	say "     Cell: [pt]202-555-3845";
	say paragraph break;
	say "     [bpt]Memo[br]     [pt]remember to let him know when you're settled in.";
	say roman type;
	follow the exit contact rule.
	
This is the camille-contact-listing rule:
	follow the introduce contact rule;
	say "     [bpt]Camille Realtor";
	say line break;
	say "     [ipt]Organization: Fallon & Associates";
	say paragraph break;
	say "     [bpt]Cell: [pt]212-555-4663";
	say paragraph break;
	say "     [bpt]Memo[br]     [pt]her actual last name is [']Harmon,['] I think.";
	say roman type;
	follow the exit contact rule.

Section 4 - Messaging app

This is the open-messages rule:
	repeat with item running through software run by the smartphone:
		unless item is either homescreen or disabled-screen:
			now the software priority of item is 5;
	now the software priority of messages is 2;
	say "[We] [tap] the messaging app.";
	try examining messages.
	
The smartphone runs a multiple-choice program called messages. Messages is quittable. The options table of messages is the Table of Messages Options.

Table of Messages Options
topic	title	effect
"mr/arthur/-- brookwood" or "arthur" or "mr/man"	"Mr Brookwood"	brookwood-messages rule
"camille/-- realtor" or "camille" or "woman"	"Camille Realtor"	camille-messages rule
"unknown" or "unknown number"	"Unknown number"	unknown-messages rule
"911" or "999" or "emergency" or "services"	--	911-messages rule

To say options-list of (chosen program - a multiple-choice program):
	let the option count be the number of filled rows in the options table of the chosen program;
	let the referent be the chosen program;
	if the option count is greater than 1:
		let the referent be the large set;
	say "[regarding the referent]The following option[s] [are] visible on the screen:[paragraph break]";
	repeat through the options table of the chosen program:
		if there is a title entry, say "[title entry][line break]";
	say "[run paragraph on]".

This is the brookwood-messages rule:
	now the applicable recipient is "Brookwood";
	say "[tb][if it's Daytime]Yesterday[otherwise]Wednesday[end if] [ts]11:41 AM[/ts]";
	say paragraph break;
	say "[inmsg]This is Brookwood. Please confirm receipt.[/msg]";
	say line break;
	say "[outmsg]got it! [unicode 10003][/msg]";
	say paragraph break;
	say "[tb][if it's Daytime]Today[otherwise]Yesterday[end if] [ts]3:51 PM[/ts]";
	say paragraph break;
	say "[inmsg]Flight cancelled. Mechanical problems--unavoidable. Booked a redeye, but will not arrive until tomorrow midday.[/msg]";
	say line break;
	say "[outmsg]??? what am I supposed to do until then?[/msg]";
	say line break;
	say "[inmsg]Lay low. Get set up. You're a big girl--you can survive 24 hrs unsupervised.[/msg]";
	say line break;
	say "[outmsg]but how am i to go on without your sparkling company??[/msg]";
	say "[rcpt]Read [if it's Daytime]3:58 PM[otherwise]yesterday[end if][/msg]".
	
This is the camille-messages rule:
	now the applicable recipient is "Camille";
	say "[tb][if it's Daytime]Today[otherwise]Yesterday[end if] [ts]10:03 AM[/ts]";
	say paragraph break;
	say "[inmsg]Good to finally speak on the phone this morning! Key's under the mat, as requested :)[/msg]";
	say paragraph break;
	say "[outmsg]tysm![/msg]";
	say line break;
	say "[inmsg]Of course! Just let me know if there's anything else you need :)[/msg]";
	say paragraph break;
	say "[outmsg]will do![/msg]";
	
This is the unknown-messages rule:
	now the applicable recipient is "Unknown";
	say "[inmsg]This phone number has been activated. Thank you for using Squint Mobile!
	
	This is an automated message. Please do not reply.[/msg]".
	
The 911-time is a time that varies. The 911-time is 2:47 AM.
	
Carry out IMing 911 (this is the add 911 to the messages rule):
	now the 911-time is the time of day;	
	if there is no title corresponding to an effect of 911-messages rule in the Table of Messages Options:
		choose row with an effect of 911-messages rule in the Table of Messages Options;
		now title entry is "911";
	
This is the 911-messages rule:
	if 911-texted is false, say the out-of-bounds response of messages instead;
	now the applicable recipient is "911";
	say "[tb]Today [ts][911-time][/ts]";
	say paragraph break;
	say "[outmsg]someone broke into my apartment please send help[/msg]";
	say paragraph break;
	say "[inmsg]LA-911: Call 911 if you can, text only if you cannot. If unable to call, text LOCATION and NATURE of emergency and standby for assistance.[/msg]";
	say line break;
	say "[inmsg]DO YOU NEED POLICE OR EMS[/msg]";
	say paragraph break;
	say "[outmsg]i cant call hell hear. police send them quickly[/msg]";
	say paragraph break;
	say "[inmsg]WE ARE TRIANGULATING YOUR LOCATION; WHAT IS YOUR APARTMENT #?[/msg]";
	say line break;
	say "[outmsg]784[/msg]";
	say paragraph break;
	say "[inmsg]ARE YOU ABLE TO REMAIN HIDDEN?[/msg]";
	say line break;
	say "[outmsg]im doing my best[/msg]";
	say paragraph break;
	say "[inmsg]POLICE ARE ON THE WAY. HIDE UNDER FURNITURE OR BEHIND A LOCKED DOOR IF YOU CAN.[/msg]";

Section 5 - Other apps

This is the open-dialing rule:
	take no time;
	say "For ease of use, you can just CALL the person or number you want to contact."

This is the open-settings rule:
	take no time;
	if Nighttime is happening:
		say "You'll be a bit busy to be worrying about your phone's settings.";
	otherwise:
		say "Customizing the settings can wait for tomorrow. You're wiped."
		
smartphone-interacting is a truth state that varies. smartphone-interacting is false.
Last every turn: now smartphone-interacting is false.

First input handling rule (this is the interacting with the phone rule):
	now smartphone-interacting is true;
	make no decision.
		
Every turn when the smartphone is bright (this is the save the battery rule):
	if smartphone-interacting is true:
		now the on-count of the smartphone is 0;
	otherwise:
		increment the on-count of the smartphone;
		if the on-count of the smartphone is 6:
			unless the  the current action involves the smartphone:
				silently try switching off the smartphone;
				say "[The smartphone][']s screen [power] down."

Part 3 - By counter

Main-By-Counter is north of Main-Bed. "[if it's Daytime]This is[otherwise]You'll be in[end if] the portion of the main room closest to the kitchenette. [if it's Daytime]That space is divided from this one[otherwise]The two spaces are separated[end if] by a counter[unless the countertop is empty], on which [is-are a list of things on the countertop][end unless]. On [if it's Daytime]this[otherwise]the near[end if] side of the counter [regarding the barstools][are] some [barstools]." The printed name is "Main Room[if the holder of the player is the location] [roman type](near the counter)".
Understand "by/to/towards counter" or "by/to/towards/-- counter area" as Main-By-Counter.
The relative direction set of Main-By-Counter is the Table of Counter Direction Descriptors.
The casual descriptor of Main-By-Counter is "the counter".
For saying the location name of Main-By-Counter: say "over by the counter".
The prepositional entrance descriptor of Main-By-Counter is "towards the counter".
The prepositional exit descriptor of Main-By-Counter is "away from the counter".

For announcing notable exits of Main-By-Counter:
	say "[We] [can] go [if the previous location is Main-Bed]back [end if][b]south[/b] to the bedroom area, or [if the previous location is Main-Office]back [end if][b]west[/b] to the office area. [if the time of day is 9:00 AM][nobr][otherwise][/p]".
	
Instead of examining Main-By-Counter when the location is not Main-By-Counter:
	say "The portion of the main room closest to the kitchenette. The two spaces are separated by a counter[unless the countertop is empty], on which [is-are a list of things on the countertop][end unless]. On the [if the location is in Open Space]near[otherwise]far[end if] side of the counter [regarding the barstools][are] some [barstools].";
	describe locale for Main-By-Counter;
	if the number of locale-supportable things in Main-By-Counter > 0:
		say "[We] [if it's Daytime]can also see[otherwise]will also be able to see[end if] [a list of locale-supportable things in Main-By-Counter]."
	
Instead of examining north when the location is Main-By-Counter: try examining Kitchenette.
Instead of examining east when the location is Main-By-Counter: say "[nnt][There's] a wall in that direction."
Instead of examining west when the location is Main-By-Counter: try examining Main-Office.
Instead of examining south when the location is Main-By-Counter: try examining Main-Bed.

Instead of listening to Main-By-Counter:
	if the radio is listenable:
		try listening to the radio;
	otherwise if it's Daytime:
		if the dishwasher-switch is switched on:
			say "You hear the dishwasher going in the kitchenette.";
		otherwise if the kitchen faucet is switched on:
			say "Water rushes from the kitchen faucet.";
		otherwise if the laptop-computer is switched on and the laptop-computer is in the location:
			say "You hear the computer's fan whirring slightly.";
		otherwise:
			say "You hold your breath and listen, but don't hear anything unusual.";
	otherwise:
		now player-listening is true.

Instead of smelling Main-By-Counter: follow the smelling rooms rule.

Table of Counter Direction Descriptors
other place	descriptor
Bathroom	"somewhere near the entryway"
Entryway	"in the entryway"
Kitchenette	"in the kitchenette"
Main-Bed	"in the bedroom area"
Main-Behind-Shelf	"behind the bookshelf"
Main-Office	"in the office area"
Main-Sitting	"over near the sitting area"
Outside Hall	"out in the hall"
Within-Closet	"somewhere near the entryway"

south-of-counter is a position in Main-By-Counter.

The furniture-counter is a privately-named backdrop. It is in Main-By-Counter and Kitchenette. The printed name of the furniture-counter is "counter". The furniture-counter is bulky.
The description of the furniture-counter is "The wooden frame that holds up the countertop." 

[A description-concealing rule (this is the don't need to be informed of a second counter rule):
	now the furniture-counter is not marked for listing.]
	
A backside called behind#counter is part of the furniture-counter. behind#counter is open and enterable. behind#counter allows seated, crouched, and reclining. behind#counter is crouched.

behind-the-counter is a thingish position in behind#counter.

Instead of examining the countertop when the player is enclosed by behind#counter: say "[We] [can't] see the top of the counter from underneath it."

First carry out exiting when the holder of the player is behind#counter (this is the exiting from behind the counter and into the main room rule):
	surreptitiously move the player to Main-By-Counter;
	stop the action.
	
Instead of looking under the furniture-counter (this is the redirect looking under the counter rule):
	if the location is Kitchenette:
		try searching the kitchen-cabinets;
	otherwise:
		if the holder of the player is behind#counter:
			try looking behind the furniture-counter;
		otherwise if something is in behind#counter:
			say "Under [the noun] [is-are a list of locale-supportable things in behind#counter]." (A);
		otherwise:
			say "[We] [find] nothing of interest." (B).
	
Definition: a thing (called obj) is kitchen-floored if obj is in Kitchenette and obj is not enclosed by a container and obj is not enclosed by a supporter and obj is not fixed in place and obj is not scenery and obj is not privately-named.
	
Instead of looking behind the furniture-counter when the location is not Kitchenette (this is the customized looking behind the counter rule):
	if the holder of the player is behind#counter:
		if the number of locale-supportable things in behind#counter > 0:
			if the number of locale-supportable things in behind#counter is 1:
				say "[There's] [nobr]" (A);
			otherwise:
				say "[if it's Daytime]There are[otherwise][There's][end if] [nobr]" (B);
			say "[a list of locale-supportable things in behind#counter] back [if it's Nighttime]t[end if]here." (C);
		otherwise:
			say "[There's] nothing back [if it's Nighttime]t[end if]here[first time] besides you[only]." (D);
	otherwise if the location is Main-By-Counter:
		if the number of kitchen-floored things > 0:
			say "On the floor on the other side of the counter [is-are a list of kitchen-floored things]." (E);
		otherwise:
			say "[We] [find] nothing of interest on the other side." (F);
	otherwise:
		say "[We] [can't] meaningfully see behind the counter from [if it's Nighttime]t[end if]here." (G).
		
Check slipping behind the furniture-counter (this is the bad angle for slipping behind the counter rule):
	if the location is neither Kitchenette nor Main-By-Counter:
		take no time;
		say "The counter [can't exactly] effectively conceal you from [if it's Daytime]this[otherwise]that[end if] angle." (A) instead.
		
Check slipping behind the furniture-counter:
	if the location is Kitchenette, try crouching behind the furniture-counter instead.

Report slipping behind the furniture-counter (this is the customized report slipping behind the counter rule):
	say "[We] [squeeze] between the barstools and huddle in the space underneath the countertop." (A) instead.

Instead of crouching behind the furniture-counter when the location is Kitchenette:
	silently try taking position crouched;
	if the posture of the player is crouched:
		now the furniture-counter obscures the player;
		say "[We] [crouch] down behind the counter.";
	otherwise:
		stop the action.
		
Instead of lying behind the furniture-counter when the location is Kitchenette:
	silently try taking position reclining;
	if the posture of the player is reclining:
		now the furniture-counter obscures the player;
		say "[We] [lie] down behind the counter.";
	otherwise:
		stop the action.
		
Instead of sitting behind the furniture-counter when the location is Kitchenette:
	silently try taking position seated;
	if the posture of the player is seated:
		now the furniture-counter obscures the player;
		say "[We] [sit] down behind the counter.";
	otherwise:
		stop the action.
		
Check stowing something behind the furniture-counter (this is the bad angle for stowing behind the counter rule):
	if the location is neither Kitchenette nor Main-By-Counter:
		take no time;
		say "You [can't exactly] reach behind the counter from [if it's Daytime]this[otherwise]that[end if] angle." (A) instead.
		
Check stowing something behind the furniture-counter:
	if the location is Kitchenette:
		if it's Daytime, try dropping the noun;
		otherwise try depositing the noun.
	
Check taking (this is the can only reach behind the counter from one angle rule):
	if the noun is in behind#counter:
		if the location is Kitchenette:
			say "[nt][We] [can't] reach anything on the other side of the counter from [if it's Nighttime]t[end if]here." (A) instead;
		otherwise if the location is not Main-By-Counter:
			say "[nt]You [can't exactly] reach behind the counter from [if it's Daytime]this[otherwise]that[end if] angle." (B) instead.

The countertop is a supporter. It is part of the furniture-counter. The printed name of the countertop is "counter". Understand "counter" as the countertop. The countertop is bulky. [The bulk-capacity of the countertop is 1000.]
The description of the countertop is "A marble counter[if it's Daytime] snakes[otherwise], snaking[end if] its way around the perimeter of the kitchenette."
Rule for disclosing exterior of the countertop: do nothing.

Instead of going north in Main-By-Counter: try climbing the countertop.
Instead of going south in Kitchenette: try climbing the countertop.

Instead of remembering the countertop: say "You expect [the countertop] [are] right where you left it, separating the kitchenette from the main room."

Instead of attacking or burning or cutting the countertop: say "[no time]That would be a great way to ensure you never see your security deposit again."
Instead of assaulting the countertop with: try attacking the countertop.
Instead of climbing or crouching on or entering or lying on or sitting on or standing up on the countertop: say "[no time]You've never seen the point of climbing something when you can just go around it[if intruder-inside is true]. Besides, you doubt you'd be able to do it silently[otherwise if it's Nighttime]. Besides, you're not certain you'd be able to do so without hurting yourself[end if]."
Instead of crouching behind the countertop: try crouching behind the furniture-counter.
Instead of drinking or eating or tasting or kissing the countertop: say "[nnt]You doubt the counter would taste very good."
Instead of entering underneath the countertop: try slipping behind the furniture-counter.
Instead of giving something to the countertop: try putting the noun on the countertop.
Instead of inserting something into the countertop: try putting the noun on the countertop.
Instead of listening to the countertop: say "[no time][The countertop] [are] incapable of making noise on its own."
Instead of looking behind the countertop: try looking behind the furniture-counter.
Instead of looking under the countertop: try looking under the furniture-counter.
Instead of lying behind the countertop: try lying behind the furniture-counter.
Instead of placing something under the countertop: try stowing the noun behind the furniture-counter.
Instead of pulling or pushing or turning or taking the countertop: say "[nnt][The noun] [are] firmly installed in place, and [we] [have] neither the tools nor the expertise required to uninstall it."
Instead of pushing the countertop to: try pushing the countertop.
Instead of removing something from the countertop: try taking the noun.
Instead of rubbing or touching or squeezing the countertop: say "Smooth, cool marble."
Instead of showing something to the countertop: try putting the noun on the countertop.
Instead of sitting behind the countertop: try sitting behind the furniture-counter.
Instead of slipping behind the countertop: try slipping behind the furniture-counter.
Instead of smelling the countertop: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of stowing something behind the countertop: try stowing the noun behind the furniture-counter.
Instead of throwing something at the countertop: try putting the noun on the countertop.

Before entering underneath or slipping behind the countertop (this is the can't enter underneath or slip behind the counter twice rule):
	if the player is in behind#counter:
		say "[if it's Daytime]You're already[otherwise]You'll already be[end if] there!" instead.

The counter-marble is a material. The counter-marble is part of the countertop. The printed name of the counter-marble is "countertop's marble". Understand "marble" or "countertop's/countertops/counteretop/counter's/counters/counter marble" as the counter-marble.
The description of the counter-marble is "The countertop[if it's Nighttime], you remember,[end if] is made of beautifully finished marble."

After starting the virtual machine (this is the redirect from marble to countertop rule):
	dispatch everything but { examining action, removing it from action, remembering action, taking action } for the counter-marble to the countertop;

Instead of remembering the counter-marble: try remembering the countertop.
Instead of removing the counter-marble from: try taking the counter-marble.
Instead of removing something from the counter-marble: try taking the noun.
Instead of taking the counter-marble: say "[nnt][We] [can't] remove the marble from the counter it makes up[unicode 8212]the counter would cease to exist."

The vase is a container on the countertop. The vase is eclipsing, open, not openable, unlocked, and not lockable. The vase is incapacitating. Understand "ming/xuande" or "porcelain" or "enamel" as the vase. Understand "neck" as the vase when the vase is visible. The bulk of the vase is 10.
The description of the vase is "A (very) expensive Ming vase, covered in colorful images." 
The vase can be shattered or intact. The vase is intact. Understand the shattered property as describing the vase.

Understand "fill vase" as a mistake ("[if it's Daytime]The vase is decorative enough without any flowers in it, and thus doesn't need to be filled with water[otherwise]You will have no reason to lug around a vase full of water with you[unicode 8212]your adversary won't be the Wicked Witch of the West[can't-fill-quietly][end if].") when a switched on tap is touchable.
To say can't-fill-quietly: if intruder-inside is true, say ". Besides, there's no way you'd be able to do that quietly".

Rule for printing inventory details of the vase: if the vase is empty, stop.
Rule for printing room description details of the vase: if the vase is empty, stop.

Check inserting something into the vase (this is the no sizable things in the vase rule):
	if the noun is sizable, say "[no time][The noun] won't fit into the narrow neck of the vase." (A) instead.
	
Check incapacitating the intruder with the vase (this is the shattered vase no longer incapacitates rule):
	if the vase is shattered, say "The vase won't make a very good weapon after it's been shattered." (A) instead.

Instead of attacking or burning or cutting or pulling or pushing or turning or swinging or waving the vase:
	if it's Daytime, say "The vase is valuable; you [don't] want to risk destroying it.";
	otherwise say "You see no way that the act of destroying the vase alone would help in that situation. If you could SMASH it as a noisy distraction, however...";
	take no time.

Instead of assaulting the vase with: try attacking the vase.
Instead of assaulting something with the vase: try throwing the vase at the noun.
Instead of crouching behind or entering underneath or lying behind or sitting behind or slipping behind the vase: say "[no time]The vase wouldn't do a very good job of concealing you."
Instead of drinking or eating or tasting the vase: say "[no time]You doubt the vase would taste very good."
Instead of giving something to the vase: try inserting the noun into the vase.
Instead of kissing or hugging the vase: say "[no time]You're not quite [i]that[/i] attached to it."
Instead of listening to the vase: say "[nnt]The vase doesn't really make noise."
Instead of opening or closing the vase: say "[nnt]It doesn't have a lid."
Instead of placing something under the vase: say "[nnt]The vase [if it's Daytime]isn't capable of effectively concealing[otherwise]won't effectively conceal[end if] [the noun]."
Instead of pushing the vase to: try pushing the vase.
Instead of putting something on the vase: try inserting the noun into the vase.
Instead of removing something from the vase: try taking the noun.
Instead of rubbing or touching or squeezing the vase: say "Smooth, cool ceramic."
Instead of showing something to the vase: try inserting the noun into the vase.
Instead of smelling the vase: say "[nnt]It [regarding the vase][don't] have any flowers in it."

Instead of throwing something at the vase:
	take no time;
	if it's Daytime, say "The vase is valuable; [we] [don't] want to risk destroying it.";
	otherwise say "Better to just SMASH the vase and achieve the same goal with less effort."

Check throwing the vase at:
	if it's Daytime, say "[nt]The vase is valuable; [we] [don't] want to risk destroying it for no good reason." instead.

The colorful images are part of the vase. Understand "pictures" or "marks/markings" or "colourful/color/colour" or "cobalt/manganese" as the colorful images.
The description of the colorful images is "Mostly abstract patterns, mostly cobalt blue."
	
After starting the virtual machine (this is the redirect from images to vase rule):
	dispatch everything but { examining action, kissing action, removing it from action, searching action, smelling action, remembering action, taking action } for the colorful images to the vase;

Instead of kissing or hugging the colorful images: say "[no time]You're not quite [i]that[/i] attached to them."
Instead of remembering the colorful images: try remembering the vase.
Instead of removing something from the colorful images: try taking the noun.
Instead of searching the colorful images: try examining the colorful images.
Instead of smelling the colorful images: say "They don't smell like much of anything[if it's Nighttime], as far as you know[end if]."

Instead of taking the colorful images:
	if the player carries the vase, say "[nt]The images are part of the vase. [We] [can't] separate the two without destroying both.";
	otherwise try taking the vase.

Some barstools are a chair in Main-By-Counter. The carrying capacity of the barstools is 3. Understand "bar stools/stool" or "barstool" or "stools/stool" as the barstools. The barstools allow seated. The barstools are plural-named.
The description of the barstools is "Three barstools, like you'd see in an old-fashioned diner. [if it's Daytime]Currently[otherwise]In the moment[end if], [if the number of things on the barstools is 0]none[otherwise][the number of things on the barstools in words][end if] of them [if the number of things on the barstools is 1][adapt the verb are from the third person singular][otherwise if it's Daytime]are[otherwise]will be[end if] occupied."

First carry out crouching behind the barstools: now the barstools are proper-named.
Last before entering the barstools: now the barstools are proper-named.
First carry out entering underneath the barstools: now the barstools are proper-named.
First carry out looking behind the barstools: now the barstools are proper-named.
First carry out lying behind the barstools: now the barstools are proper-named.
First carry out sitting on the barstools: now the barstools are proper-named.
First carry out sitting behind the barstools: now the barstools are proper-named.
First carry out slipping behind the barstools: now the barstools are proper-named.
First carry out taking position: now the barstools are proper-named.
First carry out standing up: now the barstools are proper-named.
First carry out placing something under the barstools: now the barstools are proper-named.
First carry out putting something on the barstools: now the barstools are proper-named.
First carry out stowing something behind the barstools: now the barstools are proper-named.

First before: now the barstools are improper-named.

Rule for printing the name of the barstools while crouching behind or entering or entering underneath or looking behind or lying behind or sitting on or sitting behind or slipping behind or taking position or standing up or crouching on: say "a barstool".
Rule for printing the name of the barstools while placing under: say "a barstool".
Rule for printing the name of the barstools while putting on: say "a barstool".
Rule for printing the name of the barstools while stowing behind: say "a barstool".
Rule for printing the name of the barstools while getting off: say "barstool".

Instead of remembering the barstools: say "[The noun][if it's Daytime] stand[otherwise], you expect, will still stand[end if] on the main room side of the counter."

First instead of entering underneath the barstools: try slipping behind the furniture-counter.

Instead of drinking or eating or tasting or kissing the barstools: say "[no time]You doubt the barstools would taste very good."
Instead of listening to the barstools: say "[nnt][The barstools] [don't] make much noise on their own."

Instead of looking behind or looking under the barstools:
	if the number of locale-supportable things in behind#counter is 0:
		say "[There's] nothing behind the counter.";
	otherwise:
		say "Behind the counter [is-are a list of locale-supportable things in behind#counter]."

Instead of pulling or pushing or turning or taking or swinging or waving the barstools: say "[nnt]The barstools are all bolted into the floor. You [can't] move them around."
Instead of rubbing or touching or squeezing the barstools: say "Cool metal; hardened, cracked leather."
Instead of slipping behind the barstools: try slipping behind the countertop.
Instead of smelling the barstools: say "[if it's Daytime]They[otherwise]You expect they'll[end if] smell like aged leather."
Instead of stowing something behind the barstools: try stowing the noun behind the countertop.
Instead of tying something to the barstools: say "[nnt]That [if it's Daytime]won't[otherwise]wouldn't[end if] get you much of anywhere."

The old-fashioned diner is a metaphor. It is part of the barstools. Understand "old fashioned" or "oldfashioned" as the old-fashioned diner.
Before doing something other than remembering when the current action involves the old-fashioned diner: say "[no time]The barstools have regrettably been orphaned from their diner of origin." instead.

Instead of remembering the old-fashioned diner: say "The barstools[if it's Daytime] stand[otherwise], you expect, will still stand[end if] on the main room side of the counter."

Some vase-shards are a shards-pile. The vase-shards are the remnant of the vase. The printed name of the vase-shards is "vase shards". Understand "pottery" or "beautiful" as the vase-shards.
The description of the vase-shards is "All that [adapt the verb remain from the third person singular] of the vase is beautiful shards of pottery."

Instead of dropping the vase during Nighttime:
	move the vase to the location;
	try smashing the vase.
	
Check throwing the vase at:
	unless the second noun is the intruder:
		now potentially-ranged is true;
		now the item smashed with is the second noun;
		move the vase to the location of the second noun;
		try smashing the vase instead.
		
Rule for reaching inside a room while smashing the vase:
	if potentially-ranged is true, allow access.
	
Smashing the vase is noisy behavior.
	
Carry out smashing the vase:
	move the vase-shards to the location of the vase;
	remove the vase from play.
	
Report smashing the vase:
	if potentially-ranged is true:
		say "[We] [hurl] the vase at [the item smashed with], causing it to shatter against [regarding the item smashed with][them]. The noise [adapt the verb are from the third person singular] startling in the quiet apartment.";
	otherwise:
		say "[We] [hurl] the vase at the ground, causing it to shatter. The noise [adapt the verb are from the third person singular] startling in the quiet apartment."
	
Check incapacitating the intruder with the vase-shards (this is the vase shards no longer incapacitate rule):
	say "The vase won't make a very good weapon after it's been shattered." (A) instead.

Part 4 - Office section

Chapter 1 - The room

Main-Office is west of Main-By-Counter. "[if it's Daytime][one of]You've designated this area as an office. Thus far, it's[or]Your office area, thus far[stopping][otherwise]Your designated office area, thus far[end if] the most furnished part of the apartment." The printed name is "Main Room[if the holder of the player is the location] [roman type](in the office area)".
Understand "office" or "office area/space" as Main-Office.
The relative direction set of Main-Office is the Table of Office Direction Descriptors.
The casual descriptor of Main-Office is "the office area".
For saying the location name of Main-Office: say "in the office area".
The prepositional entrance descriptor of Main-Office is "into the office area".
The prepositional exit descriptor of Main-Office is "out of the office area".

For announcing notable exits of Main-Office:
	say "[We] [can] go [if the previous location is Main-By-Counter]back [end if][b]east[/b] to the counter area, [if the previous location is Entryway]back [end if][b]north[/b] to the entryway, or [if the previous location is Main-Sitting]back [end if][b]south[/b] to the sitting area."
	
Instead of examining Main-Office when the location is not Main-Office:
	say "Your [if it's Nighttime]designated [end if]office area, thus far the most furnished part of the apartment.";
	describe locale for Main-Office;
	if the number of locale-supportable things in Main-Office > 0:
		say "[We] [if it's Daytime]can also see[otherwise]will also be able to see[end if] [a list of locale-supportable things in Main-Office]."
	
Instead of examining north when the location is Main-Office: try examining Entryway.
Instead of examining east when the location is Main-Office: try examining Main-By-Counter.
Instead of examining south when the location is Main-Office: try examining Main-Sitting.
Instead of examining west when the location is Main-Office: say "[nnt][There's] a wall in that direction."

Instead of listening to Main-Office:
	if the radio is listenable:
		try listening to the radio;
	otherwise if it's Daytime:
		if the dishwasher-switch is switched on:
			say "From the kitchenette, you hear the dishwasher going.";
		otherwise if the kitchen faucet is switched on:
			say "From the kitchenette, you hear a faucet running.";
		otherwise if the laptop-computer is switched on and the laptop-computer is in the location:
			say "You hear the computer's fan whirring slightly.";
		otherwise:
			say "You hold your breath and listen, but don't hear anything unusual.";
	otherwise:
		now player-listening is true.

Instead of smelling Main-Office: follow the smelling rooms rule.

Table of Office Direction Descriptors
other place	descriptor
Bathroom	"in the bathroom"
Entryway	"in the entryway"
Kitchenette	"in the kitchenette"
Main-Bed	"on the other side of the divider"
Main-Behind-Shelf	"behind the bookshelf"
Main-By-Counter	"over by the counter"
Main-Sitting	"in the sitting area"
Outside Hall	"out in the hall"
Within-Closet	"in the entryway closet"

in-the-office is a position in Main-Office.

Chapter 2 - The desk

Section 1 - The desk itself

The desk is a supporter in Main-Office. "[one of]A[or]Your[stopping] [desk] [stand] against one wall, with [a potted plant] in the corner on one side of it. On the other side, an electrical [office-outlet] [sit] low on the wall, with a light switch above it." The desk is drawered, fixed in place, and bulky.
The description of the desk is "A bulky desk from home, thankfully delivered before you arrived."

The open before emptying rule does nothing when the noun is the desk.

Instead of remembering the desk: say "That, you expect, [regarding the noun][remain] in the office area."

Check entering underneath the desk: abide by the intruder at desk rule.
Check putting something on the desk: abide by the intruder at desk rule.
Check taking something enclosed by the desk: abide by the intruder at desk rule.
Check opening something incorporated by the desk: abide by the intruder at desk rule.
Check closing something incorporated by the desk: abide by the intruder at desk rule.
Check searching something incorporated by the desk: abide by the intruder at desk rule.
	
This is the intruder at desk rule:
	if intruder-at-desk is true:
		take no time;
		say "The intruder is standing right at the desk. There's no way you'd be able to do that without him noticing." (A) instead;
	otherwise:
		make no decision.

Instead of attacking or burning or cutting the desk:
	if it's Daytime, say "[We] [have] no reason to destroy the desk.";
	otherwise say "[nt]You see no way that destroying the desk would help in that situation."

Instead of assaulting the desk with: try attacking the desk.
Instead of climbing or crouching on or entering or lying on or sitting on or standing up on the desk: say "[no time]You[if it's Daytime][']d rather not[otherwise] suspect you won't want to[end if] test the limits of the desk's weight capacity[if it's Daytime], today of all days[otherwise] in such a high-stakes situation[end if]."

Instead of crouching behind the desk:
	silently try taking position crouched;
	say "[We][try-but-find-that-you] [don't] fit behind the desk. You[if it's Nighttime][']ll[end if] end up crouching underneath it instead.";
	silently try entering underneath the desk.

Instead of drinking or eating or tasting or kissing the desk: say "[nnt]You doubt the desk would taste very good."
Instead of emptying the desk: say "[nnt]That[if it's Daytime][']s[else] would be[end if] a big task. Better to specify which drawer you want to empty."
Instead of giving something to the desk: try inserting the noun into the desk.

Instead of inserting something into the desk:
	if the number of open drawers incorporated by the desk > 0:
		try inserting the noun into a random open drawer incorporated by the desk;
	otherwise:
		try putting the noun on the desk.

Instead of listening to the desk: say "[no time]The desk doesn't really make noise on its own."
Instead of locking the desk with: say "[nnt]None of the desk drawers lock."
Instead of locking keylessly the desk: say "[nnt]None of the desk drawers lock."
Instead of looking behind the desk: try looking under the desk.

Instead of lying behind the desk: say "[We][try-but-find-that-you] [don't] fit behind the desk. There's not enough room underneath it to lie prone[if it's Daytime],[end if] either[if it's Nighttime], as far as you know,[end if] so it seems [if the player is in under#desk][we]['re] stuck just staying underneath it[otherwise if it's Nighttime]you'll still be stuck out in the open[otherwise]you're stuck being unconcealed by the desk for the time being[end if]."

Instead of closing the desk: say "[nt][i][bracket]You'll have to specify which of the two drawers you want to close.[close bracket][/i][line break]".
Instead of opening the desk: say "[nt][i][bracket]You'll have to specify which of the two drawers you want to open.[close bracket][/i][line break]".

Instead of pulling or pushing or turning the desk:
	if it's Daytime, say "The desk is way too heavy to be pushing around.";
	otherwise say "[nnt][You-can-try-but you] know [the desk] [are] too heavy to push on your own."

Instead of pushing the desk to: try pushing the desk.
Instead of removing something from the desk: try taking the noun.
Instead of rubbing or touching or squeezing the desk: say "Smooth, lacquered wood."
Instead of searching the desk: say "[nnt]That[if it's Daytime][']s[else] would be[end if] a big task. Better to specify which drawer you want to search."
Instead of showing something to the desk: try inserting the noun into the desk.

Instead of sitting behind the desk:
	silently try taking position seated;
	say "[We][try-but-find-that-you] [don't] fit behind the desk. You[if it's Nighttime][']ll[end if] end up sitting underneath it instead.";
	silently try entering underneath the desk.

Instead of slipping behind the desk: try entering underneath the desk.
Instead of smelling the desk: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if], except maybe a little like home."
Instead of stowing something behind the desk: try placing the noun under the desk.
Instead of throwing something at the desk: try putting the noun on the desk.
Instead of unlocking the desk with: say "[nnt]None of the desk drawers lock."
Instead of unlocking keylessly the desk: say "[nnt]None of the desk drawers lock."

To say try-but-find-that-you: say "[first time][if it's Nighttime][']ll[end if] try, but find that you[only]".

Section 2 - Things on the desk

The laptop-charger is a charging cable on the desk. The printed name is "laptop charger". Understand "laptop/laptop's/laptops cable/cord/charger" as the laptop-charger. The laptop-charger is hangable. The indefinite article of the laptop-charger is "your". The bulk of the laptop-charger is 3.
The description of the laptop-charger is "Your laptop's charging cord, pretty much fresh out of the package."
Incorporated by the laptop-charger is a USB-C plug and a PS-plug.
Does the player mean unplugging the laptop-charger from the laptop-computer:
	if the laptop-computer is attached, it is likely;
	it is unlikely.
Does the player mean unplugging the laptop-charger from the laptop-charger: it is very unlikely.
Does the player mean taking the laptop-charger:
	if the laptop-charger is carried, it is very unlikely;
	it is possible.

A ranking rule for the laptop-charger while disclosing contents:
	decrease the description-rank of the laptop-charger by 10.
	
Rule for disclosing contents of a container (called bin) when the laptop-charger is in bin and the number of locale-supportable things in bin is 1:
	say "Your [laptop-charger] [adapt the verb are from the third person singular] [unless the bin is an underside or the bin is a backside]in [end unless][the bin]. ".
	
Rule for disclosing contents of a supporter (called surface) when the laptop-charger is on surface and the number of locale-supportable things on surface is 1:
	say "Your [laptop-charger] [adapt the verb are from the third person singular] on [the surface]. ".

[the Remembering don't disambiguate while remembering rule does nothing when the noun is the laptop-charger.]
Instead of remembering something incorporated by the laptop-charger: try remembering the laptop-charger.

Instead of giving something to the laptop-charger: try plugging the laptop-charger into the noun.

Check plugging the laptop-computer into an electric outlet:
	if the laptop-charger is inserted into the laptop-computer, try plugging the laptop-charger into the second noun instead;
	otherwise say "[We] [can't] plug the laptop into the wall directly[unicode 8212]you'll need to use the its charger as an intermediary." instead.

Instead of plugging the laptop-computer into a charging cable: try plugging the second noun into the laptop-computer.

Before inserting the laptop-charger into a container (this is the disconnect the laptop charger first rule):
	if the count of occupied plugs of the laptop-charger is 2:
		if the laptop-computer is enclosed by the second noun:
			repeat with connector running through PS-plugs incorporated by the laptop-charger:
				let the test-socket be the attachment of connector;
				if the test-socket is incorporated by an electric outlet:
					say "(first disconnecting your laptop charger from the outlet)[ccbr]" (A);
					silently try unplugging connector from the test-socket;
		otherwise:
			say "(first disconnecting your laptop charger from your laptop and the outlet)[ccbr]" (B);
			repeat with connector running through PS-plugs incorporated by the laptop-charger:
				let the test-socket be the attachment of connector;
				if the test-socket is not nothing:
					silently try unplugging connector from the test-socket;
	otherwise if the count of occupied plugs of the laptop-charger is 1:
		repeat with connector running through PS-plugs incorporated by the laptop-charger:
			let the test-socket be the attachment of connector;
			if the test-socket is incorporated by an electric outlet:
				say "(first disconnecting your laptop charger from the outlet)[ccbr]" (C);
				silently try unplugging connector from the test-socket;
			otherwise if the test-socket is incorporated by the laptop-computer:
				if the laptop-computer is enclosed by the second noun:
					continue the action;
				otherwise:
					say "(first disconnecting your laptop charger from your laptop)[ccbr]" (D);
					silently try unplugging connector from the test-socket;

Check pulling the laptop-charger: abide by the convert pulling the laptop-charger to unplugging rule.
Check pushing the laptop-charger: abide by the convert pulling the laptop-charger to unplugging rule.
Check turning the laptop-charger: abide by the convert pulling the laptop-charger to unplugging rule.

This is the convert pulling the laptop-charger to unplugging rule:
	if the count of occupied plugs of the laptop-charger > 0:
		repeat with connector running through PS-plugs incorporated by the laptop-charger:
			let the test-socket be the attachment of connector;
			if the test-socket is not nothing:
				try unplugging connector from the test-socket;
		stop the action;
	otherwise:
		continue the action.

Instead of pushing the laptop-charger to: try pushing the laptop-charger.
Instead of putting something on the laptop-charger: try plugging the laptop-charger into the noun.
Instead of removing the laptop-charger from: try unplugging the laptop-charger from the second noun.
Instead of showing something to the laptop-charger: try plugging the laptop-charger into the noun.

Check throwing the laptop-charger at:
	if the second noun is the intruder:
		if the intruder is in the location:
			try assaulting the intruder with the laptop-charger instead;
		otherwise:
			take no time;
			say "The charger won't be much use as a projectile. However, if you're able to get closer, it might make an effective garrotte." instead.
			
The compcord-package is a metaphor. The compcord-package is part of the laptop-charger. The printed name of the compcord-package is "laptop charger's package". Understand "package" or "computer/laptop/-- cord/cord's/cords/charger/charger's/chargers package" as the compcord-package.
Before doing something other than remembering when the current action involves the compcord-package: say "[no time]You threw the package itself away [if it's Daytime]earlier today[otherwise]yesterday[end if]." instead.

Instead of remembering the compcord-package: say "[nnt][as the parser]The last time [we] [saw] the laptop charger (whose package you discarded), it [was-were of laptop-charger] [if the remembered location of the laptop-charger is either Main-Behind-Shelf or Main-By-Counter]by [otherwise if the remembered location of the laptop-charger is a room]in [otherwise][end if][if the remembered location of laptop-charger is a room][casual descriptor of the remembered location of laptop-charger][otherwise][at the remembered location of laptop-charger][end if].[as normal][line break]".

[NOTE: The laptop (see below) is also here.]

Section 3 - First drawer and its contents

A drawer called the first desk drawer is part of the desk. Understand "1st" or "one" or "upper/top" or "drawer 1" as the first desk drawer. First desk drawer is eclipsing.
The description of the first desk drawer is "The top desk drawer[if it's Daytime], currently[otherwise]. It will be[end if] standing [openness of the first desk drawer]."
The described-position of first desk drawer is "first".
Does the player mean doing something to first desk drawer:
	if the location is Main-Office, it is possible;
	it is very unlikely.
	
Instead of remembering a drawer incorporated by the desk: try remembering the desk.
Instead of listening to first desk drawer: say "[nnt]Drawers, generally, aren't known for being particularly noisy while still."

A screwdriver is in the first desk drawer. The screwdriver is legible, deadly, and sharp. Understand "driver" or "screw driver" or "handle" or "flat-head/flathead" or "phillipshead/phillips-head/phillip's-head" or "spanner" or "flat/phillip's/phillips head" as the screwdriver.
The description of the screwdriver is "[one of]You had to run to a hardware store earlier to pick it up because you needed one to assemble the bed frame[or]You got it to help assemble the bed frame[stopping][if it's Nighttime], but under the circumstances, perhaps you'll be able to find another use for it[end if]."

Report reading the screwdriver: say "[if it's Daytime]It[otherwise]You remember that it[end if] doesn't even have a brand name printed on the handle."

Instead of attacking or burning or cutting the screwdriver: say "[no time]You only just got the screwdriver. You[if it's Daytime][']d rather not[otherwise] suspect you won't want to[end if] damage it[unicode 8212]it may yet come in handy."
Instead of assaulting the screwdriver with: try attacking the screwdriver.
Instead of crouching behind or entering underneath or lying behind or sitting behind or slipping behind the screwdriver: say "[no time][The screwdriver] [can't] meaningfully conceal you."
Instead of drinking or eating or tasting or kissing the screwdriver: say "[nnt]You doubt the screwdriver would taste very good."
Instead of knocking on the screwdriver: say "The sound [regarding the noun][aren't] very impressive."

Instead of locking something with the screwdriver:
	if the noun is lockable:
		say "You don't know how [if it's Daytime]to[otherwise]you'd[end if] do that. Better to just use [if the noun is either the safe or the smartphone or the laptop-computer]the code[otherwise]a key[end if].";
	otherwise:
		say "[The noun] [don't] lock.";
	take no time.

Instead of looking behind or looking under or searching the screwdriver: say "[no time][The screwdriver] [can't] meaningfully conceal much."
Instead of pulling or pushing or turning or swinging or waving the screwdriver: say "[nnt]That [regarding the screwdriver][aren't] a useful course of action, unless you're [if it's Nighttime]planning on [end if]screwing something."
Instead of rubbing or touching or squeezing the screwdriver: say "Hard plastic, cool metal."
Instead of smelling the screwdriver: say "[if it's Nighttime]You suspect it will still smell[otherwise]It still smells[end if] like the hardware store you bought it from."
Instead of switching on or switching off the screwdriver: say "[nnt]You know all too well that the screwdriver is [i]not[/i] an electric drill."
Check throwing the screwdriver at something: if the second noun is the intruder, try assaulting the intruder with the screwdriver instead.

Instead of unlocking something with the screwdriver:
	if the noun is lockable or the noun is locked:
		say "You don't know how [if it's Daytime]to[otherwise]you'd[end if] do that. Better to just use [if the noun is either the safe or the smartphone or the laptop-computer]the code[otherwise]a key[end if].";
	otherwise:
		say "[The noun] [don't] lock.";
	take no time.
		
Section 4 - Second drawer and its contents

A drawer called the second desk drawer is part of the desk. Understand "2nd" or "two" or "lower/bottom" or "drawer 2" as the second desk drawer. Second desk drawer is eclipsing.
The description of the second desk drawer is "The bottom desk drawer[if it's Daytime], currently[otherwise]. It will be[end if] standing [openness of the second desk drawer]."
The described-position of second desk drawer is "second".
Does the player mean doing something to second desk drawer:
	if the location is Main-Office, it is possible;
	it is very unlikely.

A description-concealing rule (this is the don't need to be informed of desk drawer contents rule):
	now every thing enclosed by the first desk drawer is not marked for listing;
	now every thing enclosed by the second desk drawer is not marked for listing.
	
Instead of listening to second desk drawer: say "[nnt]Drawers, generally, aren't known for being particularly noisy while still."

A paperclip is in the second desk drawer. Understand "wire" or "paper/-- clip" as the paperclip. The paperclip unlocks the restroom door. The bulk of the paperclip is 0.
The description of the paperclip is "[if bent]A small metal paperclip, just like any other[otherwise][unfolded paperclip desc][end if]."
The paperclip can be bent or unfolded. The paperclip is bent. Understand the bent property as describing the paperclip. Understand "straight/straightened/straightened-out" or "straightened out" as unfolded.
Understand "piece of wire" or "wire piece" as the paperclip when the paperclip is unfolded.

Check unlocking something with the paperclip:
	if the paperclip is bent, say "[no time][The second noun] [aren't] very effective as a lockpick[if it's Daytime], since[otherwise] while[end if] it's folded up." instead.
	
Check locking something with the paperclip:
	take no time;
	if the paperclip is bent, say "[The second noun] [aren't] very effective at that[if it's Daytime], since[otherwise] while[end if] it's folded up." instead;
	otherwise say "[The second noun] [are] more effective at unlocking than locking." instead.

To say unfolded paperclip desc:
	now the printed name of the paperclip is "piece of wire";
	say "[if it's Daytime]Now that it's been[otherwise]Once it's[end if] straightened out, [the paperclip] [are] better described as just a piece of wire".
	
Before printing the name of the unfolded paperclip: say "unfolded ".

Instead of opening the paperclip (this is the unfold the paperclip rule):
	if the paperclip is bent:
		now the paperclip is unfolded;
		say "[We] [unfold] the paperclip until it's more or less straightened out.";
	otherwise:
		say "[nt]The paperclip [has already been] straightened out to the best of your ability."
		
Instead of closing the paperclip:
	if the paperclip is unfolded, say "[no time]You don't actually think it[if it's Daytime][']s[otherwise] will be[end if] possible to restore the paperclip to its original form [if it's Daytime]now that it's been[otherwise]once it's[end if] straightened out.";
	otherwise try opening the paperclip.

Instead of attacking or burning or cutting the paperclip: say "[no time][We] [have] no reason to [if the paperclip is unfolded]deform the paperclip any further[otherwise]destroy the paperclip[end if]."
Instead of assaulting the paperclip with: try attacking the paperclip.
Instead of crouching behind or entering underneath or lying behind or sitting behind or slipping behind the paperclip: say "[no time][The paperclip] [can't] meaningfully conceal you."
Instead of drinking or eating or tasting or kissing the paperclip: say "[nnt]You doubt the paperclip would taste very good."

Check inserting the paperclip into:
	if the second noun is the restroom door:
		if the restroom door is locked:
			try unlocking the restroom door with the paperclip instead;
		otherwise:
			say "[no time][The restroom door] [is already] unlocked." instead.
			
Instead of knocking on the paperclip: say "The sound [regarding the noun][aren't] very impressive."
Instead of listening to the paperclip: say "[no time]Paperclips aren't known for their noisiness."
Instead of looking behind or looking under or searching the paperclip: say "[no time][The paperclip] [can't] meaningfully conceal much."

Instead of pulling or pushing or turning the paperclip:
	if the paperclip is unfolded, say "[nt]It [adapt the verb make from the third person singular] little difference, unless you're planning to insert it into a lock first.";
	otherwise say "[nnt]It [adapt the verb make from the third person singular] little difference."

Instead of pushing the paperclip to: try pushing the paperclip.
Instead of rubbing or touching or squeezing the paperclip: say "Cool metal."
Instead of smelling the paperclip: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of waving the paperclip: try swinging the paperclip.

Instead of wearing the paperclip:
	take no time;
	if the paperclip is unfolded:
		say "Perhaps you could have attached [the paperclip] to your clothes before it was straightened out, but [if it's Daytime]that's no longer[otherwise]that will no longer be[end if] a possibility.";
	otherwise:
		if it's Daytime, say "You see no advantage to wearing [the paperclip] over carrying it.";
		otherwise say "You don't see how wearing [the paperclip] would be more advantageous than carrying it."

Instead of inserting the paperclip into the silverware-holder (this is the don't sully the silverware holder with the paperclip rule):
	if it's Daytime:
		say "The silverware holder is only for silverware. You're not about to start putting random junk in it on the [i]first day[/i] you have it." (A);
	otherwise:
		say "Even under the circumstances, you don't think you'll be willing to sully the silverware holder with random junk. Putting the [paperclip] into the cabinets will have to do instead." (B);
		try inserting the paperclip into the kitchen-cabinets.

The desk-junk is junk in the second desk drawer.

Does the player mean doing something to the desk-junk:
	if the location is not Main-Office, it is very unlikely;
	it is possible.

Section 5 - Underneath

An underside called under#desk is part of the desk. Under#desk is enterable. Under#desk allows seated and crouched. Under#desk is crouched.

Instead of examining up when the player is enclosed by under#desk: say "[We] [can only] see the bottom of the desk in that direction."

Instead of examining the desk when the player is enclosed by under#desk: say "[We] [if it's Daytime]can only[otherwise]will only be able to[end if] see the underside of the desk from [if it's Nighttime]t[end if]here. [if it's Daytime]It's[otherwise]It is, you imagine,[end if] entirely unremarkable."

Before entering underneath the desk (this is the can't enter underneath the desk twice rule):
	if the player is in under#desk:
		say "[if it's Daytime]You're already[otherwise]You'll already be[end if] there!" instead.

under-the-desk is a thingish position in under#desk.

Chapter 4 - Office chair

The rolling office chair is a chair in Main-Office. "[one of]A[or]The[stopping] rolling office chair [adapt the verb sit from the third person singular] by the desk." The rolling office chair allows seated. The rolling office chair is portable and pushable between rooms. The bulk of the rolling office chair is 55.
The flexible appearance of the rolling office chair is "The rolling office chair [adapt the verb sit from the third person singular] [if the location is Main-Office]by the desk[otherwise]abandoned in the middle of the space[end if]."
The description of the rolling office chair is "A thing of cheap plastic and threadbare cloth, it was already here when you arrived. You don't see yourself using the desk much, so it's acceptable for now."
The can't move chairs rule does nothing when the noun is the rolling office chair.
Does the player mean searching the rolling office chair:
	if the rolling office chair is enclosed by the location, it is unlikely;
	it is very unlikely.
	
The can't push from within rule does nothing when the noun is the rolling office chair.

Check an actor pushing the rolling office chair to (this is the special office chair can't push from within rule):
	if the noun encloses the actor:
		if the actor is the player:
			say "[nt][We] [can't push] the rolling office chair while you're sitting on it." (A);
		stop the action.
		
The special office chair can't push from within rule is listed before the can't push from within rule in the check pushing it to rules.

Pushing the rolling office chair is noisy behavior. Pulling the rolling office chair is noisy behavior. Turning the rolling office chair is noisy behavior. Pushing the rolling office chair to something is noisy behavior.

Before pushing the rolling office chair to: say "(pushing the rolling office chair ahead of you)[ccbr]".
Before pushing the rolling office chair to: now the rolling office chair is handled.

Instead of attacking or burning or cutting the rolling office chair:
	if it's Daytime, say "[We] [have] no reason to destroy the rolling office chair.";
	otherwise say "[nt]You see no way that destroying the rolling office chair would help in that situation."

Instead of assaulting the rolling office chair with: try attacking the rolling office chair.
Instead of assaulting something with the rolling office chair: say "[nnt][The rolling office chair] [are] too heavy for you to lift, much less put any force behind."
Instead of climbing the rolling office chair: try sitting on the rolling office chair.
Instead of crouching behind or entering underneath or lying behind or sitting behind or slipping behind the rolling office chair: say "[no time]The chair [regarding the rolling office chair][aren't] substantial enough to conceal you."
Instead of crouching on or lying on or standing up on the rolling office chair: say "[no time]That would be dangerous[unicode 8212][if it's Daytime]you'd rather not risk getting hurt[otherwise]not worth the risk[end if]."
Instead of drinking or eating or tasting or kissing the rolling office chair: say "You doubt the chair would taste very good."
Instead of giving something to the rolling office chair: try putting the noun on the rolling office chair.
Instead of inserting something into the rolling office chair: try putting the noun on the rolling office chair.
Instead of listening to the rolling office chair: say "[no time]The rolling office chair doesn't really make noise while it's still."
Instead of looking behind or looking under the rolling office chair: follow the insubstantial chair rule.
Instead of placing something under the rolling office chair: follow the insubstantial chair rule.
Instead of pulling or pushing or turning the rolling office chair: say "[nnt]It [adapt the verb make from the third person singular] little difference."
Instead of removing something from the rolling office chair: try taking the noun.
Instead of rubbing or touching or squeezing the rolling office chair: say "The cushion and plastic frame [if it's Daytime]are both[otherwise]will both be[end if] rough[if it's Nighttime], you suspect[end if]."
Instead of showing something to the rolling office chair: try putting the noun on the rolling office chair.
Instead of smelling the rolling office chair: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of stowing something behind the rolling office chair: follow the insubstantial chair rule.
Instead of swinging or waving or taking the rolling office chair: say "[no time][The rolling office chair] [are] much too heavy for you to lift."

Instead of throwing something at the rolling office chair:
	if the rolling office chair is in the location:
		try putting the noun on the rolling office chair;
	otherwise:
		say "[no time]That [if it's Daytime]won't[otherwise]wouldn't[end if] get you much of anywhere."

Instead of tying something to the rolling office chair: say "[no time]That [if it's Daytime]won't[otherwise]wouldn't[end if] get you much of anywhere."

This is the insubstantial chair rule: say "[no time]The chair isn't really substantial enough to conceal anything."

The cheap-chair-plastic is a material. It is part of the rolling office chair. The printed name of the cheap-chair-plastic is "cheap plastic[if the location is Bathroom] of the rolling office chair[end if]". Understand "cheap plastic" or "cheap chair plastic" or "cheap/plastic" or "cheap plastic of the/-- chair" or "cheap plastic of the/-- rolling chair" or "cheap plastic of the/-- office chair" or "cheap plastic of the/-- rolling office chair" or "plastic of the/-- chair" or "plastic of the/-- rolling chair" or "plastic of the/-- office chair" or "plastic of the/-- rolling office chair" as the cheap-chair-plastic.
The description of the cheap-chair-plastic is "The main body of the chair[if it's Nighttime], you remember,[end if] is made of cheap plastic."

After starting the virtual machine (this is the redirect from cheap plastic to chair rule):
	dispatch everything but { examining action, taking action, rubbing action, touching action, squeezing action, removing it from action, drinking action, eating action, tasting action, kissing action, remembering action } for the cheap-chair-plastic to the rolling office chair;

Instead of drinking or eating or tasting or kissing the cheap-chair-plastic: say "[nnt]You doubt the plastic would taste very good."
Instead of remembering the cheap-chair-plastic: try remembering the rolling office chair.
Instead of removing the cheap-chair-plastic from: try taking the cheap-chair-plastic.
Instead of removing something from the cheap-chair-plastic: try taking the noun.
Instead of rubbing or touching or squeezing the cheap-chair-plastic: say "Rough, pebbled plastic."
Instead of taking the cheap-chair-plastic: say "[no time][We] [can't] remove the plastic from the chair it makes up[unicode 8212]the chair would cease to exist."

The threadbare-chair-seat is a material. It is part of the rolling office chair. The printed name of the threadbare-chair-seat is "threadbare [if the location is Main-Sitting]cloth of the rolling office chair[otherwise]chair cloth[end if]". Understand "threadbare cloth" or "threadbare chair cloth" or "threadbare/cloth" or "threadbare cloth of the/-- rolling office chair" or "rolling office chair cloth" or "office chair cloth" or "chair cloth" as the threadbare-chair-seat.
The description of the threadbare-chair-seat is "The seat[if it's Nighttime], you remember,[end if] is made of threadbare cloth that isn't particularly comfortable to sit on."

After starting the virtual machine (this is the redirect from threadbare seat to chair rule):
	dispatch everything but { examining action, taking action, rubbing action, touching action, squeezing action, removing it from action, drinking action, eating action, tasting action, kissing action, remembering action } for the threadbare-chair-seat to the rolling office chair;

Instead of drinking or eating or tasting or kissing the threadbare-chair-seat: say "[nnt]You doubt the threadbare cloth would taste very good."
Instead of remembering the threadbare-chair-seat: try remembering the rolling office chair.
Instead of removing the threadbare-chair-seat from: try taking the threadbare-chair-seat.
Instead of removing something from the threadbare-chair-seat: try taking the noun.
Instead of rubbing or touching or squeezing the threadbare-chair-seat: say "Worn, rough cloth."
Instead of taking the threadbare-chair-seat: say "[no time][We] [can't] remove a seat from its chair[unicode 8212]the chair would cease to function."

Chapter 5 - Potted plant

The potted plant is in Main-Office. The potted plant is bulky scenery.
The description of the potted plant is "A small fern in a terracotta pot, meant to give the space some life."

Instead of remembering the potted plant: say "That, you expect, [regarding the noun][remain] where you put it in the office area."

Instead of attacking or burning or cutting or hugging the potted plant: follow the don't damage the fern rule.
Instead of assaulting the potted plant with: try attacking the potted plant.
Instead of climbing or crouching on or entering or lying on or sitting on or standing up on the potted plant: follow the don't damage the fern rule.
Instead of crouching behind or entering underneath or lying behind or sitting behind or slipping behind the potted plant: say "[no time]The potted plant [if it's Daytime]won't[otherwise]wouldn't[end if] do a very good job of concealing you."
Instead of drinking or eating or tasting or kissing the potted plant: follow the won't kill the fern rule.
Instead of giving something to the potted plant: try putting the noun on the potted plant.
Instead of inserting something into the potted plant: try putting the noun on the potted plant.
Instead of knocking on the potted plant: try knocking on the terracotta pot.
Instead of listening to the potted plant: say "[no time][There's] no breeze [if the windows are shattered]strong enough [end if]to rustle its leaves."
Instead of looking behind or looking under or searching the potted plant: say "The pot itself [regarding the pot][aren't] large enough to conceal much, and you doubt [there's] anything buried in the dirt."
Instead of placing something under the potted plant: say "[no time]That would get [the noun] all dirty."
Instead of pulling or pushing or turning the potted plant: say "[no time]You put the plant there intentionally. [It's] just fine [if it's Daytime]where it is[otherwise]right there[end if]."
Instead of pushing the potted plant to: try pushing the potted plant.
Instead of putting something on the potted plant: follow the don't damage the fern rule.
Instead of removing the potted plant from: try taking the potted plant.
Instead of removing something from the potted plant: try taking the noun.
Instead of rubbing or touching or squeezing the potted plant: say "The stem [are] slightly damp."
Instead of showing something to the potted plant: try putting the noun on the potted plant.
Instead of smelling the potted plant: say "[if it's Nighttime]You suspect it smells[otherwise]Smells[end if] green."
Instead of stowing something behind the potted plant: say "[no time]The potted plant [if it's Daytime]won't[otherwise]wouldn't[end if] do a very good job of concealing [the noun]."
Instead of taking the potted plant: follow the fern too heavy to lift rule.
Instead of throwing something at the potted plant: follow the don't damage the fern rule.
Instead of tying something to the potted plant: follow the don't damage the fern rule.
Instead of washing the potted plant: say "[no time]You already made sure the plant was nice and watered."

This is the don't damage the fern rule:
	take no time;
	say "You[if it's Nighttime] think you[end if][']d rather not risk damaging the fern."

This is the won't kill the fern rule:
	take no time;
	say "You've never had much of a green thumb, but that doesn't mean you[if it's Nighttime][']ll[end if] want to kill the fern [i]intentionally[/i]."

This is the fern too heavy to lift rule:
	take no time;
	say "The pot [regarding the potted plant][are] far too heavy for you to lift."
	
Understand "water fern" as a mistake ("You gave it plenty of water [if it's Daytime]earlier in the day[otherwise]for the day[end if].") when the location is Main-Office.
Understand "water plant" as a mistake ("You gave it plenty of water [if it's Daytime]earlier in the day[otherwise]for the day[end if].") when the location is Main-Office.

The fern is part of the potted plant.
The description of the fern is "You're not sure what species it is. [if it's Nighttime]You remember the[otherwise]The[end if] leaves are quite large."
	
After starting the virtual machine (this is the redirect from fern to plant rule):
	dispatch everything but { examining action, looking under action, placing it under action, pulling action, pushing action, pushing it to action, turning action, removing it from action, taking action, remembering action } for the fern to the potted plant;

Instead of looking under the fern: say "[There's] [if it's Daytime]just[otherwise]only[end if] dirt underneath."
Instead of placing the fern under: try placing the potted plant under the second noun.
Instead of placing something under the fern: try putting the noun on the dirt.
Instead of pulling or pushing or turning the fern: follow the don't damage the fern rule.
Instead of pushing the fern to: try pushing the fern.
Instead of remembering the fern: try remembering the potted plant.
Instead of removing the fern from: try taking the fern.
Instead of removing something from the fern: try taking the noun.
Instead of taking the fern: follow the won't kill the fern rule. 

The terracotta pot is part of the potted plant. Understand "clay" as the terracotta pot.
The description of the terracotta pot is "Basic, boring terracotta. You have plans to get a fancier one soon."
	
After starting the virtual machine (this is the redirect from pot to plant rule):
	dispatch everything but { examining action, attacking action, burning action, cutting action, assaulting it with action, drinking action, eating action, hugging action, kissing action, listening to action, tasting action, emptying action, knocking on action, removing it from action, rubbing action, squeezing action, touching action, smelling action, remembering action } for the terracotta pot to the potted plant;

Instead of attacking or burning or cutting the terracotta pot: say "[no time]You[if it's Nighttime][']ll[end if] have no reason to destroy the pot."
Instead of assaulting the terracotta pot with: try attacking the terracotta pot.
Instead of assaulting something with the terracotta pot: follow the fern too heavy to lift rule.
Instead of drinking or eating or tasting or kissing the terracotta pot: say "[nnt]You doubt the pot would taste very good."
Instead of emptying the terracotta pot: follow the clean floors rule.
Instead of hugging the terracotta pot: say "[no time]You[if it's Nighttime] think you[end if][']d rather not risk getting dirty."
Instead of listening to the terracotta pot: say "[no time]The pot doesn't really make noise."
Instead of remembering the terracotta pot: try remembering the potted plant.
Instead of removing the terracotta pot from: follow the clean floors rule.
Instead of removing something from the terracotta pot: try taking the noun.
Instead of rubbing or touching or squeezing the terracotta pot: say "Smooth hardened clay."
Instead of smelling the terracotta pot: say "[regarding the noun][They] [don't] have much of its own smell."

This is the clean floors rule:
	take no time;
	say "You don't think [it's] a good idea to get dirt all over the floor."

Some leaves are part of the fern. Understand "leaf" or "stem/stems" or "frond/fronds" as the leaves.
The description of the leaves is "The plant is more leaf than anything else, [if it's Daytime]actually[otherwise]if you remember right[end if]."
	
After starting the virtual machine (this is the redirect from leaves to fern rule):
	dispatch everything but { examining action, pulling action, pushing action, turning action, taking action, removing it from action, swinging action, waving action, remembering action } for the leaves to the fern;
	
Instead of remembering the leaves: say "That, you expect, [regarding the noun][remain] on the potted plant."

Instead of pulling or pushing or turning or taking the leaves: say "[no time]You don't[if it's Nighttime] think you'll[end if] want to damage the fern."
Instead of removing the leaves from: try taking the leaves.
Instead of removing something from the leaves: try taking the noun.
Instead of swinging or waving the leaves: say "[nnt][if it's Daytime]They can[otherwise]They'll be able to[end if] wave quite well on their own."

Some dirt is part of the potted plant. Understand "soil" or "fertilizer" as the dirt.
The description of the dirt is "[one of]Well, technically, it's a soil-fertilizer mix[or]You [if it's Daytime]don't[otherwise]doubt you'll[end if] want to waste time contemplating literal dirt[stopping]."
	
After starting the virtual machine (this is the redirect from dirt to plant rule):
	dispatch everything but { examining action, drinking action, eating action, tasting action, kissing action, listening to action, hugging action, taking action, removing it from action, rubbing action, touching action, squeezing action, looking behind action, looking under action, placing it under action, smelling action, putting it on action, remembering action } for the dirt to the potted plant;
	
Instead of remembering the dirt: say "That, you expect, [regarding the noun][remain] in the terracotta pot."

Instead of drinking or eating or tasting or kissing the dirt: say "[no time]You haven't eaten dirt since you were three."
Instead of hugging the dirt: say "[no time]You[if it's Nighttime] think you[end if][']d rather not risk getting dirty."
Instead of listening to the dirt: say "[no time]The dirt doesn't really make noise."
Instead of looking behind or looking under the dirt: say "[no time]You[if it's Nighttime] think you[end if][']d rather not get your hands dirty."
Instead of placing the dirt under: try taking the dirt.
Instead of placing something under the dirt: say "[no time]You[if it's Nighttime] think you[end if][']d rather not risk getting [the noun] all dirty."
Instead of putting the dirt on: say "[no time]You[if it's Nighttime] think you[end if][']d rather not get your hands dirty."
Instead of putting something on the dirt: say "[no time]You[if it's Nighttime] think you[end if][']d rather not risk getting [the noun] all dirty."
Instead of removing the dirt from: try taking the dirt.
Instead of removing something from the dirt: try taking the noun.
Instead of rubbing or touching or squeezing or taking the dirt: say "[no time]You[if it's Nighttime] think you[end if][']d rather not get your hands dirty."
Instead of smelling the dirt: say "[if it's Nighttime]You expect it smells[otherwise]Smells[end if] earthen."

Chapter 6 - Outlet & lightswitch

The office-outlet is an electric outlet in Main-Office.

The main-room-lightswitch is a switched on lightswitch in Main-Office. The main-room-lightswitch is wired to the overhead lights.

Instead of remembering the main-room-lightswitch: say "That, you expect, [regarding the noun][remain] in the office area."

Part 5 - The laptop computer

Chapter 1 - The thing

The laptop-computer is a laptop on the desk. The printed name of the laptop-computer is "laptop". Understand "computer" or "laptop" as the laptop-computer. The indefinite article of the laptop-computer is "your". The bulk of the laptop-computer is 7.
The description of the laptop-computer is "A [laptop-computer] computer, [if the smartphone is examined][one of]as new as your new phone[or]brand new[stopping][otherwise]brand new[end if]. [if it's Daytime]Currently[otherwise]By that point[end if], [it's] [openness of the laptop-computer][if the laptop-computer is charging] and charging[end if]."
Incorporated by the laptop-computer is a USB-C socket.
The laptop-computer can be locked. The laptop-computer is unlocked.
The laptop-computer has a number called the password-attempts. The password-attempts of the laptop-computer is 0.
Switching on the laptop-computer is noisy behavior.

The examine devices rule does nothing when the noun is the laptop-computer.
The list attached things when examining receiver or inserter rule does nothing when the noun is the laptop-computer and the count of occupied sockets of the laptop-computer is 0.

After reading a command (this is the make the laptop the only one that should resonably be called computer rule):
	if the player's command does not include "laptop":
		if the player's command includes " computer":
			replace the matched text with " laptop".
			
A ranking rule for the laptop-computer while disclosing contents:
	decrease the description-rank of the laptop-computer by 5.
	
Rule for disclosing contents of a container (called bin) when the laptop-computer is in bin and the number of locale-supportable things in bin is 1:
	say "Your [laptop-computer] [adapt the verb are from the third person singular] [unless the bin is an underside or the bin is a backside]in [end unless][the bin]. ".
	
Rule for disclosing contents of a supporter (called surface) when the laptop-computer is on surface and the number of locale-supportable things on surface is 1:
	say "Your [laptop-computer] [adapt the verb are from the third person singular] on [the surface]. ".
	
Rule for disclosing contents of a container (called bin) when the laptop-charger is in bin and the laptop-computer is in bin and the number of locale-supportable things in bin is 2:
	now the laptop-charger is mentioned;
	say "Your [laptop-computer] [if the laptop-computer is charging][are] plugged in to charge[otherwise]and its charger [adapt the verb are from the third person plural][end if] [unless the bin is an underside or the bin is a backside]in [end unless][the bin]. ".
	
Rule for disclosing contents of a supporter (called surface) when the laptop-charger is on surface and the laptop-computer is on surface and the number of locale-supportable things on surface is 2:
	now the laptop-charger is mentioned;
	say "Your [laptop-computer] [if the laptop-computer is charging][are] plugged in to charge[otherwise]and its charger [adapt the verb are from the third person plural][end if] on [the surface]. ".

Definition: the laptop-computer is charging if the count of occupied plugs of the laptop-charger is 2.

Does the player mean plugging the laptop-charger into the laptop-computer:
	if the count of occupied sockets of the laptop-computer is 1, it is possible;
	it is likely.
	
Does the player mean plugging the laptop-computer into the laptop-charger:
	if the count of occupied sockets of the laptop-computer is 1, it is possible;
	it is likely.
	
Does the player mean plugging the laptop-charger into an electric outlet:
	if the count of occupied sockets of the laptop-computer is 1, it is likely;
	it is possible.
	
Does the player mean plugging the phone charger into the laptop-computer: it is unlikely.

Rule for supplying a missing second noun while plugging the laptop-computer into:
	if the laptop-charger is touchable, now the second noun is the laptop-charger.
	
Rule for supplying a missing second noun while plugging the laptop-charger into:
	if the laptop-computer is touchable and the count of occupied sockets of the laptop-computer is 0:
		now the second noun is the laptop-computer;
	otherwise if an electric outlet is touchable:
		now the second noun is a random touchable electric outlet.

Report an actor plugging the laptop-charger into (this is the announce laptop charging rule):
	if the laptop-computer is open and the laptop-computer is charging:
		say "The [laptop-computer] [play] a tone to indicate that it's[if it's Daytime] now[end if] charging." (A).

The announce laptop charging rule is listed after the report-plugging it into rule in the report plugging it into rules.

Check unplugging the laptop-computer:
	if the count of occupied sockets of the laptop-computer is 1:
		if the laptop-computer is charging:
			try unplugging the laptop-charger from the laptop-computer instead;
		otherwise:
			try unplugging the laptop-charger instead.

To decide which text is the openness of the laptop-computer:
	if the laptop-computer is open, decide on "open";
	decide on "closed".

Rule for disclosing contents of the desk when the laptop-computer is on the desk:
	if the laptop-charger is on the desk:
		say "Your [laptop-computer] [sit] on the desk, alongside [laptop-charger][if the number of things on the desk > 3],[otherwise if the number of things on the desk > 2] and[end if][if the number of things on the desk > 2] [a list of unmentioned things on the desk][end if]. ";
	otherwise:
		say "Your [laptop-computer] [sit] on [if the number of things on the desk > 1]the desk, alongside [a list of unmentioned things on the desk][otherwise]top of the desk[end if]. "

Rule for printing the name of the laptop-charger while looking:
	if the laptop-computer is the most-recent-mention, say "its charger";
	otherwise say "laptop charger".
	
Check electronics-charging (this is the redirect charging the laptop to plugging it in rule):
	if the noun is the laptop-computer:
		if the laptop-charger is touchable:
			if the laptop-computer is charging:
				say "[nt]Your laptop [is already] charging." (A) instead;
			otherwise if the count of occupied sockets of the laptop-computer is 0:
				try plugging the laptop-charger into the laptop-computer instead;
			otherwise:
				if the player can touch an electric outlet:
					try plugging the laptop-charger into a random touchable electric outlet instead;
				otherwise:
					say "[nt]There [if it's Daytime]aren't[otherwise]won't be[end if] any outlets within reach to plug the charging cable into." (B) instead;
		otherwise:
			say "[nt]It'll be hard to charge your laptop without its charging cable. The last time [we] [saw] that, [regarding the laptop-charger][they] [was-were of laptop-charger] [at the remembered location of laptop-charger]." (C) instead.

Instead of attacking or burning or cutting the laptop-computer: follow the don't destroy the laptop rule.
Instead of assaulting the laptop-computer with: try attacking the laptop-computer.

Instead of assaulting something with the laptop-computer:
	if the noun is the intruder:
		take no time;
		say "That would be unlikely to meaningfully hurt the intruder, but would definitely destroy your laptop.";
	otherwise:
		follow the don't destroy the laptop rule.

Instead of climbing or entering or crouching on or lying on or sitting on or standing up on the laptop-computer: follow the don't destroy the laptop rule.
Instead of crouching behind or entering underneath or lying behind or sitting behind or slipping behind the laptop-computer: say "[no time][The laptop-computer] [can't] meaningfully conceal you."
Instead of consulting the laptop-computer about: try typing the topic understood on the laptop-computer.
Instead of drinking or eating or tasting or kissing the laptop-computer: say "[no time]You doubt the [laptop-computer] would taste very good."
Instead of inserting something into the laptop-computer: say "[no time]The [laptop-computer] [can't] effectively conceal much."

Instead of listening to the laptop-computer:
	if the laptop-computer is closed, say "[regarding the noun][They] [aren't] making any noise [if it's Daytime]at the moment[otherwise]by that point[end if].";
	otherwise say "[We] [hear] the computer's fan whirring slightly."

Instead of locking the laptop-computer with: say "[nnt]The [laptop-computer] doesn't require a literal key to lock."
Instead of locking keylessly the laptop-computer: try switching off the laptop-computer.

Instead of placing something under the laptop-computer:
	if the holder of the laptop-computer is a supporter:
		try putting the noun on the holder of the laptop-computer;
	otherwise if the holder of the laptop-computer is a container:
		try inserting the noun into the holder of the laptop-computer;
	otherwise:
		say "[no time]The [laptop-computer] [can't] effectively conceal much."

Instead of pulling or pushing or turning the laptop-computer: say "[nnt]It [adapt the verb make from the third person singular] little difference."
Instead of pushing the laptop-computer to: try pushing the laptop-computer.

Instead of putting something on the laptop-computer:
	if the holder of the laptop-computer is a supporter:
		try putting the noun on the holder of the laptop-computer;
	otherwise if the holder of the laptop-computer is a container:
		try inserting the noun into the holder of the laptop-computer;
	otherwise:
		say "[no time]That [if it's Daytime]won't[otherwise]wouldn't[end if] achieve anything."

Instead of removing the laptop-computer from: try taking the laptop-computer.
Instead of removing something from the laptop-computer: try taking the noun.
Instead of rubbing or touching or squeezing the laptop-computer: say "Cool metal."
Instead of searching the laptop-computer: say "[no time][i][bracket]You'll need to specify what you want to type.[close bracket][/i][line break]".
Instead of smelling the laptop-computer: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."

Instead of stowing something behind the laptop-computer:
	if the holder of the laptop-computer is a supporter:
		try putting the noun on the holder of the laptop-computer;
	otherwise if the holder of the laptop-computer is a container:
		try inserting the noun into the holder of the laptop-computer;
	otherwise:
		say "[no time]The [laptop-computer] [can't] effectively conceal much."

Instead of swinging or waving the laptop-computer: follow the don't destroy the laptop rule.
Instead of texting the laptop-computer: try texting yourself.

Instead of throwing the laptop-computer at something:
	if the second noun is the intruder:
		take no time;
		say "That would be unlikely to meaningfully hurt the intruder, but would definitely destroy your laptop.";
	otherwise:
		follow the don't destroy the laptop rule.

Instead of throwing something at the laptop-computer: follow the don't destroy the laptop rule.
Instead of unlocking the laptop-computer with: say "[nnt]The [laptop-computer] doesn't require a literal key to unlock."
Instead of unlocking keylessly the laptop-computer: try switching on the laptop-computer.
Instead of waking the laptop-computer: try switching on the laptop-computer.

This is the don't destroy the laptop rule:
	take no time;
	say "Laptops are expensive. You[if it's Nighttime] think you[end if][']d rather not risk destroying this one."

First before going (this is the set down or unplug plugged in laptop before going rule):
	if the player encloses the laptop-computer and the laptop-computer is attached:
		if it's Daytime:
			if the laptop-computer is charging:
				if the room gone from is Main-Bed:
					say "(first setting down your laptop on the dresser so that it stays plugged in)[command clarification break]" (A);
					now the laptop-computer is on the dresser;
					if the player encloses the laptop-charger:
						now the laptop-charger is on the dresser;
				otherwise if the room gone from is Main-Office:
					say "(first setting down your laptop on the desk so that it stays plugged in)[command clarification break]" (B);
					now the laptop-computer is on the desk;
					if the player encloses the laptop-charger:
						now the laptop-charger is on the desk;
			otherwise:
				unless the player encloses the laptop-charger:
					say "(bringing the laptop's charger with you, since it's plugged into the laptop)[command clarification break]" (C);
					now the player carries the laptop-charger;
		otherwise:
			if the laptop-computer is charging:
				say "(first unplugging the laptop)[command clarification break]" (D);
				silently try unplugging the laptop-charger from the laptop-computer;
			otherwise:
				unless the player encloses the laptop-charger:
					say "(bringing the laptop's charger with you, since it'll be plugged into the laptop)[command clarification break]" (E);
					now the player carries the laptop-charger;

Before inserting the laptop-computer into a container: follow the disconnect the laptop first rule.
Before placing the laptop-computer under: follow the disconnect the laptop first rule.
Before stowing the laptop-computer behind: follow the disconnect the laptop first rule.

This is the disconnect the laptop first rule:
	if the laptop-computer is attached:
		say "(first unplugging the laptop)[ccbr]" (A);
		silently try unplugging the laptop-charger from the laptop-computer;

relock-laptop is a truth state that varies. relock-laptop is false.

Before opening or switching on the locked laptop-computer:
	now the laptop-computer is unlocked;
	now relock-laptop is true;
	
After opening the laptop-computer:
	if relock-laptop is true:
		now the laptop-computer is locked;
		now relock-laptop is false;
	continue the action;
	
After switching on the laptop-computer:
	if relock-laptop is true:
		now the laptop-computer is locked;
		now relock-laptop is false;
	continue the action;

Chapter 2 - Rules for the laptop

The bulk of a keyboard is usually 0. The bulk of a screen is usually 0. The bulk of software is usually 0. The bulk of a selection device is usually 0.

Carry out switching on the laptop-computer (this is the brighten the laptop rule):
	now the laptop-computer is bright;
	now the laptop-computer is lit.
		
Carry out switching off the laptop-computer (this is the dim the laptop rule):
	now the laptop-computer is not bright;
	now the laptop-computer is not lit.

To reset to operating system:
	repeat with item running through software run by the laptop-computer:
		unless item is either LaptopOS or Login Window:
			now the software priority of item is 5.
			
Instead of remembering something incorporated by the laptop-computer: try remembering the laptop-computer.
			
Carry out switching off the laptop-computer (this is the lock the computer when it's off rule): now the laptop-computer runs Login Window.

Rule for supplying a missing second noun while selecting the topic understood with (this is the prioritize computer while selecting rule):
	if the player can touch the laptop-computer and the laptop-computer is switched on:
		now the second noun is the laptop-computer's trackpad;
	otherwise:
		follow the guess a selection device while selecting rule.
		
Rule for supplying a missing second noun while typing the topic understood on (this is the prioritize computer while typing rule):
	if the player can touch the laptop-computer and the laptop-computer is switched on:
		now the second noun is the laptop-computer's keyboard;
	otherwise:
		follow the guess a keyboard while typing rule.
		
The guess a selection device while selecting rule is not listed in the for supplying a missing second noun rulebook.
The guess a keyboard while typing rule is not listed in the for supplying a missing second noun rulebook.

Setting action variables for an actor typing the topic understood on something (this is the prioritize typing on the computer rule):
	if the second noun is nothing:
		if the laptop-computer is in the location and the laptop-computer is switched on:
			now the second noun is the laptop-computer's keyboard;
			now the selected computer in question is the laptop-computer;
			now the selected software in question is the controlling program of the laptop-computer.
			
Setting action variables for an actor selecting the topic understood with something (this is the prioritize selecting on the computer rule):
	if the second noun is nothing:
		if the laptop-computer is in the location and the laptop-computer is switched on:
			now the second noun is the laptop-computer's trackpad;
			now the selected computer in question is the laptop-computer;
			now the selected software in question is the controlling program of the laptop-computer.
			
Does the player mean typing the topic understood on the laptop-computer's keyboard:
	if the laptop-computer is switched on and the laptop-computer is touchable, it is likely;
	it is unlikely. 

Chapter 3 - Software on the laptop

Section 1 - Login window

The laptop-computer runs a password-lock program called Login Window.
The password of Login Window is "vanessa".
The rejection of Login Window is "[if the location is the location of laptop-computer][password-attempts up]The text field [regarding the laptop-computer][clear]. The text above it [change] to read 'Password incorrect.'[otherwise][nobr][end if]".
The success of Login Window is "[if the location is the location of laptop-computer][password-attempts reset]The password field [regarding the laptop-computer][vanish], and [we] [are] granted access.[otherwise][nobr][end if]".

To say password-attempts up: if Checking Email Part B has ended, increment the password-attempts of the laptop-computer.
To say password-attempts reset: now the password-attempts of the laptop-computer is 0.

First check entering (this is the don't enter yourself except on the computer rule):
	if the noun is yourself and the laptop-computer is touchable:
		try typing "vanessa" on the laptop-computer instead.

An input handling rule for login window (this is the customized check for correct login window password rule):
	let N be "[the topic understood]"; 
	if N is the password of login window:
		carry out the rewarding successful answering activity with login window;
		follow the bypass safe tutorial rule;
		rule succeeds;
	otherwise:
		if player-inputting is true:
			say "[rejection of login window][paragraph break]" (A);
		otherwise:
			follow the extended report the intruder typing on the laptop rule;
		if the password-attempts of the laptop-computer is 6:
			if player-inputting is true:
				say "After a moment, the screen changes to display some text that reads:
			
				[pt]There have been too many unsuccessful attempts to unlock this computer. It has been temporarily disabled. Please try again in [remaining time of lockdown-screen] minutes.[/pt]";
			now the laptop-computer is locked;
			now the laptop-computer does not run login window;
			now the software priority of lockdown-screen is 1;
		rule fails.

The laptop-computer runs some software called lockdown-screen. The software priority of lockdown-screen is 10. 
lockdown-screen has a number called the remaining time. The remaining time of lockdown-screen is 60.
The description of lockdown-screen is "The screen remains blank except for some text that reads:

[pt]There have been too many unsuccessful attempts to unlock this computer. It has been temporarily disabled. Please try again in [remaining time of disabled-screen] minutes.[/pt]".

Every turn when the laptop-computer is locked (this is the count down on the lockdown screen rule):
	decrement the remaining time of lockdown-screen;
	if the remaining time of lockdown-screen is 0:
		now the laptop-computer is unlocked;
		now the laptop-computer runs login window;
		now the software priority of lockdown-screen is 10;
		now the remaining time of lockdown-screen is 60.
		
Definition: the laptop-computer is protected:
	if it runs a password-lock program, yes;
	if the software priority of lockdown-screen is 1, yes;
	no.

Section 2 - Laptop OS

The laptop-computer runs a multiple-choice program called LaptopOS. LaptopOS is privately-named. The software priority of LaptopOS is 3. The options table of LaptopOS is the Table of Laptop Program Options.

Table of Laptop Program Options
topic	title	effect
"email"	"An EMAIL program"	open-email rule
"messages"	"The MESSAGES app"	open-laptop-messages rule
"web/-- browsing/browser" or "search engine"	"A web BROWSER"	open-laptop-browser rule

After reading a command (this is the closing software equates to clicking close rule):
	if the laptop-computer is switched on and the laptop-computer is unprotected and the laptop-computer is touchable:
		if the software priority of Laptop Email is 2 or the software priority of laptop-messages is 2 or the software priority of InternetSEARCH is 2:
			if the player's command matches "close" or the player's command matches "back" or the player's command matches "home" or the player's command matches "quit" or the player's command matches "close app" or the player's command matches "close program" or the player's command matches "close browser" or the player's command matches "close messages" or the player's command matches "close email" or the player's command matches "quit program" or the player's command matches "quit browser" or the player's command matches "quit messages" or the player's command matches "quit email":
				change the text of the player's command to "click close".

Section 3 - Email

email-opened is a truth state that varies. email-opened is false.

This is the open-email rule:
	repeat with item running through software run by the laptop-computer:
		unless item is either LaptopOS or lockdown-screen:
			now the software priority of item is 5;
	now the software priority of Laptop Email is 2;
	say "[We] [open] your email.";
	try examining Laptop Email;
	if email-opened is false:
		now email-opened is true.
		
Understand "open [text]" as email-reading when the laptop-computer is switched on and the laptop-computer is touchable and the controlling program of the laptop-computer is Laptop Email.

The laptop-computer runs an email program called Laptop Email. Laptop Email is privately-named and quittable. The message table of Laptop Email is the Table of Laptop Emails.

Table of Laptop Emails
topic	message	arrival time	read	answered	description
"welcome/coolmail" or "welcome to/-- coolmail" or "welcome/-- to/-- cool mail" or "first message/email/--" or "9am" or "9 am"	"Welcome to CoolMail!"	9:00 AM	false	false	"[mail-welcome]"
"your/my/-- lifeline" or "second" or "second message/email"	"Your Lifeline"	--	false	false	"[your-lifeline]"

Last when Nighttime begins: silently deliver "Your Lifeline" to Laptop Email.

To silently deliver (chosen message - text) to (chosen program - an email program):
	repeat through the message table of the chosen program:
		if message entry is chosen message: 
			now the arrival time entry is the time of day; 

To delete (chosen message - text) from (chosen program - an email program):
	repeat through the message table of the chosen program:
		if message entry is chosen message:
			blank out the arrival time entry.

To say mail-welcome:
	say "[bpt]From: [pt] CoolMail Welcoming Committee[br][bpt]To: [pt]You[br][bpt]Subject: [pt]Welcome to CoolMail!";
	say "[line] [/line]";
	say paragraph break;
	say "[header]Hi Vanessa,[/header]
	
	[et]Thank you for choosing CoolMail! We are pleased to welcome you to the kind of world everybody dreams of: a world of easy, practical communication.
	
	Once you've gotten your bearings, feel free to download our app, or finish filling out your profile![/et]
	
	Below the text [adapt the verb are from the third person plural] two buttons, one reading '[pt]Download App[/pt]' and one reading '[pt]Manage Account[/pt].'".

A download app button is part of Laptop Email. The printed name of download app button is "'Download App' button". Understand "[download-app]" as download app button. The bulk of the download app button is 0.
The description of download app button is "A green button with text reading '[pt]Download App[/pt].'"

Understand "download app button" or "'download app' button" or "download button" or "'download' button" or "download app" or "'download app'" or "download" or "'download'" as "[download-app]".

Before doing something other than selecting or reading or examining when the current action involves the download app button: say "[It's] hard to do that to something on a screen." instead.

A manage account button is part of Laptop Email. The printed name of manage account button is "'Manage Account' button". Understand "[manage-account]" as manage account button. The bulk of the manage account button is 0.
The description of manage account button is "A green button with text reading '[pt]Manage Account[/pt].'"

Understand "manage account button" or "'manage account' button" or "manage button" or "'manage' button" or "account button" or "'account' button" or "manage account" or "'manage account'" or "manage" or "'manage'" or "account" or "'account'" as "[manage-account]".

Before doing something other than selecting or reading or examining when the current action involves the manage account button: say "[no time][It's] hard to do that to something on a screen." instead.

An input handling rule for Laptop Email (this is the clicking welcome buttons rule):
	if the topic understood matches "[download-app]" or the topic understood matches "[manage-account]":
		say "Clicking the button [adapt the verb open from the third person singular] the browser.
		
		[the no-records response of InternetSEARCH]
		
		[We] [return] to the email program." instead.

To say your-lifeline:
	say "[bpt]From: [pt] The One True Church of Our Lord and Savior[br][bpt]To: [pt]You[br][bpt]Subject: [pt]Your Salvation";
	say "[line] [/line]";
	say paragraph break;
	say "[et]Are you dissatisfied? Angry? Afraid? Have you been looking to make a change?
	
	This is the sign you've been waiting for.
	
	The Fellowship of the One True Church of Our Lord and Savior has many courses, groups, programs, subscriptions, infographics...[/et]
	
	It will continue on in that vein.
	
	It occurs to you that this email wasn't here when you last checked, and can't be delivered without Internet. So, it won't actually be in your inbox. You can elide this whole thing from your plan.";
	delete "Your Lifeline" from Laptop Email.
	
Understand the command "answer" as something new.

Understand "answer [text]" or "say [text]" as email-replying when the laptop-computer is switched on and the laptop-computer is touchable and the controlling program of the laptop-computer is Laptop Email.
	
First check email-replying:
	unless the laptop-computer is touchable and the laptop-computer is switched on, say "[no time][text of parser error internal rule response (R)][br]" instead.

Section 5 - Messages

This is the open-laptop-messages rule:
	repeat with item running through software run by the laptop-computer:
		unless item is either LaptopOS or lockdown-screen:
			now the software priority of item is 5;
	now the software priority of laptop-messages is 2;
	say "[We] [open] the messaging app.";
	try examining laptop-messages.
	
The laptop-computer runs a multiple-choice program called laptop-messages. Laptop-messages is privately-named and quittable. The options table of laptop-messages is the Table of Messages Options.
[NOTE: This redirects it to the same table as the smartphone messenger uses]

Section 6 - Web browser

This is the open-laptop-browser rule:
	repeat with item running through software run by the laptop-computer:
		unless item is either LaptopOS or lockdown-screen:
			now the software priority of item is 5;
	now the software priority of InternetSEARCH is 2;
	say "[We] [open] the web browser.";
	try examining InternetSEARCH.
	
Check typing the topic understood on software (called the program) (this is the allow typing on software rule):
	let the relevant computer be a random switched on computer that displays the program;
	let the relevant keyboard be a random keyboard which is part of the relevant computer;
	try typing the topic understood on the relevant keyboard instead.
	
Displaying relates a computer (called X) to software (called Y) when Y is the controlling program of X. The verb to display means the displaying relation.

The laptop-computer runs a search engine called InternetSEARCH. The data table of InternetSEARCH is the Table of Internet Data. InternetSEARCH is quittable.

Table of Internet Data
topic	title	data
--	--	--

The no-records response of InternetSEARCH is "The browser [chug] for a moment, then display[if it's Daytime]s[end if] the following text: [/p][no-internet][/p]You [won't-yet-have] set up the wireless router.".

To say won't-yet-have:
	if it's Daytime, say "[one of]realize[or]remember[stopping] you haven't yet";
	otherwise say "won't yet have".

To say no-internet:
	say "[bpt]No internet connection found.
	
	[pt]Please check your internet connection and hardware, then try again.[/pt]".
	
After reading a command (this is the opening apps equates to clicking them rule):
	if the player's command includes "messages" or the player's command includes "contacts" or the player's command includes "settings" or the player's command includes "browser" or the player's command includes "email":
		if the player's command includes "open ":
			replace the matched text with "click ".

Part 6 - Sitting Area Section

Chapter 1 - The room

Main-Sitting is south of Main-Office. "[if it's Daytime]This is[otherwise]You'll be in[end if] the area designated as a sitting room, bordered on one side by the bamboo barrier and on another by the bookshelf." The printed name is "Main Room[if the holder of the player is the location] [roman type](in the sitting area)".
Understand "sitting/living room/area" or "sitting" as Main-Sitting.
The relative direction set of Main-Sitting is the Table of Sitting Area Direction Descriptors.
The casual descriptor of Main-Sitting is "the sitting area".
For saying the location name of Main-Sitting: say "in the sitting area".
The prepositional entrance descriptor of Main-Sitting is "into the sitting area".
The prepositional exit descriptor of Main-Sitting is "out of the sitting area".

For announcing notable exits of Main-Sitting:
	say "[We] [can] go [if the previous location is Main-Office]back [end if][b]north[/b] to the office area, or [if the previous location is Main-Behind-Shelf]back [end if][b]south[/b] behind the bookshelf."
	
Instead of examining Main-Sitting when the location is not Main-Sitting:
	say "The area designated as a sitting room, bordered on one side by the bamboo barrier and on another by the bookshelf[if the location is Main-Behind-Shelf] in front of you[end if].";
	describe locale for Main-Sitting;
	if the number of locale-supportable things in Main-Sitting > 0:
		say "[We] [if it's Daytime]can also see[otherwise]will also be able to see[end if] [a list of locale-supportable things in Main-Sitting]."
	
Instead of examining north when the location is Main-Sitting: try examining Main-Office.
Instead of examining east when the location is Main-Sitting: say "[nnt][The bamboo slat barrier] [are] in that direction."
Instead of examining south when the location is Main-Sitting: try examining Main-Behind-Shelf.
Instead of examining west when the location is Main-Sitting: say "[nnt][There's] a wall in that direction."

Instead of listening to Main-Sitting:
	if the radio is listenable:
		try listening to the radio;
	otherwise if it's Daytime:
		if the dishwasher-switch is switched on:
			say "From the kitchenette, you hear the dishwasher going.";
		otherwise if the kitchen faucet is switched on:
			say "From the kitchenette, you hear a faucet running.";
		otherwise if the laptop-computer is switched on and the laptop-computer is in the location:
			say "You hear the computer's fan whirring slightly.";
		otherwise:
			say "You hold your breath and listen, but don't hear anything unusual.";
	otherwise:
		now player-listening is true.

Instead of smelling Main-Sitting: follow the smelling rooms rule.

Table of Sitting Area Direction Descriptors
other place	descriptor
Bathroom	"somewhere near the entryway"
Entryway	"in the entryway"
Kitchenette	"somewhere near the entryway"
Main-Bed	"on the other side of the divider"
Main-Behind-Shelf	"on the other side of the bookshelf"
Main-By-Counter	"on the other side of the divider"
Main-Office	"in the office area"
Outside Hall	"somewhere near the entryway"
Within-Closet	"somewhere near the entryway"

in-the-sitting-area is a position in Main-Sitting.

[NOTE: The bookshelf (see below) is here.]

Chapter 2 - Couch

Section 1 - The couch

The couch is a chair in Main-Sitting. "A [couch] and two chairs (one plush, one worn in) [adapt the verb surround from the third person plural] a glass coffee table. A [wicker trash can] [squat] next to the couch." The couch allows seated, and reclining. Understand "sagging" as the couch. [The bulk-capacity of the couch is 200.]
The description of the couch is "A sagging corduroy couch. It was here before you."

Instead of knocking on the couch: say "The sound [regarding the noun][aren't] very impressive."
Instead of listening to the couch: say "[no time][The couch] doesn't really make noise."
Instead of rubbing or touching or squeezing the couch: say "Rough corduroy."
Instead of smelling the couch: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of swinging the couch: try taking the couch.

The corduroy is a material. The corduroy is part of the couch. Understand "rough" or "cover" as the corduroy.
The description of the corduroy is "The couch is[if it's Nighttime], you remember,[end if] covered in a rough corduroy material."

After starting the virtual machine (this is the redirect from corduroy to couch rule):
	dispatch everything but { drinking action, eating action, examining action, kissing action, opening action, removing it from action, remembering action, tasting action, taking action } for the corduroy to the couch;

Instead of drinking or eating or tasting or kissing the corduroy: say "[no time]You doubt the corduroy would taste very good."	
Instead of opening or taking the corduroy: say "[nnt][if it's Daytime]You're not[otherwise]You doubt you'd be[end if] interested in removing the corduroy cover from the couch [if it's Daytime]right now[otherwise]in the moment[end if]."
Instead of remembering the corduroy: try remembering the couch.
Instead of removing the corduroy from: try taking the corduroy.
Instead of removing something from the corduroy: try taking the noun.

Some cushions are part of the couch. Understand "cushion" or "couch cushion/cushions" as the cushions.
The description of the cushions is "Well-used corduroy cushions."

After starting the virtual machine (this is the redirect from cushions to couch rule):
	dispatch everything but { drinking action, eating action, entering underneath action, examining action, hugging action, kissing action, looking behind action, looking under action, placing it under action, pulling action, pushing action, pushing it to action, removing it from action, remembering action, slipping behind action, smelling action, stowing it behind action, taking action, tasting action, turning action } for the cushions to the couch;
	
Instead of remembering the cushions: say "Those, you expect, [regarding the noun][remain] on the couch."

Instead of drinking or eating or tasting or kissing the cushions: try tasting the corduroy.

Instead of entering underneath or slipping behind the cushions:
	if it's Daytime, say "[We] doubt you would fit under the [cushions], even as small as you are.";
	otherwise say "[We] doubt the [cushions] would conceal you effectively.";
	take no time.

Instead of hugging the cushions: say "[We] [give] one of the cushions a squeeze. [It's] quite soft."
Instead of looking behind or looking under the cushions: say "[nnt]Nothing [regarding the couch][have] had time to get lost in them yet."
Instead of placing the cushions under: try putting the second noun on the couch.

Instead of placing something under the cushions:
	if the noun is sizable, say "You doubt [the noun] would fit under the couch cushions.";
	otherwise say "You[if it's Nighttime] think you[end if][']d rather not lose [the noun] to the hungry sucking void that comes standard underneath every set of couch cushions.";
	take no time.

Instead of pulling or pushing or turning the cushions: say "[nnt]It [adapt the verb make from the third person singular] little difference."
Instead of pushing the cushions to: try pushing the cushions.
Instead of removing the cushions from: try taking the cushions.
Instead of removing something from the cushions: try taking the noun.
Instead of smelling the cushions: say "They don't smell like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of stowing the cushions behind: try putting the second noun on the couch.

Instead of stowing something behind the cushions:
	if the noun is sizable, say "You doubt [the noun] would fit behind the couch cushions.";
	otherwise say "You[if it's Nighttime] think you[end if][']d rather not lose [the noun] to the hungry sucking void that comes standard behind every set of couch cushions.";
	take no time.

Instead of taking the cushions: say "[nnt][We] can't see any [if it's Daytime]good reason to dismantle[otherwise]reason you'd prioritize dismantling[end if] the couch[if it's Daytime] right now[otherwise][unicode 8212]there must be a more efficient way[end if]."

Section 2 - Behind & under

A backside called behind#couch is part of the couch. Behind#couch is enterable and open. Behind#couch allows seated, crouched, and reclining. Behind#couch is crouched. The bulk-capacity of behind#couch is 150.

Instead of examining the couch when the player is enclosed by behind#couch: say "[We] [if it's Daytime]can only[otherwise]will only be able to[end if] see the back of the couch from [if it's Nighttime]t[end if]here. [if it's Daytime]It's[otherwise]It is, you remember,[end if] entirely unremarkable."

Before slipping behind the couch (this is the can't slip behind the couch twice rule):
	if the player is in behind#couch:
		say "[if it's Daytime]You're already[otherwise]You'll already be[end if] there!" (A) instead.
		
Before slipping behind the couch (this is the under and behind the couch are the same really rule):
	if the player is in under#couch:
		say "[if it's Daytime]You're already[otherwise]You'll already be[end if] under the couch, which is [if it's Daytime]pretty much the same thing[otherwise]just as effective[end if]." (A) instead.

behind-the-couch is a thingish position in behind#couch.

An underside called under#couch is part of the couch. Under#couch is enterable. Under#couch allows reclining.

Instead of examining up when the player is enclosed by under#couch: say "[We] [can only] see the bottom of the couch in that direction."

Instead of examining the couch when the player is enclosed by under#couch: say "[We] [if it's Daytime]can only[otherwise]will only be able to[end if] see the underside of the couch from [if it's Nighttime]t[end if]here. [if it's Daytime]It's[otherwise]It is, you remember,[end if] dusty, but otherwise entirely unremarkable."

The no going under chairs rule does nothing when the noun is the couch.

Before entering underneath the couch (this is the can't enter underneath the couch twice rule):
	if the player is in under#couch:
		say "[if it's Daytime]You're already[otherwise]You'll already be[end if] there!" (A) instead.
		
Before entering underneath the couch (this is the behind and under the couch are the same really rule):
	if the player is in behind#couch:
		say "[if it's Daytime]You're already[otherwise]You'll already be[end if] behind the couch, which is [if it's Daytime]pretty much the same thing[otherwise]just as effective[end if]." (A) instead.

under-the-couch is a thingish position in under#couch.

Chapter 3 - The chairs

Section 1 - Plush chair

The plush chair is a scenery chair in Main-Sitting. The plush chair allows seated and crouched. The plush chair is seated.
The description of the plush chair is "You secretly ordered [one of]this chair[or]it[stopping] to be delivered before you arrived, worried about awful old furniture. [if it's Daytime][one of]Turns out you[or]You[stopping][otherwise]You[end if] were right to be: it's the most comfortable place to sit in the apartment."

Instead of remembering the plush chair: say "That, you expect, [regarding the noun][remain] in the sitting area."

Instead of entering underneath the plush chair: say "[nnt]There's no way [if it's Daytime]you'll[otherwise]you'd[end if] fit underneath."
Instead of knocking on the plush chair: say "The sound [regarding the noun][aren't] very impressive."
Instead of listening to the plush chair: say "[no time][The plush chair] doesn't really make noise."
Instead of rubbing or touching or squeezing the plush chair: say "Soft velvety cloth."
Instead of smelling the plush chair: say "[if it's Daytime]It smells[otherwise]You remember it smelling[end if] vaguely like incense."
Instead of swinging the plush chair: try taking the plush chair.

The velvet is a material. The velvet is part of the plush chair. Understand "lovely/soft/cloth" as the velvet.
The description of the velvet is "The plush chair[if it's Nighttime], you remember,[end if] is covered in lovely soft velvet."

After starting the virtual machine (this is the redirect from velvet to plush chair rule):
	dispatch everything but { drinking action, eating action, examining action, kissing action, removing it from action, remembering action, tasting action, taking action } for the velvet to the plush chair;

Instead of drinking or eating or tasting or kissing the velvet: say "[no time]You doubt the velvet would taste very good."
Instead of remembering the velvet: try remembering the plush chair.
Instead of removing the velvet from: try taking the velvet.
Instead of removing something from the velvet: try taking the noun.
Instead of taking the velvet: say "[nnt][if it's Daytime]You're not[otherwise]You doubt you'd be[end if] interested in removing the velvet cover from the plush chair [if it's Daytime]right now[otherwise]in the moment[end if]."

Section 2 - Worn chair

The worn-in chair is a scenery chair in Main-Sitting. The worn-in chair allows seated and crouched. The worn-in chair is seated. Understand "worn" or "worn in" as the worn-in chair.
The description of the worn-in chair is "[if the plush chair is examined]This is the exact kind of thing you were worried about when you ordered the other chair. [end if]A complete wreck of a thing, all creaking wood and gaudy embroidery, liable to collapse at any moment. It was here [i]long[/i] before you."

Instead of remembering the worn-in chair: say "That, you expect, [regarding the noun][remain] in the sitting area."

Instead of entering underneath the worn-in chair: say "[nnt]There's no way [if it's Daytime]you'll[otherwise]you'd[end if] fit underneath."
Instead of knocking on the worn-in chair: say "The sound [regarding the noun][aren't] very impressive."
Instead of listening to the worn-in chair: say "[no time][The worn-in chair] doesn't really make noise."
Instead of rubbing or touching or squeezing the worn-in chair: say "[if it's Daytime]The embrodery is[otherwise]You remember the embroidery being[end if] worn down and threadbare."
Instead of smelling the worn-in chair: say "[if it's Daytime]It smells[otherwise]You remember it smelling[end if] musty."
Instead of swinging the worn-in chair: try taking the worn-in chair.

The embroidery is a material. The embroidery is part of the worn-in chair. Understand "needlework" or "gaudy" or "pattern" as the embroidery.
The description of the embroidery is "The worn-in chair[if it's Nighttime], you remember,[end if] is covered in guady embroidery, stitched to create more of a pattern than any discernable image."

After starting the virtual machine (this is the redirect from embroidery to worn-in chair rule):
	dispatch everything but { assaulting it with action, attacking action, burning action, cutting action, drinking action, eating action, examining action, kissing action, removing it from action, remembering action, tasting action, taking action } for the embroidery to the worn-in chair;

Instead of attacking or burning or cutting the embroidery: say "[no time]Ugly as it is, [we] [have] no reason to destroy the embroidery."
Instead of assaulting the embroidery with: try attacking the embroidery.
Instead of assaulting something with the embroidery: try attacking the noun.
Instead of drinking or eating or tasting or kissing the embroidery: say "[nnt]You doubt the embroidery would taste very good."	
Instead of removing the embroidery from: try taking the embroidery.
Instead of removing something from the embroidery: try taking the noun.
Instead of taking the embroidery: say "[no time][if it's Daytime]You're not[otherwise]You doubt you'd be[end if] interested in picking apart the embroidery [if it's Daytime]right now[otherwise]in the moment[end if]."

After reading a command (this is the actions on both chairs rule):
	if the location is Main-Sitting:
		if the player's command includes "chairs":
			if the player's command includes "x " or the player's command includes "look " or the player's command includes "look at " or the player's command includes "examine ":
				change the text of the player's command to "x worn-in and plush";
			otherwise if the player's command includes "take " or the player's command includes "get " or the player's command includes "pick ":
				change the text of the player's command to "take worn-in and plush";

Chapter 4 - Table

Section 1 - The table

The coffee table is a scenery supporter in Main-Sitting. The coffee table is fixed in place and bulky.
The description of the coffee table is "A nice, modern piece, with a glass top and metal legs."

Instead of remembering the coffee table: say "That, you expect, [regarding the noun][remain] in the sitting area."

Instead of attacking or burning or cutting or shooting the coffee table:
	if it's Daytime, say "You just got the coffee table. You[if it's Nighttime] think you[end if][']d rather not destroy it.";
	otherwise say "[nt]You see no way that destroying the coffee table would help in that situation."

Instead of assaulting the coffee table with: try attacking the coffee table.
Instead of climbing or crouching on or entering or lying on or sitting on or standing up on the coffee table: say "[no time]You[if it's Daytime][']d rather not[otherwise] suspect you won't want to[end if] test the limits of the coffee table's weight capacity[if it's Daytime], today of all days[otherwise] in such a high-stakes situation[end if]."

Instead of crouching behind or lying behind or sitting behind or slipping behind the coffee table:
	if the coffee table is empty:
		say "The top of the coffee table is glass. It wouldn't do a very good job of concealing you. Besides, you don't think [we] [can] crouch low enough to conceal yourself entirely behind it, anyway.";
	otherwise:
		say "You don't think [we] [can] crouch low enough to conceal yourself entirely behind it.";
	take no time.
		
Instead of entering underneath the coffee table:
	if the coffee table is empty:
		say "The top of the coffee table is glass. It wouldn't do a very good job of concealing you. Besides, you don't think [there's] enough room for you to worm your way underneath.";
	otherwise:
		say "You don't think [there's] enough room for you to worm your way underneath.";
	take no time.

Instead of drinking or eating or tasting or kissing the coffee table: say "[nnt]You doubt the coffee table would taste very good."
Instead of giving something to the coffee table: try putting the noun on the coffee table.
Instead of inserting something into the coffee table: try putting the noun on the coffee table.
Instead of listening to the coffee table: say "[no time]The coffee table doesn't really make noise on its own."

Instead of pulling or pushing or turning the coffee table:
	if it's Daytime, say "It's too heavy to move around easily.";
	otherwise say "You had to lug this thing up several sets of stairs yesterday, and know you won't be able to maneuver it quickly or easily.";
	take no time.

Instead of pushing the coffee table to: try pushing the coffee table.
Instead of removing something from the coffee table: try taking the noun.
Instead of rubbing or touching or squeezing the coffee table: say "Metal and glass, one rough, one smooth, both cool."
Instead of showing something to the coffee table: try putting the noun on the coffee table.
Instead of smelling the coffee table: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if][unicode 8212]certainly not coffee."

Instead of stowing something behind the coffee table:
	if it's Daytime, try dropping the noun;
	otherwise try depositing the noun.

Instead of throwing something at the coffee table: say "[no time]Once you identify the impulse, [we] [find] you have no reason to actually follow through."
Instead of tying something to the coffee table: say "[no time]You doubt that would be a productive course of action."

The glass top is a material. It is part of the coffee table.
The description of the glass top is "Tempered glass, its use as a tabletop an implicit statement."
	
After starting the virtual machine (this is the redirect from glass top to coffee table rule):
	dispatch everything but { examining action, crouching behind action, lying behind action, sitting behind action, slipping behind action, drinking action, eating action, tasting action, kissing action, rubbing action, touching action, squeezing action, taking action, removing it from action, remembering action } for the glass top to the coffee table;
	
Instead of crouching behind or lying behind or sitting behind or slipping behind the glass top: say "[no time]The glass top of the coffee table wouldn't do a very good job of concealing you."
Instead of drinking or eating or tasting or kissing the glass top: say "[no time]You doubt the glass would taste very good."
Instead of remembering the glass top: try remembering the coffee table.
Instead of removing the glass top from: try taking the glass top.
Instead of removing something from the glass top: try taking the noun.
Instead of rubbing or touching or squeezing the glass top: say "Smooth, cool glass."
Instead of taking the glass top: say "[nnt]The glass top is part of the coffee table. [We] [have] neither the tools nor the expertise to remove it."

Some metal legs are a material. They are part of the coffee table. Understand "metallic" or "leg" as the metal legs.
The description of the metal legs is "Rough, industral-looking metal warped into an elegant support system."
	
After starting the virtual machine (this is the redirect from metal legs to coffee table rule):
	dispatch everything but { examining action, drinking action, eating action, tasting action, kissing action, pulling action, pushing action, pushing it to action, turning action, removing it from action, rubbing action, touching action, squeezing action, smelling action, taking action, remembering action } for the metal legs to the coffee table;
	
Instead of drinking or eating or tasting or kissing the metal legs: say "[no time]You doubt the metal legs would taste very good."

Instead of pulling or pushing or turning the metal legs:
	if it's Daytime, say "The coffee table is too heavy to move around easily.";
	otherwise say "You had to lug the coffee table up several sets of stairs yesterday, and know you won't be able to maneuver it quickly or easily.";
	take no time.

Instead of pushing the metal legs to: try pushing the metal legs.
Instead of remembering the metal legs: try remembering the coffee table.
Instead of removing the metal legs from: try taking the metal legs.
Instead of removing something from the metal legs: try taking the noun.
Instead of rubbing or touching or squeezing the metal legs: say "Rough, cool metal."
Instead of smelling the metal legs: say "They don't smell like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of taking the metal legs: say "[nnt]The metal legs are part of the coffee table. [We] [have] neither the tools nor the expertise to remove them."

Section 2 - Underneath

An underside called under#table is part of the coffee table. Under#table is open.

Before entering underneath the table (this is the can't enter underneath the table twice rule):
	if the player is in under#table:
		say "[if it's Daytime]You're already[otherwise]You'll already be[end if] there!" instead.
[NOTE: This rule is left over from when under#table was enterable; left in place just in case because trying to double enter underneath something causes a runtime error.]

Chapter 5 - Wastebasket

The wicker trash can is a scenery wastebasket in Main-Sitting.
The description of the wicker trash can is "The woven wicker suggests artisan make, though you know [if it's Daytime]these[otherwise]those[end if] things are mass-produced."

The closing doors before locking keylessly rule does nothing when the noun is the wicker trash can.
The closing doors before locking rule does nothing when the noun is the wicker trash can.

Instead of opening or closing the wicker trash can: say "[nnt]It doesn't have a lid."
Instead of remembering the wicker trash can: say "That, you expect, [regarding the noun][remain] in the sitting area."
Instead of rubbing or touching or squeezing the wicker trash can: say "Textured wicker."

Chapter 6 - Painting and safe

Section 1 - Nail

A nail is a hook in Main-Sitting. The carrying capacity of the nail is 1. [The bulk-capacity of the nail is 150.]
The description of the nail is "It was already in the wall when you arrived. You made sure to inform the landlord about it, for the sake of your security deposit."

Instead of remembering the nail: say "That, you expect, [regarding the noun][remain] embedded in the wall in the sitting area."

Rule for disclosing contents of the nail when the painting is hung-up (this is the we don't need to know about the nail rule):
	say "[A painting] [hang] on the wall. ".
	
Check putting something on the nail (this is the limiting the nail to the painting rule):
	unless the noun is the painting:
		take no time;
		say "You doubt the nail [if it's Daytime]will[otherwise]would[end if] support the weight of [the noun]." (A) instead.

Instead of assaulting something with the nail: say "[nnt][The nail] [are] too small to make an effective weapon."
Instead of crouching behind or entering underneath or lying behind or sitting behind or slipping behind the nail: say "[no time][The nail] [can't] meaningfully conceal you."
Instead of knocking on the nail: say "The sound [regarding the noun][aren't] very impressive."
Instead of listening to the nail: say "[no time]The nail doesn't really make noise."

Instead of looking behind or looking under the nail:
	if the painting is hung-up, say "Behind the painting, embedded in the wall, [adapt the verb are from the third person singular] a safe.";
	otherwise say "Below [the nail] [are] a wall safe[if the safe is open], standing open[end if]."

Instead of placing something under the nail:
	if the noun is hangable:
		try putting the noun on the nail;
	otherwise if it's Daytime:
		try dropping the noun;
	otherwise:
		try depositing the noun.

Instead of removing the nail from: try taking the nail.
Instead of rubbing or touching or squeezing the nail: say "Rough, cool metal."

Instead of stowing something behind the nail:
	if the noun is hangable:
		try putting the noun on the nail;
	otherwise if the safe is open:
		try inserting the noun into the safe;
	otherwise if it's Daytime:
		try dropping the noun;
	otherwise:
		try depositing the noun.

Instead of pulling or pushing or turning or taking the nail:
	if it's Daytime, say "The nail is of most use to you right where it is.";
	otherwise say "You don't think the nail will be of much use to you.";
	take no time.

Instead of pushing the nail to: try pushing the nail.
Instead of throwing something at the nail: say "[no time]Once you identify the impulse, [we] [find] you have no reason to actually follow through."

Instead of tying something to the nail:
	if the noun is hangable:
		try putting the noun on the nail;
	otherwise:
		say "[no time]You doubt that would be a productive course of action."
		
Instead of waving the nail: try swinging the nail.
		
Check putting something on the nail (this is the can't put sizable things on the nail whilst the safe be open rule):
	if the noun is sizable:
		if the safe is open:
			take no time;
			say "The open [safe] [prevent] you from hanging [the noun] on the nail." (A) instead.
			
The can't put sizable things on the nail whilst the safe be open rule is listed before the limiting the nail to the painting rule in the check putting it on rules.
		
Section 2 - Painting

The painting is a hangable thing on the nail. "[A painting] [if the painting is hung-up][hang] on[otherwise][are] leaning against[end if] the wall." The bulk of the painting is 150. The painting is seen. The remembered location of the painting is Main-Sitting.
The description of the painting is "A pastoral scene, painted by some dreary Impressionist or other. It depicts[if it's Nighttime], if memory serves,[end if] an empty field with a stream running through it."
The flexible appearance of the painting is "[The painting] [if the painting is hung-up][hang] on the wall[otherwise if the holder of the painting is a room][sit] on the floor, leaning against one wall[otherwise][sit] [in-on the holder of the painting][end if]."
Definition: the painting is hung-up if it is on the nail.
Rule for deciding whether all includes the painting: if the painting is hung-up, it does not.
Rule for disclosing exterior of the hung-up painting: do nothing.
painting-hanged is a truth state that varies. painting-hanged is true.
[First rule for clarifying the parser's choice of the nail: say "".
TODO: This activity doesn't apply to the second noun. Figure out how to prevent (on the nail) from printing]

Understand "look closer" as a mistake ("It's not that kind of game.") when the painting is visible.
Understand "lc" as a mistake ("It's not that kind of game.") when the painting is visible.
Understand "look closely" as a mistake ("It's not that kind of game.") when the painting is visible.

Does the player mean putting the painting on the nail (this is the redirect the painting to the nail rule):
	it is very likely.

Check putting the painting on (this is the redirect the painting to the nail really hard rule):
	if the location is Main-Sitting:
		if the second noun is either the bare walls or the safe:
			try putting the painting on the nail instead.
			
Carry out putting the painting on the nail: now painting-hanged is true.

First report taking the painting (this is the mention nail when taking painting rule):
	if painting-hanged is true:
		now painting-hanged is false;
		say "[We] [remove] the painting from its nail." (A) instead.
		
Report putting the painting on the nail (this is the customized report hanging the painting rule):
	if the actor is the player:
		say "[We] [hang] the painting back up on the nail." (A) instead.
		
First report dropping the painting (this is the customized report dropping the painting rule):
	if the actor is the player and the action is not silent:
		say "[We] [set] the painting down gently on the ground." (A) instead;
	make no decision.

Instead of attacking or burning or cutting or shooting the painting: follow the don't destroy the painting rule.
Instead of assaulting the painting with: try attacking the painting.
Instead of crouching behind or entering underneath or lying behind or sitting behind or slipping behind the painting: say "[no time]You doubt the painting could conceal you with any degree of subtlety."
Instead of drinking or eating or tasting or kissing the painting: say "[no time]You doubt the painting would taste very good."
Instead of entering the painting: say "[no time]It's not that kind of game."
Instead of knocking on the painting: say "The sound [regarding the painting][aren't] very impressive."
Instead of listening to the painting: say "[no time]Paintings are more traditionally looked at than listened to."

Instead of looking behind or looking under the painting:
	if the painting is hung-up, say "Behind the painting is a safe built into the wall.";
	otherwise say "[nt]When not hung up, [the noun] [are] robbed of its powers to conceal."

Instead of placing something under the painting:
	if the painting is hung-up:
		if it's Daytime:
			try dropping the noun;
		otherwise:
			try depositing the noun;
	otherwise:
		say "[no time]You doubt the painting could conceal [the noun] with any degree of subtlety."

Instead of pulling or pushing or turning the painting:
	if the painting is hung-up, say "[nt]You[if it's Nighttime] think you[end if][']d rather not risk the painting falling and getting damaged.";
	otherwise say "[nnt]It [adapt the verb make from the third person singular] little difference."

Instead of pushing the painting to: try pushing the painting.

Instead of putting something on the painting:
	if the painting is hung-up, say "The painting was expensive. You[if it's Nighttime] think you[end if][']d rather not risk destroying it.";
	otherwise say "[if it's Nighttime]You think that would be[otherwise]That's[end if] unlikely to be a productive course of action.";
	take no time.

Instead of removing the painting from: try taking the painting.
Instead of rubbing or touching or squeezing the painting: say "[We] [if it's Daytime]won't[otherwise]wouldn't be willing to[end if] touch the canvas itself, but [if it's Nighttime]you know [end if]the frame is made of smooth, finished wood." 
Instead of searching the painting: say "[nnt]The painting depicts[if it's Nighttime], if memory serves,[end if] an empty field with a stream running through it."
Instead of smelling the painting: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."

Instead of stowing something behind the painting:
	if the painting is hung-up, say "[We] [can't] attach [the noun] to the wall.";
	otherwise say "[nt]You doubt the painting could conceal [the noun] with any degree of subtlety."

Instead of swinging or waving or crouching on or climbing or lying on or sitting on or standing up on the painting: follow the don't destroy the painting rule.
Instead of throwing the painting at something: follow the don't destroy the painting rule.
Instead of throwing something at the painting: follow the don't destroy the painting rule.

This is the don't destroy the painting rule:
	if it's Daytime, say "The painting was expensive. You[if it's Nighttime] think you[end if][']d rather not destroy it.";
	otherwise say "[nt]The painting was expensive. You see no way that destroying it would help in that situation."
	
Check putting the painting on (this is the painting won't fit on the shleves rule):
	if the second noun is either the bookshelf or the shelves, say "[The painting][if it's Nighttime], you think,[end if] [are] too big to fit on the shelves." (A) instead.

Understand "straighten painting" as a mistake ("[It's] fine as it is.").

The field is part of the painting. Understand "bland" as the field.
The description of the field is "Really, really bland and empty."

After starting the virtual machine (this is the redirect from field to painting rule):
	dispatch everything but { entering action, examining action, looking behind action, looking under action, remembering action, rubbing action, touching action, squeezing action } for the field to the painting;
	
Instead of entering the field: say "[if it's Daytime]You're not[otherwise]Even under the circumstances, you doubt you'd be[end if] very interested in entering the world of this particular painting."
Instead of looking behind or looking under the field: try looking behind the canvas.
Instead of rubbing or touching or squeezing the field: try rubbing the canvas.

The stream is part of the painting. Understand "river" or "suggestion" or "far/-- background" as the stream.
The description of the stream is "More the suggestion of a stream, really, in the far background."

After starting the virtual machine (this is the redirect from stream to painting rule):
	dispatch everything but { entering action, examining action, looking behind action, looking under action, remembering action, rubbing action, touching action, squeezing action } for the stream to the painting;
	
Instead of entering the stream: say "[if it's Daytime]You're not[otherwise]Even under the circumstances, you doubt you'd be[end if] very interested in entering the world of this particular painting."
Instead of looking behind or looking under the stream: try looking behind the canvas.
Instead of rubbing or touching or squeezing the stream: try rubbing the canvas.

The frame is part of the painting. The bulk of the frame is 0.
The description of the frame is "A simple wooden frame."
	
After starting the virtual machine (this is the redirect from frame to painting rule):
	dispatch everything but { examining action, attacking action, burning action, cutting action, shooting action, assaulting it with action, drinking action, eating action, tasting action, kissing action, pushing action, pushing it to action, removing it from action, rubbing action, touching action, squeezing action, smelling action, remembering action } for the frame to the painting;

Instead of attacking or burning or cutting or shooting the frame:
	if it's Daytime, say "Like the painting, the frame was expensive. You[if it's Nighttime] think you[end if][']d rather not destroy it.";
	otherwise say "[nt]Like the painting, the frame was expensive. You see no way that destroying it would help in that situation."

Instead of assaulting the frame with: try attacking the frame.
Instead of assaulting something with the frame: try assaulting the noun with the painting.
Instead of drinking or eating or tasting or kissing the frame: say "You doubt the frame would taste very good."
Instead of pushing the frame: try pushing the painting.
Instead of pushing the frame to: try pushing the frame.
Instead of remembering the frame: try remembering the painting.

Instead of removing the frame from:
	if the second noun is the painting, say "[nt][We] [have] no reason to disassemble and unmount the painting from its frame [if it's Daytime]right now[otherwise]in the moment[end if].";
	otherwise try taking the painting.

Instead of removing something from the frame: try taking the noun.
Instead of rubbing or touching or squeezing the frame: say "[if it's Nighttime]Tou know the[otherwise]The[end if] frame is made of smooth, finished wood."
Instead of smelling the frame: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."

The canvas is part of the painting. Understand "paint" or "brushwork/brushstrokes" or "brush work/stroke/strokes" as the canvas. The bulk of the canvas is 0.
The description of the canvas is "The canvas is[if it's Nighttime], if you remember right,[end if] textures by small, visible brush strokes."
	
After starting the virtual machine (this is the redirect from canvas to painting rule):
	dispatch everything but { attacking action, burning action, cutting action, shooting action, assaulting it with action, examining action, looking behind action, looking under action, pushing action, pushing it to action, removing it from action, rubbing action, touching action, squeezing action, remembering action } for the canvas to the painting;
	
Instead of attacking or burning or cutting or shooting the canvas:
	if it's Daytime, say "The painting was expensive. You[if it's Nighttime] think you[end if][']d rather not destroy its canvas.";
	otherwise say "[nt]The painting was expensive. You see no way that destroying its canvas would help in that situation."
	
Instead of assaulting the canvas with something: try attacking the canvas.

Instead of looking behind or looking under the canvas:
	if the painting is hung-up, try looking behind the painting;
	otherwise say "[nt][if it's Daytime]You're not[otherwise]You doubt you'd be[end if] willing to tear up the canvas just to see the whole lot of nothing behind it."

Instead of pushing the canvas: try pushing the painting.
Instead of pushing the canvas to: try pushing the painting.
Instead of remembering the canvas: try remembering the painting.

Instead of removing the canvas from:
	if it's Daytime, say "The painting was expensive. You[if it's Nighttime] think you[end if][']d rather not destroy its canvas.";
	otherwise say "[nt]The painting was expensive. You see no way that destroying its canvas would help in that situation."

Instead of removing something from the canvas: try taking the noun.
Instead of rubbing or touching or squeezing the canvas: say "[no time]You[if it's Daytime][']re[otherwise] know you'd be[end if] unwilling to touch[one of][unicode 8212]and potentially mar[unicode 8212][or] [stopping]the canvas."

near-the-painting is a thingish position in Main-Sitting. [How to differentiate this?]

Section 3 - Safe

The safe is a scenery container in Main-Sitting. It is closed, locked, and openable. The bulk-capacity of the safe is 20.
The description of the safe is "A metal [safe] embedded in the wall[if closed], with a dial on the front[end if]. [if it's Daytime]Currently, it stands[otherwise]By that point, it will be standing[end if] [openness of the safe]."
[The safe has some text called the code. The code of the safe is "12 4 19 94".]
The safe has a list of numbers called the current combination.
The safe has a list of numbers called the true combination. The true combination of the safe is { 12, 4, 19, 94 }.
[NOTE: The code dealing with the combination, some of which is from the Cookbook and some of which I wrote, is meant to give the player the most flexibility possible when trying to open the safe.]

Table of Potential Safe Codes
topic
"12 4 19 94" or "12 04 19 94"
"12-4-19-94" or "12-4-1994" or "12-04-19-94" or "12-04-1994"
["12\/4\/19\/94" or "12\/4\/1994" or "12\/04\/19\/94" or "12\/04\/1994"]
"12 4 1994" or "12 04 1994"
"1241994" or "12041994"

Carry out looking when the location is Main-Sitting (this is the announce the safe rule):
	unless the painting is hung-up:
		say "A metal [safe][first time], previously hidden by the painting,[only] [are] embedded in the wall, under a [nail]."
		
Instead of remembering the safe:
	if the painting is not handled, try remembering the painting;
	otherwise say "That, you expect, [regarding the noun][remain] embedded in the wall in the sitting area."
		
The announce the safe rule is listed after the room description body text rule in the carry out looking rules.

Before doing something when the current action involves the safe (this is the painting blocks the safe rule):
	if the painting is hung-up and the painting is visible:
		say "[nnt]The painting [if it's Daytime]is currently[otherwise]will be[end if] hung up[if it's Nighttime] at that point[end if], concealing the safe entirely and preventing any interaction with it." instead;
	otherwise:
		continue the action.

After examining the safe: say indicate-combination.

To say indicate-combination: say "[first time]Brookwood told you the combination was four numbers long, and that those four number were your birth date: December 4th, 1994. You suspect you'll have to break the year into two numbers, since the dial only goes from 0 to 99. You can SPIN the dial of the safe TO each number.[only]".

Instead of examining the safe when the number of entries in the current combination of the safe > 0: follow the indicate combination so far rule.

This is the indicate combination so far rule:
	say "[We] [have][if it's Nighttime], by that time,[end if] dialed the safe to [the current combination of the safe]. ";
	say paragraph break;
	unless the safe is examined:
		say indicate-combination;
		now the safe is examined.
		
Before spinning the safe to (this is the only allow spinning to numbers 99 or lower rule):
	if the number understood > 99:
		take no time;
		say "The numbers on the safe only go up to 100[if it's Nighttime], if you remember correctly[end if]. The combination is 12 4 19 94, so you [if it's Daytime]don't[otherwise]wouldn't[end if] need a number that high anyway." instead.
		
Before spinning the safe to (this is the only allow spinning to numbers 0 or higher rule):
	if the number understood < 0:
		take no time;
		say "The numbers on the safe begin at 0[if it's Nighttime], if you remember correctly[end if]. The combination is 12 4 19 94, so you [if it's Daytime]don't[otherwise]wouldn't[end if] need a negative number anyway." instead.

Instead of spinning the safe to the number understood (this is the mechanism for entering the safe's combination rule):
	truncate the current combination of the safe to the last 3 entries;
	add the number understood to the current combination of the safe;
	if the safe is locked and the current combination of the safe is the true combination of the safe:
		say "[We] [dial] [the number understood], and [the noun] [unlock] with a [i]snick[/i].";
		now the safe is unlocked;
	otherwise if the safe is unlocked and the safe is closed and the current combination of the safe is not the true combination of the safe:
		truncate the current combination of the safe to 0 entries;
		say "[We] [spin] the dial, and [the noun] [snick] locked.";
		now the safe is locked;
	otherwise:
		say "[We] [dial] [the number understood] on the safe."
		
After reading a command (this is the replace slashes with dashes rule):
	let comm be "[the player's command]";
	while comm matches the regular expression "(\d)\/(\d)":
		replace the regular expression "(\d)\/(\d)" in comm with "\1-\2";
	change the text of the player's command to comm.
		
Instead of setting the safe to the topic understood (this is the mechanism for entering the combination all at once rule):
	let X be "[the topic understood]";
	if the topic understood is a topic listed in the Table of Potential Safe Codes:
		truncate the current combination of the safe to 0 entries;
		repeat with N running from 1 to 4:
			add entry N of the true combination of the safe to the current combination of the safe;
		if the safe is locked:
			say "[We] [dial] the combination, and [the noun] [unlock] with a [i]snick[/i].";
			now the safe is unlocked;
		otherwise:
			say "[We] [dial] the combination on the safe, though [it's already] unlocked.";
	otherwise if X matches the regular expression "\D":
		say "The safe only accepts numbers[if it's Nighttime], if you remember correctly[end if].";
	otherwise:
		say say "[We] [dial] the numbers on the safe, but nothing [happen]."
		
Carry out opening the safe (this is the reset the combination upon opening the safe rule): truncate the current combination of the safe to 0 entries.
Carry out closing the safe: now the safe is locked.

Report closing the safe: say "[We] [close] [the safe], and it [snick] locked." instead.

Instead of attacking or burning or cutting the safe: say "[nnt]The safe is specifically made to withstand a beating. You doubt that course of action [if it's Daytime]will[otherwise]would[end if] get you far."
Instead of assaulting the safe with: try attacking the safe.
Instead of climbing or crouching on or lying on or sitting on or standing up on the safe: try climbing the bare walls.
Instead of crouching behind or lying behind or sitting behind or slipping behind the safe: say "[nnt]The safe is embedded in the wall. [There's] no space behind it."
Instead of drinking or eating or tasting or kissing the safe: say "[no time]You doubt the safe would taste very good."
Instead of entering the safe: say "[no time]There's no way you['][if it's Daytime]ll[otherwise]d[end if] fit[if the safe is closed]. Besides, [it's] closed[end if]."
Instead of entering underneath the safe: say "[nnt]The safe is embedded in the wall. [There's] no space underneath it."
Instead of giving something to the safe: try inserting the noun into the safe.
Instead of listening to the safe: say "[no time]The safe doesn't tend to make noise on its own."
Instead of locking the safe with: follow the combination not key rule.

Instead of locking keylessly the safe:
	if the safe is open:
		try closing the safe;
	otherwise if the safe is locked:
		say "[nt][The safe] [is already] locked.";
	otherwise:
		silently try spinning the safe to 1;
		say "[We] [spin] the safe's dial and it snicks locked."

Instead of looking behind or looking under the safe: say "[nnt]The safe is embedded in the wall. [We] [can't] see behind it."

Instead of placing something under the safe:
	if it's Daytime, try dropping the noun;
	otherwise try depositing the noun.

Instead of pulling or pushing or swinging or waving the safe: say "[nnt]The safe is embedded in the wall. [We] [can't] move it."
Instead of turning the safe: say "[nt][i][bracket]You'll need to specify which number you want to SPIN the dial of the safe TO.[close bracket][/i][line break]".
Instead of pushing the safe to: try pushing the safe.
Instead of putting something on the safe: try inserting the noun into the safe.
Instead of removing the safe from: try taking the safe.
Instead of removing something from the safe: try taking the noun.
Instead of rubbing or touching or squeezing the safe: say "Cool metal."
Instead of showing something to the safe: try inserting the noun into the safe.
Instead of smelling the safe: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of stowing something behind the safe: try inserting the noun into the safe.
Instead of switching off or switching on the safe: say "[nnt]Unfortunately, it's not an electronic lock."
Instead of taking the safe: say "[no time]The safe is embedded in the wall. [We] [can't] move it."

Instead of throwing something at the safe:
	if the safe is unlocked:
		try inserting the noun into the safe;
	otherwise:
		take no time;
		say "That[if it's Nighttime] would be[otherwise][']s[end if] unlikely to help with unlocking the safe."

Instead of typing the topic understood on the safe: follow the dial not keypad rule.
Instead of contentlessly typing the safe: follow the dial not keypad rule.
Instead of unlocking the safe with: follow the combination not key rule.

Instead of unlocking keylessly the safe:
	if the safe is locked:
		say "You'll need to spin the dial to the correct combination in order for that to happen.";
	otherwise:
		take no time;
		say "[The safe] [is already] unlocked."

This is the combination not key rule: say "[nnt]The safe has a combination, not a key."
This is the dial not keypad rule: say "[nnt]The safe[if it's Nighttime], you remember,[end if] has a dial[if it's Daytime], not[otherwise] rather than[end if] a keypad."
		
The dial is part of the safe. Understand "safe's/safes/safe dial/knob" as the dial. Understand "knob" as the dial when the location is Main-Sitting.
The description of the dial is "A circular dial embedded in the front of the safe, which can be spun to any number from 0 to 99."

After examining the dial:
	if the number of entries in the current combination of the safe > 0:
		follow the indicate combination so far rule;
	continue the action.

After starting the virtual machine (this is the redirect from dial to safe rule):
	dispatch everything but { contentlessly typing action, drinking action, eating action, examining action, kissing action, pulling action, pushing action, pushing it to action, removing it from action, rubbing action, squeezing action, swinging action, taking action, tasting action, touching action, typing it on action, waving action, remembering action } for the dial to the safe;

Before doing something when the current action involves the dial (this is the painting blocks the dial rule):
	if the painting is hung-up and the painting is visible:
		take no time;
		say "The painting [if it's Daytime]is currently[otherwise]will be[end if] hung up[if it's Nighttime] at that point[end if], concealing the safe entirely and preventing any interaction with it." instead;
	otherwise:
		continue the action.

Instead of drinking or eating or tasting or kissing the dial: say "You doubt the safe's dial would taste very good."

Instead of pulling the dial:
	if the safe is unlocked:
		if the safe is closed, try opening the safe;
		otherwise say "[no time][The safe] [is already] open.";
	otherwise:
		try opening the safe.

Instead of pushing the dial:
	if the safe is open, try closing the safe;
	otherwise try turning the dial.

Instead of pushing the dial to: try pushing the dial.
Instead of removing the dial from: try taking the dial.
Instead of remembering the dial: try remembering the safe.
Instead of removing something from the dial: try taking the noun.
Instead of rubbing or touching or squeezing the dial: say "Sturdy, cool plastic and metal."
Instead of swinging or waving the dial: try turning the dial.
Instead of taking the dial: say "[nnt][We] [lack] both the tools and the expertise required to disassemble the safe."
Instead of typing the topic understood on the dial: follow the can't type on a dial rule.
Instead of contentlessly typing the dial: follow the can't type on a dial rule.

This is the can't type on a dial rule:
	take no time;
	say "[i][bracket][We] [can't] type on a dial[unicode 8212]you'll need to SPIN it TO a number.[close bracket][/i][line break]".
		
Section 4 - Documents

Some important documents are a thing in the safe. The important documents are legible. Understand "docs" or "document" as the important documents. The bulk of the important documents is 7.
The description of the important documents is "A set of forged official documents provided to you by Brookwood, to help you establish a temporary identity in a new city.

In order to glean further information from them, [if it's Daytime]you'll[otherwise]you'd[end if] need to take a moment to READ them."

Report reading the important documents: say "The stack[if it's Nighttime], you remember,[end if] includes myriad different forged legal documents. Among them are three temporary driver's licenses, with expiration dates spaced six weeks apart; a birth certificate; the lease to the apartment, with 'your' signature forged on it dozens of times; and extensive documentation of a fictitious medical history.

On the falsified birth certificate, you see your assumed name: Vanessa DeCesare." instead.

Instead of attacking or burning or cutting the important documents:
	if it's Daytime, say "The documents are important. You don't want to destroy them.";
	otherwise say "The documents are all the evidence you have of who you claim to be. If you were to destroy them, you would risk rendering all of the work that went into this operation a waste.";
	take no time.

Instead of assaulting the important documents with: try attacking the important documents.
Instead of consulting the important documents about: try reading the important documents.

Instead of drinking or eating or tasting or kissing the important documents:
	if it's Daytime, say "The documents are important. You don't want to destroy them with your saliva.";
	otherwise say "The documents are all the evidence you have of who you claim to be. You won't be able to risk destroying them with your saliva.";
	take no time.

Instead of listening to the important documents: say "[no time]Documents are more traditionally read than listened to."
Instead of knocking on the important documents: say "The sound [if it's Daytime]isn't[otherwise]won't be[end if] very impressive."
Instead of pulling or pushing or turning the important documents: say "[nnt]It [adapt the verb make from the third person singular] little difference."
Instead of pushing the important documents to: try pushing the important documents.
Instead of rubbing or touching or squeezing the important documents: say "They're made of thick, robust paper[if it's Nighttime], if you remember[end if]."
Instead of searching the important documents: try reading the important documents.
Instead of smelling the important documents: say "They don't smell like much of anything[if it's Nighttime], as far as you know[end if]. Maybe a little like ink."
Instead of swinging or waving the important documents: follow the don't scatter the docs rule.
Instead of throwing the important documents at something: follow the don't scatter the docs rule.

This is the don't scatter the docs rule:
	take no time;
	say "The documents are important. [We] [don't] want to risk scattering or losing them."

Some temporary licenses are part of the important documents. Understand "temp" or "driver's/drivers/driving" or "license" as the temporary licenses. The temporary licenses are legible. The bulk of the temporary licenses is 0.
The description of the temporary licenses is "[if it's Daytime]They're[otherwise]You remember they're[end if] dated as expiring six weeks apart, since temp licenses only last that long and they had no idea how long you would be here."

After starting the virtual machine (this is the redirect from licenses to documents rule):
	dispatch everything but { closing action, consulting it about action, examining action, looking behind action, looking under action, opening action, reading action, removing it from action, searching action, taking action, remembering action } for the temporary licenses to the important documents;
	
Report reading the temporary licenses: say "The information on all three of them[if it's Nighttime], you remember,[end if] matches, but is entirely falsified." instead.
	
Instead of consulting the temporary licenses about: try reading the temporary licenses.
Instead of looking behind or looking under the temporary licenses: say "The documents [regarding the important documents][are] organized in a neat stack."
Instead of opening or closing the temporary licenses: say "[nnt]It [adapt the verb make from the third person singular] little difference."
Instead of removing the temporary licenses from: try taking the temporary licenses.
Instead of removing something from the temporary licenses: try taking the noun.
Instead of searching the temporary licenses: try reading the temporary licenses.
Instead of taking the temporary licenses: follow the don't separate the document stack rule.

This is the don't separate the document stack rule:
	take no time;
	say "You[if it's Nighttime] think you[end if][']d rather not separate the stack of documents."

The birth certificate is part of the important documents. The birth certificate is legible. The bulk of the birth certificate is 0.
The description of the birth certificate is "An entirely falsified Maryland birth certificate."

After starting the virtual machine (this is the redirect from birth certificate to documents rule):
	dispatch everything but { closing action, consulting it about action, examining action, looking behind action, looking under action, opening action, reading action, removing it from action, rubbing action, searching action, smelling action, squeezing action, taking action, touching action, remembering action } for the birth certificate to the important documents;

Report reading the birth certificate: say "All of the information on it[if it's Nighttime], you remember,[end if] is completely falsified[first time]. It says you were born in Frederick, Maryland[unicode 8212]you don't think you could even place that on a map[only]." instead.

Instead of consulting the birth certificate about: try reading the birth certificate.
Instead of looking behind or looking under the birth certificate: say "The documents [regarding the important documents][are] organized in a neat stack."
Instead of opening or closing the birth certificate: say "[nnt]It [adapt the verb make from the third person singular] little difference."
Instead of removing the birth certificate from: try taking the birth certificate.
Instead of removing something from the birth certificate: try taking the noun.
Instead of rubbing or touching or squeezing the birth certificate: say "It's made of thick, robust paper[if it's Nighttime], if you remember[end if]."
Instead of searching the birth certificate: try reading the birth certificate.
Instead of smelling the birth certificate: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of taking the birth certificate: follow the don't separate the document stack rule.

The lease is part of the important documents. Understand "signature" or "leasing" or "agreement" as the lease. The lease is legible. The bulk of the lease is 0.
The description of the lease is "A thick, multi-page document detailing the leasing agreement for the apartment."

After starting the virtual machine (this is the redirect from lease to documents rule):
	dispatch everything but { closing action, consulting it about action, examining action, looking behind action, looking under action, opening action, reading action, removing it from action, rubbing action, searching action, smelling action, squeezing action, taking action, touching action, remembering action } for the lease to the important documents;

Report reading the lease:
	if it's Daytime:
		say "You're too tired to read it all right now, [nobr]";
	if it's Nighttime:
		say "You won't have time to read it in the moment, [nobr]";
	say "but you have the vague sense that its stipulations would completely be screwing you over if you weren't planning on breaking it anyway." instead.

Instead of consulting the lease about: try reading the lease.
Instead of looking behind or looking under the lease: say "The documents [regarding the important documents][are] organized in a neat stack."
Instead of opening or closing the lease: say "[nnt]It [adapt the verb make from the third person singular] little difference."
Instead of removing the lease from: try taking the lease.
Instead of removing something from the lease: try taking the noun.
Instead of rubbing or touching or squeezing the lease: say "It's made of thick, robust paper[if it's Nighttime], if you remember[end if]."
Instead of searching the lease: try reading the lease.
Instead of smelling the lease: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of taking the lease: follow the don't separate the document stack rule.

The medical history is part of the important documents. Understand "documentation" or "falsified" as the medical history. The medical history is legible. The bulk of the medical history is 0.
The description of the medical history is "A falsified set of doctors['] notes and test results, going back years."

After starting the virtual machine (this is the redirect from medical history to documents rule):
	dispatch everything but { closing action, consulting it about action, examining action, looking behind action, looking under action, opening action, reading action, removing it from action, rubbing action, searching action, smelling action, squeezing action, taking action, touching action, remembering action } for the medical history to the important documents;

Report reading the medical history: say "The only things that're true [if it's Daytime]here[otherwise]in them, you remember,[end if] are your prescriptions and the fact that you've had your wisdom teeth out." instead.

Instead of consulting the medical history about: try reading the medical history.
Instead of looking behind or looking under the medical history: say "The documents [regarding the important documents][are] organized in a neat stack."
Instead of opening or closing the medical history: say "[nnt]It [adapt the verb make from the third person singular] little difference."
Instead of removing the medical history from: try taking the medical history.
Instead of removing something from the medical history: try taking the noun.
Instead of rubbing or touching or squeezing the medical history: say "It's made of thick, robust paper[if it's Nighttime], if you remember[end if]."
Instead of searching the medical history: try reading the medical history.
Instead of smelling the medical history: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of taking the medical history: follow the don't separate the document stack rule.

Some test results are part of the medical history. Understand "doctor/doctors/doctors'/doctor's note/notes" or "tests" or "result" as the test results. The bulk of the test results is 0.
Instead of examining or reading the test results: say "[if it's Daytime]It's all[otherwise]It'll all be[end if] Greek to you."

After starting the virtual machine (this is the redirect from test results to medical history rule):
	dispatch everything but { examining action, reading action, remembering action } for the test results to the medical history;

Chapter 7 - Stack of moving boxes

Section 1 - The stack

A stack of moving boxes is a container in Main-Sitting. "[A stack of moving boxes][first time], their contents as-of-yet unloaded,[only] [languish] in one corner." It is eclipsing, bulky, fixed in place, closed, and openable. Understand "box" or "top one/box" as the stack of moving boxes. The bulk-capacity of the stack of moving boxes is 20.
Understand "top" as the stack of moving boxes when the location is Main-Sitting.
The description of the stack of moving boxes is "The[first time] intimidatingly-large[only] set of boxes whose contents you didn't get to today. Better luck tomorrow, kid. [if it's Daytime]Currently, the[otherwise]The[end if] top one [if it's Daytime]stands[otherwise]will be[end if] [openness of the stack of moving boxes][if it's Nighttime] by that point[end if]."

Does the player mean doing something to the stack of moving boxes:
	if the location is Main-Sitting, it is possible;
	it is unlikely.

Rule for printing the name of the stack of moving boxes while examining or searching:
	if the location is Main-Sitting, say "the top box of the stack";
	otherwise say "stack of moving boxes".

Instead of remembering the stack of moving boxes: say "The boxes, you expect, [adapt the verb remain from the third person plural] right where you abandoned them in the sitting area."
	
Report an actor opening the stack of moving boxes (this is the customized reveal interior of the stack of boxes rule):
	if the actor is the player:
		if the action is not silent:
			say "[We] [open] the top box of the stack, revealing [nobr]" (A);
			list the contents of the stack of moving boxes, as a sentence, tersely, not listing concealed items;
			say "." instead;
	otherwise if the player can see the actor:
		say "[The actor] [open] the top box of the the stack of moving boxes." (B) instead.
	
The customized reveal interior of the stack of boxes rule is listed before the the reveal any newly visible interior rule in the report opening rules.
	
Report an actor closing the stack of moving boxes (this is the customized report closing the stack of boxes rule):
	if the actor is the player:
		if the action is not silent:
			say "[We] [close] the top box of the stack." (A) instead;
	otherwise if the player can see the actor:
		say "[The actor] [close] the top box of the the stack of moving boxes." (B) instead.

Instead of attacking or burning or cutting the stack of moving boxes:
	if it's Daytime, say "You have no reason to destroy the moving boxes[unicode 8212]not until you've emptied them, at least.";
	otherwise say "[nt]You see no way that destroying the moving boxes would help in that situation."

Instead of assaulting the stack of moving boxes with: try attacking the stack of moving boxes.
Instead of climbing or crouching on or entering or lying on or sitting on or standing up on the stack of moving boxes: say "[no time]You're not confident [if it's Daytime]enough that they'll[otherwise]they'd[end if] hold your weight."
Instead of drinking or eating or tasting or kissing the stack of moving boxes: say "[nnt]You doubt the cardboard would taste very good."

Instead of emptying the stack of moving boxes:
	if it's Daytime, say "You've already decided that's a task too big for today. Better to get your rest and tackle it tomorrow.";
	otherwise say "You doubt unpacking will be your top priority, under the circumstances.";
	take no time.

Instead of giving something to the stack of moving boxes: try inserting the noun into the stack of moving boxes.

Instead of looking under the stack of moving boxes:
	if it's Daytime, say "You stacked them yourself and know that there's only floor underneath. It would be too much work to move them and check.";
	otherwise say "You know for a fact you would only find the floor underneath, and suspect double checking would be a waste of time under the circumstances.";
	take no time.

Instead of placing something under the stack of moving boxes: try inserting the noun into the stack of moving boxes.
Instead of entering underneath the stack of moving boxes: say "[no time]The stack [if it's Daytime]is[otherwise]would be[end if] too heavy to move all at once."
Instead of pushing the stack of moving boxes to: try pushing the stack of moving boxes.
Instead of putting something on the stack of moving boxes: try inserting the noun into the stack of moving boxes.
Instead of removing something from the stack of moving boxes: try taking the noun.
Instead of rubbing or touching or squeezing the stack of moving boxes: say "Rough corrugated cardboard."
Instead of showing something to the stack of moving boxes: try inserting the noun into the stack of moving boxes.
Instead of smelling the stack of moving boxes: say "[if it's Daytime]They[otherwise]You know they[end if] smell like the inside of a moving truck."
Instead of pulling or pushing or turning or taking the stack of moving boxes for the first time: say "[no time]The stack [if it's Daytime]is[otherwise]would be[end if] too heavy to carry all at once."

Instead of pulling or pushing or turning or taking the stack of moving boxes:
	take no time;
	if it's Daytime, say "If you never see another moving box in your lifetime, you'll die happy. These can wait for tomorrow.";
	otherwise say "The stack would be too heavy to move at once, and each individual box would be cumbersome enough to slow you down."

Instead of throwing something at the stack of moving boxes: say "[no time]Once you identify the impulse, [we] [find] you have no reason to actually follow through."

Some plural-boxes are privately-named scenery. They are part of the stack of moving boxes.

After starting the virtual machine (this is the pluralize the stack of moving boxes rule):
	dispatch everything but {  } for the plural-boxes to the stack of moving boxes;
	
Before doing something when the current action involves the stack of moving boxes (this is the set plural pronouns for the stack of moving boxes rule):
	set pronouns from the stack of moving boxes;
	set pronouns from the plural-boxes;

Section 2 - Inside

The box-junk is junk in the stack of moving boxes.

Does the player mean doing something to the box-junk:
	if the location is not Main-Sitting, it is very unlikely;
	it is possible.

The radio is a switched off device in the stack of moving boxes. The bulk of the radio is 5. The radio is incapacitating and electronic.
The description of the radio is "An old, beat-up looking radio. You loved it as a kid, so your father let you claim it when you moved out.

[if it's Daytime]It seems to be[otherwise]If you remember right, it's[end if] only capable of tuning to whole-number stations[unicode 8212]it can find 100 or 101, but not 100.5."
The radio can be shattered or intact. The radio is intact. Understand the shattered property as describing the radio.
The radio has a number called the current station. The current station of the radio is 98.
The radio has some text called the output. The output of the radio is "[only-static]".

To say only-static: say "The radio [if it's Daytime][one of]emits[or][emits][stopping][otherwise]will be [one of]emitting[or][emitting][stopping][end if] [one of]only [or][if a random chance of 1 in 3 succeeds]only [end if][stopping]static."

To say emits: say "[one of]emits[or]plays[or]produces[as decreasingly likely outcomes]".
To say emitting: say "[one of]emitting[or]playing[or]producing[as decreasingly likely outcomes]".

Definition: the radio is listenable:
	if the radio is switched on:
		if the radio is enclosed by the location, decide yes;
		if the radio is enclosed by a room adjacent to the location, decide yes;
		decide no;
	decide no.

Carry out an actor switching on the radio:
	now the radio is noisemaking;
	if intruder-inside is true and the annoyance is nothing:
		now the annoyance is the radio;
	increase the ambient noise of the location of the radio.

Carry out an actor switching off the radio:
	now the radio is soundless;
	if the annoyance is the radio:
		now the annoyance is nothing;
	decrease the ambient noise of the location of the radio.

This is the radio makes noise rule:
	if the radio is switched on and radio-listened is false:
		if the radio is listenable:
			say the output of the radio;
		otherwise:
			if the output of the radio is "[only-static]":
				say "[We] [hear], faintly, the radio [emitting] static.";
			otherwise:
				say "[We] [hear] indistinct noise [one of]coming from[or]emitting from[or]playing on[as decreasingly likely outcomes] the radio."

The radio makes noise rule is listed before the make atmosphere happen rule in the every turn rules.

Carry out an actor going (this is the moving changes which room the radio makes noise in rule):
	if the actor encloses the radio and the radio is switched on:
		decrease the ambient noise of the room gone from;
		increase the ambient noise of the room gone to;
		now the actor is being noisy.
		
Check setting the radio to the topic understood (this is the can only set the radio to numbers rule):
	if the topic understood matches the regular expression "\D":
		take no time;
		say "You[if it's Daytime] can only[otherwise][']ll only be able to[end if] tune the radio to numbered stations." (A) instead.
		
Check setting the radio numerically to (this is the can't switch to the current channel rule):
	if the number understood is the current station of the radio:
		take no time;
		say "[The radio] [is already] tuned to [the number understood]." instead.
		
Check setting the radio numerically to the number understood (this is the most stations are static rule):
	unless the number understood is a station listed in the Table of Radio Stations:
		now the current station of the radio is the number understood;
		now the output of the radio is "[only-static]";
		if it's Daytime and the radio is switched on:
			say "There doesn't appear to be a station at that frequency." (A) instead;
		otherwise:
			say "As far as you know, there's no station at that frequency[if the radio is switched off]. No way to tell for sure, with the radio off[end if]." (B) instead. 
			
Carry out setting the radio numerically to (this is the standard setting the radio to rule):
	now the current station of the radio is the number understood;
	choose row with a station of the number understood in the Table of Radio Stations;
	if the radio is switched on:
		say "[The radio] [switch] to [announcement entry][br]";
	otherwise:
		say "[We] [tune] the radio to [the number understood]."
		
Table of Radio Stations
station	announcement
1	"[muzak-announcement]"
25	"a classic rock station."
50	"a hip-hop station."
69	"[preach-announcement]"
75	"a pop station."
100	"a news channel."
420	"[public-announcement]"
666	"a heavy metal station."
777	"a numbers station."

Carry out setting the radio numerically to 1 (this is the setting the radio to 1 rule): now the output of the radio is "[muzak-content]".
Instead of listening to the radio when the radio is switched on and the current station of the radio is 1: say muzak-content.

To say muzak-content: say "[one of]Music that [regarding the radio][sound] like a bossa nova run through three different cassette tapes[or]Some entirely forgettable muzak[or]Elevator music[or]Piped music[or]Classical music, sounding extremely degraded,[or]Music that [we] [can't] believe anyone would listen to voluntarily[in random order] [regarding the radio][play]."
To say muzak-announcement: say "a[one of] muzak[or] 'beautiful music'[or] BM/EZ[or]n easy listening[at random] station. ".

Carry out setting the radio numerically to 25 (this is the setting the radio to 25 rule): now the output of the radio is "[classic-content]".
Instead of listening to the radio when the radio is switched on and the current station of the radio is 25: say classic-content.

To say classic-content:
	if a random chance of 1 in 10 succeeds:
		say "[one of]A station identification tag[or]A station ID sound byte[at random] [regarding the radio][play], claiming [if it's Daytime]this[otherwise]the[end if] station [have] 'all the hits of yesteryear.'";
	otherwise:
		say "[one of]A guitarist [regarding the radio][play] an absolutely sick riff[or]A song [regarding the radio][begin] with a driving bass line[or]A song your dad loves [regarding the radio][begin] to play[or]Light guitars [adapt the verb give from the third person plural] way to heavy guitars[or]A piano-driven ballad [regarding the radio][play][or]A song from your childhood [regarding the radio][play][or]An ad [regarding the radio][play][in random order]."

Carry out setting the radio numerically to 50 (this is the setting the radio to 50 rule): now the output of the radio is "[hiphop-content]".		
Instead of listening to the radio when the radio is switched on and the current station of the radio is 50: say hiphop-content.

To say hiphop-content:
	if a random chance of 1 in 10 succeeds:
		say "[one of]A station identification tag[or]A station ID sound byte[at random] [regarding the radio][play], claiming [if it's Daytime]this[otherwise]the[end if] station [have] 'the soundtrack for your lifestyle.'";
	otherwise:
		say "[one of]A man [regarding the radio][rap] over [beatdesc] beat[or]A woman [regarding the radio][rap] over [beatdesc] beat[or]An artist [regarding the radio][rap] over [beatdesc] beat[or]A DJ [regarding the radio][discuss] some controversy surrounding a recent single[or]A DJ [regarding the radio][report] about a recent local story[or]An RnB-infused track [regarding the radio][play][or]A recent mega-hit [regarding the radio][play][or]An ad [regarding the radio][play][in random order]."
To say beatdesc: say "[one of]a retro[or]a bass-heavy[or]a hard-hitting[or]an 808[or]a sampled[or]a disco-infused[or]a funky[or]a minimal[or]an understated[or]an in-your-face[or]an infectious[at random]".

Carry out setting the radio numerically to 69 (this is the setting the radio to 69 rule): now the output of the radio is "[preach-content]".
Instead of listening to the radio when the radio is switched on and the current station of the radio is 69: say preach-content.

To say preach-content:	
	if a random chance of 5 in 6 succeeds:
		say "A man [if it's Daytime]preaches[else]will be preaching[end if] [one of]fire and brimstone[or]with passion and fervor[or][if it's Nighttime]and railing [end if]against sin[or]the virtue of generosity[or]to cheers and applause[in random order].";
	otherwise:
		say "An ad [regarding the radio][play]."
To say preach-announcement: say "what [regarding the radio][sound] like a broadcasted sermon. ".

Carry out setting the radio numerically to 75 (this is the setting the radio to 75 rule): now the output of the radio is "[pop-content]".
Instead of listening to the radio when the radio is switched on and the current station of the radio is 75: say pop-content.

To say pop-content:
	if a random chance of 1 in 10 succeeds:
		say "[one of]A station identification tag[or]A station ID sound byte[at random] [regarding the radio][play], claiming [if it's Daytime]this[otherwise]the[end if] station [have] 'today's top hits.'";
	otherwise:
		say "[one of]A woman with a silky voice [regarding the radio][sing] an absolute earworm of a hook[or]A recent mega-hit [regarding the radio][play][or]A song from an up-and-coming artist [regarding the radio][play][or]A DJ [regarding the radio][discuss] an anticipated upcoming release[or]A DJ [regarding the radio][discuss] some controversy surrounding a recent release[or]An ad [regarding the radio][play][in random order]."
		
Carry out setting the radio numerically to 100 (this is the setting the radio to 100 rule): now the output of the radio is "[news-content]".
Instead of listening to the radio when the radio is switched on and the current station of the radio is 100: say news-content.

To say news-content:
	if a random chance of 1 in 10 succeeds:
		say "[one of]A station identification tag[or]A station ID sound byte[at random] [regarding the radio][play], claiming [if it's Daytime]this[otherwise]the[end if] station [have] 'up-to-the-minute news updates.'";
	otherwise:
		say "[one of]The news [regarding the radio][are] playing[or][A reporter] [regarding the radio][describe] a horrific crime in a dispassionate voice[or][A reporter] [regarding the radio][report] the weather[or][A reporter] [regarding the radio][discuss] a local interest story in a cheery voice[or][A reporter] [regarding the radio][do] a sports round up[or][A reporter] [regarding the radio][list] [if it's Daytime]today's[otherwise]the day's[end if] birthdays[or][A reporter] [regarding the radio][recap] stories from earlier in the [if it's Daytime]day[otherwise]night[end if][or]An ad [regarding the radio][play][in random order]."

To say A reporter: say "A [one of]man[or]woman[or]person[or]reporter[at random]".

Carry out setting the radio numerically to 420 (this is the setting the radio to 420 rule): now the output of the radio is "[public-content]".
Instead of listening to the radio when the radio is switched on and the current station of the radio is 420: say public-content.

To say public-content:
	if a random chance of 1 in 10 succeeds:
		say say "[one of]A station identification tag[or]A station ID sound byte[at random] [regarding the radio][play], announcing [if it's Daytime]this[otherwise]the[end if] station as your local public radio station.";
	otherwise:
		say "[one of]A man with a dry voice [regarding the radio][drone] about a public figure [if it's Daytime]you've never heard of[otherwise]you'll never have heard of[end if][or][A reporter] [regarding the radio][tell] what [sound] like a long-winded personal anecdote[or][A reporter] [regarding the radio][do] an interview with [a public figure][in random order]."
To say public-announcement: say "a public radio station. ".

To say a public figure: say "[one of]a public figure[or]a musician[or]a film director[or]an actor[or]an author[or]a playwright[in random order]".

Carry out setting the radio numerically to 666 (this is the setting the radio to 666 rule): now the output of the radio is "[metal-content]".
Instead of listening to the radio when the radio is switched on and the current station of the radio is 666: say metal-content.

To say metal-content:
	if a random chance of 1 in 10 succeeds:
		say "[one of]A station identification tag[or]A station ID sound byte[at random] [regarding the radio][play], claiming [if it's Daytime]this[otherwise]the[end if] station [have] 'only the hardest of the hard.'";
	otherwise:
		say "[one of]Distorted, heavy guitars[or]A vocalist [regarding the radio][scream][or]A vocalist [regarding the radio][growl][or]A vocalist [regarding the radio][sing] a clean, soaring melody[or]A DJ [regarding the radio][discuss] several bands with grisly names[or]A bassist [regarding the radio][play] a virtuosic line[or]Fast, chaotic drums[or]An ad [regarding the radio][play][in random order]."

Carry out setting the radio numerically to 777 (this is the setting the radio to 777 rule): now the output of the radio is "[numbers-content]".
Instead of listening to the radio when the radio is switched on and the current station of the radio is 777: say numbers-content.

To say numbers-content:
	say "A monotone voice [regarding the radio][drone] on, reciting numbers seemingly at random: '[radio-numbers]...'";

To say radio-numbers:
	repeat with X running from 1 to 4:
		let Y be a random number between 1 and 200;
		if X < 4:
			say "[Y in words], ";
		otherwise:
			say "[Y in words]".
			
Check incapacitating the intruder with the radio (this is the shattered radio no longer incapacitates rule):
	if the radio is shattered, say "The radio won't make a very good weapon after it's been shattered." (A) instead.

Instead of attacking or burning or cutting the radio:
	if it's Daytime, say "[We] [have] no reason to destroy the radio.";
	otherwise say "[nt]You see no way that the act of destroying the radio alone would help in that situation. If you could SMASH it as a noisy distraction, however..."

Instead of assaulting the radio with: try attacking the radio.
Instead of assaulting something with the radio: try throwing the radio at the noun.
Instead of crouching behind or entering underneath or lying behind or sitting behind or slipping behind the radio: say "[no time][The radio] [aren't] substantial enough to effectively conceal you."
Instead of drinking or eating or tasting or kissing the radio: say "[no time]You doubt the radio would taste very good."

radio-listened is a truth state that varies. radio-listened is false.
First before doing something: now radio-listened is false.

Instead of listening to the radio:
	if the radio is switched off:
		say "[The radio] [aren't] [if it's Daytime]currently [end if]making any noise[if it's Nighttime] by that point[end if].";
	otherwise:
		now radio-listened is true;
		say the output of the radio.

Instead of looking behind the radio: follow the nothing behind the radio rule.
Instead of looking under the radio: follow the nothing under the radio rule.
Instead of opening the radio: say "[nnt][We] [lack] [unless the player carries the screwdriver]both the tools and [end unless]the expertise to understand anything you might find inside."
Instead of placing something under the radio: follow the nothing under the radio rule.
Instead of pulling or pushing the radio: say "[nnt]It [adapt the verb make from the third person singular] little difference."
Instead of pushing the radio to: try pushing the radio.

Instead of rebooting the radio:
	if the radio is switched off:
		try switching on the radio;
	otherwise:
		silently try switching off the radio;
		silently try switching on the radio;
		say "[We] [switch] the radio off and back on again."

Instead of rubbing or touching or squeezing the radio: say "Worn plastic."
Instead of searching the radio: say "[no time][The radio] [aren't] substantial enough to effectively conceal much of anything."
Instead of smelling the radio: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of stowing something behind the radio: follow the nothing behind the radio rule.
Instead of waving the radio: try swinging the radio.

Check throwing the radio at something:
	unless the second noun is the intruder, say "[nt]Once you identify the impulse, [we] [find] you have no reason to actually follow through." instead.
	
Instead of turning the radio: say "[i][bracket]You'll have to specify which station you want to tune it to.[close bracket][/i][br]".
	
This is the nothing behind the radio rule:
	take no time;
	say "[The radio] [aren't] substantial enough to effectively conceal much of anything behind itself."

This is the nothing under the radio rule:
	take no time;
	say "[The radio] [aren't] substantial enough to effectively conceal much of anything underneath itself."
	
Some radio-shards are a shards-pile. The radio-shards are the remnant of the radio. The printed name of the radio-shards is "radio shards". Understand "inner/-- bits" as the radio-shards.
The description of the radio-shards is "All that [adapt the verb remain from the third person singular] of the radio is a pile of its inner bits."

Instead of dropping the radio during Nighttime:
	move the radio to the location;
	try smashing the radio.
	
Check throwing the radio at:
	unless the second noun is the intruder:
		now potentially-ranged is true;
		now the item smashed with is the second noun;
		move the radio to the location of the second noun;
		try smashing the radio instead.
		
Rule for reaching inside a room while smashing the radio:
	if potentially-ranged is true, allow access.
	
Smashing the radio is noisy behavior.
	
Carry out smashing the radio:
	move the radio-shards to the location of the radio;
	remove the radio from play.
	
Report smashing the radio:
	if potentially-ranged is true:
		say "[We] [hurl] the radio at [the item smashed with], causing it to shatter against [regarding the item smashed with][them] in a shower of electronic bits[if the radio is switched on]. The noise emitting from it [abruptly ceases][end if].";
	otherwise:
		say "[We] [hurl] the vase at the ground, causing it to shatter in a shower of electronic bits[if the radio is switched on]. The noise emitting from it [abruptly ceases][end if]."
		
To say abruptly ceases: say "[if it's Daytime]abruptly ceases[otherwise]will abruptly cease[end if]".
	
Check incapacitating the intruder with the radio-shards (this is the radio shards no longer incapacitate rule):
	say "The radio won't make a very good weapon after it's been shattered." (A) instead.

Section 3 - Behind

Behind#boxes is a backside. Behind#boxes is part of the stack of moving boxes. Behind#boxes is enterable and open. Behind#boxes allows seated, crouched, and reclining. Behind#boxes is crouched.

Before slipping behind the stack of moving boxes (this is the can't slip behind the boxes twice rule):
	if the player is in behind#boxes:
		say "[if it's Daytime]You're already[otherwise]You'll already be[end if] there!" instead.

The adjust light rule does nothing when the holder of the player is behind#boxes.

Chapter 7 - Rug

The area rug is a rug in Main-Sitting. Understand "bland/green" as the area rug.
The description of the area rug is "A bland green area rug. It was here before you."

Instead of remembering the area rug: say "You expect [if it's Daytime]that's still[otherwise]it'll still be[end if] in the sitting area."

Part 7 - Behind the bookshelf

Main-Behind-Shelf is west of Main-Bed and south of Main-Sitting. "[if it's Daytime]This is a[otherwise]You'll be in the[end if] small corridor between [one of]a[or]the[stopping] bookshelf and the outside wall. [windows-desc]."
Understand "behind the/-- shelf/bookshelf/shelves" or "back/backside of the/-- shelf/bookshelf/shelves" as Main-Behind-Shelf.
The printed name of Main-Behind-Shelf is "Main Room[if the holder of the player is the location] [roman type](behind the bookshelf)".
The relative direction set of Main-Behind-Shelf is the Table of Shelf-Obscured Direction Descriptors.
The casual descriptor of Main-Behind-Shelf is "the back side of the bookshelf".
For saying the location name of Main-Behind-Shelf: say "in the area behind the bookshelf".
The prepositional entrance descriptor of Main-Behind-Shelf is "[if the location is Main-Behind-Shelf or the location is connected with Main-Behind-Shelf]into the area [end if]behind the bookshelf".
The prepositional exit descriptor of Main-Behind-Shelf is "out from behind the bookshelf".

To say windows-desc:
	if the windows are intact:
		say "[if it's Daytime]W[otherwise]The w[end if]indows [adapt the verb allow from the third person plural] [if it's Daytime]orange and red sunset-light[otherwise]cold, clinical moonlight[end if] to [one of]rake over[or]dance on[or]flood across[at random] the floor";
	otherwise:
		say "The [windows] [are] shattered, allowing the wind and the noise of the street in. [if it's Daytime]Orange and red sunset-light[otherwise]Cold, clinical moonlight[end if] [one of][if it's Daytime]rakes[otherwise]will rake[end if] over[or][if it's Daytime]dances[otherwise]will dance[end if] on[or][if it's Daytime]floods[otherwise]will flood[end if] across[at random] the floor".

For announcing notable exits of Main-Behind-Shelf:
	say "[We] [can] go [if the previous location is Main-Bed]back [end if][b]east[/b] to the bedroom area, or [if the previous location is Main-Sitting]back [end if][b]north[/b] to the sitting room area. [if the time of day is 9:00 AM][nobr][otherwise][/p]".
	
Instead of examining Main-Behind-Shelf when the location is not Main-Behind-Shelf:
	say "A small corridor between the bookshelf and the outside wall. [windows-desc].";
	describe locale for Main-Behind-Shelf;
	if the number of locale-supportable things in Main-Behind-Shelf > 0:
		say "[We] [if it's Daytime]can also see[otherwise]will also be able to see[end if] [a list of locale-supportable things in Main-Behind-Shelf]."
	
Instead of examining east when the location is Main-Behind-Shelf: try examining Main-Bed.
Instead of examining north when the location is Main-Behind-Shelf: try examining Main-Sitting.
Instead of examining west when the location is Main-Behind-Shelf: say "[nnt][There's] a wall in that direction."
Instead of examining south when the location is Main-Behind-Shelf: say "[nnt][There's] a wall in that direction, albeit with some windows in it."

Instead of listening to Main-Behind-Shelf:
	if the radio is listenable:
		try listening to the radio;
	otherwise if it's Daytime:
		if the dishwasher-switch is switched on:
			say "From the kitchenette, you hear the dishwasher going. From here, you can also hear the noise of the street below.";
		otherwise if the kitchen faucet is switched on:
			say "From the kitchenette, you hear a faucet running. From here, you can also hear the noise of the street below.";
		otherwise if the laptop-computer is switched on and the laptop-computer is in the location:
			say "You hear the computer's fan whirring slightly. From here, you can also hear the noise of the street below.";
		otherwise:
			say "From here, you can hear the noise of the street below.";
	otherwise:
		now player-listening is true.

Instead of smelling Main-Behind-Shelf: follow the smelling rooms rule.

Table of Shelf-Obscured Direction Descriptors
other place	descriptor
Bathroom	"somewhere near the entryway"
Entryway	"somewhere near the entryway"
Kitchenette	"somewhere near the entryway"
Main-Bed	"in the bedroom area"
Main-By-Counter	"somewhere near the entryway"
Main-Office	"on the other side of the bookshelf"
Main-Sitting	"right on the other side of the bookshelf"
Outside Hall	"somewhere near the entryway"
Within-Closet	"somewhere near the entryway"

behind-the-bookshelf is a position in Main-Behind-Shelf.

Chapter 1 - Bookshelf

Section 1 - The whole apparatus

The bookshelf is a scenery backdrop. The bookshelf is in Main-Sitting and Main-Behind-Shelf.
The description of the bookshelf is "A tall bookshelf with no back, so that its contents are accessible from both sides[if the location is Main-Behind-Shelf] (even if you've set them up to look better from the far side)[end if]."

Instead of remembering the bookshelf: say "[The noun] borders the sitting area, and has a small hall-like space behind it."

Carry out examining the bookshelf (this is the shelves make up the bookshelf rule): try searching the shelves.

The shelves make up the bookshelf rule is listed after the standard examining rule in the carry out examining rules.

Before emptying or giving or inserting or placing or putting or removing or searching or showing when the current action involves the bookshelf (this is the redirect from bookshelf to shelves rule):
	if the bookshelf is the noun, now the noun is the shelves;
	if the bookshelf is the second noun, now the second noun is the shelves;
	try the current action instead.
	
After deciding the scope of the player while looking behind: if the location is Main-Bed, place the bookshelf in scope.
	
Before looking behind the bookshelf when the location is Main-Bed: try examining Main-Behind-Shelf instead.

Instead of attacking or burning or cutting the bookshelf:
	if it's Daytime, say "You have no reason to destroy the bookshelf.";
	otherwise say "[nt]You see no way that destroying the bookshelf would help in that situation."

Instead of assaulting the bookshelf with: try attacking the bookshelf.
Instead of climbing or crouching on or entering or lying on or sitting on or standing up on the bookshelf: say "[no time]You don't think the bookshelf [if it's Daytime]will[otherwise]would[end if] hold your weight, and [if it's Daytime]you're not[otherwise]you don't think you'd be[end if] particularly interested in testing its load limit[if it's Nighttime], under the circumstances[end if]."

Instead of crouching behind the bookshelf:
	if the location is either Main-Sitting or Main-Bed:
		let the way be the best route from the location to Main-Behind-Shelf;
		silently try going the way;
	silently try taking position crouched;
	say "[We] [crouch] down behind the bookshelf."

Instead of drinking or eating or tasting or kissing the bookshelf: say "[no time]You doubt the bookshelf would taste very good."
Instead of entering underneath the bookshelf: say "[nnt]The bookshelf is flush with the ground. [We] [can't] fit underneath."
Instead of listening to the bookshelf: say "[no time]The bookshelf doesn't tend to make much noise on its own."

Instead of looking behind the bookshelf:
	if the location is Main-Behind-Shelf:
		try examining Main-Sitting;
	otherwise if the location is either Main-Sitting or Main-Bed:
		try examining Main-Behind-Shelf;
	otherwise:
		take no time;
		say "[We] [can't] see behind the bookshelf from [if it's Daytime]this[otherwise]that[end if] angle."

Instead of looking under the bookshelf: say "[nnt][if it's Daytime]The[otherwise]You remember the[end if] bottom of the bookshelf [if it's Daytime]is[otherwise]being[end if] flush with the ground. [We] [can't] see underneath."

Instead of lying behind the bookshelf:
	if the location is either Main-Sitting or Main-Bed:
		let the way be the best route from the location to Main-Behind-Shelf;
		silently try going the way;
	silently try taking position reclining;
	say "[We] [lie] down behind the bookshelf."

Instead of opening or closing the bookshelf: say "[nnt]The bookshelf doesn't have any doors."
Instead of pulling or pushing or turning the bookshelf: say "[nnt]The bookshelf was already in place when you arrived. [It's] far too heavy for you to move on your own."
Instead of pushing the bookshelf to: try pushing the bookshelf.
Instead of removing something from the bookshelf: try removing the noun from the shelves.
Instead of rubbing or touching or squeezing the bookshelf: say "Smooth wood."

Instead of sitting behind the bookshelf:
	if the location is either Main-Sitting or Main-Bed:
		let the way be the best route from the location to Main-Behind-Shelf;
		silently try going the way;
	silently try taking position seated;
	say "[We] [sit] down behind the bookshelf."

Instead of slipping behind the bookshelf:
	if the location is Main-Behind-Shelf:
		take no time;
		say "[You're already] behind the bookshelf.";
	otherwise if the location is either Main-Sitting or Main-Bed:
		let the way be the best route from the location to Main-Behind-Shelf;
		try going the way.

Instead of smelling the bookshelf: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."

Instead of stowing something behind the bookshelf:
	if the location is Main-Behind-Shelf:
		if it's Daytime:
			try dropping the noun;
		otherwise:
			try depositing the noun;
	otherwise:
		try inserting the noun into Main-Behind-Shelf.

Instead of swinging or waving or taking the bookshelf: say "[nnt]The bookshelf was already in place when you arrived. [It's] far too heavy for you to lift on your own."
Instead of throwing something at the bookshelf:
	if the shelves are touchable, try putting the noun on the shelves;
	otherwise say "[no time]Once you identify the impulse, [we] [find] you have no reason to actually follow through."

Instead of tying something to the bookshelf: say "[no time]You doubt that would be a productive course of action."

Check searching the bookshelf during Nighttime:
	if the location is Main-Behind-Shelf:
		try examining north instead;
	otherwise if the location is Main-Sitting:
		try examining south instead.
		
After reading a command:
	if the player's command includes "from bookshelf":
		replace the matched text with "from shelves".

Section 2 - The shelves

Some shelves are a supporter. They are part of the bookshelf. Understand "shelf" as the shelves.
The description of the shelves is "The shelves themselves, made of good smooth wood."

To decide whether the shelves are default-state:
	repeat with obj running through things on the shelves:
		if the default location of obj is not the shelves, decide no;
	decide yes.

A description-concealing rule (this is the don't need to be informed of knicknacks on the shelves rule):
	if the shelves are default-state:
		repeat with obj running through things enclosed by the shelves:
			now obj is not marked for listing.

Before climbing or crouching on or entering or lying on or sitting on or standing up on or crouching behind or entering underneath or looking behind or lying behind or opening or closing or pulling or pushing or turning or sitting behind or slipping behind or stowing behind or taking or tying when the current action involves the shelves (this is the redirect from shelves to bookshelf rule):
	if the shelves are the noun, now the noun is the bookshelf;
	if the shelves are the second noun, now the second noun is the bookshelf;
	try the current action instead.

Instead of attacking or cutting or burning the shelves: try attacking the bookshelf.
Instead of assaulting the shelves with: try attacking the shelves.
Instead of drinking or eating or tasting or kissing the shelves: say "[no time]You doubt the bookshelf would taste very good."
Instead of giving something to the shelves: try putting the noun on the shelves.
Instead of inserting something into the shelves: try putting the noun on the shelves.
Instead of looking under the shelves: try looking behind the bookshelf.
Instead of placing something under the shelves: try putting the noun on the shelves.
Instead of pushing the shelves to: try pushing the shelves.
Instead of remembering the shelves: try remembering the bookshelf.
Instead of removing something from the shelves: try taking the noun.
Instead of rubbing or touching or squeezing the shelves: say "Smooth, aged wood."
Instead of showing something to the shelves: try putting the noun on the shelves.
Instead of smelling the shelves: say "They don't smell like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of throwing something at the shelves: try putting the noun on the shelves.

After reading a command (this is the allow taking multiple books rule):
	if the player's command includes "take" or the player's command includes "get" or the player's command includes "pick":
		if the player's command includes "books":
			if the number of touchable books not carried by the player > 0:
				repeat with obj running through touchable books not carried by the player:
					silently try taking obj;
					if the player carries obj:
						say "[obj]: Taken.";
				stop the action.
[NOTE: Slightly hacky, but it's a workaround for a fairly nasty bug involving taking plural objects from a supporter that's in two places at once by virtue of being part of a backdrop]

Check searching the shelves during Nighttime:
	if the location is Main-Behind-Shelf:
		try examining north instead;
	otherwise if the location is Main-Sitting:
		try examining south instead.

Section 3 - Things on the shelves

Crime-and-punishment is a book on the shelves. The printed name of crime-and-punishment is "[i]Crime and Punishment[/i]". Understand "crime" or "punishment" or "crime and/n/& punishment" or "Fyodor" or "Dostoevsky/Dostoyevsky" as crime-and-punishment.
The description of crime-and-punishment is "You're still in the middle of reading it[unicode 8212]somehow, it was never assigned to you in high school."
Dropping crime-and-punishment is noisy behavior.

Instead of reading crime-and-punishment:
	if it's Daytime:
		say "You're [not in the mood].";
	otherwise:
		say "You doubt you'll have time for a reading break, under the circumstances.";
	take no time.
		
To say not in the mood: say "[one of]not really in the mood to read right now. You just want to get to bed[or]too exhausted to read right now[stopping]".

Instead of assaulting something with crime-and-punishment:
	if the noun is the intruder, say "You doubt a book, even one as substantial as [Crime-and-punishment], would make for an effective weapon against this guy.";
	otherwise say "Given the themes present in [Crime-and-punishment], the irony would be a bit too thick for your taste.";
	take no time.
	
First report dropping crime-and-punishment:
	say "[We] [drop] [the noun], causing it to make a loud noise on impact with the floor." instead.

A book called Through the Looking-Glass is on the shelves. The printed name of Through the Looking-Glass is "[i]Through the Looking-Glass[/i]". Understand "looking glass" or "alice/alices/alice's" or "wonderland" or "alice in wonderland" or "adventures" or "adventures in wonderland" or "lewis" or "carroll" as Through the Looking-Glass.
The description of Through the Looking-Glass is "You've had [if it's Daytime]this copy[otherwise]it[end if] since childhood. You've taken care to keep it in good shape, but a little wear-and-tear is unavoidable."
Dropping Through the Looking-Glass is noisy behavior.

Instead of reading Through the Looking-Glass:
	if it's Daytime:
		say "You're [not in the mood].";
	otherwise:
		say "You doubt you'll have time for a reading break, under the circumstances.";
	take no time.
	
First report dropping Through the Looking-Glass:
	say "[We] [drop] [the noun], causing it to make a loud noise on impact with the floor." instead.

Wuthering Heights is a book on the shelves. The printed name of Wuthering Heights is "[i]Wuthering Heights[/i]". Understand "charlotte" or "bronte/bront" as Wuthering Heights.
The description of Wuthering Heights is "Your all-time favorite book, ever since you read it in high school. This copy is quite beat up."
Dropping Wuthering Heights is noisy behavior.

Instead of reading Wuthering Heights:
	if it's Daytime:
		say "As much as you love the book, you're [not in the mood].";
	otherwise:
		say "You doubt you'll have time for a reading break, under the circumstances.";
	take no time.
	
First report dropping Wuthering Heights:
	say "[We] [drop] [the noun], causing it to make a loud noise on impact with the floor." instead.

A bookend is on the shelves. Understand "bookends"  or "book end/ends" or "book-end" or "book-ends" as the bookend.
The description of the bookend is "You [if it's Nighttime]remember that you [end if]only have the one[unicode 8212]its twin must have gotten lost in the move."
Dropping the bookend is noisy behavior.

First report dropping the bookend:
	say "[We] [drop] bookend, causing it to make a loud[if a random chance of 1 in 4 succeeds] clattering[end if] impact against the floor." instead.

Instead of attacking or burning or cutting the bookend:
	if it's Daytime, say "You have no reason to destroy the bookend, even if it's likely to be orphaned forever.";
	otherwise say "[nt]Even if it's likely to be orphaned forever, you see no way that destroying the bookend would help in that situation."

Instead of assaulting the bookend with: try attacking the bookend.
Instead of crouching behind or entering underneath or lying behind or sitting behind or slipping behind the bookend: say "[The noun] [aren't] substantial enough to effectively conceal you."
Instead of drinking or eating or tasting or kissing the bookend: say "[no time]You doubt the bookend would taste very good."
Instead of inserting something into the bookend: try putting the noun on the bookend.
Instead of listening to the bookend: say "[no time]The bookend doesn't really make noise on its own."
Instead of turning the bookend: say "[nnt]It [adapt the verb make from the third person singular] little difference."

Instead of pulling or pushing the bookend:
	if it's Daytime:
		say "[nnt]It [adapt the verb make from the third person singular] little difference.";
	otherwise:
		if the player encloses the bookend:
			try turning the bookend;
		otherwise:
			silently try taking the bookend;
			try dropping the bookend.

Instead of pushing the bookend to: try pushing the bookend.

Instead of putting something on the bookend:
	if the holder of the bookend is a container:
		try inserting the noun into the holder of the bookend;
	otherwise if the holder of the bookend is a supporter:
		try putting the noun on the holder of the bookend;
	otherwise if the holder of the bookend is the location:
		if it's Daytime:
			try dropping the noun;
		otherwise:
			try depositing the noun;
	otherwise:
		say "[nnt]It [adapt the verb make from the third person singular] little difference."

Instead of removing the bookend from: try taking the bookend.
Instead of removing something from the bookend: try taking the noun.
Instead of rubbing or touching or squeezing the bookend: say "Cool metal."
Instead of smelling the bookend: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of taking the bookend during Daytime: say "It probably isn't worth carrying the bookend around for no reason."
Instead of waving the bookend: try swinging the bookend.

A geode is on the shelves. Understand "half" or "half of a/the/-- geode" or "half-geode" as the geode. The geode is incapacitating. The bulk of the geode is 3.
The description of the geode is "Half of a geode [if it's Daytime]that's been[otherwise]that was[end if] cracked open to reveal the sparkling amethyst inside. It was a gift from your father."
Dropping the geode is noisy behavior.

First report dropping the geode:
	say "[We] [drop] the geode, causing it to make a loud impact against the floor[first time]. Hopefully that [if it's Daytime]didn't damage[otherwise]won't have damaged[end if] it[only]." instead.

Instead of attacking or burning or cutting the geode:
	if it's Daytime, say "The geode was a gift. You[if it's Nighttime] think you[end if][']d rather not risk destroying it.";
	otherwise say "[nt]The geode was a gift. You see no way that destroying it would be helpful, even in that situation."

Instead of assaulting the geode with: try attacking the geode.

Instead of assaulting something with the geode:
	if the noun is the intruder, try throwing the geode at the intruder instead;
	otherwise try attacking the geode.

Instead of crouching behind or entering underneath or lying behind or sitting behind or slipping behind the geode: say "[The noun] [aren't] substantial enough to effectively conceal you."
Instead of drinking or eating or tasting or kissing the geode: say "[no time]You doubt the geode would taste very good."
Instead of emptying the geode: try taking the amethyst.
Instead of giving something to the geode: try inserting the noun into the geode.
Instead of inserting something into the geode: say "[nnt]You[if it's Nighttime] think you[end if][']d rather not risk damaging the amethyst inside."
Instead of knocking on the geode: say "The sound [regarding the noun][aren't] very impressive."
Instead of listening to the geode: say "[no time]The geode doesn't really make noise on its own."
Instead of looking behind the geode: follow the nothing behind the geode rule.
Instead of looking under the geode: follow the nothing under the geode rule.
Instead of opening or closing the geode: say "[no time]The geode is permanently open."
Instead of placing something under the geode: follow the nothing under the geode rule.
Instead of pulling or pushing or turning the geode: say "[nnt]It [adapt the verb make from the third person singular] little difference."
Instead of pushing the geode to: try pushing the geode.
Instead of putting something on the geode: try inserting the noun into the geode.
Instead of removing the geode from: try taking the geode.
Instead of removing something from the geode: try taking the noun.
Instead of rubbing or touching or squeezing the geode: say "Rough, cool rock."
Instead of searching the geode: say "[no time][The geode] [aren't] substantial enough to effectively conceal much of anything."
Instead of smelling the geode: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of stowing something behind the geode: follow the nothing behind the geode rule.
Instead of waving the geode: try swinging the geode.

Check throwing the geode at something:
	unless the second noun is the intruder, say "[nt]The geode was a gift. You[if it's Nighttime] think you[end if][']d rather not risk destroying it[if it's Nighttime] for no good reason[end if]." instead.
	
This is the nothing behind the geode rule:
	take no time;
	say "[The geode] [aren't] substantial enough to effectively conceal much of anything behind itself."

This is the nothing under the geode rule:
	take no time;
	say "[The geode] [aren't] substantial enough to effectively conceal much of anything underneath itself."

The amethyst is a material. It is part of the geode. Understand "purple" or "gem/gems/quartz/mineral/minerals/crystal/crystals" or "crystalline/sparkling/beautiful" as the amethyst.
The description of the amethyst is "Beautiful purple quartz."
	
After starting the virtual machine (this is the redirect from amethyst to geode rule):
	dispatch everything but { examining action, drinking action, eating action, tasting action, kissing action, looking behind action, looking under action, placing it under action, removing it from action, taking action, rubbing action, touching action, squeezing action, stowing it behind action, searching action, remembering action } for the amethyst to the geode;

Instead of drinking or eating or tasting or kissing the amethyst: say "[no time]You doubt the amethyst would taste very good."
Instead of looking behind or looking under the amethyst: say "[There's] nothing inside the geode besides the amethyst."
Instead of placing the amethyst under: try placing the geode under the second noun.
Instead of placing something under the amethyst: try inserting the noun into the geode.
Instead of remembering the amethyst: try remembering the geode.
Instead of removing something from the amethyst: try taking the noun.
Instead of rubbing or touching or squeezing the amethyst: say "Cool, vaguely sharp quartz."
Instead of searching the amethyst: try examining the amethyst.
Instead of stowing the amethyst behind: try stowing the geode behind the second noun.
Instead of stowing something behind the amethyst: try inserting the noun into the geode.

Instead of taking the amethyst:
	if the player carries the geode, say "[nt][We] [can't] remove the amethyst from the geode[unicode 8212]that would only destroy the both of them.";
	otherwise try taking the geode.

The shale is a material. It is part of the geode. Understand "limestone/limestones" or "shales/shell" or "rock/stone" as the shale.
The description of the shale is "The shale on the outside of the geode is[if it's Nighttime], you know,[end if] much less interesting than the amethyst inside."
	
After starting the virtual machine (this is the redirect from shale to geode rule):
	dispatch everything but { examining action, drinking action, eating action, tasting action, kissing action, removing it from action, remembering action } for the shale to the geode;

Instead of drinking or eating or tasting or kissing the shale: say "[no time]You doubt the shale would taste very good."
Instead of remembering the shale: try remembering the geode.

Instead of removing the shale from:
	if the second noun is the geode, say "[nt][We] [can't] remove the shale from the geode without destroying the latter entirely.";
	otherwise try taking the geode.

Instead of removing something from the shale: try taking the noun.

The bust is on the shelves. The bulk of the bust is 10.
The description of the bust is "A marble bust; you're not sure of whom. It's a handsome enough face."
The bust can be shattered or intact. The bust is intact. Understand the shattered property as describing the bust.

Instead of attacking or burning or cutting the bust:
	if it's Daytime, say "You have no reason to destroy the bust.";
	otherwise say "[nt]Even under the circumstances, you don't think you'd destroy the bust willy-nilly. You'd need a reason. Maybe if you were to SMASH it, it could work as a noisy distraction?"

Instead of assaulting the bust with: try attacking the bust.
Instead of assaulting something with the bust: say "[nnt][The bust] [are] far too heavy to effectively utilize as a weapon."
Instead of crouching behind or entering underneath or lying behind or sitting behind or slipping behind the bust: say "[The noun] [aren't] substantial enough to effectively conceal you."
Instead of drinking or eating or tasting the bust: say "[no time]You doubt the bust would taste very good."
Instead of kissing or hugging the bust: say "[no time]You[if it's Nighttime] don't think you[end if][']re quite so desperate as that."
Instead of listening to the bust: say "[no time]As lifelike as the face is, [if it's Nighttime]you know [end if]it can't actually speak."
Instead of pulling or pushing the bust during Daytime: say "[nnt]It [adapt the verb make from the third person singular] little difference."
Instead of pulling or pushing the bust during Nighttime: try smashing the bust.
Instead of pushing the bust to: try pushing the bust.
Instead of rubbing or touching or squeezing the bust: say "Smooth, cool marble."
Instead of smelling the bust: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of taking the bust during Daytime: say "[no time]It probably isn't worth carrying around something so bulky."
Instead of turning the bust: say "[nnt]It [adapt the verb make from the third person singular] little difference."
Instead of waving the bust: try swinging the bust.

Instead of verbal behavior when the current action involves the bust: say "[nnt]Lifelike as it is, [the bust] [if it's Daytime]can't actually[otherwise]won't actually be able to[end if] hear you."

The bust-marble is a material. It is part of the bust. The printed name of the bust-marble is "marble". Understand "marble" as the bust-marble.
The description of the bust-marble is "Pure white, historically-inaccurate Hellenic marble."
	
After starting the virtual machine (this is the redirect from marble to bust rule):
	dispatch everything but { examining action, removing it from action, remembering action } for the bust-marble to the bust;
	
Instead of remembering the bust-marble: try remembering the bust.

Instead of removing the bust-marble from:
	if the second noun is the bust, say "[nt][We] [can't] separate the bust from the marble that makes it up.";
	otherwise try taking the bust.

Instead of removing something from the bust-marble: try taking the noun.

The bust-face is part of the bust. The printed name is "bust's face". Understand "bust's/busts/bust face" or "face" as the bust-face.
The description of the bust-face is "As good-looking and unrecognizable as ever."
	
After starting the virtual machine (this is the redirect from face to bust rule):
	dispatch everything but { examining action, removing it from action, remembering action } for the bust-face to the bust;
	
Instead of remembering the bust-face: try remembering the bust.

Instead of removing the bust-face from:
	if the second noun is the bust, say "[nt][We] [can't] separate the face from the rest of the bust.";
	otherwise try taking the bust.

Instead of removing something from the bust-face: try taking the noun.

Some bust-shards are a shards-pile. The bust-shards are the remnant of the bust. The printed name of the bust-shards is "bust shards". Understand "marble" as the bust-shards.
The description of the bust-shards is "All that [adapt the verb remain from the third person singular] of the handsome bust is a pile of marble shards."

Instead of dropping the bust during Nighttime:
	move the bust to the location;
	try smashing the bust.
	
Check throwing the bust at:
	unless the second noun is the intruder:
		now potentially-ranged is true;
		now the item smashed with is the second noun;
		move the bust to the location of the second noun;
		try smashing the bust instead.
		
Rule for reaching inside a room while smashing the bust:
	if potentially-ranged is true, allow access.
	
Smashing the bust is noisy behavior.
	
Carry out smashing the bust:
	move the bust-shards to the location of the radio;
	remove the bust from play.
	
Report smashing the bust:
	if potentially-ranged is true:
		say "[We] [hurl] the bust at [the item smashed with], causing it to shatter against [regarding the item smashed with][them] with a puff of marble dust. The noise [adapt the verb are from the third person singular] startling in the quiet apartment.";
	otherwise:
		say "[We] [hurl] the bust at the ground, causing it to shatter with a puff of marble dust. The noise [adapt the verb are from the third person singular] startling in the quiet apartment."

Chapter 2 - Windows and the view of the outside

Some windows are a scenery container in Main-Behind-Shelf. Understand "glass" or "panes/pane" or "window" as the windows. The windows are closed, not openable, and transparent.
The windows can be shattered or intact. The windows are intact. Understand the shattered property as describing the windows.
The description of the windows is "[if it's Daytime]The windows offer[otherwise]You remember the windows offering[end if] a good view of the sidewalk and street below, and the buildings across the way[if shattered]. They'll offer the same view once shattered, with color added by the feeling of the wind and the noises of the city[end if].

[if it's Daytime]Orange and red sunset-light[otherwise]Cold, clinical moonlight[end if] [one of][adapt the verb rake from the third person singular] over[or][adapt the verb dance from the third person singular] on[or][adapt the verb flood from the third person singular] across[at random] the floor."

Instead of examining down when the location is Main-Behind-Shelf: try examining the windows.

Instead of remembering the windows: say "Those, you expect, [regarding the noun][remain] imbedded in the wall in the area behind the bookshelf."

Instead of attacking or burning or cutting the windows:
	if it's Daytime:
		say "Shattering the windows would be a great way to ensure you don't get your security deposit back.";
	otherwise:
		say "Even if you did break the windows, there's no fire escape and it would be a multi-story fall to the street.";
	take no time.

Instead of assaulting the windows with: try attacking the windows.
Instead of climbing the windows: say "[no time][regarding the noun][They]['re] far too sheer to climb."

Instead of drinking or eating or tasting or kissing the windows:
	if the windows are intact, say "You doubt the windows would taste very good.";
	otherwise say "You don't think putting broken glass in your mouth would be the best idea.";
	take no time.

Instead of entering the windows:
	if the windows are intact, say "[no time]The windows don't open. Besides, there's no fire escape.";
	otherwise try jumping.

Instead of listening to the windows:
	if the windows are intact, say "This high up, [we] [can't hear] most of the noise from the street below.";
	otherwise say "Even so high up, the noise of the city will swirl around you."

Instead of locking the windows with: try locking keylessly the windows.

Instead of locking keylessly the windows:
	if the windows are intact, say "[nnt]The windows don't open anyway[if it's Nighttime], as far as you know[end if].";
	otherwise say "[nt]Locking won't secure something that's broken."
	
Instead of unlocking keylessly the windows:
	if the windows are intact, say "[nnt]The windows don't open anyway[if it's Nighttime], as far as you know[end if].";
	otherwise say "[nt]Broken things can't exactly be effectively locked, anyway."
	
Instead of looking behind or looking under or searching the windows: try examining the windows.

Instead of opening or closing or pulling or pushing or turning the windows:
	if the windows are intact, say "[nnt]The windows don't open[if it's Nighttime], as far as you know[end if].";
	otherwise say "[nt]That won't make any difference once the windows are shattered."

Instead of pushing the windows to: try pushing the windows.
Instead of removing something from the windows: try taking the noun.

Instead of rubbing or touching or squeezing the windows:
	if the windows are intact, say "Cool glass.";
	otherwise say "[nt]You doubt you'd be able to touch the broken glass without cutting yourself."

Instead of smelling the windows:
	if the windows are intact, say "They don't smell like much of anything[if it's Nighttime], as far as you know[end if].";
	otherwise say "The air swirling around you will only smell cold."

Instead of taking the windows:
	if the windows are intact, say "[nnt][The noun] [are] firmly installed in the wall. [if the player carries the screwdriver][We] [lack][otherwise][We] [have] neither the tools nor[end if] the expertise to remove them.";
	otherwise say "[nt]You doubt you'd be able to touch the broken glass without cutting yourself."

Instead of throwing something at the windows: try attacking the windows.
Instead of unlocking the windows with: try unlocking keylessly the windows.
Instead of washing the windows: say "[no time]In a building like this, you're sure they pay people to do that."

smash-feasibility is a truth state that varies. smash-feasibility is true.

Before attacking the windows during Daytime (this is the busting the smashing myth rule):
	if "Secret ending I: Freefall" is a used ending:
		if smash-feasibility is true:
			now smash-feasibility is false;
			say "You give it a good try, but the windows hold. Looks like that escape route wouldn't realistically work anyway." (A) instead.
			
Check smashing the windows (this is the smashing myth already busted rule):
	if smash-feasibility is false:
		take no time;
		say "You already tested the windows during the day[unicode 8212]they won't be any more fragile in the night. You'll need to find a different way." (A) instead.

Check smashing the windows (this is the can't un-break an egg or for that matter a window rule):
	if the windows are shattered:
		take no time;
		say "The windows will already be shattered, leaving a gaping hole in the wall." (A) instead.

Before assaulting the windows with something during Nighttime (this is the convert assaulting the windows to smashing rule):
	if the second noun is sharp:
		now the item smashed with is the second noun;
		try smashing the windows instead.
	
Carry out smashing the windows (this is the breaking the windows rule):
	repeat with loc running through rooms:
		increase the ambient noise of loc;
	now the windows are shattered.

Report smashing the windows (this is the narrate breaking the windows rule):
	if the item smashed with is nothing:
		say "[We] [strike] a window, but the glass will hold. You'll try again, and this time the glass will shatter, its shards falling stories and stories and stories. All of the sound of the city will rush into the apartment, greedily seeking out every quiet corner and dark shadow." (A);
	otherwise:
		say "[We] [strike] a window with [the item smashed with], and the glass will shatter, its shards falling stories and stories and stories. All of the sound of the city will rush into the apartment, greedily seeking out every quiet corner and dark shadow." (B);

Smashing the windows is noisy behavior.

Instead of remembering something enclosed by the windows: say "[We] [if it's Daytime]can only[otherwise]have only ever been able to[end if] see [regarding the noun][those] out the windows."

A distant stuff rule for something enclosed by the windows:
	take no time;
	say "You [can't] access anything outside the windows.";
	rule fails.

The street is distant scenery in the windows. Understand "road" or "pavement/asphalt" as the street.
The description of the street is "A black asphalt surface. Occasionally, a car [adapt the verb drive from the third person singular] over it."

The sidewalk is distant scenery in the windows. Understand "concrete" as the sidewalk.
The description of the sidewalk is "Concrete for people to walk down."

Some buildings are distant scenery in the windows. Understand "building" or "skyscraper/skyscrapers" or "hotel/hotels" as the buildings.
The description of the buildings is "The street is lined with skyscrapers. You think they're mostly residential, but there may be one or two hotels mixed in."

Some cars are distant scenery in the windows. Understand "vehicles/vehicle" or "car" or "van/vans/minivan/minivans" or "sedan/sedans" as the cars.
The description of the cars is "[if it's Daytime]Many different kinds of cars race by[otherwise]There won't be many people out driving so late[end if]."

Some passersby are distant scenery in the windows. Understand "passerby" or "people" or "pedestrian/pedestrians" as the passersby.
The description of the passersby is "[if it's Daytime]People stream from place to place in twos and threes and groups[otherwise]No one will actually be out so late[end if]."

Some lampposts are distant scenery in the windows. Understand "lamps" or "lamp post/posts/pole/poles" or "streetlight/streetlights" or "lamppole/lamppoles" or "street light/lights" or "lamppost" as the lampposts.
The description of the lampposts is "Willowy black poles[if it's Nighttime] will be shedding light on the street below[end if]."

The sky is distant scenery in the windows. Understand "cloud/clouds" as the sky.
The description of the sky is "[if it's Daytime]The sky is orange with the sunset[otherwise]You won't be able to see any stars in the city[end if]."

The celestial light is scenery in Main-Behind-Shelf. The printed name is "[if it's Daytime]sun[otherwise]moon[end if]light".
Understand "sun light" or "sunlight" or "sunset" as the celestial light when Daytime is happening.
Understand "moon light" or "moonlight" or "moon" as the celestial light when Nighttime is happening.
The description of the celestial light is "[if it's Daytime]The orange light of the sunset floods through the windows[otherwise]Cool moonlight lances through the windows and onto the floor[end if]."

Instead of remembering the celestial light:
	if it's Daytime:
		say "It's strongest by the windows.";
	otherwise:
		if the location is in Open Space and the overhead lights are switched off:
			say "It'll be just about the only reason you can see anything.";
		otherwise:
			say "You [i]will[/i] see the moon again."

Instead of attacking or burning or cutting or climbing or pulling or pushing or turning or rubbing or touching or squeezing or taking or crouching on or entering or lying on or sitting on or standing up on or knocking on the celestial light: say "[no time][The celestial light] [are] incorporeal."
Instead of assaulting the celestial light with: try attacking the celestial light.
Instead of crouching behind or entering underneath or lying behind or sitting behind or slipping behind the celestial light: say "[nnt][The celestial light] [aren't] capable of hiding you."
Instead of drinking or eating or tasting or kissing the celestial light: say "[no time][if it's Daytime]Sun[otherwise]Moon[end if]light doesn't have a taste."

Instead of giving something to the celestial light:
	if it's Daytime, try dropping the noun;
	otherwise try depositing the noun.

Instead of inserting something into the celestial light:
	if it's Daytime, try dropping the noun;
	otherwise try depositing the noun.

Instead of looking behind or looking under or searching the celestial light: say "[nnt][The celestial light] [aren't] capable of hiding much."

Instead of placing something under the celestial light:
	if it's Daytime, try dropping the noun;
	otherwise try depositing the noun.

Instead of pushing the celestial light to: try pushing the celestial light.

Instead of putting something on the celestial light:
	if it's Daytime, try dropping the noun;
	otherwise try depositing the noun.

Instead of removing the celestial light from: try taking the celestial light.
Instead of removing something from the celestial light: try taking the noun.

Instead of showing something to the celestial light:
	if it's Daytime, try dropping the noun;
	otherwise try depositing the noun.

Instead of smelling the celestial light: say "[no time]Light doesn't have a smell."

Instead of stowing something behind the celestial light:
	if it's Daytime, try dropping the noun;
	otherwise try depositing the noun.

Instead of switching off or switching on the celestial light: say "[nnt][The celestial light] [aren't] the kind of light you can switch."

Instead of throwing something at the celestial light:
	if it's Daytime, try dropping the noun;
	otherwise try depositing the noun.

Book 3 - Entryway, Closet, Hallway

Part 1 - Entryway

Chapter 1 - The room

Entryway is north of Main-Office. "The small hallway at the front of the apartment is perpetually dim[if it's Nighttime] in your short experience[end if][if the foyer-lightswitch is switched on], even with the lights on[end if]."
Understand "entryway" or "foyer" or "front hall/hallway" as Entryway.
The noise-modifier of Entryway is "[if restroom door is closed], muffled by the closed bathroom door,[otherwise if front door is closed], muffled by the closed front door,[otherwise if closet is closed], muffled by the closed closet door,[end if]".
The relative direction set of Entryway is the Table of Entryway Direction Descriptors.
The casual descriptor of Entryway is "the entryway".
For saying the location name of Entryway: say "in the entryway".
The prepositional entrance descriptor of Entryway is "into the entryway".
The prepositional exit descriptor of Entryway is "out of the entryway".

For announcing notable exits of Entryway:
	say "The door [if the previous location is Bathroom]back [end if]to the bathroom [regarding restroom door][are] [if restroom door is closed]closed[otherwise]open[end if] to the [b]west[/b], and the front door [regarding front door][are] [if front door is closed]closed[otherwise]open[end if] to the [b]north[/b]. The closet door [regarding the closet][are] [if the closet is closed]closed[otherwise]open[end if]. The kitchenette [adapt the verb are from the third person singular] [if the previous location is Kitchenette]back [end if]to the [b]east[/b], and the rest of the apartment [adapt the verb are from the third person singular] [if the previous location is Main-Office]back [end if][b]south[/b]."
	
Instead of examining Entryway when the location is not Entryway:
	say "The small hallway at the front of the apartment is perpetually dim[if it's Nighttime] in your short experience[end if][if the foyer-lightswitch is switched on], even with the lights on[end if].";
	describe locale for Entryway;
	if the number of locale-supportable things in Entryway > 0:
		say "[We] [if it's Daytime]can also see[otherwise]will also be able to see[end if] [a list of locale-supportable things in Entryway]."

Instead of examining north when the location is Entryway:
	if the front door is open, try examining Outside Hall;
	otherwise try examining the front door.

Instead of examining east when the location is Entryway: try examining Kitchenette.
Instead of examining south when the location is Entryway: try examining Main-Office.

Instead of examining west when the location is Entryway:
	if the restroom door is open, try examining Bathroom;
	otherwise try examining the restroom door.

Instead of examining inside when the location is Entryway:
	if the closet is open, try examining Within-Closet;
	otherwise try examining the closet.

Instead of examining outside when the location is Entryway: try examining north.

Instead of listening to Entryway:
	if the radio is listenable:
		try listening to the radio;
	otherwise if it's Daytime:
		if the dishwasher-switch is switched on:
			say "From the kitchenette, you hear the dishwasher going.";
		otherwise if the laptop-computer is switched on and the laptop-computer is in the location:
			if the kitchen faucet is switched on:
				if the bathroom faucet is switched on or the tub-faucet is switched on:
					say "You hear the computer's fan whirring slightly. From here, you can also hear faucets going in the kitchenette and the bathroom.";
				otherwise:
					say "You hear the computer's fan whirring slightly. From here, you can also hear a faucet going in the kitchenette.";
			otherwise if the bathroom faucet is switched on or the tub-faucet is switched on:
				say "You hear the computer's fan whirring slightly. From here, you can also hear water running in the bathroom.";
		otherwise:
			if the kitchen faucet is switched on:
				if the bathroom faucet is switched on or the tub-faucet is switched on:
					say "You can hear faucets going in the kitchenette and the bathroom.";
				otherwise:
					say "You can hear a faucet going in the kitchenette.";
			otherwise if the bathroom faucet is switched on or the tub-faucet is switched on:
				say "You can hear water running in the bathroom.";
			otherwise:
				say "You hold your breath and listen, but don't hear anything unusual.";
	otherwise:
		now player-listening is true.

Instead of smelling Entryway: follow the smelling rooms rule.

Table of Entryway Direction Descriptors
other place	descriptor
Bathroom	"in the bathroom"
Kitchenette	"in the kitchenette"
Main-Bed	"somewhere in the main room"
Main-Behind-Shelf	"somewhere in the main room"
Main-By-Counter	"somewhere in the main room"
Main-Office	"in the office area"
Main-Sitting	"somewhere near the bookshelf"
Outside Hall	"out in the hall"
Within-Closet	"in the closet"

in-the-entryway is a position in Entryway.

Rule for reaching inside Entryway while examining:
	if Nighttime is happening and the location of the player is Main-Bed and the player is not enclosed by under#bed and intruder-inside is false:
		allow access.
		
After deciding the scope of the player while examining:
	if Nighttime is happening and the location of the player is Main-Bed and the player is not enclosed by under#bed and intruder-inside is false:
		place Entryway in scope;
		place the contents of Entryway in scope;

Chapter 2 - Foyer shelf

The foyer shelf is a scenery supporter in Entryway. [The printed name of the foyer shelf is "shelf".] Understand "wooden" or "wooden shelf" as the foyer shelf.
The description of the foyer shelf is "A wooden shelf built into the wall of the foyer, [first time]ostensibly [only]for your convenience[first time]. The front door bangs against it when it opens, so if you're here for any amount of time you might want to remove it[only]."

After looking when the location is Entryway:
	if the foyer shelf is empty:
		say "The foyer shelf [if it's Daytime]stands empty[otherwise]will be bare by that point[end if].";
	continue the action.

Rule for disclosing contents of the foyer shelf:
	say "A wooden shelf [if it's Daytime]built into the wall displays[otherwise]is built into the wall, if you remember correctly, which will be displaying[end if] [a list of mentionable things on the foyer shelf]. "
	
Instead of remembering the foyer shelf: say "That, you expect, [regarding the noun][remain] in the entryway."

Instead of attacking or burning or cutting the foyer shelf: say "[no time]That would be a great way to ensure you never see your security deposit again."
Instead of assaulting the foyer shelf with: try attacking the foyer shelf.
Instead of climbing or crouching on or entering or lying on or sitting on or standing up on the foyer shelf: say "[no time]You[if it's Daytime][']d rather not[otherwise] suspect you won't want to[end if] test the limits of the shelf's weight capacity[if it's Daytime], today of all days[otherwise] in such a high-stakes situation[end if]."
Instead of crouching behind or sitting behind or slipping behind or lying behind or entering underneath the foyer shelf: say "[no time][The noun] [can't] meaningfully conceal you."
Instead of drinking or eating or tasting or kissing the foyer shelf: say "[no time]You doubt the shelf would taste very good."
Instead of giving something to the foyer shelf: try putting the noun on the foyer shelf.
Instead of inserting something into the foyer shelf: try putting the noun on the foyer shelf.
Instead of listening to the foyer shelf: say "[no time]The shelf doesn't really make noise on its own."
Instead of looking behind the foyer shelf: say "[nnt][The noun] is installed directly in the wall. [They] [aren't] capable of concealing anything behind [themselves]."
Instead of looking under the foyer shelf: say "[nnt][The noun] is installed directly in the wall. [They] [aren't] capable of concealing anything underneath [themselves]."

Instead of placing something under the foyer shelf:
	if it's Daytime, try dropping the noun;
	otherwise try depositing the noun.

Instead of pulling or pushing or turning or taking the foyer shelf: say "[nnt][The noun] [are] firmly installed on the wall. [if the player carries the screwdriver][We] [lack][otherwise][We] [have] neither the tools nor[end if] the expertise to remove it."
Instead of pushing the foyer shelf to: try pushing the foyer shelf.
Instead of removing something from the foyer shelf: try taking the noun.
Instead of rubbing or touching or squeezing the foyer shelf: say "Smooth wood."
Instead of showing something to the foyer shelf: try putting the noun on the foyer shelf.
Instead of smelling the foyer shelf: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of stowing something behind the foyer shelf: try putting the noun on the foyer shelf.
Instead of throwing something at the foyer shelf: try putting the noun on the foyer shelf.

Chapter 3 - The key bowl

The key bowl is a container on the foyer shelf. It is open and not openable. Understand "patterend glass" or "glass" as the key bowl. The bulk of the key bowl is 7. The bulk-capacity of the key bowl is 6.
The description of the key bowl is "A bowl made of patterned glass. It would look more at home in an antique shop than an industrial apartment. You bought it to keep your keys in."
The key bowl can be shattered or intact. The key bowl is intact. Understand the shattered property as describing the key bowl.
[Rule for deciding whether all includes the key bowl: it does not.]

Rule for disclosing contents of the key bowl:
	say "Inside [if the number of things held by the holder of the key bowl > 1]the bowl [end if][is-are a list of things in the key bowl]. ";
	
Rule for printing the name of the key bowl while not inserting or removing:
	say "key bowl";
	omit contents in listing.

Instead of attacking or burning or cutting the key bowl:
	if it's Daytime, say "You have no reason to destroy the key bowl.";
	otherwise say "[nt]You see no way that the act of destroying the key bowl alone would help in that situation. If you could SMASH it as a noisy distraction, however..."

Instead of assaulting the key bowl with: try attacking the key bowl.
Instead of assaulting something with the key bowl: say "[no time]That would more likely damage the key bowl than [the noun]."
Instead of crouching behind or sitting behind or slipping behind or lying behind or entering underneath the key bowl: say "[no time][The noun] [are] too small to meaningfully conceal you."
Instead of drinking or eating or tasting or kissing the key bowl: say "[no time]You doubt the bowl would taste very good."
Instead of giving something to the key bowl: try inserting the noun into the key bowl.
Instead of listening to the key bowl: say "[no time]The key bowl doesn't really make noise on its own."
Instead of looking behind the key bowl: say "[no time][if it's Daytime]The bowl is[otherwise]You suspect the bowl would be[end if] too small to effectively conceal anything behind itself."
Instead of looking under the key bowl: say "[no time][if it's Daytime]The bowl is[otherwise]You suspect the bowl would be[end if] too small to effectively conceal anything under itself."
Instead of opening or closing the key bowl: say "[no time]The key bowl has no lid and is always open."

Instead of placing something under the key bowl:
	let the box be the holder of the key bowl;
	if the box is a container:
		try inserting the noun into the box;
	otherwise if the box is a supporter:
		try putting the noun on the box;
	otherwise if the box is the location:
		if it's Daytime:
			try dropping the noun;
		otherwise:
			try depositing the noun;
	otherwise:
		say "[nnt]It [adapt the verb make from the third person singular] little difference."

Instead of pulling or pushing or turning the key bowl: say "[nnt]It [adapt the verb make from the third person singular] little difference."
Instead of pushing the key bowl to: try pushing the key bowl.
Instead of putting something on the key bowl: try inserting the noun into the key bowl.
Instead of removing the key bowl from: try taking the key bowl.
Instead of removing something from the key bowl: try taking the noun.
Instead of rubbing or touching or squeezing the key bowl: say "Cool, textured glass."
Instead of showing something to the key bowl: try inserting the noun into the key bowl.
Instead of smelling the key bowl: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of stowing something behind the key bowl: try inserting the noun into the key bowl.
Instead of throwing something at the key bowl: try inserting the noun into the key bowl.
Instead of waving the key bowl: try swinging the key bowl.

The bowl-glass is a material. It is part of the key bowl. The printed name of the bowl-glass is "glass of the bowl". Understand "bowl glass" or "glass" or "glass of/in the/-- bowl" as the bowl-glass.
The description of the bowl-glass is "Patterned glass makes up the bowl."
	
After starting the virtual machine (this is the redirect from bowl glass to bowl rule):
	dispatch everything but { examining action, attacking action, burning action, cutting action, shooting action, assaulting it with action, looking behind action, looking under action, removing it from action, remembering action } for the bowl-glass to the key bowl;

Instead of attacking or burning or cutting or shooting the bowl-glass:
	if it's Daytime, say "You have no reason to destroy the glass.";
	otherwise say "[nt]You see no way that destroying the glass would help in that situation."

Instead of assaulting the bowl-glass with: try attacking the bowl-glass.
Instead of assaulting something with the bowl-glass: try assaulting the noun with the key bowl.
Instead of looking behind or looking under the bowl-glass: try searching the key bowl.
Instead of remembering the bowl-glass: try remembering the key bowl.
Instead of removing the bowl-glass from: say "[nnt][We] [can't] remove the [']glass['] part from a glass bowl."
Instead of removing something from the bowl-glass: try taking the noun.

Some glass-patterns are a material. They are part of the key bowl. The printed name of the glass-patterns is "patterns in the bowl's glass". Understand "patterns/pattern" or "glass patterns/pattern" or "pattern/patterns of/on/in the/-- glass/bowl" or "patterns/pattern of/on/in the/-- glass bowl" or "pattern/patterns of/on/in the/-- bowl/bowl's/bowls glass" as the glass-patterns.
The description of the glass-patterns is "Etched into the glass are lines that give the vague sense of either flowers or fireworks[if it's Nighttime], if memory serves[end if]."
	
After starting the virtual machine (this is the redirect from patterns to bowl glass rule):
	dispatch everything but { examining action, removing it from action, rubbing action, touching action, squeezing action, smelling action, remembering action } for the glass-patterns to the bowl-glass;

Instead of remembering the glass-patterns: try remembering the key bowl.
Instead of removing the glass-patterns from: say "[nnt][We] [can't] remove the patterns from the glass they're etched into; they would cease to exist."

Instead of removing something from the glass-patterns:
	if the noun is the second noun, try removing the noun from the bowl-glass instead;
	otherwise try taking the noun.

Instead of rubbing or touching or squeezing the glass-patterns: say "The ridges and divots [adapt the verb feel from the third person plural] good under your fingers."
Instead of smelling the glass-patterns: say "They don't smell like much of anything[if it's Nighttime], as far as you know[end if]."

The antique shop is a metaphor. It is part of the key bowl.
Before doing something other than remembering when the current action involves the antique shop: say "[nt]Alas, the key bowl [if it's Daytime]is[otherwise]will[end if] [i]not[/i] [if it's Nighttime] be[end if]in an antique shop, but instead in your apartment." instead.

Instead of remembering the antique shop: say "[nnt][as the parser]The last time [we] [saw] the key bowl (which looks like it belongs in an antique shop), it [was-were of key bowl] [if the remembered location of the key bowl is either Main-Behind-Shelf or Main-By-Counter]by [otherwise if the remembered location of the key bowl is a room]in [otherwise][end if][if the remembered location of key bowl is a room][casual descriptor of the remembered location of key bowl][otherwise][at the remembered location of key bowl][end if].[as normal][line break]".

Some vague-flowers are a metaphor. They are part of the glass-patterns. The printed name of the vague-flowers is "the vague sense of flowers". Understand "flower/flowers" or "vague sense/impression of a/-- flower/flowers" or "sense/impression of a/-- flower/flowers" as the vague-flowers.
Before doing something other than remembering when the current action involves the vague-flowers: say "[nt]They're not [i]literal[/i] flowers[unicode 8212]that's just what the pattern reminds you of[if it's Nighttime] in your memory[end if]." instead.

Instead of remembering the vague-flowers: say "[nnt][as the parser]The last time [we] [saw] the key bowl, with its vaguely-floral patterns, it [was-were of key bowl] [if the remembered location of the key bowl is either Main-Behind-Shelf or Main-By-Counter]by [otherwise if the remembered location of the key bowl is a room]in [otherwise][end if][if the remembered location of key bowl is a room][casual descriptor of the remembered location of key bowl][otherwise][at the remembered location of key bowl][end if].[as normal][line break]".

Some vague-fireworks are a metaphor. They are part of the glass-patterns. The printed name of the vague-fireworks is "the vague sense of fireworks". Understand "firework/fireworks" or "fire work/works" or "vague sense/impression of a/-- firework/fireworks" or "sense/impression of a/-- firework/fireworks" or "vague sense/impression of a/-- fire work/works" or "sense/impression of a/-- fire work/works" as the vague-fireworks.
Before doing something other than remembering when the current action involves the vague-fireworks: say "[nt]They're not [i]literal[/i] fireworks[unicode 8212]that's just what the pattern reminds you of[if it's Nighttime] in your memory[end if]." instead.

Instead of remembering the vague-fireworks: say "[nnt][as the parser]The last time [we] [saw] the key bowl, with its patterns reminiscent of fireworks, it [was-were of key bowl] [if the remembered location of the key bowl is either Main-Behind-Shelf or Main-By-Counter]by [otherwise if the remembered location of the key bowl is a room]in [otherwise][end if][if the remembered location of key bowl is a room][casual descriptor of the remembered location of key bowl][otherwise][at the remembered location of key bowl][end if].[as normal][line break]".

Some keybowl-shards are a shards-pile. The keybowl-shards are the remnant of the key bowl. The printed name of the keybowl-shards is "glass bowl shards". Understand "broken/-- glass" as the keybowl-shards.
The description of the keybowl-shards is "All that [adapt the verb remain from the third person singular] of the key bowl is a pile of broken glass."

Instead of dropping the key bowl during Nighttime:
	move the key bowl to the location;
	try smashing the key bowl.
	
Check throwing the key bowl at:
	unless the second noun is the intruder:
		now potentially-ranged is true;
		now the item smashed with is the second noun;
		move the key bowl to the location of the second noun;
		try smashing the key bowl instead.
		
Rule for reaching inside a room while smashing the key bowl:
	if potentially-ranged is true, allow access.
	
Smashing the key bowl is noisy behavior.
	
Carry out smashing the key bowl:
	move the keybowl-shards to the location of the key bowl;
	unless the key bowl is empty:
		repeat with obj running through things in the key bowl:
			move obj to the location of the key bowl;
	remove the key bowl from play.
	
Report smashing the key bowl:
	if potentially-ranged is true:
		say "[We] [hurl] the key bowl at [the item smashed with], causing it to shatter against [regarding the item smashed with][them] dramatically. The noise [adapt the verb are from the third person singular] startling in the quiet apartment.";
	otherwise:
		say "[We] [hurl] the key bowl at the ground, causing it to shatter dramatically. The noise [adapt the verb are from the third person singular] startling in the quiet apartment."

Chapter 4 - The key ring and its contents

Section 1 - The ring itself

The keyring is a keychain in the key bowl. The printed name of the keyring is "keychain". Understand "keychain" or "key/-- chain" or "key/-- ring" or "keys" as the keyring. The keyring is hangable. The indefinite article of the keyring is "your".
The description of the keyring is "A simple keychain that does its job with no frills."
Does the player mean wearing the keyring: it is unlikely.
Dropping the keyring is noisy behavior.

A description-concealing rule (this is the don't need to be informed of individual keys rule):
	now every thing enclosed by the keyring is not marked for listing.
	
A ranking rule for the keyring while disclosing contents:
	decrease the description-rank of the keyring by 10.
	
Rule for disclosing contents of a container (called bin) when the keyring is in bin and the number of locale-supportable things in bin is 1:
	say "Your [keyring] [adapt the verb are from the third person singular] [unless the bin is an underside or the bin is a backside]in [end unless][the bin]. ".
	
Rule for disclosing contents of a supporter (called surface) when the keyring is on surface and the number of locale-supportable things on surface is 1:
	say "Your [keyring] [adapt the verb are from the third person singular] on [the surface]. ".
	
Instead of remembering something on the keyring: try remembering the keyring.

First report dropping the keyring:
	say "[We] [drop] your keychain, causing it to [one of]clatter[or]jangle[or]jingle[or]clang[as decreasingly likely outcomes] against the floor." instead.

Instead of attacking or burning or cutting the keyring:
	if it's Daytime, say "You have no reason to destroy the keychain.";
	otherwise say "[nt]You see no way that destroying the keychain would help in that situation."

Instead of assaulting the keyring with: try attacking the keyring.
Instead of assaulting the intruder with the keyring: say "[nnt]The keys on the keychain might do some damage, but likely won't buy you enough time against this guy."
Instead of crouching behind or sitting behind or slipping behind or lying behind or entering underneath the keyring: say "[no time][The noun] [can't] meaningfully conceal you."
Instead of drinking or eating or tasting or kissing the keyring: say "[no time]You doubt your keychain would taste very good."
Instead of emptying the keyring: say "[no time][if it's Nighttime]It will be better[otherwise]Better[end if] to leave all the keys on the keychain, so they don't get lost."
Instead of giving something to the keyring: try putting the noun on the keyring.
Instead of inserting something into the keyring: try putting the noun on the keyring.
Instead of knocking on the keyring: say "[nnt]The sound [regarding the keyring][aren't] very impressive[if it's Nighttime]. Maybe there'll be another way you can use the keychain to make noise[end if]."
Instead of listening to the keyring: say "[The noun] [don't] make any noise on its own."
Instead of locking the keyring with: say "[nnt]The keychain itself doesn't lock."

Instead of locking something with the keyring:
	repeat with closer running through things on the keyring:
		if closer unlocks the noun:
			try locking the noun with closer;
	if the noun is unlocked:
		say "Nothing on the keychain [if it's Daytime]locks[otherwise]will be able to lock[end if] [the noun]."

Instead of locking keylessly or unlocking keylessly the keyring: say "[nnt]The keychain itself doesn't lock."
Instead of opening or closing the keyring: say "[nnt]It [adapt the verb make from the third person singular] little difference."
Instead of placing something under the keyring: try putting the noun on the keyring.
Instead of removing something from the keyring: try taking the noun.
Instead of rubbing or touching or squeezing the keyring: say "Cool metal."
Instead of showing something to the keyring: try putting the noun on the keyring.
Instead of smelling the keyring: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."

Instead of swinging or waving the keyring:
	if it's Daytime, say "It jingles.";
	otherwise say "[nt]It would probably be best to make as little noise as possible."
	
Instead of taking something enclosed by the keyring: say "[no time][if it's Nighttime]It will be better[otherwise]Better[end if] to leave all the keys on the keychain, so they don't get lost."
Instead of throwing the keyring at something: say "[no time]Once you identify the impulse, [we] [find] you have no reason to actually follow through."
Instead of tying the keyring to: try putting the second noun on the keyring.
Instead of tying something to the keyring: try putting the noun on the keyring.
Instead of unlocking the keyring with: say "[nnt]The keychain itself doesn't lock."

Instead of unlocking something with the keyring:
	repeat with opener running through things on the keyring:
		if opener unlocks the noun:
			try unlocking the noun with opener;
	if the noun is locked:
		say "Nothing on the keychain [if it's Daytime]unlocks[otherwise]will be able to unlock[end if] [the noun]."
		
Instead of wearing the keyring: say "[nnt]You never did get a lanyard for it. The keychain itself won't fit around your neck."
		
Some frills are a metaphor. They are part of the keyring. Understand "frill" as the frills.
Before doing something other than remembering when the current action involves the frills: say "[i]No[/i] frills." instead.

Instead of remembering the frills: say "[nnt][as the parser]The last time [we] [saw] the frill-less keychain, it [was-were of keyring] [if the remembered location of the keyring is either Main-Behind-Shelf or Main-By-Counter]by [otherwise if the remembered location of the keyring is a room]in [otherwise][end if][if the remembered location of keyring is a room][casual descriptor of the remembered location of keyring][otherwise][at the remembered location of keyring][end if].[as normal][line break]".

The lanyard is a metaphor. It is part of the keyring.
Before doing something other than remembering when the current action involves the lanyard: say "You never did get a lanyard for the keychain." instead.

Instead of remembering the lanyard: say "[nnt][as the parser]The last time [we] [saw] the lanyard-less keychain, it [was-were of keyring] [if the remembered location of the keyring is either Main-Behind-Shelf or Main-By-Counter]by [otherwise if the remembered location of the keyring is a room]in [otherwise][end if][if the remembered location of keyring is a room][casual descriptor of the remembered location of keyring][otherwise][at the remembered location of keyring][end if].[as normal][line break]".

Section 2 - Things on the key ring

The housekey is a latchkey on the keyring. The printed name of the housekey is "house key". Understand "house key" or "front door key" or "apartment key" or "string/letters/numbers" as the housekey. The housekey unlocks the front door. The housekey is legible.
The description of the housekey is "A small key that unlocks the apartment's front door."

Report reading the housekey: say "[nnt][if it's Daytime]There's[otherwise]You remember there being[end if] just a string of letters and numbers, signifying nothing to you."

Instead of searching the housekey: try examining the housekey.
Instead of swinging or waving the housekey: try waving the keyring.

The tiny silver key is a latchkey on the keyring. Understand "jewelry/jewellery key" or "jewelry/jewellery box key" or "box key" or "small key" or "small silver key" as the tiny silver key. The tiny silver key unlocks the jewellery box.
The description of the tiny silver key is "A tiny silver key for your jewellery box."
Does the player mean unlocking the jewellery box with the tiny silver key: it is likely.

Instead of searching the tiny silver key: try examining the tiny silver key.
Instead of swinging or waving the tiny silver key: try waving the keyring.

Chapter 5 - The wallet and its contents

Section 1 - The wallet itself

The wallet is a container in the key bowl. It is eclipsing, openable, not lockable, and closed. The indefinite article of the wallet is "your". Understand "thin/black/anonymous" as the wallet. The bulk-capacity of the wallet is 4. The bulk of the wallet is 5.
The description of the wallet is "Thin, black, anonymous. You wouldn't have chosen it, but it's only for now."

Before searching the wallet:
	if the wallet is closed:
		say "(first opening the wallet)[command clarification break]";
		silently try opening the wallet.

A description-concealing rule (this is the don't need to be informed of individual cards rule):
	now every thing enclosed by the wallet is not marked for listing.
	
A ranking rule for the wallet while disclosing contents:
	decrease the description-rank of the wallet by 10.
	
Rule for disclosing contents of a container (called bin) when the wallet is in bin and the number of locale-supportable things in bin is 1:
	say "Your [wallet] [adapt the verb are from the third person singular] [unless the bin is an underside or the bin is a backside]in [end unless][the bin]. ".
	
Rule for disclosing contents of a supporter (called surface) when the wallet is on surface and the number of locale-supportable things on surface is 1:
	say "Your [wallet] [adapt the verb are from the third person singular] on [the surface]. ".

Instead of attacking or burning or cutting the wallet:
	if it's Daytime, say "You have no reason to destroy your wallet.";
	otherwise say "[nt]You see no way that destroying your wallet would help in that situation."

Instead of assaulting the wallet with: try attacking the wallet.
Instead of crouching behind or sitting behind or slipping behind or lying behind or entering underneath the wallet: say "[no time][The noun] [can't] meaningfully conceal you."
Instead of drinking or eating or tasting the wallet: say "[no time]You doubt the leather would taste very good."
Instead of giving something to the wallet: try inserting the noun into the wallet.
Instead of kissing or hugging or kissing the wallet: say "[no time]You're not quite [i]that[/i] attached to it."
Instead of knocking on the wallet: say "The sound [regarding the noun][aren't] very impressive."
Instead of listening to the wallet: say "[no time]The wallet doesn't really make noise."
Instead of looking behind the wallet: say "[nnt]The wallet isn't really capable of concealing anything behind itself."
Instead of looking under the wallet: say "[nnt]The wallet isn't really capable of concealing anything under itself."

Instead of placing something under the wallet:
	if the player encloses the wallet or the noun is a card:
		try inserting the noun into the wallet;
	otherwise if the holder of the wallet is a supporter:
		try putting the noun on the holder of the wallet;
	otherwise if the holder of the wallet is a container:
		try inserting the noun into the holder of the wallet;
	otherwise:
		say "[nt]The wallet won't do a very good job of conealing much."

Instead of putting something on the wallet: try inserting the noun into the wallet.
Instead of removing the wallet from: try taking the wallet.
Instead of removing something from the wallet: try taking the noun.
Instead of rubbing or touching or squeezing the wallet: say "Expensive leather."
Instead of showing something to the wallet: try inserting the noun into the wallet.
Instead of smelling the wallet: say "It [smell] like home."
Instead of waving the wallet: try swinging the wallet.

Instead of inserting something which is not a card into the wallet (this is the limiting wallet to cards and money rule):
	say "[nnt][The noun] [can't] fit into your wallet[unicode 8212]only the thinnest of cards can." (A).
	
Section 2 - The credit card
	
The credit card is a card in the wallet. The indefinite article of the credit card is "your". The wallet obscures the credit card.
The description of the credit card is "Your credit card, for absolute emergencies only. Brookwood will probably make you cut it up when he arrives."

A ranking rule for the credit card while disclosing contents:
	decrease the description-rank of the credit card by 10.
	
Rule for disclosing contents of a container (called bin) when the credit card is in bin and the number of locale-supportable things in bin is 1:
	say "Your [credit card] [adapt the verb are from the third person singular] [unless the bin is an underside or the bin is a backside]in [end unless][the bin]. ".
	
Rule for disclosing contents of a supporter (called surface) when the credit card is on surface and the number of locale-supportable things on surface is 1:
	say "Your [credit card] [adapt the verb are from the third person singular] on [the surface]. ".

Definition: a thing (called obj) is owned if the intruder does not enclose obj.

Instead of placing something under the credit card: say "[nnt]Your credit card [if it's Daytime]won't[otherwise]wouldn't[end if] do a very good job of concealing much of anything."

Instead of putting something on the credit card:
	if the noun is owned:
		say "You[if it's Nighttime][']ll[end if] already own [the noun].";
	otherwise:
		say "[The noun] [aren't] for sale.";
	take no time.

Instead of rubbing or touching or squeezing the credit card: say "Thin, ridged plastic."
Instead of throwing the credit card at something: say "[no time]Once you identify the impulse, [we] [find] you have no reason to actually follow through."

Section 3 - The driver's license

The driver's license is a card in the wallet. Understand "drivers/driving/driver" or "permit" or "learner's/learners/learner/learning" as the driver's license. The indefinite article of the driver's license is "your". The wallet obscures the driver's license.
The description of the driver's license is "Your New York state driver's license. You'll need to get a new one, now."

A ranking rule for the driver's license while disclosing contents:
	decrease the description-rank of the driver's license by 10.
	
Rule for disclosing contents of a container (called bin) when the driver's license is in bin and the number of locale-supportable things in bin is 1:
	say "Your [driver's license] [adapt the verb are from the third person singular] [unless the bin is an underside or the bin is a backside]in [end unless][the bin]. ".
	
Rule for disclosing contents of a supporter (called surface) when the driver's license is on surface and the number of locale-supportable things on surface is 1:
	say "Your [driver's license] [adapt the verb are from the third person singular] on [the surface]. ".

Instead of placing something under the driver's license: say "[nnt]Your driver's license [if it's Daytime]won't[otherwise]wouldn't[end if] do a very good job of concealing much of anything."

Instead of putting something on the driver's license:
	if the holder of the driver's license is a container:
		try inserting the noun into the holder of the driver's license;
	otherwise if the holder of the driver's license is a supporter:
		try putting the noun on the holder of the driver's license;
	otherwise if the holder of the driver's license is the location:
		if it's Daytime:
			try dropping the noun;
		otherwise:
			try depositing the noun;
	otherwise:
		say "[nnt]It [adapt the verb make from the third person singular] little difference."

Instead of rubbing or touching or squeezing the driver's license: say "Thin, textured plastic."
Instead of throwing the driver's license at something: say "[no time]Once you identify the impulse, [we] [find] you have no reason to actually follow through."

The photo is part of the driver's license. Understand "photograph" or "portrait" or "mug shot" or "mugshot" as the photo.
The description of the photo is "It doesn't show you at your best, but then license photos never do."

After starting the virtual machine (this is the redirect from photo to license rule):
	dispatch everything but { examining action, removing it from action, taking action, remembering action } for the photo to the driver's license;

Instead of removing the photo from: try taking the photo.
Instead of taking the photo: say "The photo is printed on the license. [We] [can't exactly] remove it."

Section 4 - The twenty-dollar bill

A twenty-dollar bill is money in the wallet. Understand "twenty" or "twenty dollar" as the twenty-dollar bill. The wallet obscures the twenty-dollar bill.
The description of the twenty-dollar bill is "A twenty-dollar bill, legal tender everywhere in the United States."

Instead of placing something under the twenty-dollar bill: say "[nnt]The twenty-dollar bill [if it's Daytime]won't[otherwise]wouldn't[end if] do a very good job of concealing much of anything."

Instead of putting something on the twenty-dollar bill:
	if the noun is owned:
		say "You[if it's Nighttime][']ll[end if] already own [the noun].";
	otherwise:
		say "[The noun] [aren't] for sale.";
	take no time.

Instead of rubbing or touching or squeezing the twenty-dollar bill: say "Supple paper-cloth."
Instead of throwing the twenty-dollar bill at something: say "[no time]Once you identify the impulse, [we] [find] you have no reason to actually follow through."

Chapter 6 - Lighting

The foyer light is lighting. The foyer light is in Entryway. The foyer light illuminates Entryway.
The description of the foyer light is "The foyer's [if switched on]dim, flickery [end if]light [adapt the verb are from the third person singular] [if it's Daytime]currently [end if][switchedness of the foyer-lightswitch]."

Instead of remembering the foyer light: say "The light you've designated as the 'foyer light' can only be found in the entryway."

The foyer-lightswitch is a switched on lightswitch in Entryway. The foyer-lightswitch is wired to the foyer light.

Instead of remembering the foyer-lightswitch: say "That, you expect, [regarding the noun][remain] in the entryway."

Chapter 7 - Front door

Section 1 - The door itself

The front door is a door. It is north of Entryway and south of Outside Hall. It is closed, lockable, and locked.
The description of the front door is "A simple wooden door[if it's Daytime],[otherwise]. It's[end if] a little beat up but sturdy enough[if it's Nighttime], if you remember correctly[end if].

[if it's Daytime]Currently[otherwise]By that point[end if], [it's] [if closed]closed[else]open[end if][if closed] and [lockedness of the front door][end if]."
Does the player mean unlocking keylessly the front door:
	if the location is Entryway, it is likely;
	it is unlikely.
Does the player mean locking keylessly the front door:
	if the location is Entryway, it is likely;
	it is unlikely.
	
Before entering the front door during Daytime: say "You have no reason to leave the apartment right now; you just want to go to bed." instead.
	
Instead of remembering the front door: say "The front door separates the entryway from the hallway outside."

Instead of attacking or burning or cutting the front door: say "[no time]That would be a great way to ensure you never see your security deposit again."
Instead of assaulting the front door with: try attacking the front door.
Instead of climbing the front door: try entering the front door.

Instead of crouching behind the front door:
	silently try taking position crouched;
	say "[We] [crouch] down, but [the noun] [aren't] doing any better at concealing you than before."

Instead of crouching on or lying on or sitting on or standing up on the front door: say "[no time][We] don't think [if it's Daytime]you can[otherwise]you'll be able to[end if] make that work."
Instead of drinking or eating or tasting or kissing the front door: say "[no time]You doubt the front door would taste very good."

Instead of entering underneath the front door:
	if the front door is open:
		try entering the front door;
	otherwise:
		say "[nnt]You won't fit underneath."

Instead of listening to the front door:
	if it's Daytime or the location is not Outside Hall:
		say "[We] [can't] make out much noise on the other side.";
	otherwise:
		now player-listening is true.

Instead of looking behind the front door:
	if the front door is closed:
		say "(first opening the front door)[command clarification break]";
		silently try opening the front door;
		if the front door is open:
			try examining the other side of front door from the location;
		otherwise:
			stop the action;
	otherwise:
		say "[nt]The open front door [can't exactly] conceal much."

Instead of looking under the front door:
	if the front door is open:
		try examining the other side of front door from the location;
	otherwise:
		say "[nnt][The front door] [are] too flush with the ground for you to see underneath."

Instead of lying behind the front door:
	silently try taking position reclining;
	say "[We] [lie] down, but [the noun] [aren't] doing any better at concealing you than before."

Instead of placing something under the front door:
	if the front door is open:
		try inserting the noun into the other side of the front door from the location;
	otherwise:
		say "[nnt][The front door] [are] too flush with the ground for anything to fit underneath while it's closed."

Instead of pushing the front door to: try pushing the front door.
Instead of rubbing or touching or squeezing the front door: say "Rough old wood."

Instead of searching the front door:
	if the front door is open:
		if the location is Entryway:
			try examining Outside Hall;
		otherwise:
			try examining Entryway;
	otherwise:
		try looking under the front door.

Instead of sitting behind the front door:
	silently try taking position seated;
	say "[We] [lie] down, but [the noun] [aren't] doing any better at concealing you than before."

Instead of slipping behind the front door: say "[nnt][The noun] won't do a very good job of concealing you."
Instead of smelling the front door: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of stowing something behind the front door: say "[nnt]It [adapt the verb make from the third person singular] little difference where on the floor [the noun] [are]."

Instead of swinging or waving the front door:
	if the front door is open, try closing the front door;
	otherwise try opening the front door.

Instead of taking the front door: say "[no time][We] [lack] the expertise required to remove the front door from its hinges."
Instead of throwing something at the front door: say "[no time]Once you identify the impulse, [we] [find] you have no reason to actually follow through."

Before locking keylessly the front door:
	if the front door is open, say "[nt]It'll be hard to lock a door that's open." instead;
	if the front door is locked, say "[nt][The front door] [is already] locked." instead;
	try turning the deadbolt instead.

Before unlocking keylessly the front door:
	if the front door is open, say "[nt]An open door is by definition unlocked." instead;
	if the front door is unlocked, say "[nt][The front door] [is already] unlocked." instead;
	try turning the deadbolt instead.
	
Section 2 - The deadbolt

The deadbolt is part of the front door. Understand "dead/-- bold" as the deadbolt.
The description of the deadbolt is "A bit of metal you can turn to lock or unlock the front door. [if it's Daytime]Currently[otherwise]By that point[end if], [it's] in the [lockedness of the front door] position."
Does the player mean doing something to the deadbolt:
	if the location is Entryway, it is possible;
	it is unlikely.

Before doing something when the current action involves the deadbolt: unless the location is Entryway, say "The deadbolt is only accessible from the entryway[if it's Nighttime], if you remember correctly[end if]." instead.

Instead of pulling or pushing or turning or swinging or waving the deadbolt:
	if the front door is locked:
		say "[We] [retract] the deadbolt and unlock the front door.";
		now the front door is unlocked;
	otherwise:
		say "[We] [extend] the deadbolt and lock the front door.";
		now the front door is locked.
		
Instead of attacking or burning or cutting or shooting the deadbolt: say "[no time][We] [have] no reason to destroy the deadbolt."
Instead of assaulting the deadbolt with: try attacking the deadbolt.
Instead of drinking or eating or tasting or kissing the deadbolt: say "[no time]You doubt the deadbolt would taste very good."
Instead of locking the deadbolt with: say "[no time][There's] no lock on [if it's Daytime]this[otherwise]that[end if] side[unicode 8212]just a deadbolt." 
Instead of pushing the deadbolt to: try turning the deadbolt.
Instead of rubbing or touching or squeezing the deadbolt: say "Cool metal."
Instead of setting the deadbolt to: try turning the deadbolt.
Instead of smelling the deadbolt: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of spinning the deadbolt to: try turning the deadbolt.

Instead of switching off or opening or unlocking keylessly the deadbolt:
	if the front door is unlocked, say "[nt][The front door] [is already] unlocked.";
	otherwise try turning the deadbolt.

Instead of switching on or closing or locking keylessly the deadbolt:
	if the front door is locked, say "[nt][The front door] [is already] locked.";
	otherwise try turning the deadbolt.
	
Instead of taking the deadbolt: say "[no time]The deadbolt is part of the front door. [We] [lack][unless the player carries the screwdriver] both the tools and[end if] the expertise to remove it."
Instead of throwing something at the deadbolt: say "[no time]Once you identify the impulse, [we] [find] you have no reason to actually follow through."
Instead of unlocking the deadbolt with: say "[no time][There's] no lock on [if it's Daytime]this[otherwise]that[end if] side[unicode 8212]just a deadbolt."

Section 3 - Shadows under the door

Some shadows are scenery. Understand "shadow" or "shadow/shadows under/beneath the/-- front/-- door" as the shadows. Understand "light/lights" or "light/lights under/beneath the/-- front/-- door" as the shadows when the shadows are in Entryway.
The description of the shadows is "Two breaks in the light seeping from under the door, indicating feet standing just outside."
Rule for deciding whether all includes the shadows: it does not.

Instead of remembering the shadows: say "Once the intruder is inside, he won't be casting shadows under the door any longer."

Instead of attacking or burning or cutting or climbing or crouching on or entering or lying on or sitting on or standing up on or pulling or pushing or turning or rubbing or touching or squeezing or taking or drinking or eating or tasting or kissing or knocking on the shadows: say "[no time][The shadows] [are] incorporeal."
Instead of assaulting the shadows with: try attacking the shadows.

Instead of crouching behind or entering underneath or lying behind or sitting behind or slipping behind the shadows:
	take no time;
	say "[The shadows] won't be substantial enough to effectively conceal you."

Instead of getting off the shadows:
	if the location is Entryway:
		say "It will make little difference where on the floor you stand.";
	otherwise:
		say "You won't be on the shadows in the first place.";
	take no time.

Instead of looking behind or looking under or searching the shadows: follow the insubstantial shadows rule.
Instead of placing something under the shadows: follow the insubstantial shadows rule.
Instead of pushing the shadows to: try pushing the shadows.

Instead of putting something on the shadows:
	take no time;
	say "It will make little difference where on the floor [the noun] goes, and [the shadows] won't be substantial enough to effectively support much of anything themselves."

Instead of smelling the shadows: say "[no time]Shadows don't have a smell."
Instead of stowing something behind the shadows: try placing the noun under the shadows.

This is the insubstantial shadows rule:
	take no time;
	say "[The shadows] won't be substantial enough to effectively conceal much of anything."

When Nighttime begins: now the shadows are in Entryway.

Part 2 - Outside Hall

Chapter 1 - The room

out-of-the-apartment is a position in Outside Hall.

Understand "outside/-- hall/hallway" or "hall/hallway outside" as Outside Hall.
The description of Outside Hall is "The hall outside your apartment[if it's Nighttime], you remember,[end if] is dingier than you're used to, with flickering lights and a stained carpet."
The noise-modifier of Outside Hall is "[if front door is closed], muffled by the closed door,[end if]".
The relative direction set of Outside Hall is the Table of Hallway Direction Descriptors.
The casual descriptor of Outside Hall is "the hallway".
For saying the location name of Outside Hall: say "out in the hall".
The prepositional entrance descriptor of Outside Hall is "into the hallway".
The prepositional exit descriptor of Outside Hall is "out of the hallway".

For announcing notable exits of Outside Hall:
	say "Yours is the last apartment at the very end of the hallway, which continues to the [b]east[/b]. The [front door] of your apartment [are] [openness of front door] to the [b]south[/b]."
	
Instead of examining Outside Hall when the location is not Outside Hall:
	say "The hall outside your apartment[if it's Nighttime], you remember,[end if] is dingier than you're used to, with flickering lights and a stained carpet.";
	describe locale for Outside Hall;
	if the number of locale-supportable things in Outside Hall > 0:
		say "[We] [if it's Daytime]can also see[otherwise]will also be able to see[end if] [a list of locale-supportable things in Outside Hall]."
	
Instead of examining south when the location is Outside Hall:
	if the front door is open, try examining Entryway;
	otherwise try examining the front door.

Instead of examining inside when the location is Outside Hall: try examining south.
Instead of examining east when the location is Outside Hall: try examining Down-the-Hall.
Instead of examining west when the location is Outside Hall: say "[nnt][There's] a wall in that direction."
Instead of examining north when the location is Outside Hall: say "[nnt][There's] a wall in that direction."

Instead of listening to Outside Hall:
	if the radio is listenable:
		try listening to the radio;
	otherwise if it's Daytime:
		say "You hold your breath and listen, but don't hear anything unusual.";
	otherwise:
		now player-listening is true.

Instead of smelling Outside Hall: say "[if it's Daytime]It smells[otherwise]You remember it smelling[end if] vaguely like mold."
Before trying going north in Entryway during Daytime: say "You have no reason to leave the apartment right now; you just want to go to bed." instead.

Table of Hallway Direction Descriptors
other place	descriptor
Bathroom	"somewhere in the apartment"
Kitchenette	"somewhere in the apartment"
Entryway	"in the entryway"
Main-Bed	"somewhere in the apartment"
Main-Behind-Shelf	"somewhere in the apartment"
Main-By-Counter	"somewhere in the apartment"
Main-Office	"somewhere in the apartment"
Main-Sitting	"somewhere in the apartment"
Within-Closet	"somewhere in the apartment"

Chapter 2 - Lighting

Some flickering lights are lighting. The flickering lights are in Outside Hall and Down-the-Hall. The flickering lights illuminate Outside Hall and Down-the-Hall.
The description of the flickering lights is "[if it's Daytime]It would seem that no one has[otherwise]You remember it seeming like no one had[end if] replaced the hall lights in a long time."

A distant stuff rule for the flickering lights while switching on or switching off:
	take no time;
	say "[We] [can't] see any switch for them.";
	rule fails.
	
Instead of remembering the flickering lights: say "The lights flicker worst out in the hallway."

Chapter 3 - Stained carpet

The stained carpet is a backdrop. The stained carpet is in Outside Hall and Down-the-Hall.
The description of the stained carpet is "The carpet [if it's Nighttime]in the hallway, you remember, [end if]is absolutely disgusting."

Instead of remembering the stained carpet: say "That, you expect, [regarding the noun][remain] out in the hallway."

Instead of attacking or burning or cutting the stained carpet: say "[no time]That would be a great way to ensure you never see your security deposit again."
Instead of assaulting the stained carpet with: try attacking the stained carpet.

Instead of climbing or entering the stained carpet:
	if the location is in Hallway, say "[nt][You're already] standing on it.";
	otherwise try going north.

Instead of drinking or eating or tasting or kissing the stained carpet: say "[nnt]Given the state of it, [if it's Nighttime]you think [end if]you'd really rather not."

Instead of getting off the stained carpet:
	if the location is in Hallway, try going south;
	otherwise say "[nt][You're already] off it."

Instead of giving something to the stained carpet: try putting the noun on the stained carpet.
Instead of inserting something into the stained carpet: try putting the noun on the stained carpet.
Instead of listening to the stained carpet: say "[nnt][The stained carpet] [aren't] making any noise."
Instead of looking behind or looking under or entering underneath the stained carpet: say "[nnt]The carpet covers the whole hallway floor. [We] [can't] lift it up."
Instead of lying on or sitting on or crouching on or rubbing or touching or squeezing or smelling the stained carpet: say "[nnt]Given the carpet's state, [if it's Daytime]you'd rather not[otherwise]you doubt you'd actually want to[end if]."
Instead of placing something under the stained carpet: say "[nnt]The carpet covers the whole hallway floor. [We] [can't] lift it up."
Instead of pulling or pushing or turning or taking the stained carpet: say "[nnt]The carpet is stapled to the floor. [We] [can't] move it."
Instead of pushing the stained carpet to: try pushing the stained carpet.

Instead of putting something on the stained carpet:
	if the location is in Hallway:
		if it's Daytime:
			try dropping the noun;
		otherwise:
			try depositing the noun;
	otherwise:
		try inserting the noun into Outside Hall.

Instead of searching the stained carpet:
	let L be a list of things;
	let M be the list of locale-supportable things in Outside Hall;
	let N be the list of locale-supportable things in Down-the-Hall;
	add M to L;
	add N to L;
	if L is empty:
		say "[There's] nothing on the carpet.";
	otherwise:
		say "On the carpet [if the number of entries in L is 1][adapt the verb are from the third person singular][otherwise][adapt the verb are from the third person plural][end if] [L]."

Instead of showing something to the stained carpet: try putting the noun on the stained carpet.
Instead of standing up on the stained carpet: try entering the stained carpet.
Instead of throwing something at the stained carpet: try putting the noun on the stained carpet.
Instead of waving the stained carpet: try swinging the stained carpet.

Chapter 4 - Wallpaper

The wallpaper is a backdrop. The wallpaper is in Outside Hall and Down-the-Hall. Understand "wall paper" or "gaudy/faded" as the wallpaper. Understand "wall/walls" as the wallpaper when the location is either Outside Hall or Down-the-Hall.
The description of the wallpaper is "The wallpaper [if it's Nighttime]in the hallway, you remember, [end if]is gaudy and faded."

Instead of attacking or burning or cutting the wallpaper: say "[no time]That would be a great way to ensure you never see your security deposit again."
Instead of assaulting the wallpaper with: try attacking the wallpaper.
Instead of climbing or crouching on or lying on or sitting on or standing up on the wallpaper: say "[no time][The wallpaper] [are] too sheer to climb."
Instead of drinking or eating or tasting or kissing the wallpaper: say "[no time]You doubt the wallpaper would taste very good."
Instead of entering or entering underneath or slipping behind the wallpaper: say "[no time]The wallaper isn't yellow. You can't enter walls in real life[unicode 8212]that's what doors are for."
Instead of listening to the wallpaper: say "The walls are thick enough that [we] [can't] hear anything on the other side."
Instead of looking behind or looking under the wallpaper: say "[no time]The walls aren't transparent, thank goodness."
Instead of opening or closing the wallpaper: say "[no time]You can't open or close walls[unicode 8212]that's what doors are for."
Instead of pulling or pushing or turning or taking the wallpaper: say "[no time][We] [can't] move the walls."
Instead of pushing the wallpaper to: try pushing the wallpaper.
Instead of rubbing or touching or squeezing the wallpaper: say "Rough paper."
Instead of searching the wallpaper: try examining the wallpaper.
Instead of smelling the wallpaper: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of waving the wallpaper: try swinging the wallpaper.

Chapter 5 - Lockpick

The lockpick is a thing. Every door is unlocked by the lockpick. [The lockpick is deadly and sharp.]
The description of the lockpick is "In your mind, it will be a wicked-looking thing, part dagger and part engineering marvel."

Instead of remembering the lockpick: say "The last time [we] [saw] the [lockpick], the [intruder] will have been carrying it."

Instead of attacking or burning or cutting the lockpick: say "You doubt you'd be able to do much damage to such an advanced piece of equipment."
Instead of assaulting the lockpick with: try attacking the noun.
Instead of assaulting something with the lockpick: say "[no time][The second noun] [are] too small to do much damage."
Instead of drinking or eating or tasting or kissing the lockpick: say "[no time]You doubt the lockpick would taste very good."

Check inserting the lockpick into (this is the convert inserting the lockpick into to unlocking with rule):
	if the second noun is an unlocked door:
		try locking the second noun with the lockpick instead;
	otherwise if the second noun is locked:
		try unlocking the second noun with the lockpick instead.

Instead of locking the lockpick with: try locking the second noun with the lockpick.
Instead of locking keylessly or unlocking keylessly the lockpick: say "[nt][i][bracket]You'll need to specify what you want to lock or unlock with the lockpick.[close bracket][/i][line break]".
Instead of opening or closing the lockpick: say "It'll be one long thing, with no hinge to speak of."
Instead of pulling or pushing or turning the lockpick: say "[nt][i][bracket]Better to keep things simple by just LOCKING or UNLOCKING whatever you mean WITH the lockpick.[close bracket][/i][line break]".
Instead of pushing the lockpick to: try pushing the lockpick.
Instead of putting the lockpick on the keyring: say "[no time]The lockpick won't have a loop for you to attach to the key ring[unicode 8212]you'll need to keep it separate."
Instead of rubbing or touching or squeezing the lockpick: say "Cool, sinister metal."
Instead of smelling the lockpick: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of throwing the lockpick at something: say "[no time]Once you identify the impulse, [we] [find] you have no reason to actually follow through."
Instead of unlocking the lockpick with: try unlocking the second noun with the lockpick.

The dagger is a metaphor. It is part of the lockpick.
Before doing something other than remembering when the current action involves the dagger: say "[no time]It won't be a [i]literal[/i] dagger. That's just the best approximation your mind can come up with." instead.

Instead of remembering the dagger: say "The last time [we] [saw] the dagger-like [lockpick], the [intruder] will have been carrying it."

The engineering marvel is a metaphor. It is part of the lockpick. Understand "cogs" or "dials" or "tools" as the engineering marvel.
Before doing something other than remembering when the current action involves the engineering marvel: say "[no time]You imagine cogs and dials and who knows what else, the perfect tools for who knows what purpose." instead.

Instead of remembering the engineering marvel: say "The last time [we] [saw] the [lockpick], which you imagine to be an engineering marvel, the [intruder] will have been carrying it."

Chapter 6 - Neighbor's door

The neighbor's door is a scenery door. The neighbor's door is north of Outside Hall. The neighbor's door is closed, locked, not openable, and not lockable. Understand "neighbour's/neighbors/neighbours/neighbor/neighbour/neighbors'/neighbours'" as the neighbor's door.
The description of the neighbor's door is "The door across the hall, near-identical to your own front door."
Does the player mean doing something to the neighbor's door:
	if the location is Outside Hall, it is unlikely;
	it is very unlikely.
	
First report knocking on the neighbor's door (this is the special report neighbor door knocking rule):
	say "[We] [if it's Nighttime]will [end if][knock-desc] on your [neighbor's door]. [They] [make] plenty of noise, but [garner] no response." (A) instead.
	
Instead of remembering the neighbor's door: say "You expect that your neighbor's door remains across from yours in the hallway outside."
	
Instead of attacking or burning or cutting the neighbor's door: say "[no time]That would be a great way to ensure you never see your security deposit again."
Instead of assaulting the neighbor's door with: try attacking the neighbor's door.
Instead of crouching behind or lying behind or sitting behind or slipping behind the neighbor's door: say "[no time]Your neighbor's door won't do any better at concealing you than the walls around it."
Instead of climbing or crouching on or lying on or sitting on or standing up on the neighbor's door: say "[no time]The plane of the door [regarding the neighbor's door][are] too sheer to climb."
Instead of closing the neighbor's door: say "[no time][It's already] closed and locked."
Instead of drinking or eating or tasting or kissing the neighbor's door: say "[no time]You doubt your neighbor's door would taste very good."
Instead of entering underneath the neighbor's door: say "[nnt]You won't fit underneath."
Instead of giving something to the neighbor's door: try inserting the noun into the neighbor's door.

Instead of inserting something into the neighbor's door:
	take no time;
	if the noun is a card or the noun is a latchkey or the noun is either the wallet or the keyring:
		say "You[if it's Nighttime] think you[end if][']d rather not surrender [the noun] to a stranger[if it's Nighttime], intruder or no[end if].";
	otherwise:
		say "[if it's Daytime]There's no[otherwise]There won't be any[end if] mail slot, and [the noun] won't fit underneath the door."

Instead of listening to the neighbor's door: say "[We] [can't] make out any noise on the other side."
Instead of locking the neighbor's door with: say "[no time][It's already] locked."
Instead of locking keylessly the neighbor's door: say "[no time][It's already] locked."
Instead of looking behind or looking under the neighbor's door: say "[nnt]The door [regarding the neighbor's door][are] too flush with the ground for you to see underneath."
Instead of opening or entering or pulling or pushing or turning or swinging or waving the neighbor's door: say "[nnt]The door [regarding the neighbor's door][are] locked, and [we] [don't] have the key."
Instead of placing something under the neighbor's door: say "[nnt]The door [regarding the neighbor's door][are] too flush with the ground for anything to fit underneath while it's closed."
Instead of pushing the neighbor's door to: try opening the neighbor's door.
Instead of putting something on the neighbor's door: try inserting the noun into the neighbor's door.
Instead of rubbing or touching or squeezing the neighbor's door: say "[if it's Daytime]Rough[otherwise]You expect it feels much the same as yours: rough[end if] old wood."
Instead of searching the neighbor's door: try examining the neighbor's door.
Instead of showing something to the neighbor's door: try inserting the noun into the neighbor's door.
Instead of smelling the neighbor's door: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of stowing something behind the neighbor's door: try inserting the noun into the neighbor's door.
Instead of taking the neighbor's door: say "[no time][We] [lack] the expertise required to remove the door from its hinges."
Instead of throwing something at the neighbor's door: say "[no time]Once you identify the impulse, [we] [find] you have no reason to actually follow through."
Instead of unlocking the neighbor's door with: say "[no time][We] [don't] have the key to your neighbor's apartment."
Instead of unlocking keylessly the neighbor's door: say "[no time][We] [don't] have the key to your neighbor's apartment."

Part 3 - Closet

Chapter 1 - The door and the room

The closet is a privately-named door. It is inside from Entryway and outside from Within-Closet. It is closed, openable, unlocked, and not lockable. Understand "closet/closet's/closets/-- door" as the closet. Understand "closet" as the closet when the closet is closed and the location is not Within-Closet.
The description of the closet is "The door [if the location is Within-Closet]back out into the entryway[otherwise]to the coat closet[end if], [if it's Daytime]currently[otherwise]which will be[end if] [openness of the closet][if it's Nighttime] by that point[end if]. It's made of rough, dark wood."

Rule for printing the name of the closet when the location is Within-Closet: say "closet door".
Rule for printing the name of the closet while opening or closing: say "closet door".
Rule for printing the name of the closet while asking which do you mean: say "closet door".

Check examining the closet (this is the prefer examining the closet rather than its door rule):
	if the closet is open:
		if the player's command does not include "door":
			try examining Within-Closet instead.
			
Instead of remembering the closet: say "The [closet] [if it's Daytime]is[otherwise]will remain[end if] in the entryway."

Instead of attacking or burning or cutting the closet: say "[no time]That would be a great way to ensure you never see your security deposit again."
Instead of assaulting the closet with: try attacking the closet.
Instead of climbing the closet: try entering the closet.

Instead of crouching behind the closet:
	unless the location is Within-Closet:
		try entering the closet;
		silently try taking position crouched;
		say "[We] [crouch] down inside of the closet.";
	otherwise:
		try taking position crouched.

Instead of crouching on or lying on or sitting on or standing up on the closet: say "[no time][We] don't think [if it's Daytime]you can[otherwise]you'll be able to[end if] make that work."
Instead of drinking or eating or tasting or kissing the closet: say "[no time]You doubt the closet door would taste very good."
Instead of entering underneath the closet: try entering the closet.

Instead of listening to the closet:
	if the location is Within-Closet:
		now player-listening is true;
	otherwise:
		say "[We] [hear] no noise coming from inside the closet."

Instead of locking the closet with: follow the closet doesn't lock rule.
Instead of locking keylessly the closet: follow the closet doesn't lock rule.

Instead of looking behind the closet:
	if the closet is closed:
		say "(first opening the closet door)[command clarification break]";
		silently try opening the closet;
		if the closet is open:
			try examining the other side of closet from the location;
		otherwise:
			stop the action;
	otherwise:
		say "[nt]The open closet door [can't exactly] conceal much."

Instead of looking under the closet:
	if the closet is open:
		try examining the other side of closet from the location;
	otherwise:
		say "[nnt][The closet] door [are] too flush with the ground for you to see underneath."

Instead of lying behind the closet:
	unless the location is Within-Closet:
		try entering the closet;
		silently try taking position reclining;
		say "[We] [lie] down inside of the closet.";
	otherwise:
		try taking position reclining.

Instead of placing something under the closet:
	if the closet is open:
		try inserting the noun into the other side of the closet from the location;
	otherwise:
		say "[nnt][The closet] door [are] too flush with the ground for anything to fit underneath while it's closed."

Instead of pushing the closet to: try pushing the closet.
Instead of putting something on the closet: say "[nnt]You doubt putting things on the closet door would be a productive course of action."
Instead of rubbing or touching or squeezing the closet: say "[if it's Daytime]The[otherwise]You know the[end if] wood is [if it's Daytime]unexpectedly rough[otherwise]rougher than you might expect[end if]."

Instead of searching the closet:
	if the closet is closed, say "[nt][We] [can't see] into the closet while its door is closed.";
	otherwise try searching Within-Closet;
	[say line break.]

Instead of sitting behind the closet:
	unless the location is Within-Closet:
		try entering the closet;
		silently try taking position seated;
		say "[We] [sit] down inside of the closet.";
	otherwise:
		try taking position seated.

Instead of slipping behind the closet: try entering the closet.
Instead of smelling the closet: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."

Instead of stowing something behind the closet:
	if the location is Within-Closet:
		if it's Daytime:
			try dropping the noun;
		otherwise:
			try depositing the noun;
	otherwise:
		try inserting the noun into Within-Closet.

Instead of swinging or waving the closet: try pushing the closet.
Instead of taking the closet: say "[no time]You [can't exactly] remove the door from its hinges."
Instead of throwing something at the closet: say "[no time]Once you identify the impulse, [we] [find] you have no reason to actually follow through."
Instead of unlocking the closet with: follow the closet doesn't lock rule.
Instead of unlocking keylessly the closet: follow the closet doesn't lock rule.

This is the closet doesn't lock rule: say "[nnt]The closet door doesn't lock[if it's Nighttime], as far as you know[end if]."

The rough-dark-wood is a material. It is part of the closet. The printed name is "rough dark wood". Understand "rough wood" or "dark wood" or "rough dark wood" or "roughened" or "wood" or "warped/warp" as the rough-dark-wood.
The description of the rough-dark-wood is "Warped, roughened, dark wood that has seen many years of abuse."

After starting the virtual machine (this is the redirect from rough dark wood to closet door rule):
	dispatch everything but { drinking action, eating action, examining action, kissing action, removing it from action, rubbing action, searching action, squeezing action, taking action, tasting action, touching action, remembering action } for the rough-dark-wood to the closet;
	
Instead of drinking or eating or tasting or kissing the rough-dark-wood: say "[nnt]You fear [if it's Daytime]you'll[otherwise]you'd[end if] get a splinter."
Instead of removing the rough-dark-wood from: try taking the rough-dark-wood.
Instead of removing something from the rough-dark-wood: try taking the noun.
Instead of rubbing or touching or squeezing the rough-dark-wood: say "Rough indeed, and liable to give splinters."
Instead of searching the rough-dark-wood: try examining the rough-dark-wood.
Instead of taking the rough-dark-wood: say "[no time][We] [can't] remove the wood from the door it makes up; the door would cease to exist."

Within-Closet is a room. "The inside of the closet [regarding the closet][are] dusty. A set of [hangers] [dangle] from a horizontal bar." The printed name is "Inside the Closet". Within-Closet is dim.
Understand "into/inside/in the/-- closet" as Within-Closet. Understand "closet" as Within-Closet when the closet is open or the location is Within-Closet.
The noise-modifier of Within-Closet is "[if closet is closed], muffled by the closed door, [end if]".
The relative direction set of Within-Closet is the Table of Closeted Direction Descriptors.
The casual descriptor of Within-Closet is "the closet".
For saying the location name of Within-Closet: say "in the closet".
The prepositional entrance descriptor of Within-Closet is "into the closet".
The prepositional exit descriptor of Within-Closet is "out of the closet".

Instead of going west in Within-Closet: try going outside.
Instead of going northwest in Within-Closet: try going outside.
Instead of going southwest in Within-Closet: try going outside.

After reading a command:
	if the player's command matches "open closet":
		change the text of the player's command to "open closet door".
		
After reading a command:
	if the player's command matches "close closet":
		change the text of the player's command to "close closet door".

After deciding the scope of the player while not looking or going (this is the can see and reach into and out of the closet rule):
	if the closet is open:
		if the location is Entryway:
			place the contents of Within-Closet in scope;
		otherwise if the location is Within-Closet:
			place the contents of Entryway in scope;
			
Rule for reaching inside Within-Closet:
	if the location is Entryway and the closet is open, allow access;
	otherwise deny access.
	
Rule for reaching inside Entryway:
	if the location is Within-Closet and the closet is open, allow access;
	otherwise deny access.

Instead of examining Within-Closet (this is the special examining within-closet rule):
	if Within-Closet is another:
		say "The inside of the closet [regarding the closet][are] dusty. A set of [hangers] [dangle] from a horizontal bar[unless the hangers are empty]. On them [is-are a list of things on the hangers][end unless]. ";
		now the closet-rod is mentioned;
		let L be the list of unmentioned locale-supportable things in Within-Closet;
		repeat with obj running through L:
			if obj is part of something, remove obj from L;
		unless L is empty:
			say paragraph break;
			say "Also in the closet [if the number of entries in L is 1][adapt the verb are from the third person singular][otherwise][adapt the verb are from the third person plural][end if] [L with indefinite articles].";
		otherwise:
			say line break;
	otherwise:
		try looking.

For announcing notable exits of Within-Closet:
	say "The door back [b]out[/b] to the entryway [regarding the closet][are] [openness of the closet]."
	
[Carry out opening the closet: now Within-Closet is lighted.
Carry out closing the closet: now Within-Closet is dark.]

Instead of examining outside when the location is Within-Closet:
	if the closet is open, try examining Entryway;
	otherwise try examining the closet.

Instead of examining west when the location is Within-Closet: try examining outside.
Instead of examining northwest when the location is Within-Closet: try examining outside.
Instead of examining southwest when the location is Within-Closet: try examining outside.
Instead of examining north when the location is Within-Closet: say "[nnt][There's] a wall in that direction."
Instead of examining south when the location is Within-Closet: say "[nnt][There's] a wall in that direction."
Instead of examining east when the location is Within-Closet: say "[nnt][There's] a wall in that direction."

Instead of listening to Within-Closet:
	if the radio is listenable:
		try listening to the radio;
	otherwise if it's Daytime:
		if the dishwasher-switch is switched on:
			say "From the kitchenette, you hear the dishwasher going.";
		otherwise if the laptop-computer is switched on and the laptop-computer is in the location:
			if the kitchen faucet is switched on:
				if the bathroom faucet is switched on or the tub-faucet is switched on:
					say "You hear the computer's fan whirring slightly. From here, you can also hear faucets going in the kitchenette and the bathroom.";
				otherwise:
					say "You hear the computer's fan whirring slightly. From here, you can also hear a faucet going in the kitchenette.";
			otherwise if the bathroom faucet is switched on or the tub-faucet is switched on:
				say "You hear the computer's fan whirring slightly. From here, you can also hear water running in the bathroom.";
		otherwise:
			if the kitchen faucet is switched on:
				if the bathroom faucet is switched on or the tub-faucet is switched on:
					say "You can hear faucets going in the kitchenette and the bathroom.";
				otherwise:
					say "You can hear a faucet going in the kitchenette.";
			otherwise if the bathroom faucet is switched on or the tub-faucet is switched on:
				say "You can hear water running in the bathroom.";
			otherwise:
				say "You hold your breath and listen, but don't hear anything unusual.";
	otherwise:
		now player-listening is true.

Instead of smelling Within-Closet: say "It smells vaguely musty in [if the location is Within-Closet and it's Daytime]here[otherwise]there[end if][if it's Nighttime], if you remember correctly[end if]."

Table of Closeted Direction Descriptors
other place	descriptor
Bathroom	"in the bathroom"
Kitchenette	"somewhere in the main room"
Entryway	"in the entryway"
Main-Bed	"somewhere in the main room"
Main-Behind-Shelf	"somewhere in the main room"
Main-By-Counter	"somewhere in the main room"
Main-Office	"somewhere in the main room"
Main-Sitting	"somewhere in the main room"
Outside Hall	"out in the hall"

in-the-closet is a position in Within-Closet.

Chapter 2 - Closet rod and hangers

Some hangers are a hook in Within-Closet. Understand "hanger" or "coathanger/coatchangers/clotheshanger/clotheshangers" or "clothes hanger/hangers" as the hangers.
The description of the hangers is "A variety of plastic clothes hangers[unicode 8212]all you could grab on short notice."
Does the player mean putting something hangable on the hangers: it is likely.

Instead of remembering the hangers: say "Those, you expect, [regarding the noun][remain] in the closet."

Check putting something on the hangers (this is the no sizable things on the hangers rule):
	unless the noun is either the trenchcoat or the leather jacket:
		if the noun is sizable:
			say "[no time]You doubt the hangers [if it's Daytime]will[otherwise]would[end if] hold [unless the noun is proper-named]the [end unless][regarding the noun][possessive] weight." (A) instead.

First report putting something on the hangers: say "[We] [hang] [the noun] up on a hanger." instead.

Instead of attacking or burning or cutting the hangers:
	if it's Daytime, say "You have no reason to destroy the hangers.";
	otherwise say "[nt]You see no way that destroying the hangers would help in that situation."

Instead of assaulting the hangers with: try attacking the hangers.
Instead of assaulting something with the hangers: say "[nnt]You doubt the hangers would make an effective weapon."
Instead of climbing the hangers: say "[no time]You doubt the hangers [if it's Daytime]will[otherwise]would[end if] hold your weight."
Instead of crouching behind or entering underneath or lying behind or sitting behind or slipping behind the hangers: say "[no time][The noun] [can't] meaningfully conceal you."
Instead of drinking or eating or tasting or kissing the hangers: say "[no time]You doubt the hangers would taste very good."
Instead of giving something to the hangers: try putting the noun on the hangers.
Instead of inserting something into the hangers: try putting the noun on the hangers.
Instead of knocking on the hangers: say "The sound [if it's Daytime]isn't[otherwise]won't be[end if] very impressive."
Instead of listening to the hangers: say "[no time]The hangers aren't capable of making much noise on their own."

Instead of placing something under the hangers:
	if the noun is hangable:
		try putting the noun on the hangers;
	otherwise if it's Daytime:
		try dropping the noun;
	otherwise:
		try depositing the noun.

Instead of pulling or pushing or turning or swinging or waving the hangers: say "[nnt]It [adapt the verb make from the third person singular] little difference."
Instead of pushing the hangers to: try pushing the hangers.
Instead of removing the hangers from: try taking the hangers.
Instead of removing something from the hangers: try taking the noun.
Instead of rubbing or touching or squeezing the hangers: say "They're mostly plastic."
Instead of showing something to the hangers: try putting the noun on the hangers.
Instead of smelling the hangers: say "They don't smell like much of anything[if it's Nighttime], as far as you know[end if]."

Instead of stowing something behind the hangers:
	if the noun is hangable:
		try putting the noun on the hangers;
	otherwise if it's Daytime:
		try dropping the noun;
	otherwise:
		try depositing the noun.

Instead of taking the hangers:
	if it's Daytime, say "The hangers are of most use to you right where they are.";
	otherwise say "You don't think the hangers will be of much use to you. They're too flimsy to do much of anything but their intended job.";
	take no time.

Instead of throwing something at the hangers: say "[no time]Once you identify the impulse, [we] [find] you have no reason to actually follow through."

Instead of tying something to the hangers:
	if the noun is hangable:
		try putting the noun on the hangers;
	otherwise:
		say "[nt]You doubt that would be a productive course of action."

The closet-rod is part of the hangers. The printed name of the closet-rod is "closet rod". Understand "closet rod/pole" or "rod/pole" or "clothesrack" or "clothes rack" or "hanging rod/pole" or "hanger rod/pole" as the closet-rod.
The description of the closet-rod is "A horizontal rod for putting hangers on."

Instead of remembering the closet-rod: say "That, you expect, [regarding the noun][remain] in the closet."

Instead of emptying the closet-rod: try emptying the hangers.
Instead of giving something to the closet-rod: try putting the noun on the hangers.
Instead of inserting something into the closet-rod: try putting the noun on the hangers.
Instead of putting something on the closet-rod: try putting the noun on the hangers.
Instead of searching the closet-rod: try searching the hangers.
Instead of showing something to the closet-rod: try putting the noun on the hangers.
Instead of stowing something behind the closet-rod: try putting the noun on the hangers.
Instead of throwing something at the closet-rod: try putting the noun on the hangers.
Instead of tying something to the closet-rod: try tying the noun to the hangers.

Instead of attacking or burning or cutting the closet-rod:
	take no time;
	say "You doubt [if it's Daytime]you'll[otherwise]you'd[end if] be able to do much damage. Besides, [nobr]";
	if it's Daytime:
		say "you[if it's Nighttime][']ll[end if] have no reason to destroy the closet rod.";
	otherwise:
		say "you see no way that destroying the closet rod would help in that situation."

Instead of assaulting the closet-rod with: try attacking the closet-rod.
Instead of climbing or crouching on or entering or lying on or sitting on or standing up on the closet-rod: say "[no time]You[if it's Daytime][']d rather not[otherwise] suspect you won't want to[end if] test the limits of the closet rod's weight capacity[if it's Daytime], today of all days[otherwise] in such a high-stakes situation[end if]."
Instead of crouching behind or entering underneath or lying behind or sitting behind or slipping behind the closet-rod: say "[no time][The noun] [can't] meaningfully conceal you."
Instead of drinking or eating or tasting or kissing the closet-rod: say "You doubt the closet rod would taste very good."

Instead of entering underneath the closet-rod:
	unless the location is Within-Closet:
		silently try entering the closet;
	silently try taking position crouched;
	say "[We] [crouch] down in the closet."
	
Instead of listening to the closet-rod: say "[no time][The noun] doesn't really make noise."

Instead of placing something under the closet-rod:
	if the location is Within-Closet:
		if it's Daytime:
			try dropping the noun;
		otherwise:
			try depositing the noun;
	otherwise:
		try inserting the noun into Within-Closet.

Instead of pulling or pushing or turning or swinging or taking or waving the closet-rod: say "[nnt][if it's Daytime]It's[otherwise]You know it's[end if] firmly bolted in place."
Instead of pushing the closet-rod to: try pushing the closet-rod.
Instead of removing the closet-rod from: try taking the closet-rod.
Instead of removing something from the closet-rod: try taking the noun.
Instead of rubbing or touching or squeezing the closet-rod: say "Cool, somehow-rough metal."
Instead of smelling the closet-rod: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."

Chapter 3 - Things on the hangers and other things here

Section 1 - Leather jacket
	
The leather jacket is on the hangers. The leather jacket is incapacitating, wearable, and hangable. Understand "coat" or "pleather" or "faux/fake leather" as the leather jacket. The bulk of the leather jacket is 30.
The description of the leather jacket is "An expensive leather jacket, better suited to the weather in New York than here."

Instead of attacking or burning or cutting the leather jacket:
	if it's Daytime, say "The leather jacket is expensive, and you have no reason to destroy it.";
	otherwise say "[nt]The leather jacket is expensive. You see no way that destroying it would help in that situation."

Instead of assaulting the leather jacket with: try attacking the leather jacket.
Instead of crouching behind or entering underneath or lying behind or sitting behind or slipping behind the leather jacket: say "[no time][The noun] [aren't] capable of concealing you."
Instead of crouching on or lying on or sitting on or standing up on or opening or closing the leather jacket: say "[nnt]It [adapt the verb make from the third person singular] little difference."
Instead of drinking or eating or tasting or kissing the leather jacket: say "[no time]You doubt the leather would taste very good."
Instead of emptying the leather jacket: try emptying the jacket-pockets.
Instead of entering the leather jacket: try wearing the leather jacket.
Instead of giving something to the leather jacket: try inserting the noun into the leather jacket.
Instead of inserting something into the leather jacket: try inserting the noun into the jacket-pockets.
Instead of knocking on the leather jacket: say "The sound [regarding the noun][aren't] very impressive."
Instead of listening to the leather jacket: say "[no time]The leather jacket doesn't really make noise."

Instead of looking behind or looking under the leather jacket:
	if the player encloses the leather jacket:
		try searching the leather jacket;
	otherwise:
		say "[nt][The leather jacket] [can't] effectively conceal much."

Instead of placing something under the leather jacket:
	if the player encloses the leather jacket:
		try inserting the noun into the leather jacket;
	otherwise:
		say "[nt][The leather jacket] [can't] effectively conceal much."

Instead of pulling or pushing or turning the the leather jacket:
	if the player encloses the the leather jacket, say "[nnt]It [adapt the verb make from the third person singular] little difference.";
	otherwise try taking the the leather jacket.

Instead of pushing the leather jacket to: try pushing the leather jacket.
Instead of putting something on the leather jacket: try inserting the noun into the leather jacket.
Instead of removing the leather jacket from: try taking the leather jacket.
Instead of removing something from the leather jacket: try taking the noun.
Instead of rubbing or touching or squeezing the leather jacket: say "Buttery leather."
Instead of searching the leather jacket: try searching the jacket-pockets.
Instead of showing something to the leather jacket: try inserting the noun into the leather jacket.
Instead of smelling the leather jacket: say "Leather and oil."
Instead of stowing something behind the leather jacket: try placing the noun under the leather jacket.
Instead of tying something to the leather jacket: try inserting the noun into the leather jacket.
Instead of washing the leather jacket: say "[no time]You've never heard of anyone washing a leather jacket."
Instead of waving the leather jacket: try swinging the leather jacket.

Check assaulting something with the leather jacket:
	unless the noun is the intruder, say "Once you identify the impulse, [we] [find] you have no reason to actually follow through." instead.

Check throwing the leather jacket at something:
	unless the second noun is the intruder, say "[nt]Once you identify the impulse, [we] [find] you have no reason to actually follow through." instead.

Check swinging the leather jacket: if it's Nighttime, abide by the that would only call attention to you rule.
Check waving the leather jacket: if it's Nighttime, abide by the that would only call attention to you rule.

This is the that would only call attention to you rule:
	if intruder-inside is true:
		take no time;
		if the intruder is around:
			say "That would only serve to alert the intruder to your location." (A) instead;
		otherwise:
			say "You doubt that would be a productive course of action." (B) instead;
	otherwise:
		make no decision.
		
Check wearing the leather jacket (this is the first don't wear two coats rule):
	if the player wears the trenchcoat:
		take no time;
		if it's Daytime:
			say "It's too warm here for layering." (A) instead;
		otherwise:
			say "Wearing two coats would only slow you down." (B) instead.
			
The standard implicit taking rule does nothing when the noun is the leather jacket and the leather jacket is worn.
		
Some jacket-pockets are a pocket. They are part of the leather jacket. The printed name of the jacket-pockets is "leather jacket's pockets". Understand "jacket's/jackets pocket/pockets" or "leather jacket's/jackets pocket/pockets" as the jacket-pockets.

Report an actor inserting something into the jacket-pockets (this is the custom report inserting into the jacket pockets rule):
	if the actor is the player and the action is not silent:
		say "[We] [put] [the noun] into a jacket pocket." (A) instead.

The custom report inserting into the jacket pockets rule is listed after the concise report inserting rule in the report inserting it into rules.
	
After starting the virtual machine (this is the redirect from its pockets to the leather jacket rule):
	dispatch everything but { examining action, consulting it about action, emptying action, entering action, giving it to action, looking behind action, looking under action, searching action, inserting it into action, opening action, closing action, placing it under action, pulling action, pushing action, turning action, putting it on action, removing it from action, showing it to action, stowing it behind action, taking action, throwing it at action, remembering action } for the jacket-pockets to the leather jacket;
		
Section 2 - Trenchcoat

The trenchcoat is on the hangers. The trenchcoat is incapacitating, wearable, and hangable. Understand "trench coat" or "coat" as the trenchcoat. The bulk of the trenchcoat is 30.
The description of the trenchcoat is "A long brown trench coat[unicode 8212]one of your favorite pieces."

Instead of attacking or burning or cutting the trenchcoat:
	if it's Daytime, say "You have no reason to destroy the trenchcoat.";
	otherwise say "[nt]You see no way that destroying the trenchcoat would help in that situation."

Instead of assaulting the trenchcoat with: try attacking the trenchcoat.
Instead of crouching behind or entering underneath or lying behind or sitting behind or slipping behind the trenchcoat: say "[no time][The noun] [aren't] capable of concealing you."
Instead of crouching on or lying on or sitting on or standing up on or opening or closing the trenchcoat: say "[nnt]It [adapt the verb make from the third person singular] little difference."
Instead of drinking or eating or tasting or kissing the trenchcoat: say "[no time]You doubt the trenchcoat would taste very good."
Instead of emptying the trenchcoat: try emptying the coat-pockets.
Instead of entering the trenchcoat: try wearing the trenchcoat.
Instead of giving something to the trenchcoat: try inserting the noun into the trenchcoat.
Instead of inserting something into the trenchcoat: try inserting the noun into the coat-pockets.
Instead of knocking on the trenchcoat: say "The sound [regarding the noun][aren't] very impressive."
Instead of listening to the leather jacket: say "[no time]The trenchcoat doesn't really make noise."

Instead of looking behind or looking under the trenchcoat:
	if the player encloses the trenchcoat:
		try searching the trenchcoat;
	otherwise:
		say "[nt][The trenchcoat] [can't] effectively conceal much."

Instead of placing something under the trenchcoat:
	if the player encloses the trenchcoat:
		try inserting the noun into the trenchcoat;
	otherwise:
		say "[nt][The trenchcoat] [can't] effectively conceal much."

Instead of pulling or pushing or turning the trenchcoat:
	if the player encloses the trenchcoat, say "[nnt]It [adapt the verb make from the third person singular] little difference.";
	otherwise try taking the trenchcoat.

Instead of pushing the trenchcoat to: try pushing the trenchcoat.
Instead of putting something on the trenchcoat: try inserting the noun into the trenchcoat.
Instead of removing the trenchcoat from: try taking the trenchcoat.
Instead of removing something from the trenchcoat: try taking the noun.
Instead of rubbing or touching or squeezing the trenchcoat: say "Sturdy material."
Instead of searching the trenchcoat: try searching the coat-pockets.
Instead of showing something to the trenchcoat: try inserting the noun into the trenchcoat.
Instead of smelling the trenchcoat: say "[if it's Daytime][regarding the trenchcoat][They][otherwise]You suspect [regarding the trenchcoat][they][end if] [smell] like detergent."
Instead of stowing something behind the trenchcoat: try placing the noun under the trenchcoat.
Instead of tying something to the trenchcoat: try inserting the noun into the trenchcoat.
Instead of washing the trenchcoat: say "[no time]You're pretty sure it's dry-clean only."
Instead of waving the trenchcoat: try swinging the trenchcoat.

Check assaulting something with the trenchcoat:
	unless the noun is the intruder, say "Once you identify the impulse, [we] [find] you have no reason to actually follow through." instead.

Check throwing the trenchcoat at something:
	unless the second noun is the intruder, say "[no time]Once you identify the impulse, [we] [find] you have no reason to actually follow through." instead.

Check swinging the trenchcoat: if it's Nighttime, abide by the that would only call attention to you rule.
Check waving the trenchcoat: if it's Nighttime, abide by the that would only call attention to you rule.

Check wearing the trenchcoat (this is the second don't wear two coats rule):
	if the player wears the leather jacket:
		take no time;
		if it's Daytime:
			say "It's too warm here for layering." (A) instead;
		otherwise:
			say "Wearing two coats would only slow you down." (B) instead.
			
The standard implicit taking rule does nothing when the noun is the trenchcoat and the trenchcoat is worn.

Some coat-pockets are a pocket. They are part of the trenchcoat. The printed name of the coat-pockets is "trenchcoat's pockets". Understand "trenchcoat's/trenchcoats/coat's/coats pocket/pockets" as the coat-pockets.
	
After starting the virtual machine (this is the redirect from its pockets to the trenchcoat rule):
	dispatch everything but { examining action, consulting it about action, emptying action, entering action, giving it to action, looking behind action, looking under action, searching action, inserting it into action, opening action, closing action, placing it under action, pulling action, pushing action, turning action, putting it on action, removing it from action, showing it to action, stowing it behind action, taking action, throwing it at action, remembering action } for the coat-pockets to the trenchcoat;
	
Instead of remembering the coat-pockets: say "Those are part of the trenchcoat."
	
Report an actor inserting something into the coat-pockets (this is the custom report inserting into the coat pockets rule):
	if the actor is the player and the action is not silent:
		say "[We] [put] [the noun] into a coat pocket." (A) instead.

The custom report inserting into the coat pockets rule is listed after the concise report inserting rule in the report inserting it into rules.

Section 3 - Umbrella
	
The umbrella is in within-closet. "An [umbrella] [lean] against one wall." The umbrella can be openable. The umbrella can be open. The umbrella is openable and closed. The bulk of the umbrella is 15. [The umbrella is deadly and sharp.]
The description of the umbrella is "A cheap black umbrella. You lost your old one recently, and had to buy [if it's Daytime]this[otherwise]a new[end if] one at the airport. [if it's Daytime]Currently[otherwise]By that point[end if], [it's] [openness of the umbrella]."

To decide which text is the openness of the umbrella:
	if the umbrella is open, decide on "open";
	decide on "closed".

Check going (this is the can't go through doorways with an open umbrella rule):
	if the umbrella is open and the player carries the umbrella and the door gone through is a door:
		say "[nnt][We] [can't fit] the open umbrella through a door frame." instead.
			
Check entering (this is the can't enter containers with an open umbrella rule):
	if the umbrella is open and the player carries the umbrella and the noun is a container:
		say "[nnt][We] [can't fit] [adapt entering preposition of the noun] [the noun] with the open umbrella." instead.
		
Check entering underneath (this is the can't enter underneath with an open umbrella rule):
	if the umbrella is open and the player carries the umbrella:
		say "[nnt][We] [can't fit] under [the noun] with the open umbrella." instead.
		
Check slipping behind (this is the can't slip behind with an open umbrella rule):
	if the umbrella is open and the player carries the umbrella:
		say "[nnt][We] [can't fit] behind [the noun] with the open umbrella." instead.
			
Check inserting the umbrella into (this is the open umbrella won't fit into most containers rule):
	if the umbrella is open:
		take no time;
		say "The [umbrella] [won't fit] [unless the second noun is a backside]inside [end if][the second noun] while it's open." instead.
		
Check opening the umbrella (this is the can't open the umbrella inside of containers rule):
	if the player is in a container:
		say "[nnt][The umbrella] [don't] have enough room to open [unless the holder of the player is a backside or the holder of the player is an underside]inside [end if][the holder of the player]." instead.
		
Check opening the umbrella (this is the can't open the umbrella when it's inside of containers rule):
	if the umbrella is in a container:
		say "[nnt][The umbrella] [don't] have enough room to open [unless the holder of the umbrella is a backside or the holder of the umbrella is an underside]inside [end if][the holder of the umbrella]." instead.

Instead of attacking or burning or cutting or crouching on or entering or lying on or sitting on or standing up on the umbrella: say "[nnt]You[if it's Nighttime] think you[end if][']d rather not risk destroying the umbrella[unicode 8212]it's your only one."
Instead of assaulting the umbrella with: try attacking the umbrella.
Instead of crouching behind or entering underneath or lying behind or sitting behind or slipping behind the umbrella: say "[no time]You doubt the umbrella could conceal you with any degree of subtlety."
Instead of drinking or eating or tasting or kissing the umbrella: say "[no time]You doubt the umbrella would taste very good."
Instead of giving something to the umbrella: try inserting the noun into the umbrella.
Instead of hugging the umbrella: say "[no time][if it's Daytime]It's not[otherwise]It won't be[end if] a very good hugger."
Instead of inserting something into the umbrella: say "[nt][The noun] [if it's Daytime]would[otherwise]will[end if] just fall back out the next time the umbrella [if it's Daytime]was[otherwise]is[end if] opened."
Instead of knocking on the umbrella: say "The sound [regarding the noun][aren't] very impressive."
Instead of listening to the umbrella: say "[no time]The umbrella isn't really capable of making noise on its own."
Instead of looking behind or looking under the umbrella: say "[no time][The noun] [aren't] functionally able to conceal anything."
Instead of placing something under the umbrella: say "[no time][The second noun] [aren't] functionally able to conceal anything."

Instead of pulling or pushing or turning the umbrella:
	if the umbrella is closed, try opening the umbrella;
	otherwise try closing the umbrella.

Instead of pushing the umbrella to: try pushing the umbrella.
Instead of putting something on the umbrella: try inserting the noun into the umbrella.
Instead of removing the umbrella from: try taking the umbrella.
Instead of removing something from the umbrella: try taking the noun.
Instead of rubbing or touching or squeezing the umbrella: say "Cool plastic."
Instead of searching the umbrella: say "[The noun] [aren't] concealing anything."
Instead of showing the umbrella to the intruder: try assaulting the intruder with the umbrella.
Instead of showing something to the umbrella: try inserting the noun into the umbrella.
Instead of smelling the umbrella: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of stowing something behind the umbrella: try inserting the noun into the umbrella.

Instead of throwing the umbrella at something: 
	if the second noun is the intruder:
		try assaulting the intruder with the umbrella;
	otherwise:
		say "[nt]Once you identify the impulse, [we] [find] you have no reason to actually follow through."

Instead of tying something to the umbrella: say "[no time]You doubt that would be a productive course of action."
Instead of waving the umbrella: try swinging the umbrella.

Check swinging the umbrella: if it's Nighttime, abide by the that would only call attention to you rule.
Check waving the umbrella: if it's Nighttime, abide by the that would only call attention to you rule.

Book 4 - Kitchenette

Part 1 - The room

Kitchenette is east of Entryway. "The kitchenette is [one of]small and cramped. Also, it would seem that if anyone came before you to clean, they missed several spots[or]small, cramped, and dirty[if it's Nighttime], if you remember[end if][stopping].

[first time]At least it seems decently stocked. [only][There's] a sink, a dishwasher, an oven with a stove on top, and a fridge. [A foot-pedal trash can] [squat] in one corner. Much of the rest of the space [adapt the verb are from the third person singular] taken up by cabinets.

[if it's Daytime]A counter separates[otherwise][one of]You remember a counter separating[or]A counter separates[stopping][end if] [if it's Daytime]the space[otherwise]it[end if] from the main area[unless the countertop is empty]. On the counter [is-are a list of things on the countertop][end unless]."
Understand "kitchen/kitchenette" as Kitchenette.
The printed name of Kitchenette is "Kitchenette[if the player is obscured by something] [roman type](behind [the random thing obscuring the player])".
The relative direction set of Kitchenette is the Table of Kitchenette Direction Descriptors.
The casual descriptor of Kitchenette is "the kitchenette".
For saying the location name of Kitchenette: say "in the kitchenette".
The prepositional entrance descriptor of Kitchenette is "into the kitchenette".
The prepositional exit descriptor of Kitchenette is "out of the kitchenette".

For announcing notable exits of Kitchenette:
	say "[We] [can] go back [b]west[/b] to the entryway."
	
Instead of examining Kitchenette when the location is not Kitchenette:
	say the description of Kitchenette;
	describe locale for Kitchenette;
	if the number of locale-supportable things in Kitchenette > 0:
		say "[We] [if it's Daytime]can also see[otherwise]will also be able to see[end if] [a list of locale-supportable things in Kitchenette]."

Instead of examining west when the location is Kitchenette: try examining Entryway.
Instead of examining south when the location is Kitchenette: try examining Main-By-Counter.
Instead of examining north when the location is Kitchenette: say "[nnt][There's] a wall in that direction."
Instead of examining east when the location is Kitchenette: say "[nnt][There's] a wall in that direction."

Instead of listening to Kitchenette:
	if the radio is listenable:
		try listening to the radio;
	otherwise if it's Daytime:
		if the dishwasher-switch is switched on:
			say "You hear the dishwasher going.";
		otherwise if the kitchen faucet is switched on:
			say "Water rushes from the kitchen faucet.";
		otherwise:
			if the laptop-computer is switched on and the laptop-computer is in the location:
				if the bathroom faucet is switched on or the tub-faucet is switched on:
					say "You hear the computer's fan whirring slightly. You also hear water running in the bathroom.";
				otherwise:
					say "You hear the computer's fan whirring slightly.";
			otherwise if the bathroom faucet is switched on or the tub-faucet is switched on:
				say "From the bathroom, you hear water running.";
			otherwise:
				say "You hold your breath and listen, but don't hear anything unusual.";
	otherwise:
		now player-listening is true.

Instead of smelling Kitchenette: follow the smelling rooms rule.

Table of Kitchenette Direction Descriptors
other place	descriptor
Bathroom	"in the bathroom"
Entryway	"in the entryway"
Main-Bed	"in the bedroom area"
Main-Behind-Shelf	"somewhere in the main room"
Main-By-Counter	"on the other side of the counter"
Main-Office	"somewhere in the main room"
Main-Sitting	"somewhere in the main room"
Outside Hall	"somewhere near the entryway"
Within-Closet	"somewhere near the entryway"

in-the-kitchen is a position in Kitchenette.

Part 2 - Things in the room

Chapter 1 - The counter

[Note: This is the same counter backdrop from above, but these things are more appropriate to be listed among the kitchen contents]

The knifeblock is a container on the countertop. The printed name of the knifeblock is "knife block". The knifeblock is open and not openable. Understand "knife block" or "block" as the knifeblock. [The knifeblock is deadly.] The bulk-capacity of the knifeblock is 3. The bulk of the knifeblock is 5.
The description of the knifeblock is "A hunk of polished wood with slots for holding blades."
Does the player mean inserting the knifeblock into: it is unlikely.
Does the player mean inserting something into the knifeblock:
	if the noun is a knife, it is likely;
	it is unlikely.

Rule for disclosing exterior of the knifeblock when the knifeblock is on the countertop: do nothing.

Rule for printing inventory details of the knifeblock: if the knifeblock is empty, stop.
Rule for printing the name of the knifeblock while not inserting or removing or taking:
	say "knife block[unless the knifeblock is empty], in which [is-are a list of things in the knifeblock][end unless]";
	omit contents in listing.

Rule for printing room description details of the knifeblock:
	if the knifeblock is empty:
		stop;
	otherwise:
		say ", in which [is-are a list of things in the knifeblock]" instead.
		
The examine containers rule does nothing when the noun is the knifeblock.

The special examining the knifeblock rule is listed after the standard examining rule in the carry out examining rulebook.

Carry out examining the knifeblock (this is the special examining the knifeblock rule):
	let X be the number of things in the knifeblock;
	say "[if it's Daytime]Currently[otherwise]By that point[end if], [if X is 0]none of the slots [adapt the verb are from the third person plural][otherwise if X is 1]one of the slots [adapt the verb are from the third person singular][otherwise][X in words] of the slots [adapt the verb are from the third person plural][end if] occupied[if X is 1] by [a random thing in the knifeblock][otherwise if X > 1][unicode 8212]one each by [a list of things in the knifeblock][end if]."

Instead of attacking or burning or cutting the knifeblock:
	if it's Daytime, say "You have no reason to destroy the knife block.";
	otherwise say "[nt][We] see no way that destroying the knife block would help in that situation."

Instead of assaulting the knifeblock with: try attacking the knifeblock.
Instead of crouching behind or entering underneath or lying behind or sitting behind or slipping behind the knifeblock: say "[no time]The knife block wouldn't do a very good job of concealing you."
Instead of drinking or eating or tasting or kissing the knifeblock: say "[no time]You doubt the knife block would taste very good."
Instead of giving something to the knifeblock: try inserting the noun into the knifeblock.
Instead of listening to the knifeblock: say "[nnt]The knife block doesn't really make noise."
Instead of looking behind the knifeblock: follow the nothing behind the knife block rule.
Instead of looking under the knifeblock: follow the nothing under the knife block rule.
Instead of closing the knifeblock: say "[nnt]The knife block doesn't close."
Instead of opening the knifeblock: say "[nnt]The knife block is always [']open['], as it were."
Instead of placing something under the knifeblock: follow the nothing under the knife block rule.
Instead of pulling or pushing or turning the knifeblock: say "[nnt]It [adapt the verb make from the third person singular] little difference."
Instead of pushing the knifeblock to: try pushing the knifeblock.
Instead of putting something on the knifeblock: try inserting the noun into the knifeblock.
Instead of removing something from the knifeblock: try taking the noun.
Instead of rubbing or touching or squeezing the knifeblock: say "Firm, lacquered wood."
Instead of showing something to the knifeblock: try inserting the noun into the knifeblock.
Instead of smelling the knifeblock: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of stowing something behind the knifeblock: follow the nothing behind the knife block rule.

Instead of taking the knifeblock:
	if it's Daytime, say "The knife block is surprisingly dense. It would be a bit cumbersome to carry around with you.";
	otherwise say "You know the knife block is surprisingly dense, and heavier than it appears. You fear carrying it would only slow you down.";
	take no time.

Instead of throwing something at the knifeblock: try inserting the noun into the knifeblock.

Check inserting something into the knifeblock (this is the knifeblock only accepts knives rule):
	unless the noun is a knife:
		say "[nnt][regarding the noun][Those] [won't] fit into any of the knifeblock's slots." instead.
		
This is the nothing behind the knife block rule:
	take no time;
	say "[if it's Daytime]The knife block is[otherwise]You suspect the knife block would be[end if] too small to effectively conceal anything behind itself."

This is the nothing under the knife block rule:
	take no time;
	say "[if it's Daytime]The knife block is[otherwise]You suspect the knife block would be[end if] too small to effectively conceal anything under itself."
		
Some slots are part of the knifeblock. Understand "slot" or "knifeslots/knifeslot" or "knife slot/slots" as the slots. The bulk of the slots is 0.
The description of the slots is "Thin holes in the wood. [if it's Daytime]Currently[otherwise]By that point[end if], [if the number of things in the knifeblock is 0]none [adapt the verb are from the third person plural][otherwise][number of things in the knifeblock in words] [are][end if] occupied[if the number of things in the knifeblock is 1] by [a random thing in the knifeblock][otherwise if the number of things in the knifeblock > 1][unicode 8212]one each by [a list of things in the knifeblock][end if]."
	
After starting the virtual machine (this is the redirect from slots to knife block rule):
	dispatch everything but { examining action, remembering action } for the slots to the knifeblock;
	
Instead of remembering the slots: try remembering the knifeblock.

Chapter 2 - Dishwasher

Section 1 - The dishwasher itself

The dishwasher is a scenery container in Kitchenette. It is eclipsing, closed, openable, unlocked, not lockable, fixed in place, and bulky. Understand "washer" as the dishwasher. The bulk-capacity of the dishwasher is 60.
The description of the dishwasher is "An ancient-looking machine, [if it's Daytime]currently[otherwise]which will be[end if] [openness of the dishwasher] and [switchedness of the dishwasher-switch][if it's Nighttime] by that point[end if][if Dishwasher-Finished is happening].

It's beeping at you to let you know it's finished its cycle and is ready to be unloaded[end if]."
The dishwasher can be wet. the dishwasher is wet.
Carry out an actor switching on the dishwasher-switch (this is the dishwasher uses water rule):
	now the dishwasher is wet.
	
The bulk test rule is listed after the can't insert into closed containers rule in the check inserting it into rules.

Instead of remembering the dishwasher: say "That, you expect, [regarding the noun][remain] in the kitchenette."

Instead of attacking or burning or cutting the dishwasher: say "[no time]That would be a great way to ensure you never see your security deposit again."
Instead of assaulting the dishwasher with: try attacking the dishwasher.
Instead of climbing or crouching on or lying on or sitting on or standing up on the dishwasher: try climbing the countertop.
Instead of crouching behind the dishwasher: try crouching behind the furniture-counter.
Instead of drinking or eating or tasting or kissing the dishwasher: say "[no time]You doubt any part of the dishwasher would taste very good."
Instead of entering the dishwasher: say "[nnt]There's no way you['][if it's Daytime]ll[otherwise]d[end if] fit. You're small, but not [i]that[/i] small."
Instead of entering underneath or looking under the dishwasher: say "[nnt][The dishwasher] [are] flush with the ground."
Instead of giving something to the dishwasher: try inserting the noun into the dishwasher.

Instead of listening to the dishwasher:
	if Dishwasher-Finished is happening:
		say "It's beeping at you.";
	otherwise if the dishwasher-switch is switched off:
		say "It [regarding the dishwasher][aren't] making any noise.";
	otherwise:
		say "It[if it's Daytime][']s[otherwise] will be[end if] making quite the racket."

Instead of locking the dishwasher with: try locking keylessly the dishwasher.

Instead of locking keylessly the dishwasher:
	if the dishwasher-switch is switched off:
		say "It locks automatically when it's switched on; there's no way to manually lock it.";
	otherwise:
		say "[It's already] locked, because [it's] [if it's Daytime]currently [end if]switched on.";
	take no time.

Instead of looking behind the dishwasher: try looking behind the furniture-counter.
Instead of lying behind the dishwasher: try lying behind the furniture-counter.
Instead of placing something under the dishwasher: try inserting the noun into the dishwasher.
Instead of pulling or pushing or turning or taking the dishwasher: say "[no time]The dishwasher is firmly installed in place. [We] [have] neither the tools nor the expertise to remove it."
Instead of pushing the dishwasher to: try pushing the dishwasher.
Instead of putting something on the dishwasher: try inserting the noun into the dishwasher.

Instead of rebooting the dishwasher:
	if the dishwasher-switch is switched on:
		silently try switching off the dishwasher-switch;
		silently try switching on the dishwasher-switch;
		say "You [switch] the dishwasher off and back on again.";
	otherwise:
		try switching on the dishwasher-switch.

Instead of removing something from the dishwasher: try taking the noun.

Instead of rubbing or touching or squeezing the dishwasher:
	if the dishwasher is closed:
		say "[if it's Daytime]The door is[otherwise]You remember the door being[end if] made of smooth plastic.";
	otherwise:
		if the dishwasher is wet:
			say "[nt]You[if it's Nighttime] think you[end if][']d rather not get your hands wet.";
		otherwise:
			say "[if it's Daytime]The racks are[otherwise]You remember the racks being[end if] made of surprisingly rough plastic."

Instead of showing something to the dishwasher: try inserting the noun into the dishwasher.
Instead of sitting behind the dishwasher: try sitting behind the furniture-counter.
Instead of slipping behind the dishwasher: try slipping behind the furniture-counter.

Instead of smelling the dishwasher:
	if the dishwasher is closed:
		say "[if it's Daytime][The dishwasher] [don't smell][otherwise]You doubt [the dishwasher] [smell][end if] like much of anything while it's closed.";
	otherwise:
		if the dishwasher is wet:
			say "[if it's Daytime][The dishwasher] [smell][otherwise]You expect [the dishwasher] [smell][end if] like hot water and soap.";
		otherwise:
			say "[The dishwasher] [if it's Daytime]hasn't[otherwise]won't have[end if]been run recently, and so [if it's Daytime]doesn't[otherwise]likely won't[end if] smell like much of anything."

Instead of stowing something behind the dishwasher: try stowing the noun behind the furniture-counter.
Instead of switching off the dishwasher: try switching off the dishwasher-switch.
Instead of switching on the dishwasher: try switching on the dishwasher-switch.
Instead of unlocking the dishwasher with: try unlocking keylessly the dishwasher.

Instead of unlocking keylessly the dishwasher:
	if the dishwasher-switch is switched on:
		say "It unlocks automatically when it's switched off; there's no way to manually unlock it.";
	otherwise:
		say "[It's already] unlocked, because [it's] [if it's Daytime]currently [end if]switched off.";
	take no time.

Instead of washing the dishwasher: try switching on the dishwasher-switch.

To decide which thing is the referent of the pronoun 'it':
	(- PronounValue('it') -)

After reading a command (this is the running the dishwasher equates to switching it on rule):
	if the player's command includes "run":
		if the player's command includes "dishwasher":
			change the text of the player's command to "switch on dishwasher";
		otherwise if the player's command includes "it":
			if the referent of the pronoun 'it' is either the dishwasher or the dishwasher-door or the dishwasher-switch or the dishracks:
				change the text of the player's command to "switch on dishwasher";

Some dishracks are scenery in the dishwasher. Understand "dish rack/racks" or "rack/racks" or "dishrack" or "rough plastic/--" as the dishracks.
The description of the dishracks is "The racks that dishes go on to get washed."
Rule for deciding whether all includes the dishracks: it does not.

Instead of attacking or burning or cutting the dishracks: try attacking the dishwasher.
Instead of assaulting the dishracks with: try attacking the dishracks.
Instead of climbing or crouching on or entering or entering underneath or lying behind or lying on or sitting behind or sitting on or slipping behind or standing up on the dishracks: try entering the dishwasher.
Instead of drinking or eating or tasting or kissing the dishracks: say "[no time]You doubt the dishracks would taste very good."
Instead of emptying the dishracks: try emptying the dishwasher.
Instead of giving something to the dishracks: try inserting the noun into the dishwasher.
Instead of inserting something into the dishracks: try inserting the noun into the dishwasher.
Instead of looking behind or looking under or searching the dishracks: try searching the dishwasher.
Instead of opening or closing or pulling or pushing or turning the dishracks: say "[nnt]It [adapt the verb make from the third person singular] little difference."
Instead of placing something under the dishracks: try inserting the noun into the dishwasher.
Instead of pushing the dishracks to: try pushing the dishracks.
Instead of putting something on the dishracks: try inserting the noun into the dishwasher.
Instead of remembering the dishracks: try remembering the dishwasher.
Instead of removing the dishracks from: try taking the dishracks.

Instead of rubbing or touching or squeezing the dishracks:
	if the dishwasher is wet:
		say "[nt]You[if it's Nighttime] think you[end if][']d rather not get your hands wet.";
	otherwise:
		say "[if it's Daytime]The racks are[otherwise]You remember the racks being[end if] made of surprisingly rough plastic."

Instead of showing something to the dishracks: try inserting the noun into the dishwasher.

Instead of smelling the dishracks:
	if the dishwasher is wet:
		say "[if it's Daytime][The dishracks] [smell][otherwise]You expect [the dishracks] [smell][end if] like hot water and soap.";
	otherwise:
		say "[The dishwasher] [if it's Daytime]hasn't[otherwise]won't have[end if]been run recently, and so [the dishracks] [if it's Nighttime]likely [end if][don't] smell like much of anything."

Instead of stowing something behind the dishracks: try inserting the noun into the dishwasher.
Instead of switching off the dishracks: try switching off the dishwasher.
Instead of switching on or washing the dishracks: try switching on the dishwasher.
Instead of taking the dishracks: say "[no time][We] [lack] [unless the player carries the screwdriver]both the tools and [end unless]the expertise to dismantle the dishwasher."
Instead of throwing something at the dishracks: try inserting the noun into the dishwasher.
Instead of tying something to the dishracks: try inserting the noun into the dishwasher.

Check inserting something into the dishwasher (this is the no electronics in the dishwasher rule):
	if the noun is electronic, say "[nt]Given that electronics and water don't tend to mix well, [if it's Daytime]it's probably not[otherwise]it probably wouldn't be[end if] a good idea to put [the noun] into the dishwasher." (A) instead.
	
A thing can be dishwashable. A thing is seldom dishwashable. A knife is usually dishwashable. A dish is usually dishwashable. Silverware is usually dishwashable. The dishracks are dishwashable. The vase is dishwashable.

Check inserting something into the dishwasher (this is the only dishwashables in the dishwasher rule):
	unless the noun is dishwashable:
		if it's Daytime:
			say "[nt][regarding the noun][Those] [don't] go in the dishwasher!" (A) instead.
			
Check switching on the dishwasher-switch (this is the can't run the dishwasher with non-washable things in it rule):
	repeat with obj running through things in the dishwasher:
		if obj is not dishwashable:
			say "You shouldn't run the dishwasher when anything that's not a dish is in it." (A) instead.

Section 2 - Things in the dishwasher

The paring knife is a knife in the dishwasher. Understand "nasty/dagger" as the paring knife.
The description of the paring knife is "A nasty little dagger, meant for detail work."

The meat cleaver is a knife in the dishwasher. Understand "butcher/butcher's/butchers" as the meat cleaver.
The description of the meat cleaver is "About as blunt of an instrument as a knife can be."

The chef's knife is a knife in the dishwasher. Understand "chefs/chef" as the chef's knife.
The description of the chef's knife is "A staple in any kitchen, good for all-around chopping."

Instead of inserting a sharp knife into the silverware-holder (this is the separate silverware and cooking knives rule):
	if it's Daytime:
		take no time;
		say "The silverware holder is only for silverware. Sharp knives have their own container." (A);
	otherwise:
		say "Even then, you don't think you'll be able to bring yourself to put a sharp knife into the silverware holder, lest you scratch the plastic or dull the blade. Putting [the noun] into the kitchen cabinets will have to do." (B);
		try inserting the noun into the kitchen-cabinets.

Section 3 - The dishwasher door

The dishwasher-door is part of the dishwasher. The printed name is "dishwasher door". Understand "dishwasher door" as the dishwasher-door.
Understand "open dishwasher/-- door" or "front" as the dishwasher-door when the dishwasher is open and the location is Kitchenette.
Understand "closed dishwasher/-- door" as the dishwasher-door when the dishwasher is closed and the location is Kitchenette.
The description of the dishwasher-door is "The door to the dishwasher[if the dishwasher is closed]. [dishwasher-It-has] a switch on the front[end if]. [if it's Daytime]It's currently[otherwise]It'll be[end if] closed[if it's Nighttime] by that point[end if]."
Does the player mean remembering the dishwasher-door: it is unlikely.
Does the player mean opening the dishwasher-door:
	if the location is Kitchenette, it is possible;
	it is very unlikely.

To say dishwasher-It-has:
	if it's Daytime, say "It has";
	otherwise say "You remember it having".

Setting action variables for opening the dishwasher-door (this is the open the dishwasher instead of its door rule):
	now the noun is the dishwasher.
	
Setting action variables for closing the dishwasher-door (this is the close the dishwasher instead of its door rule):
	now the noun is the dishwasher.
	
After starting the virtual machine (this is the redirect from its door to the dishwasher rule):
	dispatch everything but { examining action, climbing action, crouching on action, lying on action, sitting on action, standing up on action, looking behind action, looking under action, removing it from action, taking action, remembering action } for the dishwasher-door to the dishwasher;

Instead of climbing or crouching on or lying on or sitting on or standing up on the dishwasher-door:
	if the dishwasher is closed:
		now the noun is the dishwasher;
		try the current action;
	otherwise:
		take no time;
		say "You[if it's Daytime][']d rather not[otherwise] suspect you won't want to[end if] test the limits of the dishwasher door's weight capacity[if it's Daytime], today of all days[otherwise] in such a high-stakes situation[end if]."

Instead of looking behind the dishwasher-door:
	if the dishwasher is closed:
		try opening the dishwasher;
	try searching the dishwasher.

Instead of looking under the dishwasher-door:
	if the dishwasher is closed, try looking behind the dishwasher-door;
	otherwise say "[if it's Daytime]It's just[otherwise]It'll just be[end if] the floor underneath."

Instead of lying behind the dishwasher-door: try entering the dishwasher.
Instead of remembering the dishwasher-door: try remembering the dishwasher.
Instead of removing the dishwasher-door from: try taking the dishwasher-door.
Instead of removing something from the dishwasher-door: try taking the noun.
Instead of taking the dishwasher-door: say "[no time][We] [have] neither the tools nor the expertise required to remove the door from the dishwasher."

The smooth-plastic is a material. The smooth-plastic is part of the dishwasher-door. The printed name of the smooth-plastic is "smooth door plastic". Understand "smooth plastic/--" or "smooth door plastic" or "door/-- plastic" as the smooth-plastic.
The description of the smooth-plastic is "The dishwasher door[if it's Nighttime], you remember,[end if] is made of nice, finished, smooth plastic."

After starting the virtual machine (this is the redirect from its plastic to dishwasher door rule):
	dispatch everything but { drinking action, eating action, examining action, kissing action, removing it from action, remembering action, tasting action, taking action } for the smooth-plastic to the dishwasher-door;

Instead of drinking or eating or tasting or kissing the smooth-plastic: say "[no time]You doubt the plastic [if it's Daytime]tastes[otherwise]would taste[end if] very good."
Instead of remembering the smooth-plastic: try remembering the dishwasher.
Instead of removing the smooth-plastic from: try taking the smooth-plastic.
Instead of removing something from the smooth-plastic: try taking the smooth-plastic.
Instead of taking the smooth-plastic: say "[no time][We] [can't] remove the plastic that makes it up from the dishwasher[unicode 8212]the latter would cease to exist."

Section 4 - The dishwasher switch
	
The dishwasher-switch is a switch. It is part of the dishwasher. The printed name of the dishwasher-switch is "dishwasher switch". Understand "dishwasher knob/knobs/switch" as the dishwasher-switch.
The description of the dishwasher-switch is "The dishwasher is [if it's Daytime]apparently [end if]quite cheap[if it's Nighttime], if you remember right[end if][unicode 8212]this switch only has two options. [if it's Daytime]Currently, it's[otherwise]By that point, it'll be[end if] set to '[concise switchedness of the dishwasher-switch in upper case].'"
Does the player mean remembering the dishwasher-switch: it is unlikely.
Does the player mean opening the dishwasher-switch: it is very unlikely.

Check switching on the dishwasher-switch (this is the can't switch the dishwasher on while it's open rule):
	if the dishwasher is open, say "[if it's Daytime]You know the[otherwise]The[end if] dishwasher can't be switched on while it's open." (A) instead.

Carry out an actor switching on the dishwasher-switch (this is the lock the dishwasher when it's on rule):
	now the dishwasher is locked.
	
Carry out an actor switching off the dishwasher-switch (this is the unlock the dishwasher when it's off rule):
	now the dishwasher is unlocked.
	
Carry out an actor switching on the dishwasher-switch:
	now the dishwasher is noisemaking;
	if intruder-inside is true and the annoyance is nothing:
		now the annoyance is the dishwasher;
	increase the ambient noise of Kitchenette.

Carry out an actor switching off the dishwasher-switch:
	now the dishwasher is soundless;
	if the annoyance is the dishwasher:
		now the annoyance is nothing;
	decrease the ambient noise of Kitchenette.

Carry out an actor switching on the dishwasher-switch: the cycle finishes in 20 turns from now.

At the time when the cycle finishes:
	if the dishwasher-switch is switched on:
		if the location is Kitchenette or the location is connected with Kitchenette:
			say "[The dishwasher] [finish] its cycle, and [beep] to let you know it's done.";
		otherwise:
			say "From the direction of the kitchenette, [we] [hear] the dishwasher beep to signal the end of its cycle.";
		decrease the ambient noise of Kitchenette;
		now the dishwasher is soundless;
		if the annoyance is the dishwasher:
			now the annoyance is nothing;
		now the dishwasher-switch is switched off;
		now the dishwasher is unlocked.

Instead of pulling or pushing or turning the dishwasher-switch:
	if the dishwasher-switch is switched off, try switching on the dishwasher-switch;
	otherwise try switching off the dishwasher-switch.
	
Instead of remembering the dishwasher-switch: try remembering the dishwasher.

Instead of rubbing or touching or squeezing the dishwasher-switch:
	if it's Daytime, say "It feels exactly as you expected.";
	otherwise say "It will probably feel about how you'd expect."

Instead of smelling the dishwasher-switch: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."

Instead of spinning the dishwasher-switch to:
	if the dishwasher-switch is switched off, try switching on the dishwasher-switch;
	otherwise try switching off the dishwasher-switch.
	
Chapter 3 - The sink

Section 1 - The sink itself

The kitchen sink is a sink in Kitchenette. It is bulky, open, and not openable.
The description of the kitchen sink is "A rectangular metal sink built into the counter."

Instead of remembering the kitchen sink: say "That, you expect, [regarding the noun][remain] in the kitchenette."

Before crouching behind or looking behind or lying behind or sitting behind or slipping behind or stowing when the current action involves the kitchen sink (this is the redirect from kitchen sink to counter rule):
	if the kitchen sink is the noun, now the noun is the furniture-counter;
	if the kitchen sink is the second noun, now the second noun is the furniture-counter;
	try the current action instead.

Instead of looking under the kitchen sink:
	if the kitchen-cabinets are closed:
		silently try opening the kitchen-cabinets;
	try searching the kitchen-cabinets.

Instead of placing something under the kitchen sink: try inserting the noun into the kitchen-cabinets.
Instead of pulling or pushing or turning or taking the kitchen sink: say "[no time]The sink is firmly installed in the counter. [if the player carries the screwdriver][We] [lack][otherwise][We] [have] neither the tools nor[end if] the expertise to remove it."
Instead of rubbing or touching or squeezing the kitchen sink: say "Cool metal."
Instead of pushing the kitchen sink to: try pushing the kitchen sink.
Instead of stowing something behind the kitchen sink: say "[nnt]The sink is[if it's Nighttime], if you remember,[end if] right up against the wall and incapable of concealing anything behind itself."

Section 2 - The kitchen faucet

The kitchen faucet is a switched off tap. It is part of the kitchen sink. Understand "tap" as the kitchen faucet.
The description of the kitchen faucet is "A metal faucet, [if it's Daytime]currently[otherwise]which will be[end if] [switchedness of the kitchen faucet][if switched on] and gushing water[end if][if it's Nighttime] by that point[end if]."

Instead of remembering the kitchen faucet: say "That's part of the kitchen sink."

Carry out an actor switching on the kitchen faucet:
	now the kitchen sink is wet.

Carry out an actor switching on the kitchen faucet:
	now the kitchen faucet is noisemaking;
	if intruder-inside is true and the annoyance is nothing:
		now the annoyance is the kitchen faucet;
	increase the ambient noise of Kitchenette.

Carry out an actor switching off the kitchen faucet:
	now the kitchen faucet is soundless;
	if the annoyance is the kitchen faucet:
		now the annoyance is nothing;
	decrease the ambient noise of Kitchenette.

Instead of spinning the kitchen faucet to:
	if the kitchen faucet is switched off, try switching on the kitchen faucet;
	otherwise try switching off the kitchen faucet.

Instead of crouching behind or entering underneath or lying behind or sitting behind or slipping behind or lying on or sitting on or climbing or entering or standing up on the kitchen faucet: try climbing the kitchen sink.
Instead of taking the kitchen faucet: say "[no time]The faucet is part of the sink. [if the player carries the screwdriver][We] [lack][otherwise][We] [have] neither the tools nor[end if] the expertise to remove it."

Section 3 - The kitchen sink drain

The kitchen-sink-drain is a drain. It is part of the kitchen sink. The printed name is "sink drain". Understand "sink drain" or "kitchen sink drain" as the kitchen-sink-drain.
The description of the kitchen-sink-drain is "Best not look too long into the yawning void."

Instead of remembering the kitchen-sink-drain: say "That's part of the kitchen sink."

Instead of knocking on the kitchen-sink-drain: try knocking on the kitchen sink.

Instead of listening to the kitchen-sink-drain:
	if the kitchen faucet is switched on, say "It [adapt the verb gurgle from the third person singular] quietly.";
	otherwise say "[if it's Daytime]It's not[otherwise]It won't be[end if] making any noise."

Instead of placing something under the kitchen-sink-drain: try inserting the noun into the kitchen-sink-drain.
Instead of taking the kitchen-sink-drain: say "[no time]The drain is part of the sink. [if the player carries the screwdriver][We] [lack][otherwise][We] [have] neither the tools nor[end if] the expertise to remove it."

Chapter 4 - The range

Section 1 - The oven

The oven is a scenery container in Kitchenette. It is eclipsing, legible, closed, openable, unlocked, not lockable, fixed in place, and bulky. The bulk-capacity of the oven is 60.
The description of the oven is "A surprisingly new-looking oven, [if it's Daytime]currently[otherwise]which will be[end if] [openness of the oven] and [switchedness of the oven-switch][if it's Nighttime] by that point[end if]."

Before climbing or crouching on or lying on or sitting on or standing up on the oven (this is the convert getting on the oven to the stove rule):
	now the noun is the stove;
	try the current action instead.
	
Report reading the oven: say "[no time][if it's Daytime]There's[otherwise]You remember there's[end if] no text on the oven to read[unicode 8212]not even a brand name."
	
Instead of remembering the oven: say "That, you expect, [regarding the noun][remain] in the kitchenette."

Instead of attacking or burning or cutting the oven: say "[no time]That would be a great way to ensure you never see your security deposit again."
Instead of assaulting the oven with: try attacking the oven.
Instead of crouching behind the oven: try crouching behind the furniture-counter.
Instead of drinking or eating or tasting or kissing the oven: say "[no time]You doubt any part of the oven would taste very good."
Instead of entering the oven: say "[no time]There's no way you['][if it's Daytime]ll[otherwise]d[end if] fit. You're small, but not [i]that[/i] small."
Instead of entering underneath the oven: say "[no time]The oven is flush with the ground. [We] [can't] fit underneath."
Instead of giving something to the oven: try inserting the noun into the oven.

Check knocking on the oven:
	if the oven-switch is switched on, say "[nt][The oven] [are] too hot to touch." instead.

Instead of listening to the oven:
	if the oven-switch is switched on, say "[regarding the oven][They] [hum] quietly.";
	otherwise say "[The oven] [aren't] making any noise."

Instead of locking the oven with: try locking keylessly the oven.
Instead of locking keylessly or unlocking keylessly the oven: say "[nnt]The oven doesn't lock[if it's Nighttime], as far as you know[end if]."
Instead of looking behind the oven: try looking behind the furniture-counter.
Instead of looking under the oven: say "[nnt]The oven is flush with the ground[unicode 8212][we] [can't] see underneath it."
Instead of lying behind the oven: try lying behind the furniture-counter.
Instead of placing something under the oven: try inserting the noun into the oven.
Instead of pulling or pushing or turning the oven: say "[no time]The oven is firmly installed in place. [We] [have] neither the tools nor the expertise[unicode 8212]nor, frankly, the strength[unicode 8212]to move it."
Instead of pushing the oven to: try pushing the oven.
Instead of putting something on the oven: try putting the noun on the stove.

Instead of rebooting the oven:
	if the oven-switch is switched off:
		try switching on the oven-switch;
	otherwise:
		silently try switching off the oven-switch;
		silently try switching on the oven-switch;
		say "[We] [switch] the oven off and back on again."

Instead of removing something from the oven: try taking the noun.

Instead of rubbing or touching or squeezing the oven:
	if the oven is closed:
		if the oven-switch is switched off:
			say "The front of [the oven] [are] smooth.";
		otherwise:
			say "[nt]The front of [the oven] [if it's Daytime]is likely[otherwise]would likely be[end if] too hot to touch.";
	otherwise:
		if the oven-switch is switched off:
			say "The inside of [the oven] [are] rough metal.";
		otherwise:
			say "[nt][The oven] [are] too hot to touch."

Instead of showing something to the oven: try inserting the noun into the oven.
Instead of sitting behind the oven: try sitting behind the furniture-counter.
Instead of slipping behind the oven: try slipping behind the furniture-counter.

Instead of smelling the oven:
	if the oven-switch is switched on:
		say "It[if it's Daytime] just smells[otherwise][']ll just smell[end if] hot.";
	otherwise:
		say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."

Instead of stowing something behind the oven: try stowing the noun behind the furniture-counter.
Instead of switching off the oven: try switching off the oven-switch.
Instead of switching on the oven: try switching on the oven-switch.
Instead of taking the oven: say "[no time]The oven is firmly installed in place. [We] [have] neither the tools nor the expertise[unicode 8212]nor, frankly, the strength[unicode 8212]to remove it."
Instead of unlocking the oven with: try unlocking keylessly the oven.

Section 2 - The oven door

The oven-door is part of the oven. The printed name is "oven door". Understand "oven door" as the oven-door. The bulk of the oven-door is 0.
The description of the oven-door is "The door to the oven, [if it's Daytime]currently[otherwise]which will be[end if] [openness of the oven-door][if it's Nighttime] by that point[end if]."

Setting action variables for opening the oven-door (this is the open the oven instead of its door rule):
	now the noun is the oven.
	
Setting action variables for closing the oven-door (this is the close the oven instead of its door rule):
	now the noun is the oven.
	
After starting the virtual machine (this is the redirect from its door to the oven rule):
	dispatch everything but { examining action, climbing action, crouching on action, lying on action, sitting on action, standing up on action, pulling action, pushing action, pushing it to action, turning action, taking action, remembering action } for the oven-door to the oven;

Instead of climbing or crouching on or lying on or sitting on or standing up on the oven-door:
	if the oven is closed:
		now the noun is the oven;
		try the current action;
	otherwise:
		take no time;
		say "You[if it's Daytime][']d rather not[otherwise] suspect you won't want to[end if] test the limits of the oven door's weight capacity[if it's Daytime], today of all days[otherwise] in such a high-stakes situation[end if]."

Instead of pulling or pushing or turning the oven-door:
	if the oven is closed, try opening the oven;
	otherwise try closing the oven.

Instead of pushing the oven-door to: try pushing the oven-door.
Instead of remembering the oven-door: try remembering the oven.
Instead of taking the oven-door: say "[no time][if the player carries the screwdriver][We] [lack][otherwise][We] [have] neither the tools nor[end if] the expertise required to remove the door from the oven."

Section 3 - The oven switch

The oven-switch is a switch. It is part of the oven. The printed name of the oven-switch is "oven switch". Understand "oven knob/knobs" as the oven-switch. The bulk of the oven-switch is 0.
The description of the oven-switch is "A switch that controls the oven. Curiously, you [if it's Daytime]see no[otherwise]don't remember seeing any[end if] way to adjust the temperature[unicode 8212]just switch the thing on or off. [if it's Daytime]Currently[otherwise]By that point[end if], [it's] [concise switchedness of the oven-switch]."

Instead of pulling or pushing or turning the oven-switch:
	if the oven-switch is switched off, try switching on the oven-switch;
	otherwise try switching off the oven-switch.
	
Instead of remembering the oven-switch: try remembering the oven.

Instead of rubbing or touching or squeezing the oven-switch:
	if it's Daytime, say "It feels exactly as you expected.";
	otherwise say "It will probably feel about how you'd expect."

Instead of smelling the oven-switch: try smelling the oven.

Instead of spinning the oven-switch to:
	if the oven-switch is switched off, try switching on the oven-switch;
	otherwise try switching off the oven-switch.
	
Section 4 - The stove

The stove is a supporter. It is part of the oven. Understand "range" or "sleek/modern" or "stovetop" as the stove. The bulk of the stove is 0. The stove is legible.
The description of the stove is "A sleek, modern stovetop is included with the oven. Its [burners] [are] [if it's Daytime]currently [end if]switched [if the burners are switched off]off[otherwise]on[end if][if it's Nighttime] by that point[end if]."

Before crouching behind or looking behind or lying behind or sitting behind or slipping behind or stowing or pulling or pushing or turning when the current action involves the stove (this is the redirect from stove to oven rule):
	if the stove is the noun, now the noun is the oven;
	if the stove is the second noun, now the second noun is the oven;
	try the current action instead.
	
Report reading the stove: say "[no time][if it's Daytime]There's[otherwise]You remember there's[end if] no text on the stove to read[unicode 8212]not even a brand name."
	
Instead of remembering the stove: say "That, you expect, [regarding the noun][remain] in the kitchenette."

Instead of attacking or cutting the stove: say "[no time]That would be a great way to ensure you never see your security deposit again."
Instead of burning the stove: say "[no time]That would be a great way to ensure you never see your security deposit again. Besides, it wouldn't exactly be an efficient method of destruction to try [i]burning[/i] a [i]stove[/i]."
Instead of assaulting the stove with: try attacking the stove.

Instead of climbing or crouching on or entering or lying on or sitting on or standing up on the stove:
	if the burners are switched on, say "It would be dangerous to climb onto the stove while the burners are on.";
	otherwise say "You've never seen the point of climbing something when you can just go around it[if it's Nighttime]. Besides, you doubt you'd be able to do it silently[end if].";
	take no time.

Instead of drinking or eating or tasting or kissing the stove:
	if the burners are switched on:
		say "[nnt][The noun] [are] too hot to touch.";
	otherwise:
		take no time;
		say "You doubt the stove would taste very good."

Instead of entering underneath the stove: try entering the oven.
Instead of giving something to the stove: try putting the noun on the stove.
Instead of inserting something into the stove: try putting the noun on the stove.

Check knocking on the stove:
	if the burners are switched on, say "[nt][The stove] [are] too hot to touch." instead.
	
Instead of listening to the stove:
	if the burners are switched on, say "[regarding the stove][They] [hum] quietly.";
	otherwise say "[The stove] [aren't] making any noise."

Instead of looking under the stove: try examining the oven.
Instead of placing something under the stove: try inserting the noun into the oven.
Instead of pushing the stove to: try pushing the stove.
Instead of removing the stove from: try taking the stove.
Instead of removing something from the stove: try taking the noun.

Instead of rubbing or touching or squeezing the stove:
	if the burners are switched on, say "[nnt][The noun] [are] too hot to touch.";
	otherwise say "A smooth, modern finish."

Instead of setting the stove to: say "[nt][i][bracket]For ease of use, you can just SWITCH the stove ON or OFF.[close bracket][/i]".
Instead of showing something to the stove: try putting the noun on the stove.

Instead of smelling the stove:
	if the burners are switched on, say "[if it's Nighttime]You suspect it will just smell[otherwise]It just smells[end if] hot.";
	otherwise say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."

Instead of spinning the stove to: say "[nt][i][bracket]For ease of use, you can just SWITCH the stove ON or OFF.[close bracket][/i]".
Instead of switching off the stove: try switching off the stove-knobs.
Instead of switching on the stove: try switching on the stove-knobs.
Instead of taking the stove: say "[no time]The stove is part of the oven. [We] [lack] both the tools and the expertise required to separate the two."

Setting action variables for opening the stove (this is the open the oven instead of the stove rule):
	now the noun is the oven.
	
Setting action variables for closing the stove (this is the close the oven instead of the stove rule):
	now the noun is the oven.
	
Section 5 - The burners

Some burners are a switched off device. They are part of the stove. The bulk of the burners is 0.
The description of the burners is "A set of four electric burners make up the flat stovetop. [if it's Daytime]Currently, they're[otherwise]They'll be[end if] [switchedness of the burners][if it's Nighttime] by that point[end if]."
[NOTE: The burners are deadly when switched on.]

The examine devices rule does nothing when the noun is the burners.

Before climbing or crouching on or drinking or eating or tasting or kissing or emptying or entering or giving or inserting or lying on or putting or searching or showing or sitting on or standing up on or throwing or rubbing or touching or squeezing when the current action involves the burners (this is the redirect from burners to stove rule):
	if the burners are the noun, now the noun is the stove;
	if the burners are the second noun, now the second noun is the stove;
	try the current action instead.
	
Before crouching behind or looking behind or lying behind or sitting behind or slipping behind or stowing when the current action involves the burners (this is the redirect from burners to oven rule):
	if the burners are the noun, now the noun is the oven;
	if the burners are the second noun, now the second noun is the oven;
	try the current action instead.
	
Check assaulting something (called the victim) with the burners:
	if the burners are switched off:
		take no time;
		say "[The burners] [aren't] very deadly [if it's Daytime]while [end if]switched off." instead;
	otherwise if the victim is not the intruder:
		try attacking the victim instead.

Instead of attacking or cutting the burners: say "[no time]That would be a great way to ensure you never see your security deposit again."
Instead of burning the burners: say "[nnt]The burners are, by definition, extremely heat-resistant."
Instead of assaulting the burners with: try attacking the burners.
Instead of entering underneath the burners: try entering the oven.

Check knocking on the burners:
	if the burners are switched on, say "[nt][The burners] [are] too hot to touch." instead.
	
Instead of listening to the burners:
	if the burners are switched on, say "[regarding the burners][They] [hum] quietly.";
	otherwise say "[The stove] [aren't] making any noise."

Instead of looking under the burners: try examining the oven.
Instead of placing something under the burners: try inserting the noun into the oven.

Instead of pulling or pushing or turning the burners:
	if the burners are switched on, say "[nt][The burners] [are] too hot to touch.";
	otherwise say "[nnt]It [adapt the verb make from the third person singular] little difference."

Instead of pushing the burners to: try pushing the burners.

Instead of rebooting the burners:
	if the burners are switched off:
		try switching on the stove-knobs;
	otherwise:
		silently try switching off the stove-knobs;
		silently try switching on the stove-knobs;
		say "[We] [switch] the stove off and back on again."

Instead of remembering the burners: try remembering the stove.
Instead of removing the burners from: try taking the burners.
Instead of removing something from the burners: try taking the noun.
Instead of setting the burners to: try setting the stove-knobs to the topic understood.

Instead of smelling the burners:
	if the burners are switched on, say "[if it's Nighttime]You suspect they will just smell[otherwise]They just smell[end if] hot.";
	otherwise say "They don't smell like much of anything[if it's Nighttime], as far as you know[end if]."

Instead of spinning the burners to: try spinning the stove-knobs to the number understood.
Instead of switching off the burners: try switching off the stove-knobs.
Instead of switching on the burners: try switching on the stove-knobs.

Check taking the burners:
	if the burners are switched on:
		take no time;
		say "Those are part of the stove, and [regarding the burners][are] way too hot to handle [if it's Daytime]right now[otherwise]at that point[end if] anyway." instead.
		
Section 6 - The stove knobs

Some stove-knobs are a switch. They are part of the stove. The printed name of the stove-knobs is "stove knobs". Understand "knob/knobs" or "stove knob/knobs" as the stove-knobs. The bulk of the stove-knobs is 0.
The description of the stove-knobs is "[if it's Daytime][The stove-knobs] [are][otherwise]You remember [the stove-knobs] being[end if] inscrutable, as far as what positions [if it's Daytime]will[otherwise]would[end if] beget which temperatures. The best [we]['re] able to do is tell whether the stove is on or off. [if it's Daytime]Currently[otherwise]By that point[end if], [they're] [concise switchedness of stove-knobs]."

Carry out switching on the stove-knobs:
	now the stove is deadly;
	now the burners are deadly;
	now the burners are switched on.

Carry out switching off the stove-knobs:
	now the stove is not deadly;
	now the burners are not deadly;
	now the burners are switched off.

Instead of pulling or pushing or turning the stove-knobs:
	if the burners are switched off, try switching on the stove-knobs;
	otherwise try switching off the stove-knobs.

Instead of remembering the stove-knobs: try remembering the stove.

Instead of rubbing or touching or squeezing the stove-knobs:
	if it's Daytime, say "They feel exactly as you expected.";
	otherwise say "They will probably feel about how you'd expect."

Instead of smelling the stove-knobs: try smelling the stove.

Instead of setting the stove-knobs to:
	if the burners are switched off, try switching on the stove-knobs;
	otherwise try switching off the stove-knobs.

Instead of spinning the stove-knobs to:
	if the burners are switched off, try switching on the stove-knobs;
	otherwise try switching off the stove-knobs.
	
Section 7 - The fume hood

The fume hood is scenery in Kitchenette. Understand "fumehood" or "range hood" or "rangehood" or "wall mount" or "wallmount/wall-mount" as the fume hood. The fume hood is legible.
The description of the fume hood is "A minimal fume hood installed in the wall above the stove, meant for sucking away hot air and humidity. Its fan and built-in light are wired to the same switch, which [regarding the hood-switch][are][if it's Daytime] currently[end if] switched [if the hood-switch is switched on]on[otherwise]off[end if][if it's Nighttime] by that point[end if]."

Report reading the fume hood: say "[no time][if it's Daytime]There's[otherwise]You remember there's[end if] no text on the fume hood to read[unicode 8212]not even a brand name."

Instead of remembering the fume hood: say "That, you expect, [regarding the noun][remain] in the kitchenette."

Instead of attacking or burning or cutting the fume hood: say "[no time]That would be a great way to ensure you never see your security deposit again."
Instead of assaulting the fume hood with: try attacking the fume hood.
Instead of climbing or crouching on or entering or lying on or sitting on or standing up on the fume hood: say "[no time]There's no way [if it's Daytime]it'll[otherwise]it would[end if] hold your weight."
Instead of drinking or eating or tasting or kissing the fume hood: say "[no time]You doubt the fume hood would taste very good."
Instead of entering underneath the fume hood: try climbing the stove.

Instead of listening to the fume hood:
	if the hood-switch is switched on, say "The fan [regarding the fume hood][hum].";
	otherwise say "[The fume hood] [aren't] making any noise."

Instead of looking under the fume hood: try examining the stove.
Instead of placing something under the fume hood: try putting the noun on the stove.
Instead of pulling or pushing or turning or taking the fume hood: say "[no time]The fume hood is firmly installed in place. [if the player carries the screwdriver][We] [lack][otherwise][We] [have] neither the tools nor[end if] the expertise to remove it."
Instead of pushing the fume hood to: try pushing the fume hood.
Instead of putting something on the fume hood: say "[nt][The noun] [if it's Daytime]will[otherwise]would[end if] just slip right back off[unicode 8212][the second noun] [are] a bit too sheer."
Instead of rubbing or touching or squeezing the fume hood: say "Cool metal."
Instead of smelling the fume hood: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of switching off the fume hood: try switching off the hood-switch.
Instead of switching on the fume hood: try switching on the hood-switch.

Section 8 - The stove light

The stove light is privately-named lighting. The stove light is near. The printed name of the stove light is "stove light". The stove light is in Kitchenette. The stove light illuminates Kitchenette. Understand "lightbulb/lightbulbs" or "bulb/bulbs" or "stovelight/stovelights" or "stove/-- light/lights" as the stove light.
The description of the stove light is "A[if the hood-switch is switched on] soft, diffuse[end if] light installed in the fume hood, [if it's Daytime]currently[otherwise]which will be[end if] switched [if the hood-switch is switched on]on[otherwise]off[end if][if it's Nighttime] by that point[end if]."
The block access to lighting rule does nothing when the noun is the stove light.
Does the player mean doing something with the stove light:
	if the location is Kitchenette, it is possible;
	it is very unlikely.

Instead of attacking or burning or cutting the stove light:
	if it's Daytime, say "You have no reason to destroy the lightbulb. Besides, doing so would likely be dangerous.";
	otherwise say "It would likely be dangerous to destroy the lightbulb, and you see no way that doing so would help in that situation.";
	take no time.

Instead of assaulting the stove light with: try attacking the stove light.
Instead of climbing the stove light: try climbing the fume hood.
Instead of drinking or eating or tasting or kissing the stove light: say "[no time]You doubt the stove light would taste very good."
Instead of entering underneath the stove light: try entering the stove.
Instead of looking behind or looking under the stove light: say "[The stove] [are] underneath."
Instead of placing something under the stove light: try putting the noun on the stove.
Instead of pulling or pushing or turning the stove light: say "[no time]The stove light is part of the fume hood[unicode 8212][we] [can't] separate the two."
Instead of pushing the stove light to: try pushing the stove light.

Instead of rebooting the stove light:
	if the hood-switch is switched off:
		try switching on the hood-switch;
	otherwise:
		silently try switching off the hood-switch;
		silently try switching on the hood-switch;
		say "[We] [switch] the stove light off and back on again."

Instead of remembering the stove light: try remembering the fume hood.
Instead of removing the stove light from: try taking the stove light.

Instead of rubbing or touching or squeezing the stove light:
	if the hood-switch is switched off, say "Smooth glass.";
	otherwise say "The lightbulb [regarding the stove light][are] slightly warm."

Instead of setting the stove light to:
	if the stove light is switched off, try switching on the stove light;
	otherwise try switching off the stove light.

Instead of smelling the stove light: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of taking the stove light: say "[no time][We] [have] no reason to go so far as removing the lightbulb [if it's Daytime]right now[otherwise]in the moment[end if]."
Instead of throwing something at the stove light: say "[no time][We] [have] no reason to risk destroying the lightbulb. Besides, doing so would likely be dangerous."

Section 9 - The fume hood lightswitch

The hood-switch is a switched off lightswitch. It is part of the fume hood. The hood-switch is wired to the stove light.

Instead of remembering the hood-switch: try remembering the fume hood.

Carry out an actor switching on the hood-switch:
	now the stove light is noisemaking;
	if intruder-inside is true and the annoyance is nothing:
		now the annoyance is the stove light;
	increase the ambient noise of Kitchenette.

Carry out an actor switching off the hood-switch:
	now the stove light is soundless;
	if the annoyance is the stove light:
		now the annoyance is nothing;
	decrease the ambient noise of Kitchenette.

Report switching on the hood-switch: say "[We] [switch] the light on, and [one of]a[or]the[stopping] fan [adapt the verb come from the third person singular] on as well." instead.
Report switching off the hood-switch: say "[We] [switch] the light off, and the fan [adapt the verb turn from the third person singular] off as well." instead.

Chapter 5 - The refrigerator

Section 1 - The fridge itself

The refrigerator is a container in Kitchenette. "[A refrigerator] [stand] against one wall, humming quietly." It is bulky, legible, fixed in place, closed, openable, unlocked, and not lockable. Understand "fridge" as the refrigerator. The bulk-capacity of the refrigerator is 500.
The description of the refrigerator is "A great blocky fridge, a bit older than the rest of the kitchen appliances. It [if it's Daytime]currently stands[otherwise]will be standing[end if] [openness of the refrigerator]. It also includes a separate [freezer] compartment, which [are][if it's Daytime] currently[end if] [openness of the freezer][if the freezer is open] and letting all the cold out[end if]."

Report reading the refrigerator: say "[no time][if it's Daytime]There's[otherwise]You remember there's[end if] no text on the fridge to read[unicode 8212]not even a brand name."

Instead of remembering the refrigerator: say "That, you expect, [regarding the noun][remain] in the kitchenette."

Instead of attacking or burning or cutting the refrigerator: say "[no time]That would be a great way to ensure you never see your security deposit again."
Instead of assaulting the refrigerator with: try attacking the refrigerator.
Instead of climbing or crouching on or lying on or sitting on or standing up on the refrigerator: say "[nnt]You[if it's Nighttime] know you[end if][']re not tall enough to reach the top."
Instead of crouching behind or lying behind or sitting behind or slipping behind the refrigerator: say "[nnt]The refrigerator is right up against the wall. [We] [can't] fit behind it."
Instead of drinking or eating or tasting or kissing the refrigerator: say "[no time]You doubt the refrigerator would taste very good."

Instead of entering the refrigerator:
	if it's Daytime, say "You can't actually think of a good reason to follow through on that impulse.";
	otherwise say "Bad idea. You've heard refrigerator doors can't be opened from the inside[unicode 8212]you would freeze to death.";
	take no time.

Instead of entering underneath the refrigerator: say "[nnt]The fridge is pretty flush with the ground. [We] [can't] fit underneath."
Instead of giving something to the refrigerator: try inserting the noun into the refrigerator.
Instead of listening to the refrigerator: say "[They]['re] humming quietly."
Instead of locking the refrigerator with: say "[nt]The refrigerator doesn't have a lock."
Instead of locking keylessly or unlocking keylessly the refrigerator: say "[nt]The refrigerator doesn't have a lock."
Instead of looking behind the refrigerator: say "[nnt]The refrigerator is right up against the wall. [We] [can't] see anything behind it."
Instead of looking under the refrigerator: say "[nnt]The fridge is pretty much flush with the ground. [We] [can't] see underneath."
Instead of placing something under the refrigerator: say "[nnt]The refrigerator is pretty flush with the ground. [We] [can't] fit anything underneath it."
Instead of pulling or pushing or turning or taking the refrigerator: say "[no time][The noun] [are] far too heavy for you to actually move."
Instead of pushing the refrigerator to: try pushing the refrigerator.
Instead of putting something on the refrigerator: try inserting the noun into the refrigerator.
Instead of rebooting or switching off or switching on or unplugging the refrigerator: say "[no time]The fridge itself [regarding the refrigerator][are] blocking your access to its plug."
Instead of removing something from the refrigerator: try taking the noun.
Instead of rubbing or touching or squeezing the refrigerator: say "[if closed]Cool[otherwise]Cold[end if], textured plastic."
Instead of showing something to the refrigerator: try inserting the noun into the refrigerator.

Instead of smelling the refrigerator:
	if the refrigerator is open, say "It [if it's Daytime]just smells[otherwise]will just smell[end if] cold.";
	otherwise say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."

Instead of stowing something behind the refrigerator: say "[nnt]The refrigerator is right up against the wall. [We] [can't] fit anything behind it."
Instead of throwing something at the refrigerator: say "[no time]Once you identify the impulse, [we] [find] you have no reason to actually follow through."
Instead of unlocking the refrigerator with: say "[nt]The refrigerator doesn't have a lock."
Instead of waving the refrigerator: try swinging the refrigerator.

A thing can be fridgable. A thing is seldom fridgable.

Check inserting something into the refrigerator (this is the only fridge when fridgable rule):
	unless the noun is fridgable:
		if the noun is silverware:
			say "Silverware doesn't go in the fridge!" (A) instead;
		otherwise if the noun is a dish:
			say "Dishes don't go in the fridge!" (B) instead;
		otherwise if the noun is a knife:
			say "Knives don't go in the fridge!" (C) instead;
		otherwise:
			say "[regarding the noun][Those] [don't in the present] go in the fridge!" (D) instead.

Section 2 - Takeout in the fridge

The takeout is in the refrigerator. Understand "take out" or "take-out" or "chinese" or "food" or "chicken" or "fried" or "rice" as the takeout. The indefinite article of the takeout is "some". The takeout is fridgable and legible.
The description of the takeout is "Some mostly-finished chicken fried rice from a Chinese place down the street."

Report reading the takeout: say "[nnt][if it's Daytime]The[otherwise]You remember that the[end if] writing on the box is entirely in Chinese, which you don't speak."

Instead of attacking or burning or cutting the takeout: say "[no time]You[if it's Nighttime] think you[end if][']d rather leave the food unspoiled, to eat [if it's Daytime]tomorrow[otherwise]in the morning[end if]."
Instead of assaulting the takeout with: try attacking the takeout.
Instead of closing the takeout: say "[no time][It's already] closed."
Instead of crouching behind or crouching on or entering underneath or entering or lying behind or lying on or sitting behind or sitting on or slipping behind or standing up on the takeout: try entering the refrigerator.
Instead of drinking or eating or tasting or kissing or taking or opening the takeout: say "[no time][if it's Daytime]Better[otherwise]It'll be better[end if] to leave the takeout alone. [if it's Daytime]You'll only give yourself indigestion by eating more, and you decided to save the rest for tomorrow anyway[otherwise]You won't have time to eat in the moment, and you're still planning on being around to eat it in the morning[end if]."
Instead of emptying the takeout: say "[no time]The food [regarding the takeout][are] better left inside its box until it's time to eat it."
Instead of giving something to the takeout: try inserting the noun into the takeout.
Instead of inserting something into the takeout: say "[no time]You[if it's Nighttime] think you[end if][']d rather leave the food unspoiled, to eat [if it's Daytime]tomorrow[otherwise]in the morning[end if]."
Instead of knocking on the takeout: say "The sound [regarding the noun][aren't] very impressive."
Instead of listening to the takeout: say "[no time]The takeout doesn't really make noise."
Instead of pulling or pushing or turning the takeout: say "[nnt]It [adapt the verb make from the third person singular] little difference."
Instead of placing something under the takeout: try inserting the noun into the takeout.
Instead of pushing the takeout to: try pushing the takeout.
Instead of putting something on the takeout: try inserting the noun into the takeout.
Instead of removing the takeout from: try taking the takeout.
Instead of removing something from the takeout: try taking the noun.
Instead of rubbing or touching or squeezing the takeout: say "Waxy cardboard."
Instead of searching the takeout: say "[The takeout] [are] in exactly the same shape as you last left it."
Instead of showing something to the takeout: try inserting the noun into the takeout.
Instead of smelling the takeout: say "[if it's Daytime]Smells[otherwise]You remember it smells[end if] delicious."
Instead of stowing something behind the takeout: try inserting the noun into the takeout.
Instead of throwing something at the takeout: say "[no time]Once you identify the impulse, [we] [find] you have no reason to actually follow through."

Section 3 - Soda in the fridge

The bottle of soda is in the refrigerator. Understand "two-liter" or "two liter" or "coke" or "pop" or "cola" or "label" as the bottle of soda. The bottle of soda is fridgable and legible.
The description of the bottle of soda is "A two-liter bottle of generic brand cola. [if it's Daytime]You've[otherwise]By the time you went to bed, you'd[end if] already gone through half of it."

Report reading the bottle of soda: say "[nnt][if it's Daytime]The[otherwise]You remember that the[end if] label just says 'COLA.'"

Instead of attacking or burning or cutting the bottle of soda: say "[no time]You[if it's Nighttime] think you[end if][']d rather leave the soda untainted, to drink [if it's Daytime]tomorrow[otherwise]in the morning[end if]."
Instead of assaulting the bottle of soda with: try attacking the bottle of soda.
Instead of closing the bottle of soda: say "[no time][It's already] closed."
Instead of crouching behind or crouching on or entering underneath or entering or lying behind or lying on or sitting behind or sitting on or slipping behind or standing up on the bottle of soda: try entering the refrigerator.
Instead of drinking or eating or tasting or kissing or taking or opening the bottle of soda: say "[no time][if it's Daytime]Better[otherwise]It'll be better[end if] to leave the soda alone. [if it's Daytime]You'll only give yourself indigestion by drinking more, and you decided to save the rest for tomorrow anyway[otherwise]You won't have time for a drink in the moment, and you're still planning on being around to enjoy it in the morning[end if]."
Instead of emptying the bottle of soda: say "[no time]The soda [regarding the bottle of soda][are] better left inside its bottle until it's time to drink it."
Instead of giving something to the bottle of soda: try inserting the noun into bottle of soda.
Instead of inserting something into the bottle of soda: say "[no time]You[if it's Nighttime] think you[end if][']d rather leave the soda untainted, to drink [if it's Daytime]tomorrow[otherwise]in the morning[end if]."
Instead of knocking on the bottle of soda: say "The sound [regarding the bottle of soda][aren't] very impressive."
Instead of listening to the bottle of soda: say "[no time][The noun] [aren't] making any noise."
Instead of pulling or pushing or turning the bottle of soda: say "[nnt]It [adapt the verb make from the third person singular] little difference."
Instead of placing something under the bottle of soda: try inserting the noun into bottle of soda.
Instead of pushing the bottle of soda to: try pushing the bottle of soda.
Instead of putting something on the bottle of soda: try inserting the noun into bottle of soda.
Instead of removing the bottle of soda from: try taking the bottle of soda.
Instead of removing something from the bottle of soda: try taking the noun.
Instead of rubbing or touching or squeezing the bottle of soda: say "Smooth plastic."
Instead of showing something to the bottle of soda: try inserting the noun into bottle of soda.
Instead of smelling the bottle of soda: say "[if it's Daytime]It[otherwise]You suspect it[end if] smells like sugar and carbonation."
Instead of stowing something behind the bottle of soda: try inserting the noun into bottle of soda.
Instead of swinging or waving the bottle of soda: say "[no time]You[if it's Nighttime] suspect you[end if][']d rather not turn the soda into a carbonation bomb."
Instead of throwing something at the bottle of soda: say "[no time]Once you identify the impulse, [we] [find] you have no reason to actually follow through."
Before wearing the bottle of soda: say "[no time]You suspect that would be sticky." instead.

Section 4 - The freezer compartment

The freezer is a container. It is part of the refrigerator. It is fixed in place, closed, openable, unlocked, and not lockable. Understand "freezer compartment" or "icebox" or "ice box" as the freezer. The bulk-capacity of the freezer is 250.
The description of the freezer is "[freezer-desc]".

To say freezer-desc:
	say "A smaller compartment making up about a quarter of the fridge's height[nobr]";
	if it's Daytime:
		say ", currently [openness of the freezer][if the freezer is open] and letting out all of its cold air[end if].";
	otherwise:
		if the freezer is open:
			say ". It will be open by that point, and letting out all of its cold air.";
		otherwise:
			say ", which will be closed by that point."
	
After starting the virtual machine (this is the redirect from freezer to fridge rule):
	dispatch everything but { examining action, emptying action, entering action, giving it to action, inserting it into action, locking it with action, locking keylessly action, opening action, closing action, placing it under action, pulling action, pushing action, pushing it to action, turning action, putting it on action, removing it from action, rubbing action, touching action, squeezing action, searching action, showing it to action, smelling action, taking action, unlocking it with action, unlocking keylessly action, remembering action } for the freezer to the refrigerator;

Instead of remembering the freezer: say "That, you expect, [regarding the noun][remain] in the kitchenette."

Instead of entering the freezer: say "[nnt]There's no way you['][if it's Daytime]ll[otherwise]d[end if] fit."
Instead of giving something to the freezer: try inserting the noun into the freezer.
Instead of locking the freezer with: say "[nt]The freezer doesn't have a lock."
Instead of locking keylessly or unlocking keylessly the freezer: say "[nt]The freezer doesn't have a lock."

Instead of pulling or pushing or turning the freezer:
	if the freezer is closed, try opening the freezer;
	otherwise try closing the freezer.

Instead of pushing the freezer to: try pushing the refrigerator to the second noun.
Instead of putting something on the freezer: try inserting the noun into the freezer.
Instead of removing the freezer from: try taking the freezer.
Instead of removing something from the freezer: try taking the noun.

Instead of rubbing or touching or squeezing the freezer:
	if the freezer is open:
		say "[It's] cold inside.";
	otherwise if the refrigerator is open:
		silently try closing the refrigerator;
		try touching the refrigerator;
		silently try opening the refrigerator;
	otherwise:
		try touching the refrigerator.

Instead of showing something to the freezer: try inserting the noun into the freezer.

Instead of smelling the freezer:
	if the freezer is open:
		say "[if it's Daytime]It just smells[otherwise]It'll just smell[end if] cold.";
	otherwise:
		try smelling the refrigerator.

Instead of taking the freezer: say "[no time]You [can't] separate the freezer from the fridge."
Instead of unlocking the freezer with: say "[nt]The freezer doesn't have a lock."

A thing can be freezable. A thing is seldom freezable.

Check inserting the laptop-computer into the freezer (this is the laptop may be fridgable but it ain't freezable rule):
	say "[no time]You worry that the cold of the freezer would damage the delicate electronics inside the laptop." instead.

Check inserting the radio into the freezer (this is the radio may be fridgable but it ain't freezable rule):
	say "[no time]You worry that the cold of the freezer would damage the delicate electronics inside the radio." instead.

Check inserting the taser into the freezer (this is the taser may be fridgable but it ain't freezable rule):
	say "[no time]You worry that the cold of the freezer would damage the delicate electronics inside the taser." instead.

Check inserting the vase into the freezer (this is the vase may be fridgable but it ain't freezable rule):
	say "[no time]You worry that the cold of the freezer would make the vase more brittle, somehow." instead.

Check inserting a book into the freezer (this is the books may be fridgable but they ain't freezable rule): 
	say "[no time]You worry that the cold of the freezer would damage the book, somehow." instead.

Check inserting a dish into the freezer during Nighttime (this is the dishes may be fridgable but they ain't freezable rule):
	say "[no time]You worry that the cold of the freezer would make [the noun] more brittle, somehow." instead.

Last check inserting something into the freezer (this is the only freeze when freezable rule):
	unless the noun is freezable:
		take no time;
		if the noun is silverware:
			say "Silverware doesn't go in the freezer!" (A) instead;
		otherwise if the noun is a dish:
			say "Dishes don't go in the freezer!" (B) instead;
		otherwise if the noun is a knife:
			say "Knives don't go in the freezer!" (C) instead;
		otherwise:
			say "[regarding the noun][Those] [don't in the present] go in the freezer!" (D) instead.

Section 5 - Ice in the freezer

The ice is in the freezer. The ice is unimportant. The indefinite article of the ice is "some". Understand "frost/frosting" or "coating" as the ice. The ice is freezable. The bulk of the ice is 0.
The description of the ice is "A frosting of ice[if it's Nighttime], you remember,[end if] coats the inside of the freezer."

Instead of attacking or burning or cutting the ice:
	if it's Daytime, say "[We] [have] no reason to destroy the ice.";
	otherwise say "[nt]You see no way that destroying the ice would help in that situation."

Instead of assaulting the ice with: try attacking the ice.
Instead of crouching behind or crouching on or entering underneath or entering or lying behind or lying on or sitting behind or sitting on or slipping behind or standing up on the ice: say "[nnt]There's no way you['][if it's Daytime]ll[otherwise]d[end if] fit in the freezer."
Instead of drinking or eating or tasting or kissing the ice: say "[no time][We] [haven't] yet had a chance to check the filter hooked up to the water line in the fridge. Given the condition of the rest of the place, you [if it's Daytime]don't[otherwise]doubt you'd[end if] trust it."
Instead of emptying the ice: try emptying the freezer.
Instead of giving something to the ice: try inserting the noun into the freezer.
Instead of inserting something into the ice: try inserting the noun into the freezer.
Instead of listening to the ice: say "[no time]Ice doesn't really make noise on its own."
Instead of looking behind or looking under the ice: try searching the freezer.
Instead of placing something under the ice: try inserting the noun into the freezer.
Instead of pulling or pushing or turning the ice: say "[nnt]It [adapt the verb make from the third person singular] little difference."
Instead of pushing the ice to: try pushing the ice.
Instead of putting something on the ice: try inserting the noun into the freezer.
Instead of removing the ice from: try taking the ice.
Instead of removing something from the ice: try taking the noun.
Instead of rubbing or touching or squeezing the ice: say "Cold, cold, cold."
Instead of searching the ice: try searching the freezer.
Instead of showing something to the ice: try inserting the noun into the freezer.
Instead of smelling the ice: say "[if it's Daytime]It just smells[otherwise]You suspect it will just smell[end if] cold."
Instead of stowing something behind the ice: try inserting the noun into the freezer.
Instead of taking the ice: say "[no time]You [if it's Daytime]don't think it's[otherwise]doubt it would be[end if] worth your time to scrape the ice out of the freezer."
Instead of throwing something at the ice: say "[no time]Once you identify the impulse, [we] [find] you have no reason to actually follow through."
Instead of waving the ice: try swinging the ice.

Section 6 - Frozen fruit in the freezer

A bag of frozen fruit is in the freezer. The bag of frozen fruit is freezable.
The description of the bag of frozen fruit is "A bag of frozen fruit you picked up [if it's Daytime]earlier in the day[otherwise]yesterday[end if] and ate a quarter of for dessert."

Instead of attacking or burning or cutting the bag of frozen fruit: say "[nt]You[if it's Nighttime] think you[end if][']d rather leave the food unspoiled, to eat [if it's Daytime]tomorrow[otherwise]in the morning[end if]."
Instead of assaulting the bag of frozen fruit with: try attacking the bag of frozen fruit.
Instead of closing the bag of frozen fruit: say "[no time][It's already] closed."
Instead of crouching behind or crouching on or entering underneath or entering or lying behind or lying on or sitting behind or sitting on or slipping behind or standing up on the bag of frozen fruit: say "[nnt]There's no way you['][if it's Daytime]ll[otherwise]d[end if] fit in the freezer."
Instead of drinking or eating or tasting or kissing or taking or opening the bag of frozen fruit: say "[no time][if it's Daytime]Better[otherwise]It'll be better[end if] to leave the frozen fruit alone. [if it's Daytime]You'll only give yourself indigestion by eating more, and you decided to save the rest for tomorrow anyway[otherwise]You won't have time to eat in the moment, and you're still planning on being around to eat it in the morning[end if]."
Instead of emptying the bag of frozen fruit: say "[no time]The fruit [regarding the bag of frozen fruit][are] better left inside its bag until it's time to eat it."
Instead of giving something to the bag of frozen fruit: try inserting the noun into the bag of frozen fruit.
Instead of inserting something into the bag of frozen fruit: say "[no time]You[if it's Nighttime] think you[end if][']d rather leave the food unspoiled, to eat [if it's Daytime]tomorrow[otherwise]in the morning[end if]."
Instead of knocking on the bag of frozen fruit: say "The sound [regarding the bag of frozen fruit][aren't] very impressive."
Instead of listening to the bag of frozen fruit: say "[no time][The noun] doesn't really make noise on its own."
Instead of pulling or pushing or turning the bag of frozen fruit: say "[nnt]It [adapt the verb make from the third person singular] little difference."
Instead of placing something under the bag of frozen fruit: try inserting the noun into the bag of frozen fruit.
Instead of pushing the bag of frozen fruit to: try pushing the bag of frozen fruit.
Instead of putting something on the bag of frozen fruit: try inserting the noun into the bag of frozen fruit.
Instead of removing the bag of frozen fruit from: try taking the bag of frozen fruit.
Instead of removing something from the bag of frozen fruit: try taking the noun.
Instead of rubbing or touching or squeezing the bag of frozen fruit: say "It [regarding the bag of frozen fruit][feel] very cold."
Instead of searching the bag of frozen fruit: say "[if it's Daytime]Just[otherwise]There'll be just[end if] frozen fruit inside."
Instead of showing something to the bag of frozen fruit: try inserting the noun into the bag of frozen fruit.
Instead of smelling the bag of frozen fruit: say "It [if it's Daytime]just smells[otherwise]will just smell[end if] cold, the temperature overwhelming any trace of the fruit's sweetness."
Instead of stowing something behind the bag of frozen fruit: try inserting the noun into the bag of frozen fruit.
Instead of throwing something at the bag of frozen fruit: say "[no time]Once you identify the impulse, [we] [find] you have no reason to actually follow through."
Instead of waving the bag of frozen fruit: try swinging the bag of frozen fruit.

Chapter 6 - The cabinets

Section 1 - The cabinets themselves

Some kitchen-cabinets are a cabinet in kitchenette. The printed name is "kitchen cabinets". Understand "kitchen" as the kitchen-cabinets. The bulk-capacity of the kitchen-cabinets is 500.
The description of the kitchen-cabinets is "Wooden cabinets[if it's Nighttime], which[end if] line the walls of the kitchenette[if it's Nighttime][unicode 8212][otherwise], [end if]or at least those parts not occupied by appliances."

Instead of remembering the kitchen-cabinets: say "Those, you expect, [regarding the noun][remain] in the kitchenette."

inserting something into the kitchen-cabinets is cabinet-interaction. removing something from the kitchen-cabinets is cabinet-interaction. searching the kitchen-cabinets is cabinet-interaction.

Before cabinet-interaction (this is the implicitly open the kitchen cabinets before interacting with contents rule):
	if the kitchen-cabinets are closed:
		say "(first opening the kitchen cabinets)[command clarification break]";
		silently try opening the kitchen-cabinets;
	make no decision.

Instead of climbing or crouching on or entering or entering underneath or lying on or lying behind or sitting behind or sitting on or slipping behind or standing up on the kitchen-cabinets: say "[no time]You[if it's Daytime][']d rather not[otherwise] suspect you won't want to[end if] test the limits of [the noun]['] weight capacity[if it's Daytime], today of all days[otherwise] in such a high-stakes situation[end if]."
Instead of crouching behind the kitchen-cabinets: try crouching behind the furniture-counter.
Instead of listening to the kitchen-cabinets: say "[no time]The cabinets don't really make noise on their own."
Instead of lying behind the kitchen-cabinets: try lying behind the furniture-counter.
Instead of drinking or eating or tasting the kitchen-cabinets: say "[no time]You doubt the cabinets would taste very good."
Instead of rubbing or touching or squeezing the kitchen-cabinets: say "Smooth, finished wood."
Instead of taking the kitchen-cabinets: say "[no time][The noun] [are] firmly installed on the wall. [if the player carries the screwdriver][We] [lack][otherwise][We] [have] neither the tools nor[end if] the expertise to remove them."
Instead of sitting behind the kitchen-cabinets: try sitting behind the furniture-counter.
Instead of slipping behind the kitchen-cabinets: try slipping behind the furniture-counter.

A singular-cabinet is privately-named scenery in Kitchenette.

After starting the virtual machine (this is the redirect from the singular to the plural cabinets rule):
	dispatch everything but { } for the singular-cabinet to the kitchen-cabinets;
	
Before doing something when the current action involves the kitchen-cabinets (this is the set plural pronouns for the kitchen cabinets rule):
	set pronouns from the kitchen-cabinets;
	set pronouns from the singular-cabinet;
	
After reading a command (this is the only interact with nearby cabinets rule):
	unless the player's command includes " all " or the player's command includes "kitchen" or the player's command includes "bathroom":
		if the player's command includes "cabinets":
			if the location is Kitchenette:
				replace the matched text with "kitchen cabinets";
			otherwise if the location is Bathroom:
				replace the matched text with "bathroom cabinet";
		otherwise if the player's command includes "cabinet":
			if the location is Bathroom:
				replace the matched text with "bathroom cabinet";

Section 2 - Silverware holder

The silverware-holder is a privately-named container in the kitchen-cabinets. The silverware-holder is fixed in place, open, and not openable. The printed name of the silverware-holder is "silverware holder". Understand "silverware/-- holder" as the silverware-holder. The bulk-capacity of the silverware-holder is 3.
Does the player mean inserting the silverware-holder into: it is very unlikely.
Does the player mean inserting something into the silverware-holder:
	if the noun is silverware, it is likely;
	it is unlikely.
	
Rule for writing a topic sentence about the silverware-holder:
	now the silverware-holder is mentioned;
	say "[one of]A[or]The[stopping] [silverware-holder] [sit] in the kitchen cabinets[if the number of locale-supportable things in the kitchen-cabinets > 0], alongside [a list of locale-supportable things in the kitchen-cabinets][end if]. ".
Rule for disclosing exterior of the silverware-holder: do nothing.
	
inserting something into the silverware-holder is cabinet-interaction. removing something from the silverware-holder is cabinet-interaction. searching the silverware-holder is cabinet-interaction. examining the silverware-holder is cabinet-interaction.

Last check inserting something into the silverware-holder (this is the only silverware goes in the silverware holder rule):
	unless the noun is silverware, say "Only silverware [adapt the verb fit from the third person singular] in the silverware holder." instead.
	
Instead of attacking or burning or cutting the silverware-holder:
	if it's Daytime, say "[We] [have] no reason to destroy the silverware holder.";
	otherwise say "[nt]You see no way that destroying the silverware holder would help in that situation."

Instead of assaulting the silverware-holder with: try attacking the silverware-holder.
Instead of climbing or entering or crouching behind or crouching on or entering underneath or lying behind or lying on or sitting behind or sitting on or slipping behind or standing up on the silverware-holder: try climbing the kitchen-cabinets.
Instead of drinking or eating or tasting or kissing the silverware-holder: say "[no time]You doubt the silverware holder would taste very good."
Instead of giving something to the silverware-holder: try inserting the noun into the silverware-holder.
Instead of listening to the silverware-holder: say "[no time][The noun] doesn't really make noise on its own."
Instead of looking behind or looking under the silverware-holder: try searching the kitchen-cabinets.
Instead of opening or closing the silverware-holder: say "[nnt]The silverware holder has no lid and is always open."
Instead of placing something under the silverware-holder: try inserting the noun into the kitchen-cabinets.
Instead of pulling or pushing or turning the silverware-holder: say "[nnt]It [adapt the verb make from the third person singular] little difference."
Instead of pushing the silverware-holder to: try pushing the silverware-holder.
Instead of putting something on the silverware-holder: try inserting the noun into the silverware-holder.
Instead of rubbing or touching or squeezing the silverware-holder: say "Smooth plastic."
Instead of showing something to the silverware-holder: try inserting the noun into the silverware-holder.
Instead of smelling the silverware-holder: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of stowing something behind the silverware-holder: try inserting the noun into the kitchen-cabinets.

Instead of taking the silverware-holder:
	if it's Daytime, say "[The silverware-holder] [are] best left in its proper place, you think.";
	otherwise say "You don't think [the silverware-holder] [are] useful to carry around[unicode 8212]there must be a better way.";
	take no time.

Instead of throwing something at the silverware-holder:
	if the noun is silverware, try inserting the noun into the silverware-holder;
	otherwise say "[nt]Once you identify the impulse, [we] [find] you have no reason to actually follow through."
	
Instead of waving the silverware-holder: try swinging the silverware-holder.

Section 3 - Things that belong inside the cabinets

Some plates are a dish in the dishwasher. Understand "plate" as the plates.
The description of the plates is "A diverse collection of plates, half from home and half from a nearby home goods store."

Instead of drinking or eating or tasting or kissing the plates: say "[no time]Plates don't tend to taste quite as good as the things that go on them."
Instead of inserting something into the plates: try putting the noun on the second noun.
Instead of rubbing or touching or squeezing the plates: say "Smooth ceramic."

Some bowls are a dish in the dishwasher. Understand "bowl" or "as in the/-- dish/dishes" as the bowls.
The description of the bowls is "An eclectic collection of bowls from home."
Rule for printing the name of the bowls while asking which do you mean: say "bowls (as in the dishes)".

Instead of inserting something into the bowls:
	if the noun is the flowing water:
		make no decision;
	otherwise:
		try putting the noun on the second noun.

Instead of drinking or eating or tasting or kissing the bowls: say "[no time]Bowls don't tend to taste quite as good as the things that go in them."
Instead of rubbing or touching or squeezing the bowls: say "Smooth ceramic."

Some cups are a dish in the dishwasher. Understand "glass/glasses" or "cup" as the cups.
The description of the cups is "[if it's Daytime]They're a matching set. You bought them today[otherwise]A matching set, one that you bought yesterday[end if] at a nearby home goods store."

Instead of inserting something into the cups:
	if the noun is the flowing water:
		make no decision;
	otherwise:
		try putting the noun on the second noun.

Instead of drinking or eating or tasting or kissing the cups: say "[no time]Cups don't tend to taste quite as good as the things that go in them."
Instead of rubbing or touching or squeezing the cups: say "Cool glass."

Some plate-shards are a shards-pile. The plate-shards are the remnant of the plates. The printed name of the plate-shards is "plate shards".
The description of the plate-shards is "All that [adapt the verb remain from the third person singular] of the plates is a pile of shards."

Some bowl-shards are a shards-pile. The bowl-shards are the remnant of the bowls. The printed name of the bowl-shards is "bowl shards".
The description of the bowl-shards is "All that [adapt the verb remain from the third person singular] of the bowls is a pile of shards."

Some cup-shards are a shards-pile. The cup-shards are the remnant of the cups. The printed name of the cup-shards is "glass shards".
The description of the cup-shards is "All that [adapt the verb remain from the third person singular] of the cups is a pile of glass shards."

Instead of dropping a dish during Nighttime:
	move the noun to the location;
	try smashing the noun.
	
Check throwing a dish at:
	unless the second noun is the intruder:
		now potentially-ranged is true;
		now the item smashed with is the second noun;
		move the noun to the location of the second noun;
		try smashing the noun instead.
		
Rule for reaching inside a room while smashing a dish:
	if potentially-ranged is true, allow access.
	
Smashing the bowls is noisy behavior. Smashing the cups is noisy behavior. Smashing the plates is noisy behavior.
	
Carry out smashing the bowls:
	move the bowl-shards to the location of the bowls;
	remove the bowls from play.
	
Carry out smashing the cups:
	move the cup-shards to the location of the cups;
	remove the cups from play.
	
Carry out smashing the plates:
	move the plate-shards to the location of the plates;
	remove the plates from play.
	
Report smashing a dish:
	if potentially-ranged is true:
		say "[We] [hurl] [the noun] at [the item smashed with], causing it to shatter against [regarding the item smashed with][them] dramatically. The noise [adapt the verb are from the third person singular] startling in the quiet apartment.";
	otherwise:
		say "[We] [hurl] [the noun] at the ground, causing it to shatter dramatically. The noise [adapt the verb are from the third person singular] startling in the quiet apartment."

Some forks are silverware in the dishwasher. Understand "fork" as the forks.
The description of the forks is "A set of metal forks from a nearby home goods store[if it's Nighttime], not nearly sharp enough to make effective weapons[end if]."

First report dropping the forks:
	say "[We] [drop] the forks, causing them to [one of]clatter[or]jangle[or]clang[or]clank[as decreasingly likely outcomes] against the floor." instead.

Some spoons are silverware in the dishwasher. Understand "spoon" as the spoons.
The description of the spoons is "A set of metal spoons from a nearby home goods store."

First report dropping the spoons:
	say "[We] [drop] the spoons, causing them to [one of]clatter[or]jangle[or]clang[or]clank[as decreasingly likely outcomes] against the floor." instead.

Some butter-knives are silverware in the dishwasher. The printed name of the butter-knives is "butter knives". Understand "knife/knives" or "butterknife/butterknives" or "butter knife/knives" or "butter" as the butter-knives.
The description of the butter-knives is "A set of brand-new knives[if it's Nighttime]. Good for butter, but not as weapons[end if]."
Does the player mean doing something to the butter-knives: it is unlikely.
	
First report dropping the butter-knives:
	say "[We] [drop] the butter knives, causing them to [one of]clatter[or]jangle[or]clang[or]clank[as decreasingly likely outcomes] against the floor." instead.
	
Dropping silverware is noisy behavior.

Section 4 - Duct tape

The duct tape is in the kitchen-cabinets. The indefinite article of the duct tape is "some". Understand "masking" or "roll" as the duct tape. the duct tape is hangable.
The description of the duct tape is "A roll of sturdy tape[first time]. You're not sure what compelled you to store it in the kitchen cabinets. Perhaps you thought no one would look for it there[only]."

Understand "tape [something] to [something]" as tying it to when the duct tape is carried.

tape-involved is a truth state that varies. tape-involved is false.
tape-switch is a truth state that varies. tape-switch is false.
Before (this is the manage tape involvement rule):
	if tape-switch is true:
		now tape-switch is false;
	otherwise if tape-involved is true:
		now tape-involved is false;
		
After reading a command (this is the notice when tying involves the tape rule):
	if the player's command includes "tape" or the player's command includes "masking" or the player's command includes "duct":
		now tape-involved is true;
		now tape-switch is true;
		
Before tying something to (this is the don't use the tape for no reason rule):
	if tape-involved is true:
		take no time;
		if it's Daytime:
			say "There's little point in taping things for no reason[unicode 8212]better to save it for a specific purpose." (A) instead;
		otherwise:
			say "You can't see how doing so would help in that situation. Better to save the tape." (B) instead;
			
The don't use the tape for no reason rule is listed after the manage tape involvement rule in the before rules.

Instead of attacking or burning or cutting the duct tape:
	if it's Daytime, say "[We] [have] no reason to destroy the duct tape.";
	otherwise say "[nt]You see no way that destroying the duct tape would help in that situation. Perhaps you will yet be able to find a use for it."

Instead of assaulting the duct tape with: try attacking the duct tape.
Instead of crouching behind or sitting behind or slipping behind or lying behind or entering underneath the duct tape: say "[no time][The noun] [can't] meaningfully conceal you."
Instead of drinking or eating or tasting or kissing the duct tape: say "[no time]You doubt the duct tape would taste very good."
Instead of knocking on the duct tape: say "The sound [regarding the noun][aren't] very impressive."
Instead of listening to the duct tape: say "[no time]The tape doesn't really make noise on its own."
Instead of looking behind or looking under or searching the duct tape: say "[no time][The duct tape] [can't] conceal much while on its roll."
Instead of opening or closing or pulling the duct tape: say "[no time]Better to leave all of it spooled until you truly have need of it."
Instead of pushing or turning the duct tape: say "[nnt]It [adapt the verb make from the third person singular] little difference."
Instead of pushing the duct tape to: try pushing the duct tape.
Instead of rubbing or touching or squeezing the duct tape: say "Smooth material."
Instead of smelling the duct tape: say "[nnt][if it's Daytime]It[otherwise]You expect it[end if] smells like plastic."
Instead of waving the duct tape: try swinging the duct tape.

Check putting the duct tape on (this is the leave the tape rolled rule):
	unless the second noun is a supporter, say "[no time][There's] little point in taping things for no reason[unicode 8212]better to save it for a specific purpose." (A) instead.
	
First check taking the duct tape (this is the unspool while carrying rule):
	if the duct tape is carried, say "[no time]Better to leave all of it spooled until you truly have need of it." (A) instead.

Chapter 7 - Wastebasket

The foot-pedal trash can is a wastebasket in Kitchenette. "[A foot-pedal trash can] [stand][if it's Daytime] nobly[end if] near the end of the counter." The foot-pedal trash can is eclipsing, closed, and openable. The bulk-capacity of the foot-pedal trash can is 50.
The description of the foot-pedal trash can is "A blocky metal thing about waist high, with a foot pedal used to open its lid."

Instead of remembering the foot-pedal trash can: say "That, you expect, [regarding the noun][remain] in the kitchenette."

Instead of rubbing or touching or squeezing the foot-pedal trash can: say "Cool metal."

Instead of standing up on the foot-pedal trash can: follow the step to open rule.
Before going from Kitchenette: now the foot-pedal trash can is closed.

This is the step to open rule:
	now the foot-pedal trash can is open;
	say "[We] [step] on the pedal and the lid of the trash can [regarding the foot-pedal trash can][open]."

Instead of getting off the foot-pedal trash can:
	if the foot-pedal trash can is closed, say "[We] [aren't] holding the trash can open [if it's Daytime]currently[otherwise]by that point[end if].";
	otherwise follow the step to close rule.

This is the step to close rule:
	now the foot-pedal trash can is closed;
	say "[We] [remove] your foot from the pedal so that the lid of the trash can closes."

the can-metal is a material. The can-metal is part of the foot-pedal trash can. The printed name of the can-metal is "trash can metal". Understand "metal" or "can metal" or "trash can metal" or "smooth/shiny" as the can-metal.
The description of the can-metal is "Smooth, shiny metal."

After starting the virtual machine (this is the redirect from metal to pedal trash can rule):
	dispatch everything but { drinking action, eating action, examining action, kissing action, removing it from action, taking action, tasting action, remembering action } for the can-metal to the foot-pedal trash can;
	
Instead of drinking or eating or tasting or kissing the can-metal: say "[no time]You doubt the metal would taste very good."
Instead of remembering the can-metal: try remembering the foot-pedal trash can.
Instead of removing the can-metal from: try taking the can-metal.
Instead of removing something from the can-metal: try taking the noun.
Instead of taking the can-metal: say "[no time][We] [can't] remove the metal from the trash can it makes up[unicode 8212]the trash can would cease to exist."

The pedal-lid is part of the foot-pedal trash can. It is privately-named. The printed name of the pedal-lid is "trash can lid". Understand "lid" or "can lid" or "trash can lid" as the pedal-lid. The bulk of the pedal-lid is 0.
The description of the pedal-lid is "The metal lid of the trash can, [if it's Daytime]currently[otherwise]which will be[end if] [openness of the foot-pedal trash can][if it's Nighttime] by that point[end if]."
	
After starting the virtual machine (this is the redirect from lid to pedal trash can rule):
	dispatch everything but { examining action, crouching behind action, entering action, entering underneath action, lying behind action, sitting behind action, slipping behind action, removing it from action, pulling action, pushing action, pushing it to action, turning action, looking behind action, looking under action, taking action, remembering action } for the pedal-lid to the foot-pedal trash can;
	
Instead of crouching behind or entering underneath or entering or lying behind or sitting behind or slipping behind the pedal-lid: say "[nnt]There's no way [if it's Daytime]you'll[otherwise]you'd[end if] fit inside the foot-pedal trash can. You're small, but not [i]that[/i] small."

Instead of looking behind or looking under the pedal-lid:
	if the foot-pedal trash can is closed:
		say "(first opening the lid)[command clarification break]";
		silently try opening the foot-pedal trash can;
	try searching the foot-pedal trash can.

Instead of pulling or pushing or turning the pedal-lid:
	if the foot-pedal trash can is closed, try opening the foot-pedal trash can;
	otherwise try closing the foot-pedal trash can.

Instead of pushing the pedal-lid to: try pushing the pedal-lid.
Instead of remembering the pedal-lid: try remembering the foot-pedal trash can.
Instead of removing the pedal-lid from: try taking the pedal-lid.
Instead of removing something from the pedal-lid: try taking the noun.
Instead of taking the pedal-lid: say "[no time][We] [have] neither the tools nor the expertise required to remove the lid from the trash can."

The pedal is part of the foot-pedal trash can. The bulk of the pedal is 0.
The description of the pedal is "A black plastic thing you can step on to open the trash can."
	
After starting the virtual machine (this is the redirect from pedal to pedal trash can rule):
	dispatch everything but { examining action, climbing action, crouching on action, entering action, lying on action, sitting on action, standing up on action, attacking action, burning action, cutting action, shooting action, assaulting it with action, drinking action, eating action, kissing action, tasting action, looking behind action, looking under action, pulling action, pushing action, pushing it to action, turning action, opening action, closing action, rubbing action, touching action, squeezing action, removing it from action, taking action, getting off action, remembering action } for the pedal to the foot-pedal trash can;

Instead of climbing or pulling or pushing or turning or standing up on or opening or closing the pedal: follow the step to open rule.

Instead of getting off the pedal:
	if the foot-pedal trash can is closed, say "[nt][We] [aren't] stepping on the pedal [if it's Daytime]currently[otherwise]by that point[end if].";
	otherwise follow the step to close rule.

Instead of attacking or burning or cutting or shooting the pedal:
	if it's Daytime, say "[We] [have] no reason to destroy the pedal.";
	otherwise say "[nt]You see no way that destroying the pedal would help in that situation."

Instead of assaulting the pedal with: try attacking the noun.
Instead of crouching on or entering or lying on or sitting on the pedal: say "[nnt]The way the trash can is constructed, [we] [don't] exactly have the room to contort your body into a position that will allow you to do that."
Instead of drinking or eating or tasting or kissing the pedal: say "[no time]Given the pedal's proximity to the floor, [if it's Nighttime]you suspect [end if]you'd [if it's Daytime]really [end if]rather not get your mouth anywhere near it."
Instead of looking behind the pedal: say "[nnt]The pedal isn't really capable of concealing anything behind itself."
Instead of looking under the pedal: say "[nnt]The pedal isn't really capable of concealing anything under itself."
Instead of pushing the pedal to: try pushing the noun.
Instead of remembering the pedal: try remembering the foot-pedal trash can.
Instead of removing the pedal from: try taking the pedal.
Instead of removing something from the pedal: try taking the noun.
Instead of rubbing or touching or squeezing the pedal: say "Rough plastic."
Instead of taking the pedal: say "[no time][We] [have] neither the tools nor the expertise required to remove the pedal from the trash can."

Book 5 - Bathroom

Chapter 1 - The door and room

The restroom door is west of Entryway and east of Bathroom. The restroom door is a door. It is closed, lockable, and unlocked. The printed name of the restroom door is "bathroom door". Understand "rest/bath/bathroom" as the restroom door.
The description of the restroom door is "A warped wooden door leading [bathroom-door-direction], [if it's Daytime]currently[otherwise]which will be[end if] standing [openness of the restroom door][if it's Nighttime] by that point[end if]."
Closing the restroom door is noisy behavior.
Last before closing the restroom door: now the player is being noisy.
Opening the restroom door is noisy behavior.
Last before opening the restroom door: now the player is being noisy. [NOTE: It squeaks. Sometimes the code doesn't recognize kinds of behavior with specific objects for whatever reason?]
Does the player mean unlocking keylessly the restroom door:
	if the location is Bathroom, it is likely;
	it is unlikely.
Does the player mean locking keylessly the restroom door:
	if the location is Bathroom, it is likely;
	it is unlikely.
	
Instead of remembering the restroom door: say "The bathroom door separates the entryway from [one of]exactly the room you'd expect[or]the bathroom[stopping]."

Report closing the restroom door: say "The door [regarding the noun][squeak] as you close it." instead.
Report opening the restroom door: say "The door [regarding the noun][squeak] as you open it." instead.

To say bathroom-door-direction:
	if the location is Bathroom, say "back [b]east[/b] to the entryway";
	otherwise say "[if the previous location is Bathroom]back [end if][b]west[/b] to the bathroom".

Instead of attacking or burning or cutting the restroom door: say "[no time]That would be a great way to ensure you never see your security deposit again."
Instead of assaulting the restroom door with: try attacking the restroom door.
Instead of climbing or entering underneath or slipping behind the restroom door: try entering the restroom door.

Instead of crouching behind the restroom door:
	if the location is Entryway:		
		say "(first entering the bathroom and closing the door)[command clarification break]";
		silently try entering the Bathroom;
		silently try closing the restroom door;
		silently try taking position crouched;
		say "[We] [crouch] down in the bathroom.";	
	otherwise:
		if the restroom door is open:
			say "(first closing the door)[command clarification break]";
			silently try closing the restroom door;
		try taking position crouched.

Instead of crouching on or lying on or sitting on or standing up on the restroom door: say "[no time][We] don't think [if it's Daytime]you can[otherwise]you'll be able to[end if] make that work."
Instead of drinking or eating or tasting or kissing the restroom door: say "[no time]You doubt the bathroom door would taste very good."

Instead of listening to the restroom door:
	if it's Daytime:
		if the location is Entryway:
			if the bathroom faucet is switched on or the tub-faucet is switched on:
				say "You hear the noise of rushing water on the other side.";
			otherwise:
				say "You can't make out any noise on the other side.";
		otherwise:
			say "You can't make out any noise on the other side.";
	now player-listening is true.

Check locking the restroom door with:
	if the location is Bathroom:
		take no time;
		say "[There's] no lock on [if it's Daytime]this[otherwise]that[end if] side[unicode 8212]just a latch." instead.
		
Check locking the restroom door with:
	if the second noun is not the paperclip:
		say "[The second noun] [don't] fit the lock. Actually, you don't think any key you have would." instead;
	otherwise:
		take no time;
		say "[The paperclip] [if it's Daytime]is probably[otherwise]would probably be[end if] better suited to [i]un[/i]locking the door." instead.

Instead of looking behind the restroom door:
	if the restroom door is closed:
		say "(first opening the bathroom door)[command clarification break]";
		silently try opening the restroom door;
		if the restroom door is open:
			try examining the other side of restroom door from the location;
		otherwise:
			stop the action;
	otherwise:
		say "[nnt]The open bathroom door [can't exactly] conceal much."

Instead of looking under the restroom door:
	if the restroom door is open:
		try examining the other side of restroom door from the location;
	otherwise:
		say "[nnt][The restroom door] [are] too flush with the ground for you to see underneath."

Instead of lying behind the restroom door:
	if the location is Entryway:
		say "(first entering the bathroom and closing the door)[command clarification break]";
		silently try entering the Bathroom;
		silently try closing the restroom door;
		silently try taking position reclining;
		say "[We] [lie] down in the bathroom.";
	otherwise:
		if the restroom door is open:
			say "(first closing the door)[command clarification break]";
			silently try closing the restroom door;
		try taking position reclining.

Instead of placing something under the restroom door:
	if the restroom door is open:
		try inserting the noun into the other side of the restroom door from the location;
	otherwise:
		say "[nnt][The restroom door] [are] too flush with the ground for anything to fit underneath while it's closed."

Instead of pushing the restroom door to: try pushing the restroom door.

Instead of rubbing or touching or squeezing the restroom door:
	if it's Daytime, say "Surprisingly rough wood.";
	otherwise say "You remember the wood being surprisingly rough."

Instead of searching the restroom door:
	if the restroom door is closed:
		say "(first opening the bathroom door)[command clarification break]";
		silently try opening the restroom door;
		if the restroom door is closed:
			stop the action;
	try examining the other side of restroom door from the location;

Instead of sitting behind the restroom door:
	if the location is Entryway:
		say "(first entering the bathroom and closing the door)[command clarification break]";
		silently try entering the Bathroom;
		silently try closing the restroom door;
		silently try taking position seated;
		say "[We] [sit] down in the bathroom.";
	otherwise:
		if the restroom door is open:
			say "(first closing the door)[command clarification break]";
			silently try closing the restroom door;
		try taking position seated.

Instead of smelling the restroom door: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of stowing something behind the restroom door: say "[nnt]It [adapt the verb make from the third person singular] little difference where on the floor [the noun] [are]."

Instead of swinging or waving the restroom door:
	if the restroom door is closed, try opening the restroom door;
	otherwise try closing the restroom door.

Instead of taking the restroom door: say "[no time]You [can't exactly] remove the door from its hinges."
Instead of throwing something at the restroom door: say "[no time]Once you identify the impulse, [we] [find] you have no reason to actually follow through."

Check unlocking the restroom door with:
	if the location is Bathroom:
		say "[nnt][There's] no lock on [if it's Daytime]this[otherwise]that[end if] side[unicode 8212]just a latch." instead.
		
Check unlocking the restroom door with:
	if the second noun is not the paperclip:
		say "[The second noun] [don't] fit the lock. Actually, you don't think any key you have would." instead.

Before locking keylessly the restroom door:
	if the restroom door is open, say "[nt]It'll be hard to lock a door that's open." instead;
	if the restroom door is locked, say "[nt][The restroom door] [is already] locked." instead;
	try turning the latch instead.

Before unlocking keylessly the restroom door:
	if the restroom door is open, say "[nt]An open door is by definition unlocked." instead;
	if the restroom door is unlocked, say "[nt][The restroom door] [is already] unlocked." instead;
	if the player is in Entryway and the player carries the paperclip, try unlocking the restroom door with the paperclip instead;
	try turning the latch instead.

The latch is part of the restroom door. Understand "knob" as the latch.
The description of the latch is "A bit of metal you can turn to lock or unlock the bathroom door. [if it's Daytime]Currently[otherwise]By that point[end if], [it's] in the [lockedness of the restroom door] position."
Does the player mean doing something to the latch:
	if the location is Bathroom, it is possible;
	it is unlikely.

Before doing something when the current action involves the latch: if the location is not the bathroom, say "[nt]The latch is only accessible from inside the bathroom[if it's Nighttime], if you remember correctly[end if]." instead.

Instead of turning the latch:
	if the restroom door is locked:
		say "[We] [turn] the latch to unlock the restroom door.";
		now the restroom door is unlocked;
	otherwise:
		say "[We] [turn] the latch to lock the restroom door.";
		now the restroom door is locked.

Instead of attacking or burning or cutting or shooting the latch: say "[no time][We] [have] no reason to destroy the latch."
Instead of assaulting the latch with: try attacking the latch.
Instead of drinking or eating or tasting or kissing the latch: say "[no time]You doubt the latch would taste very good."
Instead of locking the latch with: say "[nnt][There's] no lock on [if it's Daytime]this[otherwise]that[end if] side[unicode 8212]just a latch." 
Instead of pulling or pushing or swinging or waving the latch: try turning the latch.
Instead of pushing the latch to: try turning the latch.
Instead of removing the latch from: try taking the latch.
Instead of rubbing or touching or squeezing the latch: say "Cool metal."
Instead of setting the latch to: try turning the latch.
Instead of smelling the latch: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of spinning the latch to: try turning the latch.

Instead of switching off or opening or unlocking keylessly the latch:
	if the restroom door is unlocked, say "[nt][The restroom door] [is already] unlocked.";
	otherwise try turning the latch.

Instead of switching on or closing or locking keylessly the latch:
	if the restroom door is locked, say "[nt][The restroom door] [is already] locked.";
	otherwise try turning the latch.

Instead of taking the latch: say "[no time]The latch is part of the bathroom door. [We] [lack][unless the player carries the screwdriver] both the tools and[end if] the expertise to remove it."
Instead of throwing something at the latch: say "[no time]Once you identify the impulse, [we] [find] you have no reason to actually follow through."
Instead of unlocking the latch with: say "[nnt][There's] no lock on [if it's Daytime]this[otherwise]that[end if] side[unicode 8212]just a latch." 

Bathroom is a room. "Given how cramped the rest of the apartment is, [if it's Daytime]the bathroom is[otherwise]you remember the bathroom being[end if] surprisingly spacious.

A toilet and a sink [adapt the verb squat from the third person plural] against one wall, and a bathroom cabinet with a [mirror] [hang] above the sink. A [bathtub] [skulk] at the back of the room[if the shower curtain is closed] behind its shower curtain[otherwise], its shower curtain open[end if]." Bathroom is dim.
Understand "bathroom/restroom" or "bath/rest room" or "water closet" or "head" as Bathroom.
The noise-modifier of Bathroom is "[if restroom door is closed], muffled by the closed door,[end if]".
The relative direction set of Bathroom is the Table of Bathroom Direction Descriptors.
The casual descriptor of Bathroom is "the bathroom".
For saying the location name of Bathroom: say "in the bathroom".
The prepositional entrance descriptor of Bathroom is "into the bathroom".
The prepositional exit descriptor of Bathroom is "out of the bathroom".

For announcing notable exits of Bathroom:
	say "The door back [b]east[/b] to the entryway [regarding the restroom door][are] [openness of the restroom door]."
	
Instead of examining Bathroom when the location is not Bathroom:
	say the description of Bathroom;
	describe locale for Bathroom;
	if the number of locale-supportable things in Bathroom > 0:
		say "[We] [if it's Daytime]can also see[otherwise]will also be able to see[end if] [a list of locale-supportable things in Bathroom]."

Instead of examining east when the location is Bathroom:
	if the restroom door is open, try examining Entryway;
	otherwise try examining the restroom door.

Instead of listening to Bathroom:
	if the radio is listenable:
		try listening to the radio;
	otherwise if it's Daytime:
		if the dishwasher-switch is switched on:
			if the bathroom faucet is switched on:
				if the tub-faucet is switched on:
					say "Water runs in both the sink and the tub. From the kitchenette, you can also hear the dishwasher going.";
				otherwise:
					say "Water runs in the sink. From the kitchenette, you can also hear the dishwasher going.";
			otherwise if the tub-faucet is switched on:
				say "Water runs in the tub. From the kitchenette, you can also hear the dishwasher going.";
			otherwise:
				say "From the kitchenette, you hear the dishwasher going.";
		otherwise if the bathroom faucet is switched on:
			if the tub-faucet is switched on:
				say "Water runs in both the sink and the tub.";
			otherwise:
				say "Water runs in the sink.";
		otherwise if the tub-faucet is switched on:
			say "Water runs in the tub.";
		otherwise if the laptop-computer is switched on and the laptop-computer is in the location:
			say "You hear the computer's fan whirring slightly.";
		otherwise:
			say "You hold your breath and listen, but don't hear anything unusual.";
	otherwise:
		now player-listening is true.

Instead of smelling Bathroom: say "It smells like old damp[if it's Nighttime], if you remember correctly[end if]."

Table of Bathroom Direction Descriptors
other place	descriptor
Entryway	"in the entryway"
Kitchenette	"somewhere in the main room"
Main-Bed	"somewhere in the main room"
Main-Behind-Shelf	"somewhere in the main room"
Main-By-Counter	"somewhere in the main room"
Main-Office	"somewhere in the main room"
Main-Sitting	"somewhere in the main room"
Outside Hall	"somewhere near the entryway"
Within-Closet	"somewhere near the entryway"

in-the-bathroom is a position in Bathroom.

Chapter 2 - The sink

The bathroom sink is a sink in Bathroom. It is bulky, open, and not openable.
The description of the bathroom sink is "A stately thing of white porcelain."

Instead of remembering the bathroom sink: say "That, you expect, [regarding the noun][remain] in the bathroom."

Instead of crouching behind or entering underneath or lying behind or sitting behind or slipping behind the bathroom sink: say "[nnt][if it's Daytime]There's no[otherwise]You don't remember there being a[end if] cabinet under the sink, so it's [if it's Daytime]not really [otherwise]kind of rendered in[end if]capable of concealing you."
Instead of looking under the bathroom sink: say "[nnt][if it's Daytime]There's no[otherwise]You don't remember there being a[end if] cabinet under the sink, so it's [if it's Daytime]not really [otherwise]kind of rendered in[end if]capable of hiding anything underneath itself."
Instead of placing something under the bathroom sink: say "[nnt]It [adapt the verb make from the third person singular] little difference where on the floor [the noun] goes."
Instead of pulling or pushing or turning or taking the bathroom sink: say "[no time]The sink is installed in place. [We] [have] neither the tools nor the expertise to remove it."
Instead of pushing the bathroom sink to: try pushing the bathroom sink.
Instead of rubbing or touching or squeezing the bathroom sink: say "Cool porcelain."
Instead of stowing something behind the bathroom sink: say "[nnt]The sink is[if it's Nighttime], if you remember,[end if] right up against the wall and incapable of concealing anything behind itself."

The porcelain is a scenery material in the Bathroom. [NOTE: Meant to catch the material for both the sink and the toilet.]
The description of the porcelain is "Polished, uniform, white [porcelain] [make] up [the dispatch-proxy of the porcelain]."

After starting the virtual machine (this is the initially redirect from porcelain to toilet rule):
	dispatch everything but { drinking action, eating action, examining action, flushing action, kissing action, removing it from action, rubbing action, squeezing action, taking action, tasting action, touching action, remembering action } for the porcelain to the toilet;

First before doing something:
	if the current action involves the bathroom sink or the current action involves the bathroom faucet or the current action involves the bathroom-sink-drain:
		now the dispatch-proxy of the porcelain is the bathroom sink;
	otherwise if the current action involves the toilet or the current action involves the toilet-tank or the current action involves the toilet-bowl:
		now the dispatch-proxy of the porcelain is the toilet;
	continue the action.

Instead of drinking or eating or tasting or kissing the porcelain: say "[no time][if it's Daytime]You're not[otherwise]You doubt you'd be[end if] particularly interested in licking [the dispatch-proxy of the porcelain]."
Instead of flushing the porcelain: try flushing the toilet.
Instead of remembering the porcelain: try remembering the toilet.
Instead of removing the porcelain from: try taking the porcelain.
Instead of removing something from the porcelain: try taking the noun.
Instead of rubbing or touching or squeezing the porcelain: say "Smooth, polished, cool."
Instead of taking the porcelain: say "[no time][We] [can't] remove the porcelain from [the dispatch-proxy of the porcelain] it makes up[unicode 8212][the dispatch-proxy of the porcelain] would cease to exist."

The bathroom faucet is a switched off tap. It is part of the bathroom sink. Understand "tap" as the bathroom faucet.
The description of the bathroom faucet is "An antique-looking faucet, [if it's Daytime]currently[otherwise]which will be[end if] [switchedness of the bathroom faucet][if switched on] and gushing water[end if][if it's Nighttime] by that point[end if]."

Rule for printing the name of the bathroom faucet while asking which do you mean: say "sink faucet".

Instead of remembering the bathroom faucet: say "That's part of the bathroom sink."

Carry out an actor switching on the bathroom faucet:
	now the bathroom sink is wet.

Carry out an actor switching on the bathroom faucet:
	now the bathroom faucet is noisemaking;
	if intruder-inside is true and the annoyance is nothing:
		now the annoyance is the bathroom faucet;
	increase the ambient noise of Bathroom.

Carry out an actor switching off the bathroom faucet:
	now the bathroom faucet is soundless;
	if the annoyance is the bathroom faucet:
		now the annoyance is nothing;
	decrease the ambient noise of Bathroom.

Instead of spinning the bathroom faucet to:
	if the bathroom faucet is switched off, try switching on the bathroom faucet;
	otherwise try switching off the bathroom faucet.

Instead of crouching behind or entering underneath or lying behind or sitting behind or slipping behind or lying on or sitting on or climbing or entering or standing up on the bathroom faucet: try climbing the bathroom sink.
Instead of taking the bathroom faucet: say "[no time]The faucet is part of the sink. [if the player carries the screwdriver][We] [lack][otherwise][We] [have] neither the tools nor[end if] the expertise to remove it."
Instead of tying something to the bathroom faucet: say "[no time]You doubt that would be a productive course of action."

The bathroom-sink-drain is a drain. It is part of the bathroom sink. The printed name is "sink drain". Understand "sink drain" or "bathroom sink drain" as the bathroom-sink-drain.
The description of the bathroom-sink-drain is "Hopefully no roaches crawl out of it, ever."

Instead of remembering the bathroom-sink-drain: say "That's part of the bathroom sink."

Instead of knocking on the bathroom-sink-drain: try knocking on the bathroom sink.

Instead of listening to the bathroom-sink-drain:
	if the bathroom faucet is switched on, say "It [adapt the verb gurgle from the third person singular] quietly.";
	otherwise say "[if it's Daytime]It's not[otherwise]It won't be[end if] making any noise."

Instead of placing something under the bathroom-sink-drain: try inserting the noun into the bathroom-sink-drain.
Instead of taking the bathroom-sink-drain: say "[no time][We] [lack] [unless the player carries the screwdriver]both the tools and [end unless]the expertise required to disassemble the sink."

Chapter 3 - The toilet

Section 1 - The assembly

The toilet is a scenery chair in Bathroom. The toilet is flushable. Understand "john" or "head" as the toilet. The toilet allows seated and crouched. The toilet is seated.
The description of the toilet is "A thing of white porcelain majesty."
Flushing the toilet is noisy behavior.

Report an actor flushing the toilet (this is the standard report flushing the toilet rule):
	if the player can see the actor:
		say "[The noun] [flush] dramatically." (A);
	otherwise:
		say "From the bathroom, you [hear] the toilet flush." (B).
		
Check emptying the toilet:
	if the toilet is empty and the toilet-bowl is empty and the toilet-tank is empty:
		take no time;
		say "Gross, no." instead.
		
The standard emptying supporters rule does nothing when the noun is the toilet.
		
Carry out emptying the toilet (this is the emptying the toilet rule):
	let J be the list of things on the toilet-tank;
	let K be the list of things in the toilet-bowl;
	let L be the list of things on the toilet;
	let M be a list of things;
	let N be a list of things;
	repeat with obj running through J:
		silently try taking obj;
		if the player carries obj:
			add obj to M, if absent;
		otherwise:
			add obj to N, if absent;
	if the toilet-bowl is open:
		repeat with obj running through K:
			silently try taking obj;
			if the player carries obj:
				add obj to M, if absent;
			otherwise:
				add obj to N, if absent;
	otherwise:
		repeat with obj running through L:
			silently try taking obj;
			if the player carries obj:
				add obj to M, if absent;
			otherwise:
				add obj to N, if absent;
	say "[We] [take] [M with definite articles] from [the the toilet][if the number of entries in N > 0]. [We] [are] unable to take [N with definite articles][end if]." (A).
	
Instead of attacking or burning or cutting the toilet: say "[no time]That would be a great way to ensure you never see your security deposit again."
Instead of assaulting the toilet with: try attacking the toilet.
Instead of climbing the toilet: try entering the toilet.
Instead of crouching behind or entering underneath or lying behind or sitting behind or slipping behind the toilet: say "[nnt]The toilet [if it's Daytime]won't[otherwise]wouldn't[end if] do a very good job of concealing you."
Instead of drinking or eating or tasting or kissing or smelling or hugging the toilet: say "[no time]Gross, no."

Instead of giving something to the toilet:
	if the toilet-bowl is open, try inserting the noun into the toilet-bowl;
	otherwise try putting the noun on the toilet.

Instead of inserting something into the toilet: try inserting the noun into the toilet-bowl.

Instead of listening to the toilet:
	if the toilet-tank is refilling, say "[We] [hear] the sound of water trickling into the toilet tank.";
	otherwise say "[The noun] [aren't] making any noise [if it's Daytime]at the moment[otherwise]by that point[end if]."

Instead of looking behind or looking under the toilet: say "[nnt][The noun] [aren't] capable of concealing much."
Instead of opening the toilet: try opening the toilet-bowl.
Instead of closing the toilet: try closing the toilet-bowl.

Instead of placing something under the toilet:
	if it's Daytime, try dropping the noun;
	otherwise try depositing the noun.

Instead of pulling or pushing or turning or taking the toilet: say "[no time]The toilet is installed in place. [We] [have] neither the tools nor the expertise to remove it."
Instead of pushing the toilet to: try pushing the toilet.
Check putting something on the toilet: if the toilet-bowl is open, try putting the noun on the toilet-tank instead.
Instead of removing something from the toilet: try taking the noun.
Instead of rubbing or touching or squeezing the toilet: say "Smooth, cool porcelain."
Instead of showing something to the toilet: try putting the noun on the toilet.

Instead of stowing something behind the toilet:
	if it's Daytime, try dropping the noun;
	otherwise try depositing the noun.

Instead of switching off or switching on the toilet: try flushing the toilet.
Instead of waving the toilet: try swinging the toilet.

Section 2 - The bowl

The toilet-bowl is a container. The printed name is "toilet bowl". The toilet-bowl is part of the toilet. It is eclipsing, unlocked, not lockable, closed, and openable. Understand "toilet bowl" or "bowl" as the toilet-bowl.
The description of the toilet-bowl is "The bowl of the toilet, [if it's Daytime]currently[otherwise]which will be[end if] standing [openness of the toilet-bowl][if it's Nighttime] by that point[end if]."

Definition: a thing (called obj) is atop the toilet lid:
	if obj is on the toilet and obj is not on the toilet-tank, yes;
	no.
	
After starting the virtual machine (this is the redirect from bowl to toilet rule):
	dispatch everything but { examining action, emptying action, opening action, closing action, inserting it into action, searching action, remembering action } for the toilet-bowl to the toilet;
	
[Rule for disclosing contents of the toilet-bowl:
	now the current-subject is toilet-bowl;
	if a random chance of 1 in 2 succeeds:
		choose row 1 in the relevant table;
		say "[disclosure entry]";
	otherwise:
		choose row 2 in the relevant table;
		say "[disclosure entry]".]
	
Instead of remembering the toilet-bowl: try remembering the toilet.
	
Check inserting something into the toilet-bowl (this is the no electronics in the toilet rule):
	if the noun is electronic, say "[nt]Given that electronics and water don't tend to mix well, [if it's Daytime]it's probably not[otherwise]it probably wouldn't be[end if] a good idea to put [the noun] in the toilet[if it's Daytime]. And besides, it would be gross[end if]." (A) instead.
	
Section 3 - The tank

The toilet-tank is a supporter. The printed name is "toilet tank". The toilet-tank is part of the toilet. Understand "toilet tank" or "tank" as the toilet-tank.
The description of the toilet-tank is "Just about the Platonic ideal of a toilet tank."
The toilet-tank can be refilling. The toilet-tank is not refilling.
The toilet-tank has a number called the refill-count. The refill-count of the toilet-tank is 0.

Instead of remembering the toilet-tank: try remembering the toilet.

Check an actor flushing the toilet (this is the can't flush while refilling rule):
	if the toilet-tank is refilling:
		if the actor is the player:
			take no time;
			say "That won't be very effective while the tank is refilling.";
		stop the action.

Carry out an actor flushing the toilet (this is the refill after flushing rule):
	increase the ambient noise of Bathroom;
	now the toilet-tank is refilling.

Every turn when the toilet-tank is refilling (this is the don't overflow rule):
	increment the refill-count of the toilet-tank;
	if the refill-count of the toilet-tank is 5:
		now the toilet-tank is not refilling;
		now the refill-count of the toilet-tank is 0;
		decrease the ambient noise of Bathroom;
		if the location is Bathroom or the location is connected with Bathroom:
			say "The sound of the toilet tank refilling [stop].";
	otherwise if the location is Bathroom or the location is connected with Bathroom:
		say "[unless the location is Bathroom]From the bathroom, [we] [can] hear[otherwise][We] [hear][end if] the toilet tank quietly refilling."
	
After starting the virtual machine (this is the redirect from tank to toilet rule):
	dispatch everything but { examining action, emptying action, searching action, climbing action, crouching on action, entering action, lying on action, opening action, closing action, putting it on action, removing it from action, remembering action } for the toilet-tank to the toilet;

Instead of climbing or crouching on or entering or lying on or sitting on or standing up on the toilet-tank: say "[no time][The toilet-tank] [aren't] the part of the toilet that's meant to hold your weight, and [if it's Daytime]you're not[otherwise]you doubt you'd be[end if] all that eager to test its capabilities[if it's Nighttime], under the circumstances[end if]."

Instead of opening or closing the toilet-tank:
	if it's Daytime, say "Any messing with the appliances can wait for tomorrow.";
	otherwise say "You doubt that will be your biggest priority, under the circumstances.";
	take no time.

Instead of removing the toilet-tank from: say "[no time]The toilet tank is integrated well into the toilet. [We] [lack] both the tools and the expertise to remove it."
Instead of removing something from the toilet-tank: try taking the noun.

Chapter 4 - Shower

Section 1 - Bathtub

The bathtub is an enterable container in Bathroom. It is scenery, eclipsing, transparent, open, and not openable. Understand "tub" or "bath" as the bathtub. The bulk-capacity of the bathtub is 50. The bathtub allows standing, crouched, reclining, and seated. The bathtub is seated.
The bathtub can be wet. The bathtub is not wet.
The description of the bathtub is "A great dumpy plastic thing, with nary a claw foot to be seen.

[if it's Daytime]At the moment[otherwise]By that point[end if], [if the shower curtain is closed][it's] mostly obscured by a shower curtain[otherwise]its [shower curtain] [are] open[end if]."

A description-concealing rule when the shower curtain is closed:
	now everything enclosed by the bathtub is not marked for listing.

Rule for disclosing contents of the bathtub while the shower curtain is open:
	now the current-subject is bathtub;
	choose row 2 in the relevant table;
	say "[disclosure entry]".
	
Before an actor going when the actor is in the bathtub (this is the exit the bathtub before going rule):
	if the shower curtain is closed:
		if the actor is the player:
			say "(first opening the shower curtain and getting out of the bathtub)[command clarification break]" (A);
			silently try opening the shower curtain;
			silently try exiting;
		otherwise:
			try the actor opening the shower curtain;
			try the actor exiting;
	otherwise:
		if the actor is the player:
			say "(first getting out of the bathtub)[command clarification break]" (B);
			silently try exiting;
		otherwise:
			try the actor exiting;
			
The special bathtub looking rule is listed before the room description body text rule in the carry out looking rules.

This is the special bathtub looking rule:
	if the player is in the bathtub and the shower curtain is closed:
		say "[We] [are] in the bathtub, and [can't see] the rest of the room because [the shower curtain] [are] closed.";
		if the number of locale-supportable things in the bathtub > 0:
			say line break;
			say "In [if it's Nighttime]t[end if]here with you [if it's Nighttime]will be[otherwise if the number of locale-supportable things in the bathtub is 1]is[otherwise]are[end if] [a list of locale-supportable things in the bathtub].";
		stop.

Instead of remembering the bathtub: say "That, you expect, [regarding the noun][remain] in the bathroom."

Check examining the bathtub:
	if the player is not in the bathtub and the shower curtain is closed, say "[nnt][The bathtub] [are] entirely obscured by the shower curtain [if it's Daytime]at the moment[otherwise]by that point[end if]." instead.
	
Check an actor inserting something into the bathtub (this is the open the bathtub before inserting rule):
	if the actor is not enclosed by the bathtub and the shower curtain is closed:
		if the actor is the player:
			say "(first opening the shower curtain)[command clarification break]";
			silently try opening the shower curtain;
		otherwise:
			try the actor opening the shower curtain.
	
Check an actor taking (this is the open the bathtub before taking rule):
	if the noun is enclosed by the bathtub and the actor is not enclosed by the bathtub and the shower curtain is closed:
		if the actor is the player:
			say "(first opening the shower curtain)[command clarification break]";
			silently try opening the shower curtain;
		otherwise:
			try the actor opening the shower curtain.

The can't enter closed containers rule does nothing when the noun is the bathtub.
The can't exit closed containers rule does nothing when the container exited from is the bathtub.
The can't insert into closed containers rule does nothing when the second noun is the bathtub.

Instead of attacking or burning or cutting the bathtub: say "[no time]That would be a great way to ensure you never see your security deposit again."
Instead of assaulting the bathtub with: try attacking the bathtub.
Instead of climbing the bathtub: try entering the bathtub.

Instead of crouching behind or crouching on the bathtub:
	unless the player is in the bathtub:
		silently try entering the bathtub;
	if the player is in the bathtub:
		silently try taking position crouched;
		say "[We] [crouch] down in the bathtub.";
	otherwise:
		stop the action.

Instead of drinking or eating or tasting or kissing the bathtub: say "[no time]You doubt the tub would taste very good."
Instead of entering underneath the bathtub: say "[nnt][if it's Nighttime]You know the[otherwise]The[end if] bathtub is flush with the floor. [We] [can't] fit underneath."

Instead of flushing the bathtub:
	if the tub-faucet is switched off, try switching on the tub-faucet;
	otherwise say "[nt]The water [is already] running."

Instead of getting off the bathtub: try exiting.
Instead of giving something to the bathtub: try inserting the noun into the bathtub.

Instead of listening to the bathtub:
	if the tub-faucet is switched on:
		try listening to the tub-faucet instead;
	otherwise:
		say "The bathtub [regarding the noun][aren't] making any noise [if it's Daytime]at the moment[otherwise]by that point[end if]."

Instead of looking behind the bathtub:
	if the shower curtain is closed and the player is not in the bathtub:
		try opening the shower curtain;
		try searching the bathtub;
	otherwise:
		say "[nnt][if it's Nighttime]You know the[otherwise]The[end if] bathtub is built into the wall, and can't conceal anything behind itself."

Instead of looking under the bathtub: say "[nnt][if it's Nighttime]You know the[otherwise]The[end if] bathtub is flush with the floor, and can't conceal anything under itself."

Instead of lying behind or lying on the bathtub:
	unless the player is in the bathtub:
		silently try entering the bathtub;
	if the player is in the bathtub:
		silently try taking position reclining;
		say "[We] [lie] down in the bathtub.";
	otherwise:
		stop the action.

Instead of opening the bathtub: try opening the shower curtain.
Instead of closing the bathtub: try closing the shower curtain.
Instead of placing something under the bathtub: try inserting the noun into the bathtub.
Instead of pulling or pushing or turning or taking the bathtub: say "[no time][if it's Nighttime]You know the[otherwise]The[end if] bathtub is built into the wall and can't be moved around."
Instead of pushing the bathtub to: try pushing the bathtub.
Instead of putting something on the bathtub: try inserting the noun into the bathtub.
Instead of removing something from the bathtub: try taking the noun.
Instead of rubbing or touching or squeezing the bathtub: say "[if it's Nighttime]You suspect the[otherwise]The[end if] plastic [regarding the noun][feel] cheap."
Instead of showing something to the bathtub: try inserting the noun into the bathtub.

Instead of sitting behind or sitting on the bathtub:
	unless the player is in the bathtub:
		silently try entering the bathtub;
	if the player is in the bathtub:
		silently try taking position seated;
		say "[We] [sit] down in the bathtub.";
	otherwise:
		stop the action.

Instead of slipping behind the bathtub:
	unless the player is in the bathtub:
		try entering the bathtub;
	otherwise:
		say "[nnt][if it's Nighttime]You know the[otherwise]The[end if] bathtub is built into the wall. [We] [can't] fit behind it."

Instead of smelling the bathtub:
	if the tub-faucet is switched on, say "[if it's Nighttime]You suspect it will just smell[otherwise]It just smells[end if] wet.";
	otherwise say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."

Instead of standing up on the bathtub: try entering the bathtub.
Instead of stowing something behind the bathtub: try inserting the noun into the bathtub.
Instead of switching off the bathtub: try switching off the tub-faucet.
Instead of switching on the bathtub: try switching on the tub-faucet.
Instead of throwing something at the bathtub: try inserting the noun into the bathtub.
Instead of washing the bathtub: say "[no time][if it's Daytime]It's[otherwise]It will have[end if] barely had a chance to get dirty yet."
Instead of waving the bathtub: try swinging the bathtub.

Check inserting something into the bathtub (this is the no electronics in the bathtub rule):
	if the noun is electronic:
		take no time;
		if the bathtub is wet:
			say "Given that electronics and water don't tend to mix well, [if it's Daytime]it's probably not[otherwise]it probably wouldn't be[end if] a good idea to put [the noun] into the bathtub." (A) instead;
		otherwise:
			say "Given that electronics and water don't tend to mix well, [if it's Daytime]it's probably not[otherwise]it probably wouldn't be[end if] a good idea to put [the noun] into the bathtub, even if there [if it's Daytime]isn't[otherwise]won't be[end if] any water there [if it's Daytime]currently[otherwise]at that point[end if]." (B) instead.
			
Section 2 - Parts and materials of the bathtub

The worn-plastic is a material. The worn-plastic is part of the bathtub. The printed name of the worn-plastic is "worn plastic of the bathtub". Understand "worn plastic" or "worn/-- plastic of the/-- bathtub/tub/bath tub/--" or "bathtub/tub/bath plastic" or "bath tub plastic" as the worn-plastic.
The description of the worn-plastic is "The bathtub is[if it's Nighttime], you remember,[end if] made of worn plastic."

After starting the virtual machine (this is the redirect from its plastic to bathtub rule):
	dispatch everything but { drinking action, eating action, examining action, kissing action, removing it from action, remembering action, tasting action, taking action } for the worn-plastic to the bathtub;

Instead of drinking or eating or tasting or kissing the worn-plastic: say "[no time]You doubt the plastic would taste very good."
Instead of remembering the worn-plastic: try remembering the bathtub.
Instead of removing the worn-plastic from: try taking the worn-plastic.
Instead of removing something from the worn-plastic: try taking the noun.
Instead of taking the worn-plastic: say "[no time][We] [can't] remove the plastic from the tub it comprises[unicode 8212]the tub would cease to exist."

The claw foot is a metaphor. It is part of the bathtub.
Before doing something other than remembering when the current action involves the claw foot: say "[no time]Regrettably, nary a claw foot [adapt the verb are from the third person singular] to be seen."

Instead of remembering the claw foot: say "You expect the bathtub, and its disappointing lack of claw feet, [regarding the noun][remain] in the bathroom."

The tub-drain is a drain. It is part of the bathtub. The printed name is "bathtub drain". Understand "bathtub/tub drain" or "bathroom tub drain" as the tub-drain.
The description of the tub-drain is "You don't even want to imagine what ghastly flora must be down there."

Instead of remembering the tub-drain: say "That's part of the bathtub."

Instead of knocking on the tub-drain: try knocking on the bathtub.

Instead of listening to the tub-drain:
	if the tub-faucet is switched on, say "It [gurgle] quietly.";
	otherwise say "[if it's Daytime]It's not[otherwise]It won't be[end if] making any noise."

Instead of placing something under the tub-drain: try inserting the noun into the tub-drain.
Instead of taking the tub-drain: say "[no time][We] [lack] [unless the player carries the screwdriver]both the tools and [end unless]the expertise required to disassemble the bathtub."

The tub-faucet is a tap. It is part of the bathtub. The printed name is "bathtub faucet". Understand "bathtub/tub tap/faucet" or "bathroom tub tap/faucet" as the tub-faucet.
The description of the tub-faucet is "The metal tub faucet, [if it's Daytime]currently[otherwise]which will be[end if] [switchedness of the tub-faucet][if it's Nighttime] by that point[end if]."

Instead of remembering the tub-faucet: say "That's part of the bathtub."

Carry out an actor switching on the tub-faucet:
	now the bathtub is wet.

Carry out an actor switching on the tub-faucet:
	now the tub-faucet is noisemaking;
	if intruder-inside is true and the annoyance is nothing:
		now the annoyance is the tub-faucet;
	increase the ambient noise of Bathroom.

Carry out an actor switching off the tub-faucet:
	now the tub-faucet is soundless;
	if the annoyance is the tub-faucet:
		now the annoyance is nothing;
	decrease the ambient noise of Bathroom.

Instead of spinning the tub-faucet to:
	if the tub-faucet is switched off, try switching on the tub-faucet;
	otherwise try switching off the tub-faucet.

Instead of taking the tub-faucet: say "[no time][We] [lack] [unless the player carries the screwdriver]both the tools and [end unless]the expertise required to disassemble the bathtub."

Check switching on the tub-faucet (this is the block bathing during the day in the tub rule):
	if it's Daytime:
		take no time;
		say "You're too tired to worry about bathing right now. It can wait for the morning. It's fine." (A) instead.

in-the-tub is a thingish position in the bathtub.

Section 3 - The shower curtain

The shower curtain is part of the bathtub. The shower curtain can be open. The shower curtain can be openable. The shower curtain is bulky, closed, and openable.
The description of the shower curtain is "A basic white shower curtain[unicode 8212]the first you could find. [if it's Daytime]Currently, it's[otherwise]By that point, it'll be[end if] [openness of the shower curtain]."

To decide which text is the openness of the shower curtain:
	if the shower curtain is open, decide on "open";
	decide on "closed".
	
Instead of remembering the shower curtain: say "That, you expect, [regarding the noun][remain] hung up in the bathroom."

Instead of attacking or burning or cutting the shower curtain:
	if it's Daytime, say "You have no reason to destroy the shower curtain. You only just got it.";
	otherwise say "[nt]You see no way that destroying the shower curtain would help in that situation."

Instead of assaulting the shower curtain with: try attacking the shower curtain.
Instead of climbing or crouching on or lying on or sitting on or standing up on the shower curtain: say "[no time]You don't think the shower curtain [if it's Daytime]will[otherwise]would[end if] hold your weight, and [if it's Daytime]you're not[otherwise]you don't think you'd be[end if] particularly interested in testing its load limit[if it's Nighttime], under the circumstances[end if]."

Instead of crouching behind the shower curtain:
	unless the player is in the bathtub:
		silently try entering the bathtub;
	if the player is in the bathtub:
		silently try taking position crouched;
		say "[We] [crouch] down inside of the bathtub[nobr]";
	otherwise: 
		stop the action;
	if the shower curtain is open:
		silently try closing the shower curtain;
		say ", drawing the shower curtain behind you.";
	otherwise:
		say "."

Instead of drinking or eating or tasting or kissing the shower curtain: say "[no time]You doubt the shower curtain would taste very good."
Instead of entering or entering underneath the shower curtain: try slipping behind the shower curtain.
Instead of giving something to the shower curtain: try inserting the noun into the bathtub.
Instead of inserting something into the shower curtain: try inserting the noun into the bathtub.
Instead of knocking on the shower curtain: say "The sound [regarding the noun][aren't] very impressive."
Instead of listening to the shower curtain: say "[no time]The shower curtain doesn't really make noise while it's still."

Instead of looking behind or looking under the shower curtain:
	if the player is in the bathtub:
		if the shower curtain is open:
			say "[nt][The shower curtain] [are] open and incapable of concealing anything.";
		otherwise:
			now the shower curtain is open;
			say "[We] [peek] out from behind the shower curtain.";
			say line break;
			say the description of Bathroom;
			say line break;
			now the shower curtain is closed;
	otherwise:
		if the shower curtain is closed:
			try opening the shower curtain;
		try searching the bathtub.

Instead of lying behind the shower curtain:
	unless the player is in the bathtub:
		silently try entering the bathtub;
	if the player is in the bathtub:
		silently try taking position reclining;
		say "[We] [lie] down inside of the bathtub[nobr]";
	otherwise: 
		stop the action;
	if the shower curtain is open:
		silently try closing the shower curtain;
		say ", drawing the shower curtain behind you.";
	otherwise:
		say "."

Instead of placing something under the shower curtain: try inserting the noun into the bathtub.

Instead of pulling or pushing or turning the shower curtain:
	if the shower curtain is closed, try opening the shower curtain;
	otherwise try closing the shower curtain.

Instead of pushing the shower curtain to: try pushing the shower curtain.
Instead of putting something on the shower curtain: try inserting the noun into the bathtub.
Instead of rubbing or touching or squeezing the shower curtain: say "Cheap plastic, but it's what you could get on short notice."
Instead of searching the shower curtain: try looking behind the shower curtain.
Instead of showing something to the shower curtain: try inserting the noun into the bathtub.

Instead of sitting behind the shower curtain:
	unless the player is in the bathtub:
		silently try entering the bathtub;
	if the player is in the bathtub:
		silently try taking position seated;
		say "[We] [sit] down inside of the bathtub[nobr]";
	otherwise: 
		stop the action;
	if the shower curtain is open:
		silently try closing the shower curtain;
		say ", drawing the shower curtain behind you.";
	otherwise:
		say "."

Instead of slipping behind the shower curtain:
	unless the player is in the bathtub:
		silently try entering the bathtub;
	if the player is in the bathtub:
		say "[We] [hide] inside of the bathtub[nobr]";
	otherwise: 
		stop the action;
	if the shower curtain is open:
		silently try closing the shower curtain;
		say ", drawing the shower curtain behind you.";
	otherwise:
		say "."

Instead of smelling the shower curtain: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of stowing something behind the shower curtain: try inserting the noun into the bathtub.
Instead of swinging or waving the shower curtain: say "[no time]You doubt that would be a productive course of action."
Instead of taking the shower curtain:
	if it's Daytime, say "You only just got it hung up. No reason to take it down right now.";
	otherwise say "The shower curtain will be too noisy and time-consuming to take it down in the moment.";
	take no time.

Instead of tying something to the shower curtain: say "[no time]You doubt that [if it's Daytime]will[otherwise]would[end if] be a productive course of action."

Opening the shower curtain is noisy behavior. Closing the shower curtain is noisy behavior.
Opening the shower curtain is obvious behavior. Closing the shower curtain is obvious behavior.

Carry out an actor closing the shower curtain (this is the special obscure when closing the curtain rule):
	now the bathtub is closed;
	now the shower curtain obscures the bathtub;
	repeat with obj running through things in the bathtub:
		now the shower curtain obscures obj.
		
Carry out an actor opening the shower curtain (this is the special reveal when opening the curtain rule):
	now the bathtub is open;
	now the shower curtain does not obscure the bathtub;
	repeat with obj running through things in the bathtub:
		now the shower curtain does not obscure obj.

Chapter 5 - Bathroom cabinet

Section 1 - The cabinet itself

The bathroom-cabinet is a cabinet in the bathroom. The printed name is "bathroom cabinet". Understand "bathroom" or "bathroom cabinet" or "cabinet" as the bathroom-cabinet.
The description of the bathroom-cabinet is "A wooden cabinet installed in the wall[if closed], with a mirror on the front[end if]. [if it's Daytime]Currently, it stands[otherwise]It will be standing[end if] [openness of the bathroom-cabinet][if it's Nighttime] by that point[end if]."

Last report examining the closed bathroom-cabinet: try examining the mirror.

Instead of remembering the bathroom-cabinet: say "That, you expect, [regarding the noun][remain] in the bathroom."

Instead of climbing or crouching on or entering or entering underneath or lying on or lying behind or sitting behind or sitting on or slipping behind or standing up on the bathroom-cabinet: say "[no time]You[if it's Daytime][']d rather not[otherwise] suspect you won't want to[end if] test the limits of [the noun]'s weight capacity[if it's Daytime], today of all days[otherwise] in such a high-stakes situation[end if]."
Instead of listening to the kitchen-cabinets: say "[no time]The cabinet doesn't really make noise on its own."
Instead of rubbing or touching or squeezing the bathroom-cabinet: say "Smooth wood."
Instead of smelling the bathroom-cabinet: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of taking the bathroom-cabinet: say "[nnt][It's] firmly bolted to the wall."

Section 2 - The mirror

The mirror is part of the bathroom-cabinet. Understand "reflection" as the mirror. The bulk of the mirror is 0.
The description of the mirror is "In the mirror [we] [can see] [mirror-thing]."

To say mirror-thing:
	let B be a random number from 1 to the number of entries in the bathroom-reflection-list;
	say "[an entry B of bathroom-reflection-list]".

Carry out dropping: if the location is Bathroom, add the noun to the bathroom-reflection-list, if absent.
Carry out depositing: if the location is Bathroom, add the noun to the bathroom-reflection-list, if absent.
Carry out taking: if the location is Bathroom, remove the noun from the bathroom-reflection-list, if present.

Check examining the mirror: if the bathroom-cabinet is open, say "[nnt][We] [can't] see the mirror when the cabinet is open." instead.

Instead of attacking or burning or cutting or shooting the mirror: say "[no time]You're not superstitious, but at the same time [if it's Daytime]you're not[otherwise]you don't think you'd be[end if] willing to risk the seven years."
Instead of assaulting the mirror with: try attacking the mirror.
Instead of closing the mirror: try closing the bathroom-cabinet.
Instead of consulting the mirror about: try examining the mirror.
Instead of drinking or eating or tasting the mirror: say "You doubt it would taste like much of anything."

Instead of emptying the mirror:
	if the bathroom-cabinet is open, try emptying the bathroom-cabinet;
	otherwise say "[nt]You can't pull things through from the other side of a mirror[if it's Daytime] in real life[otherwise], even in an imagined scenario[end if]."

Instead of entering the mirror: say "[no time]You're no Alice."
Instead of entering underneath the mirror: try climbing the bathroom sink.
Instead of giving something to the mirror: try inserting the noun into the bathroom-cabinet.
Instead of inserting something into the mirror: try inserting the noun into the bathroom-cabinet.
Instead of kissing the mirror: say "[nnt]You're not quite so vain."
Instead of listening to the mirror: say "[nnt]Mirrors reflect images, not so much noise."

Instead of looking behind the mirror:
	if the bathroom-cabinet is closed, try opening the bathroom-cabinet;
	otherwise try searching the bathroom-cabinet.
	
Instead of looking under the mirror: say "[nnt][if it's Daytime]The[otherwise]You remember the[end if] cabinet hangs directly above the bathroom sink."

Instead of lying behind or sitting behind or slipping behind the mirror: try entering the bathroom-cabinet.
Instead of opening the mirror: try opening the bathroom-cabinet.

Instead of pulling or pushing or turning or swinging or waving the mirror:
	if the bathroom-cabinet is closed, try opening the bathroom-cabinet;
	otherwise try closing the bathroom-cabinet.

Instead of pushing the mirror to: try pushing the mirror.
Instead of putting something on the mirror: try inserting the noun into the bathroom-cabinet.
Instead of remembering the mirror: try remembering the bathroom-cabinet.
Instead of removing the mirror from: try taking the mirror.
Instead of removing something from the mirror: say "[no time]You can't pull things through from the other side of a mirror[if it's Daytime] in real life[otherwise], even in an imagined scenario[end if]."
Instead of rubbing or touching or squeezing the mirror: say "The glass [regarding the noun][are] cool."

Instead of searching the mirror:
	if the bathroom-cabinet is closed, try examining the mirror;
	otherwise try searching the bathroom-cabinet.

Instead of showing something to the mirror: say "[no time][The noun][']s reflection likely won't provide any more insight into [regarding the noun][their] nature than the thing[if the noun is plural-named]s[end if] [regarding the noun][themselves]."
Instead of smelling the mirror: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of stowing something behind the mirror: try inserting the noun into the bathroom-cabinet.
Instead of taking the mirror: say "[no time]You [if it's Daytime]won't[otherwise]wouldn't[end if] easily be able to remove it from the cabinet."
Instead of throwing something at the mirror: try attacking the mirror.

Section 3 - Things in the cabinet

Some pill bottles are a container in the bathroom-cabinet. Understand "perscription/perscriptions" or "medication/meds/medications" or "pills" as the pill bottles. The pill bottles are legible, closed, openable, unlocked, and not lockable. The bulk of the pill bottles is 5.
The description of the pill bottles is "A bunch of orange prescription bottles, all half-empty and still prescribed to your old name."

Report reading the pill bottles: say "They were supposed to have been changed over to show your new name before now[first time]. In an operation as complex as this one, it's reasonable for something to slip through the cracks, but you find yourself wishing it wasn't this particular thing that did[only]." instead.

To decide which thing is the referent of the pronoun 'them':
	(- PronounValue('them') -)
	
Understand "shake pill bottles" as a mistake ("[if it's Daytime]Their contents rattles around[otherwise]Better not to make the noise[end if].") when the pill bottles are touchable.
Understand "shake prescription/prescriptions/bottles/medication/meds/medications/pills/bottle/pill" as a mistake ("[if it's Daytime]Their contents rattles around[otherwise]Better not to make the noise[end if].") when the pill bottles are touchable.
Understand "shake them" as a mistake ("[if it's Daytime]Their contents rattles around[otherwise]Better not to make the noise[end if].") when the referent of the pronoun 'them' is the pill bottles.

Instead of attacking or burning or cutting the pill bottles: 
	if it's Daytime, say "You have no reason to destroy your pill bottles.";
	otherwise say "[nt]You see no way that destroying your pill bottles would help in that situation."

Instead of assaulting the pill bottles with: try attacking the pill bottles.
Instead of consulting the pill bottles about: try reading the pill bottles.
Instead of crouching behind or entering underneath or lying behind or sitting behind or slipping behind the pill bottles: say "[The noun] [aren't] substantial enough to effectively conceal you."
Instead of drinking or eating or tasting the pill bottles: say "[nnt]The bottles themselves don't taste like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of emptying the pill bottles: say "[no time][if it's Nighttime]You think it'll be better[otherwise]Better[end if] to leave the bottles['] contents alone until it's time to take them."
Instead of flushing the pill bottles when the location is either Bathroom or Kitchenette: say "[no time]No, you need those."
Instead of giving something to the pill bottles: try inserting the noun into the pill bottles.
Instead of inserting something into the pill bottles: say "[no time][if it's Nighttime]You think it'll be better[otherwise]Better[end if] to leave it so it's just the one kind of pill in each bottle."
Instead of knocking on the pill bottles: say "The sound [if it's Daytime]isn't[otherwise]won't be[end if] very impressive."

Instead of listening to the pill bottles:
	if it's Daytime, say "Their contents rattles around.";
	otherwise say "[nt]Better not to make the noise by shaking them."

Instead of looking behind the pill bottles: say "[no time][The noun] [can't] meaningfully conceal anything behind themselves."
Instead of looking under the pill bottles: say "[no time][The noun] [can't] meaningfully conceal anything under themselves."
Instead of opening the pill bottles: say "[no time][if it's Daytime]It's not[otherwise]It won't be[end if] time to take your meds, and [we] [don't] want to risk losing any of the pills."
Instead of closing the pill bottles: say "[no time][They're already] closed."
Instead of pushing the pill bottles to: try pushing the pill bottles.
Before removing something from the pill bottles: say "[no time][if it's Daytime]It's not[otherwise]It won't be[end if] time to take your meds, and [we] [don't] want to risk losing any of the pills." instead.
Instead of rubbing or touching or squeezing the pill bottles: say "Smooth plastic."
Instead of searching the pill bottles: say "[nnt]You already know their contents well."
Instead of smelling the pill bottles: say "[if it's Daytime]The bottles have[otherwise]You remember the bottles having[end if] a distinctive smell[unicode 8212]one you [if it's Daytime]can[otherwise]could[end if] immediately identify, but not describe."
Instead of throwing the pill bottles at something: say "[no time]Once you identify the impulse, [we] [find] you have no reason to actually follow through."
Instead of waving the pill bottles: try swinging the pill bottles.

The toothbrush is in the bathroom-cabinet. Understand "tooth/-- brush" or "overpriced/expensive" or "squishy" or "handle/grip" as the toothbrush.
The description of the toothbrush is "A brand-new, overpriced toothbrush with entirely synthetic bristles[first time]. It doesn't even vibrate[only]."

Instead of attacking or burning or cutting the toothbrush:
	if it's Daytime, say "You have no reason to destroy the toothbrush.";
	otherwise say "[nt]You see no way that destroying the toothbrush would help in that situation."

Instead of assaulting the toothbrush with: try attacking the toothbrush.
Instead of crouching behind or entering underneath or lying behind or sitting behind or slipping behind the toothbrush: say "[The noun] [aren't] substantial enough to effectively conceal you."
Instead of drinking or eating or tasting or kissing the toothbrush: say "[nnt]The toothbrush isn't edible, and you already know [regarding the toothbrush][they] [don't] taste like much of anything."
Instead of knocking on the toothbrush: say "The sound [regarding the noun][aren't] very impressive."
Instead of listening to the toothbrush: say "[no time]The toothbrush doesn't vibrate, and thus doesn't really make any noise."
Instead of looking behind or looking under or searching the toothbrush: say "[no time][The noun] [can't] meaningfully conceal anything."
Instead of pulling or pushing or turning the toothbrush: say "[nnt]It [adapt the verb make from the third person singular] little difference."
Instead of pushing the toothbrush to: try pushing the toothbrush.
Instead of rubbing or touching or squeezing the toothbrush: say "The handle[if it's Nighttime], you remember,[end if] has a squishy grip."
Instead of smelling the toothbrush: say "[regarding the noun][They] [smell] faintly like your breath."
Instead of switching off or switching on the toothbrush: say "[no time]It has no batteries! [regarding the noun][They] [don't] even vibrate!"
Instead of throwing the toothbrush at something: say "[no time]Once you identify the impulse, [we] [find] you have no reason to actually follow through."
Instead of throwing something at the toothbrush: say "[no time]Once you identify the impulse, [we] [find] you have no reason to actually follow through."
Instead of washing the toothbrush: say "[no time]All [the toothbrush] [have] had on it is tap water. More tap water [if it's Daytime]won't[otherwise]wouldn't[end if] make it any cleaner."
Instead of waving the toothbrush: try swinging the toothbrush.

Some bristles are a material. The bristles are part of the toothbrush. Understand "synthetic" as the bristles.
The description of the bristles is "Cheap, stiff, synthetic material[first time]. Certainly not worth how much you paid[only]."

After starting the virtual machine (this is the redirect from bristles to toothbrush rule):
	dispatch everything but { drinking action, eating action, examining action, kissing action, removing it from action, rubbing action, squeezing action, taking action, tasting action, touching action, remembering action } for the bristles to the toothbrush;

Instead of drinking or eating or tasting or kissing the bristles: say "[nnt]The toothbrush isn't edible, and you already know [the bristles] [don't] taste like much of anything."
Instead of taking the bristles: say "[no time]The [bristles] [don't] separate from their toothbrush."
Instead of rubbing or touching or squeezing the bristles: say "[if it's Daytime]They're[otherwise]You remember them being[end if] [i]so[/i] stiff."
Instead of removing the bristles from: try taking the bristles.
Instead of removing something from the bristles: try taking the noun.

The toothpaste is a metaphor. The toothpaste is part of the toothbrush. Understand "tooth/-- paste" as the toothpaste.
Before doing something other than remembering when the current action involves the toothpaste: say "[nt]You [i]knew[/i] you forgot something. You'll need to run out and pick some up [if it's Daytime]tomorrow[otherwise]in the morning[end if]."

Instead of remembering the toothpaste: say "To late to get any [if it's Daytime]today[otherwise]tonight[end if]. If only you'd remembered it earlier!"

The razor is in the bathroom-cabinet. Understand "shaving" or "handle" or "cheap/-- rubber" as the razor.
The description of the razor is "A cheap single-blade razor[first time]. [We] [can] feel yourself breaking out just looking at it[only]."

Instead of attacking or burning the razor:
	if it's Daytime, say "You have no reason to destroy the razor.";
	otherwise say "[nt]You see no way that destroying the razor would help in that situation."
	
Instead of cutting the razor:
	if it's Daytime, say "The razor is more likely to dole out cuts than to be cut itself	.";
	otherwise say "[nt]You see no way that destroying the razor would help in that situation."

Instead of assaulting the razor with: try attacking the razor.
Instead of assaulting something with the razor: say "[no time]The blade is good at giving shaving cuts and razor burn, but [if it's Daytime]isn't really[otherwise]won't really be[end if] capable of doing much damage beyond that."
Instead of crouching behind or entering underneath or lying behind or sitting behind or slipping behind the razor: say "[The noun] [aren't] substantial enough to effectively conceal you."
Instead of drinking or eating or tasting or kissing or hugging the razor: say "[no time]Considering the blades [if it's Daytime]haven't yet[otherwise]won't yet have[end if] been dulled, that would likely be dangerous."
Instead of knocking on the razor: say "The sound [regarding the noun][aren't] very impressive."
Instead of listening to the razor: say "[no time]It's not electric and doesn't really make noise."
Instead of looking behind or looking under or searching the razor: say "[no time][The noun] [can't] meaningfully conceal anything."
Instead of opening or closing the razor: say "[no time]It's not the kind that opens."
Instead of pulling or pushing or turning the razor: say "[nnt]It [adapt the verb make from the third person singular] little difference."
Instead of pushing the razor to: try pushing the razor.
Instead of rubbing or touching or squeezing the razor: say "The handle[if it's Nighttime], you remember,[end if] is cheap rubber. You[if it's Nighttime][']ll[end if] know better than to rub the blades."
Instead of smelling the razor: say "It doesn't smell like much of anything[if it's Nighttime], as far as you know[end if]."
Instead of switching off or switching on the razor: say "[no time]It's not an electric razor."
Instead of throwing the razor at the intruder: try assaulting the intruder with the razor.
Instead of throwing the razor at something: say "[no time]Once you identify the impulse, [we] [find] you have no reason to actually follow through."
Instead of throwing something at the razor: say "[no time]Once you identify the impulse, [we] [find] you have no reason to actually follow through."
Instead of washing the razor: say "[no time]It [if it's Daytime]isn't really[otherwise]won't really be[end if] in need of cleaning [if it's Daytime]at the moment[otherwise]by that point[end if]."
Instead of waving the razor: try swinging the razor.

The razor-blade is a material. The razor-blade is part of the razor. The printed name of the razor-blade is "razor blade". Understand "single/-- blade/blades" or "razorblade/razorblades" or "razor-blade/razor-blades" or "single-blade" or "singleblade" or "razor blade" as the razor-blade.
The description of the razor-blade is "[if it's Daytime]There's only[otherwise]It only has[end if] the one, but at least the one [if it's Daytime]is still[otherwise]there is will still be[end if] sharp."

After starting the virtual machine (this is the redirect from blade to razor rule):
	dispatch everything but { examining action, removing it from action, remembering action, taking action } for the razor-blade to the razor;

Instead of taking the razor-blade: say "[no time]The blade [regarding the razor][don't] separate from its razor."
Instead of remembering the razor-blade: try remembering the razor.
Instead of removing the razor-blade from: try taking the razor-blade.
Instead of removing something from the razor-blade: try taking the noun.

Chapter 6 - Bathmat

The bathmat is a rug in bathroom. The printed name is "bath mat". Understand "mat" or "bath mat" as the bathmat.
The description of the bathmat is "A small rug made of material designed to stay soft, even when wet."

Instead of remembering the bathmat: say "You expect [if it's Daytime]that's still[otherwise]it'll still be[end if] in the bathroom."

Chapter 7 - Wastebasket

The small metal trash can is a wastebasket in Bathroom. "[A small metal trash can] [are] nestled between the toilet and the sink."
The description of the small metal trash can is "An unassuming little metal cylinder with no top."

The closing doors before locking keylessly rule does nothing when the noun is the small metal trash can.
The closing doors before locking rule does nothing when the noun is the small metal trash can.

Instead of opening or closing the small metal trash can: say "[no time]It doesn't have a lid."
Instead of remembering the small metal trash can: say "That, you expect, [regarding the noun][remain] in the bathroom."
Instead of rubbing or touching or squeezing the small metal trash can: say "Cool metal."

The bathroom-reflection-list is a list of things that varies. The bathroom-reflection-list is { yourself, the small metal trash can, the shower curtain, the bathmat }.

Chapter 8 - Lighting

The bathroom light is lighting. The bathroom light is in Bathroom. The bathroom light illuminates Bathroom.
The description of the bathroom light is "The [if switched on]yellow [end if][bathroom light] [are][if it's Daytime] currenttly[end if] [switchedness of the bathroom-lightswitch][if it's Nighttime] by that point[end if]."

Instead of remembering the bathroom light: say "The bathroom light is only in the bathroom."

The bathroom-lightswitch is a switched off lightswitch in Bathroom. The bathroom-lightswitch is wired to the bathroom light.

Instead of remembering the bathroom-lightswitch: say "That, you expect, [regarding the noun][remain] in the bathroom."

Book 6 - Down the hall

Down-the-Hall is east of Outside Hall. The printed name of Down-the-Hall is "Down the Hall".
The casual descriptor of Down-the-Hall is "the hallway".

The elevator is a distant backdrop. The elevator is in Outside Hall and Down-the-Hall. Understand "elevator/lift door/doors/button/buttons/light/lights" or "lift" as the elevator.
The description of the elevator is "Down the hall to the [b]east[/b], the elevator will call to you."

A distant stuff rule for the elevator:
	take no time;
	say "You'll need to head down the hall to the [b]east[/b] in order to reach the elevator.";
	rule fails.
	
Instead of remembering the elevator: say "That, you expect, [regarding the noun][remain] right where it was installed at the end of the hallway."

Book 7 - Regions & Connectivity

Part 1 - Regions

Open Space is a region. Main-Bed, Main-By-Counter, Main-Office, Main-Sitting, and Main-Behind-Shelf are in Open Space.

Apartment is a region. Open Space, Within-Closet, Kitchenette, Entryway, and Bathroom are in Apartment.

Hallway is a region. Outside Hall and Down-the-Hall are in Hallway.

Part 2 - Connectivity

Main-Bed is connected with Main-By-Counter. Main-Bed is connected with Main-Behind-Shelf. Main-Bed is connected with Kitchenette.

Main-By-Counter is connected with Kitchenette. Main-By-Counter is connected with Main-Office.

Main-Office is connected with Main-Sitting. Main-Office is connected with Entryway.

Entryway is connected with Kitchenette.

Outside Hall is connected with Down-the-Hall.

Carry out an actor opening the closet (this is the connect the closet rule):
	now Within-Closet is connected with Entryway;
	if the restroom door is open:
		now Within-Closet is connected with Bathroom;
	continue the action.
	
Carry out an actor closing the closet (this is the disconnect the closet rule):
	now Within-Closet is not connected with Entryway;
	now Within-Closet is not connected with Bathroom;
	continue the action.

Carry out an actor opening the restroom door (this is the connect the bathroom rule):
	now Bathroom is connected with Entryway;
	now Bathroom is connected with Kitchenette;
	if the closet is open:
		now Bathroom is connected with Within-Closet;
	continue the action.
	
Carry out an actor closing the restroom door (this is the disconnect the bathroom rule):
	now Bathroom is not connected with Entryway;
	now Bathroom is not connected with Kitchenette;
	now Bathroom is not connected with Within-Closet;
	continue the action.
	
Carry out an actor opening the front door (this is the connect the outside hall rule):
	now Outside Hall is connected with Entryway;
	now Outside Hall is connected with Main-Office;
	continue the action.
	
Carry out an actor closing the front door (this is the disconnect the outside hall rule):
	now Outside Hall is not connected with Entryway;
	now Outside Hall is not connected with Main-Office;
	continue the action.
	
Book 8 - Important lists etc
[NOTE: These couldn't be defined before all of their contents were defined]

The list of parts unrecognized is a list of things that varies. The list of parts unrecognized is {  }.

The list of things unemptyable is a list of things that varies. The list of things unemptyable is { dishracks }.

Volume 3 - Brains

Book 1 - You

Instead of examining yourself (this is the variable player description rule):
	if it's Daytime:
		follow the tutorial complete confirmation rule;
		if rule failed:
			say "You're bone-weary and already dressed for bed. You need a shower, but that can wait for the morning. Just a few more things to do before you can fall asleep." (A);
		otherwise:
			say "You're bone-weary and already dressed for bed. You need a shower, but that can wait for the morning. Finally, you've done everything you need to do and can go to sleep." (B);
	otherwise:
		take no time;
		unless the player wears the leather jacket or the player wears the trenchcoat:
			say "You're painfully aware of how vulnerable you'll be in just your sweatpants and undershirt." (C);
		otherwise:
			say "You suspect you'll be disgustingly sweaty by that point. You regret not taking a shower when you had the chance." (D).
			
Instead of remembering yourself: try examining yourself.

Understand "Vanessa" or "DeCesare" as yourself. The player is female. The player is in Main-Bed. The bulk-capacity of the player is 1000.

Instead of attacking or burning or cutting or shooting yourself: say "[no time]You have no wish to die to[if it's Daytime]day[otherwise]night[end if]."
Instead of assaulting yourself with: try attacking yourself.
Instead of emptying yourself: say "[no time]It [if it's Daytime]won't[otherwise]wouldn't[end if] make a meaningful difference."
Instead of knocking on yourself: say "[We] [thump] on your chest. The sound [if it's Daytime]isn't[otherwise]won't be[end if] very impressive."

Instead of listening to yourself:
	if it's Daytime, say "All you hear is your breath.";
	otherwise say "Your breathing will be ragged and short."

Before searching yourself:
	if the laptop-computer is touchable and the laptop-computer is switched on and the laptop-computer is not protected and the controlling program of laptop-computer is InternetSEARCH:
		try typing "vanessa" on the laptop-computer instead.

Instead of searching yourself: try taking inventory.
Instead of smelling yourself: say "You're gonna need to shower first thing in the morning."
Instead of turning yourself: say "[nnt][We] [turn] on the spot."

Instead of tying something to yourself:
	if the noun is wearable, try wearing the noun;
	otherwise say "[nt]That seems unlikely to be a worthwhile course of action."

Instead of waking yourself: try waking up.

The player wears some sweatpants. Understand "sweat/sweats" or "pants" or "jogging/tracksuit bottoms" or "joggers" or "trackpants/trackies" or "trousers" as the sweatpants. The sweatpants are hangable. The bulk of the sweatpants is 0.
The description of the sweatpants is "Your favorite pair, blue and somehow softer than when you first got them."

Instead of remembering the sweatpants: say "[if it's Daytime]You're[otherwise]You'll still be[end if] wearing them."

The standard implicit taking rule does nothing when the noun is the sweatpants.

Instead of attacking or burning or cutting the sweatpants: say "[no time]You[if it's Nighttime][']ll[end if] have no reason to destroy your clothes."
Instead of assaulting the sweatpants with: try attacking the sweatpants.
Instead of crouching behind or entering underneath or lying behind or sitting behind or slipping behind the sweatpants: say "[no time]That would require taking the sweatpants off, which [if it's Daytime]you're not[otherwise]you doubt you'll be[end if] keen to do[if it's Nighttime] in the moment[end if]. Besides, they wouldn't be able to effectively conceal much."
Instead of crouching on or lying on or sitting on or standing up on or swinging or waving the sweatpants: say "[no time]That would require taking the sweatpants off, which [if it's Daytime]you're not[otherwise]you doubt you'll be[end if] keen to do[if it's Nighttime] in the moment[end if]."
Instead of drinking or eating or tasting or kissing or smelling the sweatpants: say "[nnt]You lack the flexibility to bend that far down."
Instead of emptying the sweatpants: try emptying the sweatpants-pockets.
Instead of entering the sweatpants: try wearing the sweatpants.
Instead of giving something to the sweatpants: try inserting the noun into the sweatpants.
Instead of inserting something into the sweatpants: try inserting the noun into the sweatpants-pockets.
Instead of knocking on the sweatpants: say "The sound [if it's Daytime]isn't[otherwise]won't be[end if] very impressive."
Instead of listening to the sweatpants: say "[no time]Sweatpants aren't known for making noise."
Instead of looking behind or looking under the sweatpants: say "[nnt][if it's Daytime]It's just[otherwise]It'll just be[end if] you underneath."
Instead of opening or closing the sweatpants: say "[no time]They don't really do that."

Instead of placing something under the sweatpants:
	if the player encloses the sweatpants:
		try inserting the noun into the sweatpants;
	otherwise:
		say "[nt]The sweatpants won't[if it's Nighttime] be able to[end if] effectively conceal much."

Instead of pulling or pushing or turning the sweatpants: say "[no time]Adjusting your pants [if it's Daytime]would[otherwise]will[end if] make little difference."
Instead of pushing the sweatpants to: try pushing the sweatpants.
Instead of putting something on the sweatpants: try inserting the noun into the sweatpants.
Instead of removing the sweatpants from: try taking the sweatpants.
Instead of removing something from the sweatpants: try taking the noun.
Instead of rubbing or touching or squeezing the sweatpants: say "Your softest pair."
Instead of searching the sweatpants: try searching the sweatpants-pockets.
Instead of showing something to the sweatpants: try inserting the noun into the sweatpants.
Instead of stowing something behind the sweatpants: try placing the noun under the sweatpants.

Instead of taking off the sweatpants:
	if it's Daytime, say "You're not about to sleep naked in an unfamiliar apartment.";
	otherwise say "You doubt you'd be eager to make yourself even [i]more[/i] vulnerable, under the circumstances.";
	take no time.

Instead of throwing the sweatpants at something: say "[no time]That would require taking the sweatpants off, which [if it's Daytime]you're not[otherwise]you doubt you'll be[end if] keen to do[if it's Nighttime] in the moment[end if]."
Instead of washing the sweatpants: say "[no time]That would require taking the sweatpants off, which [if it's Daytime]you're not[otherwise]you doubt you'll be[end if] keen to do[if it's Nighttime] in the moment[end if][if it's Daytime]. They smell fine enough to sleep in[end if]."

Some sweatpants-pockets are a pocket. They are part of the sweatpants. The printed name of the sweatpants-pockets is "sweatpants pockets". Understand "pocket/pockets" as the sweatpants-pockets.

After starting the virtual machine (this is the redirect from their pockets to the sweatpants rule):
	dispatch everything but { examining action, consulting it about action, emptying action, entering action, giving it to action, looking behind action, looking under action, searching action, inserting it into action, opening action, closing action, placing it under action, pulling action, pushing action, turning action, pushing it to action, putting it on action, removing it from action, showing it to action, stowing it behind action, taking action, throwing it at action, remembering action } for the sweatpants-pockets to the sweatpants;
	
Report an actor inserting something into the sweatpants-pockets (this is the custom report inserting into the sweatpants pockets rule):
	if the actor is the player and the action is not silent:
		say "[We] [put] [the noun] in your pocket." (A) instead.

The custom report inserting into the sweatpants pockets rule is listed after the concise report inserting rule in the report inserting it into rules.

The player wears the undershirt. Understand "tanktop" or "tank" or "top" or "beater/wifebeater" or "shirt" as the undershirt. The undershirt is hangable. The bulk of the undershirt is 0.
The description of the undershirt is "Low thread count white cloth, sold by some generic brand."

Instead of remembering the undershirt: say "[if it's Daytime]You're[otherwise]You'll still be[end if] wearing it."

The standard implicit taking rule does nothing when the noun is the undershirt.

Instead of attacking or burning or cutting the undershirt: say "[no time]You[if it's Nighttime][']ll[end if] have no reason to destroy your clothes."
Instead of assaulting the undershirt with: try attacking the undershirt.
Instead of crouching behind or entering underneath or lying behind or sitting behind or slipping behind the undershirt: say "[no time]That would require taking your undershirt off, which [if it's Daytime]you're not[otherwise]you doubt you'll be[end if] keen to do[if it's Nighttime] in the moment[end if]. Besides, it wouldn't be able to effectively conceal much."
Instead of crouching on or lying on or sitting on or standing up on or swinging or waving the undershirt: say "[no time]That would require taking your undershirt off, which [if it's Daytime]you're not[otherwise]you doubt you'll be[end if] keen to do[if it's Nighttime] in the moment[end if]."
Instead of drinking or eating or tasting or kissing the undershirt: say "[nnt]You don't make a habit of licking your clothes."
Instead of entering the undershirt: try wearing the undershirt.
Instead of knocking on the undershirt: try knocking on yourself.
Instead of listening to the undershirt: say "[no time]Undershirts aren't known for making noise."
Instead of looking behind or looking under or searching the undershirt: say "[nnt][if it's Daytime]It's just[otherwise]It'll just be[end if] you underneath."
Instead of opening or closing the undershirt: say "[no time]It doesn't really do that."
Instead of placing something under the undershirt: say "[no time]The undershirt won't[if it's Nighttime] be able to[end if] effectively conceal much."
Instead of pulling or pushing or turning the undershirt: say "[no time]Adjusting your shirt [if it's Daytime]would[otherwise]will[end if] make little difference."
Instead of pushing the undershirt to: try pushing the undershirt.
Instead of removing the undershirt from: try taking the undershirt.
Instead of rubbing or touching or squeezing the undershirt: say "Cheap cotton-slash-polyester."
Instead of smelling the undershirt: say "Not the freshest, but not excessively offensive either."
Instead of stowing something behind the undershirt: try placing the noun under the undershirt.

Instead of taking off the undershirt:
	if it's Daytime, say "You're not about to sleep naked in an unfamiliar apartment.";
	otherwise say "You doubt you'd be eager to make yourself even [i]more[/i] vulnerable, under the circumstances.";
	take no time.

Instead of throwing the undershirt at something: say "[no time]That would require taking your undershirt off, which [if it's Daytime]you're not[otherwise]you doubt you'll be[end if] keen to do[if it's Nighttime] in the moment[end if]."
Instead of washing the undershirt: say "[no time]That would require taking yout undershirt off, which [if it's Daytime]you're not[otherwise]you doubt you'll be[end if] keen to do[if it's Nighttime] in the moment[end if][if it's Daytime]. It smells fine enough to sleep in[end if]."

Understand "my" or "mine" as a thing when the item described is enclosed by the player.
Understand "here" as a room when the item described is the location.
[NOTE: Both of these are from Helpful Functions by Daniel Stelzer.]

Book 2 - Offstage characters & Subjects

The green room is a room. Index map with green room mapped west of Main-Behind-Shelf.
[NOTE: This is a place to keep offstage people. It allows them to have a location that can be reached into for calling and texting, rather than being entirely offstage where they're inaccessible to the player.]
After deciding the scope of the player while consulting about: place the contents of the green room in scope.
Rule for reaching inside the green room: allow access.

Chapter 1 - Arthur Brookwood

Arthur Brookwood is a man in the green room. The printed name of Arthur Brookwood is "Mr. Brookwood". Understand "Mr Brookwood" or "Mr Arthur" or "Mr Arthur Brookwood" or "shady/mob/mafia/-- contact" as Arthur Brookwood. Arthur Brookwood is seen.
Instead of ruminating about Arthur Brookwood: say "Brookwood isn't family, technically, but he might as well be. He's been your handler for as long as you can remember, and always had your best interests in mind. He can be scary, but he'd never hurt you. In fact, he's paid very well to go to just about any lengths possible to [i]keep[/i] you from getting hurt."

Instead of examining or remembering Arthur Brookwood: try ruminating about Arthur Brookwood.

Instead of consulting Arthur Brookwood about:
	if the player carries the unlocked smartphone or the unlocked laptop-computer is in the location:
		try texting Arthur Brookwood;
	otherwise:
		say "[nt][Brookwood] [aren't] [if it's Nighttime]t[end if]here."

Instead of giving something to Arthur Brookwood: follow the Arthur isn't here rule.
Instead of kissing or hugging Arthur Brookwood: say "[no time]Arthur [regarding Arthur Brookwood][are] four thousand miles away[if its Daytime] right now[otherwise], even so far into the night[end if]. Besides, you don't feel that way about him."
Instead of searching Arthur Brookwood: follow the Arthur isn't here rule.
Instead of showing something to Arthur Brookwood: follow the Arthur isn't here rule.
Instead of telling Arthur Brookwood about something: follow the Arthur isn't here rule.

This is the Arthur isn't here rule:
	take no time;
	say "Brookwood [regarding Arthur Brookwood][are] four thousand miles away[if its Daytime] right now[otherwise], even so far into the night[end if]."

Chapter 2 - Camille Harmon

Camille Harmon is a woman in the green room. The printed name of Camille Harmon is "Camille". Understand "Mrs/Ms/Miss Harmon" or "Mrs/Ms/Miss Camille Harmon" or "realtor/landlord/landlady" as Camille Harmon. Camille Harmon is seen.
Instead of ruminating about Camille Harmon: say "Camille Harmon is a tiny, no-nonsense kind of woman who speaks quickly and with little inflection.

She's either the landlord of this building or the realtor who got you the unit[unicode 8212]you're not exactly sure, since the first time you dealt directly with her yourself was [if it's Daytime]earlier today[otherwise]yesterday[end if]. You[first time] suppose you[only][']ll find out on the first of the month."

Instead of examining or remembering Camille Harmon: try ruminating about Camille Harmon.

Instead of consulting Camille Harmon about:
	if the player carries the unlocked smartphone or the unlocked laptop-computer is in the location:
		try texting Camille Harmon;
	otherwise:
		say "[nt][Camille] [aren't] [if it's Nighttime]t[end if]here."

Instead of giving something to Camille Harmon: follow the Camille isn't here rule.
Instead of kissing or hugging Camille Harmon: say "[no time][Camille] [aren't] [if it's Nighttime]t[end if]here. Besides, that would be inappropriate."
Instead of searching Camille Harmon: follow the Camille isn't here rule.
Instead of showing something to Camille Harmon: follow the Camille isn't here rule.
Instead of telling Camille Harmon about something: follow the Camille isn't here rule.

This is the Camille isn't here rule:
	take no time;
	say "[Camille] [aren't] [if it's Nighttime]t[end if]here. You think you've bothered her enough for one day, regardless."

Chapter 3 - Family

Section 1 - In general

A person can be familial. A person is seldom familial.

Family is a familial person in the green room. The printed name of family is "your family". Understand "my family" or "sib/sibling/siblings" or "cousin/cousins" or "aunt/aunts/uncle/uncles" or "grandmother/grandfather/grandmothers/grandfathers" or "nephew/nephews/niece/nieces" or "parent/parents" as family. Family is seen.
Instead of ruminating about family: say "It's your father's fault, you know. This whole situation could have been avoided if he'd been a little more scrupulous about his business partners.

You can handle yourself, but you're worried about your younger siblings, scattered to the winds. You weren't told where they'd been sent. Gabriella's never been very responsible, and Leo's barely out of college."

Instead of examining or remembering a familial person: try ruminating about the noun.
Instead of consulting a familial person about: follow the can't contact family rule.
Instead of giving something to a familial person: follow the can't contact family rule.
Instead of kissing or searching or hugging a familial person: follow the can't contact family rule.
Instead of showing something to a familial person: follow the can't contact family rule.
Instead of telling a familial person about something: follow the can't contact family rule.

This is the can't contact family rule:
	take no time;
	say "You are under strict instructions not to contact any member of your family until they next contact you."

Section 2 - Individual members

Nicolau Lucenti is a familial man in the green room. The printed name of Nicolau Lucenti is "your father". Understand "my/your father/dad/daddy/papa/poppa" or "dad/father/daddy/papa/poppa" as Nicolau Lucenti. Nicolau Lucenti is seen.
Instead of ruminating about Nicolau Lucenti:
	say "Your father, Nicolau Lucenti, isn't particularly scrupulous at the best of times. He thinks of himself as an embarrassed kingpin, but he's always been small-time. This frequently makes him much more reckless in his dealings than he can really afford to be[unicode 8212]despite your mother's universally sage council[unicode 8212]and this time it's come back to bite all of you.

	You didn't get much notice that your life was about to change when his latest deal went bad. It's been less than a month, even though the paranoia and isolation have made it feel much longer."

Bianca Lucenti is a familial woman in the green room. The printed name of Bianca Lucenti is "your mother". Understand "my/your mom/mother/mommy/mama/momma" or "mom/mother/mommy/mama/momma" as Bianca Lucenti. Bianca Lucenti is seen.
Instead of ruminating about Bianca Lucenti:
	say "Saint that she is, Bianca Lucenti has stuck by her husband long past the point a reasonable person would have filed for divorce. It was her that organized this family scattering, as your father scrambled to cover his assets.

	She was the one to stay back in New York and guard the family home. The only person better to do it would be Brookwood, but you can't help worrying for her. If anyone harms her, you'll kill your father yourself."

Leonardo Lucenti is a familial man in the green room. The printed name of Leonardo Lucenti is "Leo". Understand "Leo" or "brother/bro" as Leonardo Lucenti. Leonardo Lucenti is seen.
Instead of ruminating about Leonardo Lucenti:
	say "Little Leo, your father's third child and finally a son.

	He's always hated how much your parents doted on him. You think he finds it emasculating. You wonder how he's feeling now, truly alone in the great wide world for the first time."

Gabriella Lucenti is a familial woman in the green room. The printed name of Gabriella Lucenti is "Gabriella". Understand "Gabby" or "sister/sis" as Gabriella Lucenti. Gabriella Lucenti is seen.
Instead of ruminating about Gabriella Lucenti:
	say "Gabby, your younger sister, has always been the troublemaker. Railing against the inborn urge of middle siblings to keep the peace, she instead has always sought out as much conflict as possible.
	
	You hope she has the good sense to lay low and not cause any trouble in the near future. You've all had quite enough of that recently, and looking for any more could prove legitimately dangerous."

Chapter 4 - Officer Raphael

Officer Raphael is a woman in the green room. Understand "police" or "cop/cops" or "5-0" or "pig/pigs" as Officer Raphael. Understand "woman" as Officer Raphael when Police En Route is happening. Officer Raphael is seen.
The description of Officer Raphael is "She'll be a hard-faced woman built like a brick shithouse."
Instead of ruminating about Officer Raphael:
	if Police En Route is happening:
		say "They won't be here yet[unicode 8212]you'll need to hold out a little longer.";
	otherwise if it's Daytime:
		say "There are no police around, thank goodness. You don't want to risk any suspicion, or even attention.";
	otherwise:
		say "There will be no police around. Maybe you could contact them somehow?"
		
Instead of attacking or burning or cutting or shooting or knocking on Officer Raphael: say "[no time]You think that would constitute assaulting a police officer, and you doubt you'd be eager to find yourself on the LAPD's bad side."
Instead of assaulting Officer Raphael with: try attacking Officer Raphael.

Instead of calling Officer Raphael:
	if Officer Raphael is not in the green room:
		say "[nt]A police officer will have already arrived.";
	otherwise if 911-texted is true:
		say "[nt]You will have already contacted the police.";
	otherwise:
		try dialing 911.

Instead of consulting Officer Raphael about: follow the no undue attention rule.
Instead of tasting or kissing or pulling or pushing or turning Officer Raphael: say "[no time]You think that would constitute assaulting a police officer, and you doubt you'd be eager to get on her bad side."
Instead of giving something to Officer Raphael: follow the no undue attention rule.
Instead of listening to Officer Raphael: say "[no time]It will likely be better to just stay out of her way."
Instead of pushing Officer Raphael to: try pushing Officer Raphael.
Instead of removing something from Officer Raphael: follow the no accosting the police rule.
Instead of rubbing or touching or squeezing or searching or smelling Officer Raphael: follow the no accosting the police rule.
Instead of showing something to Officer Raphael: follow the no undue attention rule.
Instead of taking something enclosed by Officer Raphael: follow the no accosting the police rule.
Instead of telling Officer Raphael about something: follow the no undue attention rule.

Instead of texting Officer Raphael:
	if Officer Raphael is not in the green room:
		say "[nt]A police officer will have already arrived.";
	otherwise if 911-texted is true:
		say "[nt]You will have already contacted the police.";
	otherwise:
		try IMing 911.

Instead of throwing something at Officer Raphael: follow the no assaulting the police rule.
Instead of tying Officer Raphael to: try tying the second noun to Officer Raphael.
Instead of tying something to Officer Raphael: follow the no assaulting the police rule.

This is the no accosting the police rule:
	take no time;
	say "You think that would constitute accosting a police officer, and you doubt you'd be eager to get on her bad side."

This is the no assaulting the police rule:
	take no time;
	say "You think that would constitute assaulting a police officer, and you doubt you'd be eager to get on her bad side."

This is the no undue attention rule:
	take no time;
	say "It will likely be better to not distract her from her job (or draw undue attention to yourself)."
	
Report Officer Raphael going a direction (called the way) (this is the extended report the police going rule):
	if the room gone to is the location:
		say "[A-The police officer] [one of]will stride [into your area][or]will approach[or]will charge [into your area][as decreasingly likely outcomes] from [the opposite of the way]." (A) instead;
	otherwise if the room gone from is the location:
		say "[A-The police officer] [one of]will head[or]will stride[or]will charge[or]will go[at random] [way], [prepositional entrance descriptor of the location of Officer Raphael]." (B) instead;
	otherwise:
		if the room gone from is connected with the location:
			if the room gone to is connected with the location:
				say "[A-The police officer] [one of]will head[or]will stride[or]will charge[or]will go[at random] [way], [prepositional exit descriptor of the room gone from] [prepositional entrance descriptor of the location of Officer Raphael]." (C) instead;
			otherwise:
				say "[A-The police officer] [one of]will head[or]will stride[or]will charge[or]will go[at random] [way], disappearing from view." (D) instead;
		otherwise if the room gone to is connected with the location:
			if the room gone to is Main-By-Counter:
				say "[A-The police officer] [one of]will [sudden-descriptor]appear[or]will [sudden-descriptor]charge[or]will [sudden-descriptor]stride[at random] [in-by officer locale descriptor] from [the opposite of way]." (E) instead;
			otherwise:
				say "[A-The police officer] [one of]will [sudden-descriptor]appear[or]will [sudden-descriptor]charge[or]will [sudden-descriptor]stride[or]will [sudden-descriptor]arrive[at random] [in-by officer locale descriptor] from [the opposite of way]." (F) instead;
		otherwise if player-listening is false:
			say "[We] [hear][noise-mod] [if Officer Raphael is seen]the police officer[otherwise]someone[end if] moving around [vague officer direction]." (G) instead.
		
To say A-The police officer: say "[one of]A[or]The[stopping] police officer".

To say in-by officer locale descriptor:
	if the location of Officer Raphael is either Main-Behind-Shelf or Main-By-Counter:
		say "by [nobr]";
	otherwise:
		say "in [nobr]";
	say the casual descriptor of the location of Officer Raphael.
	
To say vague officer direction:
	let loc be the location of Officer Raphael;
	if loc is the location:
		say "nearby";
	otherwise:
		choose a row with an other place of loc in the relative direction set of the location;
		say "[descriptor entry]".

Chapter 5 - Subjects

A subject is a kind of thing. The bulk of a subject is usually 0.

When play begins:
	repeat with idea running through subjects:
		now idea is in green room.
		
Business partners is a subject. Understand "father's/fathers/dad's/dads/nicolau's/nicolaus/-- business/-- partner/partners" as business partners.
Instead of doing something other than ruminating about with business partners: try ruminating about business partners.
Instead of ruminating about business partners:
	say "You've never met any of your father's business partners in person[unicode 8212]he has at least [i]that[/i] much sense[unicode 8212]but you have a general idea of what kind of man they tend to be: violent, amoral, and powerful."
	
Childhood is a subject. Understand "child" or "past" or "growing up" as childhood.
Instead of doing something other than ruminating about with childhood: try ruminating about childhood.
Instead of ruminating about childhood:
	say "If only you knew as it was happening how charmed your childhood was. You never wanted for anything but attention."
	
City is a subject. Understand "here" or "new city/place" or "la" or "los angeles" or "san francisco/diego/jose" or "sacramento" or "fresno" or "palm springs" or "california/cali" as city.
Instead of doing something other than ruminating about with city: try ruminating about city.
Instead of ruminating about city:
	say "You never thought you'd be a West Coast girl. In your heart, you know you never truly will be. You already hate it here[unicode 8212]the air feels gritty and it's too hot."
	
First name is a subject. Understand "my/-- new first name" or "my first/-- name" or "my/-- new name" as first name.
Instead of doing something other than ruminating about with first name: try ruminating about first name.
Instead of ruminating about first name:
	if name-known is false:
		say "For the life of you, you can't remember it. You know it's on the documents stored in the wall safe.";
	otherwise:
		say "The name you'll be going by for the foreseeable future is 'Vanessa DeCesare.' Better to only think of that one, until it becomes automatic."
		
Flight is a subject. Understand "plane/airplane" or "travel" or "flying" or "747" or "turbulence" or "trip" as flight.
Instead of doing something other than ruminating about with flight: try ruminating about flight.
Instead of ruminating about flight:
	say "The flight was characteristically terrible. Turbulence the whole way."

New-apartment is a subject. Understand "flat/apartment/unit" as new-apartment. The printed name of new-apartment is "apartment".
Instead of doing something other than ruminating about with new-apartment: try ruminating about new-apartment.
Instead of ruminating about new-apartment:
	say "You never envisioned yourself living in a place so small. Even your apartment in New York, when you moved out, was bigger than this one."

New York is a subject. Understand "new york city" or "nyc" or "home" as New York.
Instead of doing something other than ruminating about with New York: try ruminating about New York.
Instead of ruminating about New York:
	say "New York City, your home for your entire life, stinking and crowded and beautiful. Given the choice, you never would have traded it for anywhere else."

Book 3 - Scenes

Part 1 - Daytime

When play begins (this is the prologue rule):
	say Imagination, of course, can open any door[unicode 8212]turn the key and let terror walk right in.;
	say "- Truman Capote, [i]In Cold Blood[/i]";
	wait for any key;
	clear only the main screen;
	follow the reveal the status line rule;
	say "It's been a whirlwind few days, but you're finally just about settled in. New place, new city, no one here yet for you to lean on.
	
	You're absolutely exhausted. You've spent all day getting things set up, running errands, and stressing out. You were [i]supposed[/i] to have help, but some no-name 747 decided it had something to say about that, so you've had to go it alone.
	
	The sun sits low on the horizon as you look around your new apartment, cataloging tasks you've missed."

Daytime is a scene. Daytime begins when play begins. Daytime ends when the player is on the bed.

Check sleeping during Daytime (this is the beds only rule):
	unless the location is Main-Bed:
		if Final Sweep is happening:
			say "You can't go to bed quite yet. [nobr]" (A);
			follow the list items to finish sweeping rule instead;
		otherwise:
			say "You're not about to go to sleep anywhere other than your bed." (B) instead;
	otherwise:
		try entering the bed instead.
		
The beds only rule is listed before the block sleeping rule in the check sleeping rules.

Instead of entering the bed during Daytime (this is the going to sleep scene machinery rule):
	say "Are you sure you're ready to sleep? > [run paragraph on]";
	if the player consents:
		say line break;
		say "You flop down onto the bed, then worm your way under the covers. Before you have time to realize you're falling asleep, you're out cold.
		
		[bracket]PRESS ANY KEY TO CONTINUE[close bracket]";
		wait for any key;
		move the player to the bed, without printing a room description;
	otherwise:
		say line break;
		say "Do whatever you need to do. You can feel yourself fading.";
		reject the player's command.
		
Instead of jumping during Daytime: say "You're too tired to be doing all that."
		
Rule for printing the banner text during Daytime (this is the delay the title card rule): do nothing.

When Daytime ends (this is the set default locations for the rest of the game rule):
	repeat with obj running through things:
		now the default location of obj is the holder of obj.
		
Chapter 1 - Tutorial

Section 1 - Mechanical phrases
[NOTE: Much of the code surrounding tutorial goals is adapted from Achievements by Juhana Leinonen]

This is the check for completed tutorial goals rule:
	if it's Daytime:
		repeat through the Table of Tutorial Goals:
			if (there is no achieved entry or the achieved entry is false) and there is a validation entry:
				follow the validation entry;
				if rule succeeded:
					complete the goal entry goal.
					
A scene can be tutorialish. A scene is seldom tutorialish.

This is the dispense tutorials rule: if a tutorialish scene is happening, follow the tutorial dispensement rules.

The check for completed tutorial goals rule is listed after the advance time rule in the turn sequence rules.
The dispense tutorials rule is listed after the check for completed tutorial goals rule in the turn sequence rules.

To complete the/-- (name - text) goal:
	if there is a goal of name in the Table of Tutorial Goals:
		choose the row with goal of name in the Table of Tutorial Goals;
		if there is no achieved entry or the achieved entry is false:
			now the achieved entry is true.

To decide whether the/-- (name - text) goal is achieved:
	if there is a goal of name in the Table of Tutorial Goals:
		choose the row with goal of name in the Table of Tutorial Goals;
		if the achieved entry is true:
			decide yes;
	decide no.
	
To decide whether the/-- (name - text) goal is not achieved:
	if the name goal is achieved:
		decide no;
	decide yes.
	
To decide which number is the count of achieved goals:
	let N be 0;
	repeat with X running from 1 to the number of rows in the Table of Tutorial Goals:
		choose row X in the Table of Tutorial Goals;
		if the achieved entry is true:
			increment N;
	decide on N.

The tutorial dispensement rules are a rulebook.

Section 2 - Step one is unloading the dishwasher

[STEP ONE: Unload dishwasher
- rules to limit leaving while carrying dishes
- silverware drawer?]

Dishwasher-Finished is a tutorialish scene. Dishwasher-Finished begins when the time of day is 9:01 AM. Dishwasher-Finished ends when the dishwasher is open.

Table of Tutorial Goals
goal	validation	achieved
"Dishwasher empty"	dishwasher emptied rule	false
"Knives stowed"	knives stowed rule	false
"Dishes stowed"	dishes stowed rule	false
"Silverware stowed"	silverware stowed rule	false

This is the dishwasher emptied rule: if the number of knives in the dishwasher is 0 and the number of dishes in the dishwasher is 0 and the number of silverware in the dishwasher is 0, rule succeeds.
This is the knives stowed rule: if the number of things in the knifeblock is 3, rule succeeds.
This is the dishes stowed rule: if the plates are in the kitchen-cabinets and the bowls are in the kitchen-cabinets and the cups are in the kitchen-cabinets, rule succeeds.
This is the silverware stowed rule: if the forks are in the silverware-holder and the spoons are in the silverware-holder and the butter-knives are in the silverware-holder, rule succeeds.

When Dishwasher-Finished begins (this is the alert the player that the dishwasher is finished rule):
	say "A loud beeping noise begins abruptly from the direction of the kitchenette. Adrenaline briefly surges through your body, before you realize that it's just the dishwasher finishing its cycle.

	You've honestly had enough for one day. You think you ought to finish up your chores and just go to bed. Might as well start by unloading the dishwasher." (A).

Instead of opening or switching on or taking the laptop-computer during Dishwasher-Finished (this is the dishwasher takes tutorial priority rule):
	say "You should probably deal with the dishwasher first." (A).
	
Instead of nounless ruminating during Dishwasher-Finished:
	take no time;
	say "[one of]The dishwasher is unlikely to stop beeping until you deal with it[or]The dishwasher needs unloading[or]Your next task is to unload the dishwasher[stopping]."

Putting Dishes Away is a tutorialish scene. Putting Dishes Away begins when Dishwasher-Finished ends. Putting Dishes Away ends when dishes-all-stowed is true.

Dishwasher-beep is a number that varies. Dishwasher-beep is 0.
Dishes-all-stowed is a truth state that varies. Dishes-all-stowed is false.

The first tutorial dispensement rule (this is the cue opening the dishwasher rule):
	if Dishwasher-Finished is happening:
		increment dishwasher-beep;
		if dishwasher-beep is 4:
			say "The dishwasher beeps at you again to remind you that it's finished. [one of](Who designs a dishwasher to keep beeping until it's opened?)[br][or][br][stopping]" (A);
			now dishwasher-beep is 0;
		rule fails;
	otherwise:
		make no decision.
		
empty-dispensement is a truth state that varies. empty-dispensement is false.

A tutorial dispensement rule (this is the cue emptying the dishwasher rule):
	if the "Dishwasher empty" goal is achieved or empty-dispensement is true:
		make no decision;
	otherwise:
		say "Now that you've opened the dishwasher, you can EMPTY it of its dishes." (A);
		now empty-dispensement is true;
		rule fails.
		
stowing-cued is a truth state that varies. stowing-cued is false.

Check inserting silverware into the kitchen-cabinets (this is the redirect stowing silverware rule):
	if the "Silverware stowed" goal is not achieved:
		try inserting the noun into the silverware-holder instead.
	
A tutorial dispensement rule (this is the cue stowing the dishes rule):
	if the "Knives stowed" goal is achieved and the "Dishes stowed" goal is achieved and the "Silverware stowed" goal is achieved:
		now dishes-all-stowed is true;
	otherwise if the number of things in the dishwasher is 1 and stowing-cued is false:
		say "You decided earlier where all these things would be stored. The sharp knives go in the knife block. The dishes go in the cabinets. The silverware goes in the silverware holder, which is itself in the cabinets." (A);
		now stowing-cued is true;
		rule fails;
	make no decision.
		
The cue stowing the dishes rule is listed after the the cue emptying the dishwasher rule in the tutorial dispensement rules.

Check going from Kitchenette (this is the don't carry knives around for no reason rule):
	if it's Daytime:
		if the player encloses a knife:
			if the number of knives enclosed by the player is 3:
				let K be the list of knives enclosed by the player;
				let blade be a random knife enclosed by the player;
				remove blade from K;
				say "You have no reason to carry [the blade] around the apartment with you[unicode 8212]or, for that matter, the [entry 1 of K] or the [entry 2 of K]. Better to put them in the knife block before moving on." (A) instead;
			otherwise if the number of knives enclosed by the player is 2:
				let K be the list of knives enclosed by the player;
				say "You have no reason to carry either the [entry 1 of K] or the [entry 2 of K] around the apartment with you. Better to put them in the knife block before moving on." (B) instead;
			otherwise:
				let blade be a random knife enclosed by the player;
				say "You have no reason to carry [the blade] around the apartment with you. Better to put it in the knife block before moving on." (C) instead.
				
Check taking a knife (this is the don't cheat by picking up knives outside of the kitchenette rule):
	if it's Daytime and the location is not Kitchenette:
		say "You have no reason to carry [the noun] around the apartment with you. Better to leave it where it is for now." (A) instead.
				
Instead of inserting a knife into the kitchen-cabinets: say "[The noun] would probably be better stored in the knife block."

Check going from Kitchenette (this is the don't leave without unloading the dishwasher rule):
	unless the "Dishwasher empty" goal is achieved:
		say "[nt]Now that you're in the kitchen, you should finish unloading the dishwasher before you forget." (A) instead;
	otherwise unless Putting Dishes Away has ended:
		say "[nt]Now that you've started unloading the dishwasher, you shouldn't leave without finishing the job." (B) instead.
		
Check switching on the dishwasher-switch (this is the no double washing rule):
	if the "Dishwasher empty" goal is not achieved:
		say "Its cycle only just finished[unicode 8212]you see no need to wash the same dishes twice." (A) instead;
	otherwise if Putting Dishes Away has not ended:
		say "[nt]The dishwasher's cycle only just finished. There's no need to run it again right now." (B) instead.
		
Check dropping (this is the don't drop silverware on the floor rule):
	if the noun is silverware or the noun is a dish:
		if Putting Dishes Away has not ended:
			say "The dishwasher's cycle only just finished. You see no need to get [the noun] dirty all over again." (A) instead;
		otherwise if it's Daytime:
			say "You haven't even had a chance to really use [the noun] yet. You see no reason to get [them] all dirty on the floor." (B) instead.
			
Instead of nounless ruminating during Dishwasher-Finished:
	take no time;
	if the "Dishwasher empty" goal is not achieved:
		say "Now that you've opened the dishwasher, you can EMPTY it of its dishes.";
	otherwise:
		say "[first time]Now that you've emptied the dishwasher, you need to put everything away. [only][nobr]";
		unless the "Knives stowed" goal is achieved:
			say "The sharp knives go in the knife block. [nobr]";
		unless the "Dishes stowed" goal is achieved:
			say "The dishes go in the cabinets. [nobr]";
		unless the "Silverware stowed" goal is achieved:
			say "The silverware goes in the silverware holder, which is itself in the cabinets. [nobr]";
		say "Once [if the count of achieved goals < 3]all [end if]that's done, you can move on to other tasks."

Section 3 - Step two is checking email

[STEP TWO: Check email
- If look on phone, say it's only on computer
- Have to check documents in safe for new name
- Remember afterwards no wifi
- Put documents back in safe, painting back on wall]

Checking Email Part A is a tutorialish scene. Checking Email Part A begins when Putting Dishes Away ends. 
Checking Email Part A ends ignorantly when the "Laptop on" goal is achieved and the important documents are not examined.
Checking Email Part A ends knowledgably when the "Laptop on" goal is achieved and the important documents are examined.

Table of Tutorial Goals (continued)
goal	validation	achieved
"Laptop on"	laptop opened rule	false
"Painting removed"	painting removed rule	false
"Painting dropped"	painting floored rule	false
"Safe opened"	safe cracked rule	false
"Safe closed"	safe resecured rule	false

This is the laptop opened rule: if the laptop-computer is switched on, rule succeeds.
This is the painting removed rule: if the painting is not hung-up, rule succeeds.
This is the painting floored rule: if the player does not enclose the painting and the painting is not hung-up, rule succeeds.
This is the safe cracked rule: if the safe is open, rule succeeds.
This is the safe resecured rule: if name-known is true and the safe is closed and the painting is hung-up, rule succeeds.

This is the bypass safe tutorial rule:
	choose row with a goal of "Painting removed" in the Table of Tutorial Goals;
	now the achieved entry is true;
	choose row with a goal of "Painting dropped" in the Table of Tutorial Goals;
	now the achieved entry is true;
	choose row with a goal of "Safe opened" in the Table of Tutorial Goals;
	now the achieved entry is true;
	choose row with a goal of "Safe closed" in the Table of Tutorial Goals;
	now the achieved entry is true;
	now the important documents are examined.

name-known is a truth state that varies. name-known is false.
Carry out reading the important documents: now name-known is true.

When Checking Email Part A begins (this is the cue checking email rule):
	now PS-leaving is PS-allowed;
	say "Now that that's done, you want to check your email, in case there's an update for you from Brookwood or (slim chance, but not impossible) your family. You left your laptop in the office area.

	[i][bracket]You can use REMEMBER to think about people who aren't present.[close bracket][/i][br]" (A).

After examining Login Window for the first time (this is the inform the player of the laptop password rule):
	say "You remember Brookwood telling you that the password would be your new first name[if name-known is true]: Vanessa[else]... which you can't currently remember. It'll be on the important documents in the wall safe, which you hid behind a painting[end if]." (A).
	
Instead of nounless ruminating  during Checking Email Part A:
	say "[no time]You want to check your email, in case there have been any updates. You left your laptop in the office area."

Seeking The Safe is a tutorialish scene. Seeking The Safe begins when Checking Email Part A ends ignorantly. Seeking The Safe ends when the important documents are examined and the safe is closed.

Carry out reading the important documents: now the important documents are examined.

Before remembering the painting (this is the update the remembered location of the painting to be useful rule):
	if the remembered location of the painting is the nail:
		now the remembered location of the painting is Main-Sitting;
	continue the action.

Report remembering the painting during Daytime (this is the customized remember the useful location of the painting rule):
	if the painting is in-place:
		if Main-Sitting is not visited:
			say "[as the parser]The last time [we] [saw] the [painting] was when [we] hung it up in the sitting area.[as normal][line break]" (A);
		otherwise:
			say "[as the parser]The last time [we] [saw] the [painting], it was right where [we] hung it up in the sitting area.[as normal][line break]" (B);
		stop the action;
	otherwise:
		continue the action.
		
The customized remember the useful location of the painting rule is listed first in the report remembering rules.

Before doing something (this is the painting is cumbersome rule):
	unless the current action is painting-involved behavior or the current action is sensory behavior or the current action is verbal behavior:
		if the player carries the painting, say "[It's] hard to do much of anything while carrying the large painting[unicode 8212][if it's Daytime]it takes[otherwise]you remember it taking[end if] up both hands and most of your field of vision. You'll need to drop it or put it on something first." (A) instead.
	
Taking the painting is painting-involved behavior. Dropping the painting is painting-involved behavior. Putting the painting on something is painting-involved behavior. Examining the painting is painting-involved behavior. Searching the painting is painting-invovled behavior. Inserting the painting into something is painting-involved behavior. Attacking the painting is painting-involved behavior. Burning the painting is painting-involved behavior. Cutting the painting is painting-involved behavior. Assaulting the painting with something is painting-involved behavior. Touching the painting is painting-involved behavior. Rubbing the painting is painting-involved behavior. Squeezing the painting is painting-involved behavior. Placing the painting under something is painting-involved behavior. Stowing the painting behind something is painting-involved behavior.
Examining the canvas is painting-involved behavior. Searching the canvas is painting-invovled behavior. Attacking the canvas is painting-involved behavior. Burning the canvas is painting-involved behavior. Cutting the canvas is painting-involved behavior. Assaulting the canvas with something is painting-involved behavior. Touching the canvas is painting-involved behavior. Rubbing the canvas is painting-involved behavior. Squeezing the canvas is painting-involved behavior.
Examining the frame is painting-involved behavior. Searching the frame is painting-invovled behavior. Attacking the frame is painting-involved behavior. Burning the frame is painting-involved behavior. Cutting the frame is painting-involved behavior. Assaulting the frame with something is painting-involved behavior. Touching the frame is painting-involved behavior. Rubbing the frame is painting-involved behavior. Squeezing the frame is painting-involved behavior.

Listening to something is sensory behavior. Smelling something is sensory behavior. Tasting something is sensory behavior. Eating something is sensory behavior. Drinking something is sensory behavior. Kissing something is sensory behavior. Remembering something is sensory behavior. Waiting is sensory behavior. Crying is sensory behavior. Praying is sensory behavior. Screaming is sensory behavior. Singing is sensory behavior. Winning is sensory behavior. Losing is sensory behavior. Magicking is sensory behavior. Enchanting something is sensory behavior. Ruminating about something is sensory behavior. Nounless ruminating is sensory behavior. Listening is sensory behavior.

docs-revealed is a truth state that varies. docs-revealed is false.

First report opening the safe (this is the highlight the contents of the safe the first time its opened rule):
	if docs-revealed is false:
		now docs-revealed is true;
		say "You open the safe. Inside, right where you left them, are the important documents. Somewhere in them is your new name." (A) instead.
	
Last report reading the important documents for the first time (this is the highlight the important information from the documents rule):
	if Seeking The Safe is happening:
		say "There it is: 'Vanessa.' You should probably make a better effort to remember what is supposedly your own name, but that work like so many other things can wait for tommorow. For now, it will serve as a password." (A);
	otherwise:
		say "'Vanessa.' You should probably make a better effort to remember what is supposedly your own name, but that work like so many other things [if it's Daytime]can wait for tommorow[otherwise]will be better left for less extenuating circumstances[end if]." (B).
		
Instead of nounless ruminating during Seeking The Safe:
	take no time;
	if the "Painting removed" goal is not achieved:
		say "You remember Brookwood telling you that the password would be your new first name... which you can't currently remember. It'll be on the important documents in the wall safe, which you hid behind a painting.";
	otherwise if the "Safe opened" goal is not achieved:
		say "Now that you've revealed the safe, you'll need to unlock and open it. Brookwood told you the combination was four numbers long, and that those four number were your birth date: December 4th, 1994. You suspect you'll have to break the year into two numbers, since the dial only goes from 0 to 99. You can SPIN the dial TO each number.";
	otherwise if name-known is false:
		say "Now that you've opened the safe, you'll need to READ the important documents to remind yourself of your new name.";
	otherwise:
		say "You should restore the safe to its closed, locked, and hidden state before you leave the sitting area, lest you forget to do it later."

Checking Email Part B is a tutorialish scene. Checking Email Part B begins when Seeking The Safe ends. Checking Email Part B begins when Checking Email Part A ends knowledgably. Checking Email Part B ends when email-opened is true.

When Checking Email Part B begins:
	now eveningnum is 1;
	follow the first set the sun rule;

Check going from Main-Sitting (this is the don't leave the safe unsecured and unattended rule):
	if the "Safe opened" goal is achieved and the "Safe closed" goal is not achieved:
		say "[nt]You should restore the safe to its closed, locked, and hidden state before you leave, lest you forget to do it later." (A) instead.
		
When Checking Email Part B ends (this is the cue going to plug in the phone rule):
	say "Nothing new. In the moment, you [won't-yet-have] set up the wireless router.
	
	Oh, well. Just one more thing to take care of tomorrow. Might as well plug your phone in to charge and finish getting ready for bed. [nobr]" (A);
	if the phone charger is on the dresser:
		say "Last you saw your phone's charger, it was on the dresser." (B);
	otherwise:
		say "You prefer to have your phone plugged in near your bed, for easy access at a moment's notice." (C).
		
Instead of nounless ruminating during Checking Email Part B:
	take no time;
	if the laptop-computer is switched off or the laptop-computer is protected:
		say "Now that you know the password ('Vanessa'), you should unlock the laptop so you can check your email.";
	otherwise:
		say "Now that you've unlocked the laptop, you should check your email for updates."

Section 4 - Step three is retrieving phone

[STEP THREE: Phone falls under couch
- Check behind couch first
- Then check under couch
- Have to crawl under couch to reach it]

Table of Tutorial Goals (continued)
goal	validation	achieved
"Phone dropped"	phone still lost rule	false
"Furniture searched"	note searching for phone rule	false
"Got under furniture"	bravely ventured rule	false
"Phone retrieved"	phone retrieved rule	false

This is the phone still lost rule:
	if Phone Lost Ver A is happening or Phone Lost Ver B is happening:
		if the player does not enclose the smartphone, rule succeeds.
This is the note searching for phone rule:
	if the "Phone dropped" goal is achieved:
		if under#bed is examined or under#couch is examined, rule succeeds.
This is the bravely ventured rule:
	if the "Furniture searched" goal is achieved:
		if the player is in under#bed or the player is in under#couch, rule succeeds.
This is the phone retrieved rule: if the "Phone dropped" goal is achieved and the player encloses the smartphone, rule succeeds.

Instead of nounless ruminating during Phone Lost Ver A:
	say "[no time]You need to retrieve your phone. It slid under the couch."

Before going to Main-Sitting when Checking Email Part B has ended and Phone Lost Ver A has not happened and Phone Lost Ver B has not happened (this is the narrate losing your phone under the couch rule):
	say "As you walk through the sitting room area, your foot catches on the edge of the rug and you stumble. Your phone falls from your hand and slides underneath the couch.
	
	You sigh. You'd rather not get down on the floor. Maybe if you LOOK BEHIND the couch, you can find it without needing to." (A);
	continue the action.

Phone Lost Ver A is a tutorialish scene. Phone Lost Ver A begins when Checking Email Part B has ended and Phone Lost Ver B has not happened and the location is Main-Sitting. Phone Lost Ver A ends when the "Phone retrieved" goal is achieved.

When Phone Lost Ver A begins:
	now under#couch is closed;
	now the smartphone is in under#couch.
	
Instead of remembering the smartphone during Phone Lost Ver A (this is the remember that the phone went under the couch rule):
	if under#couch is closed:
		say "Your [smartphone] has slipped from your hand and slid under the couch." (A);
	otherwise:
		say "Your [smartphone] has slid right under the middle of the couch." (B).
	
Instead of going from Main-Sitting during Phone Lost Ver A (this is the don't abandon your phone ver a rule):
	say "[nt]You don't want to do anything else before retrieving your phone, lest someone try to contact you while it's inaccessible." (A).
	
Carry out looking behind the couch (this is the phone lost looking behind the couch rule):
	if Phone Lost Ver A is happening:
		now behind#couch is open;
		if the number of things in behind#couch is 0:
			say "[one of]Nope, the phone didn't slide quite this far back. Looks like you'll have to crouch down and LOOK UNDER the couch to find it[or]Looking again doesn't make your phone materialize. You're gonna have to LOOK UNDER the couch[stopping]." (A) instead;
		otherwise:
			say "[one of]Nope, the phone didn't slide quite this far back. Looks like you'll have to crouch down and LOOK UNDER the couch to find it[or]Looking again doesn't make your phone materialize. You're gonna have to LOOK UNDER the couch[stopping]." (B).
			
The phone lost looking behind the couch rule is listed before the customized clever looking behind rule in the carry out looking behind rules.
	
First carry out looking under the couch during Phone Lost Ver A (this is the find the phone under the couch rule):
	if the player is in under#couch:
		now under#couch is open;
		now under#couch is examined;
		say "You should be able to reach your phone now." (A) instead;
	otherwise if the number of locale-supportable things in under#couch is 1:
		now under#couch is open;
		now under#couch is examined;
		say "Your [smartphone] has slid right under the middle of the couch." (B) instead;
	otherwise:
		say "Your [smartphone] has slid right under the middle of the couch." (C).

Check taking the smartphone (this is the can't reach the phone under the couch rule):
	if Phone Lost Ver A is happening and the player is not in under#couch:
		if the "Furniture searched" goal is achieved:
			say "You [first time]stretch and strain, but [only]can't reach your phone from out here. As much as you hate to admit it, you'll need to GO UNDER the couch to retrieve it." (A) instead;
		otherwise:
			say "[nt]You're not about to pat around under there blindly. You should LOOK UNDER the couch first to determine where exactly your phone is." (B) instead.
			
Check exiting (this is the don't leave from under the couch without your phone rule):
	if Phone Lost Ver A is happening and the player is in under#couch and the player does not enclose the smartphone:
		say "[nt]You're not about to get under the couch for a [i]second[/i] time, if you can help it[unicode 8212]grab your phone before you leave." (A) instead.
		
Before going to Main-Bed when Checking Email Part B has ended and Phone Lost Ver A has not happened and Phone Lost Ver B has not happened (this is the narrate losing your phone under the bed rule):
	say "As you enter the bedroom area, your foot catches on the edge of the rug and you stumble. Your phone falls from your hand and slides underneath the bed.
	
	You sigh. You'll have to crouch down and LOOK UNDER the bed to find it." (A);
	continue the action.
	
Phone Lost Ver B is a tutorialish scene. Phone Lost Ver B begins when Checking Email Part B has ended and Phone Lost Ver A has not happened and the location is Main-Bed. Phone Lost Ver B ends when the "Phone retrieved" goal is achieved.
	
When Phone Lost Ver B begins:
	now under#bed is closed;
	now the smartphone is in under#bed.
	
Instead of nounless ruminating during Phone Lost Ver B:
	say "[no time]You need to retrieve your phone. It slid under the bed."

Instead of remembering the smartphone during Phone Lost Ver B (this is the remember that the phone went under the bed rule):
	if under#bed is closed:
		say "Your [smartphone] has slipped from your hand and slid under the bed." (A);
	otherwise:
		say "Your [smartphone] has slid right under the middle of the bed." (B).
	
Instead of going from Main-Bed during Phone Lost Ver B (this is the don't abandon your phone ver b rule):
	say "[nt]You don't want to do anything else before retrieving your phone, lest someone try to contact you while it's inaccessible." (A).

First carry out looking under the bed during Phone Lost Ver B (this is the find the phone under the bed rule):
	if the player is in under#bed:
		now under#bed is open;
		now under#bed is examined;
		say "You should be able to reach your phone now." (A) instead;
	otherwise if the number of locale-supportable things in under#bed is 1:
		now under#bed is open;
		now under#bed is examined;
		say "Your [smartphone] has slid right under the middle of the bed." (B) instead;
	otherwise:
		say "Your [smartphone] has slid right under the middle of the bed." (C).

Check taking the smartphone (this is the can't reach the phone under the bed rule):
	if Phone Lost Ver B is happening and the player is not in under#bed:
		if the "Furniture searched" goal is achieved:
			say "You [first time]stretch and strain, but [only]can't reach your phone from out here. As much as you hate to admit it, you'll need to GO UNDER the bed to retrieve it." (A) instead;
		otherwise:
			say "[nt]You're not about to pat around under there blindly. You should LOOK UNDER the bed first to determine where exactly your phone is." (B) instead.
			
Check exiting (this is the don't leave from under the bed without your phone rule):
	if Phone Lost Ver B is happening and the player is in under#bed and the player does not enclose the smartphone:
		say "[nt]You're not about to get under the bed for a [i]second[/i] time, if you can help it[unicode 8212]grab your phone before you leave." (A) instead.
		
First report taking the smartphone (this is the cue getting back on track to plugging in the phone rule):
	if Phone Lost Ver A is happening or Phone Lost Ver B is happening:
		say "Great, phone secured. Now it's time to get out of this nasty under-space and plug it in." (A) instead.

Section 5 - Step four is plugging in phone

[STEP FOUR: Plug in phone on dresser]

Letting Phone Charge is a tutorialish scene. Letting Phone Charge begins when Phone Lost Ver A ends. Letting Phone Charge begins when Phone Lost Ver B ends. Letting Phone Charge ends when the smartphone is charging.

Dropping the smartphone is phone-discarding. Inserting the smartphone into something is phone-discarding. Putting the smartphone on something is phone-discarding. Placing the smartphone under something is phone-discarding. Stowing the smartphone behind something is phone-discarding. Plugging the phone charger into the smartphone is phone-discarding. Plugging the smartphone into the phone charger is phone-discarding. Depositing the smartphone is phone-discarding.

Before phone-discarding (this is the don't lose the phone rule):
	if Phone Lost Ver A has not ended and Phone Lost Ver B has not ended:
		if the current action is not inserting the smartphone into the sweatpants-pockets:
			take no time;
			say "You should hold on to your phone until you're really ready to sleep, just in case." (A) instead.

Table of Tutorial Goals (continued)
goal	validation	achieved
"First plug connected"	initial connection rule	false
"Phone charging"	smartphone getting charged rule	false

This is the initial connection rule: if Letting Phone Charge is happening and the count of occupied plugs of the phone charger is 1, rule succeeds.
This is the smartphone getting charged rule: if the "First plug connected" goal is achieved and the smartphone is charging, rule succeeds.

plug-cued is a truth state that varies. plug-cued is false.

A tutorial dispensement rule (this is the cue plugging in the phone and the wall rule):
	if Letting Phone Charge is happening:
		if the "First plug connected" goal is achieved and plug-cued is false:
			if the phone charger is inserted into the smartphone:
				say "It won't do any good, though, until the charger is also plugged into an outlet." (A);
			otherwise [if the phone charger is inserted into the bedroom-outlet]:
				say "It won't do any good, though, until you also plug the charger into the phone." (B);
			now plug-cued is true;
		rule fails;
	otherwise:
		make no decision.

The cue plugging in the phone and the wall rule is listed after the cue stowing the dishes rule in the tutorial dispensement rules.

Check plugging the phone charger into during Daytime (this is the only use the bedroom outlet for the phone rule):
	if the second noun is an electric outlet and the second noun is neither the smartphone nor the bedroom-outlet:
		say "[nt]You prefer to have your phone plugged in near your bed, for easy access at a moment's notice." (A) instead.
		
Instead of nounless ruminating during Letting Phone Charge:
	take no time;
	unless the "First plug connected" goal is achieved:
		say "Time to plug your phone in to charge and finish getting ready for bed.";
	otherwise if the phone charger is inserted into the smartphone:
		say "The charger is plugged into the phone, but you'll need to plug it into the wall as well in order for it to do its job.";
	otherwise:
		say say "The charger is plugged into the wall, but you'll need to plug it into the phone as well in order for it to do its job."

Section 6 - Step five is making sure everything is off

[STEP FIVE: Make sure all lights, taps, appliances are switched off; player is wearing nothing but pjs; wallet and keys in key bowl]

Final Sweep is a tutorialish scene. Final Sweep begins when Letting Phone Charge ends. Final Sweep ends when the "Everything off" goal is achieved.

When Final Sweep begins:
	now eveningnum is 2;
	follow the second set the sun rule.

Table of Tutorial Goals (continued)
goal	validation	achieved
"Everything off"	nothing running rule	false

This is the nothing running rule:
	follow the update tutorial properties rule;
	repeat through the Table of Things Tutorial Relevant:
		if the correct entry is false:
			make no decision;
	rule succeeds.
	
This is the update tutorial properties rule:
	repeat through the Table of Things Tutorial Relevant:
		if the relevant-property entry is "switch":
			if the item entry is switched off, now the correct entry is true;
			otherwise now the correct entry is false;
		otherwise if the relevant-property entry is "lock":
			if the item entry is locked, now the correct entry is true;
			otherwise now the correct entry is false;
		otherwise if the relevant-property entry is "in the key bowl":
			if the item entry is enclosed by the key bowl, now the correct entry is true;
			otherwise now the correct entry is false;
		otherwise if the relevant-property entry is "on the shelf in the foyer":
			if the item entry is enclosed by the foyer shelf, now the correct entry is true;
			otherwise now the correct entry is false;
		otherwise if the relevant-property entry is "in the jewellery box":
			if the item entry is enclosed by the jewellery box, now the correct entry is true;
			otherwise now the correct entry is false;
		otherwise if the relevant-property entry is "in the dresser":
			if the item entry is enclosed by a drawer, now the correct entry is true;
			otherwise now the correct entry is false;
		otherwise if the relevant-property entry is "anywhere but on your person":
			unless the item entry is enclosed by the player or the item entry is on the bed, now the correct entry is true;
			otherwise now the correct entry is false;
	
Table of Things Tutorial Relevant
item	relevant-property	correct	proxy descriptor
bathroom faucet	"switch"	false	"the bathroom sink's faucet"
bathroom-lightswitch	"switch"	false	"the bathroom lights"
dishwasher-switch	"switch"	false	"the dishwasher"
foyer-lightswitch	"switch"	false	"the foyer lights"
front door	"lock"	false	"the front door"
hood-switch	"switch"	false	"the fume hood light"
kitchen faucet	"switch"	false	"the kitchen faucet"
main-room-lightswitch	"switch"	false	"the main room lights"
oven-switch	"switch"	false	"the oven"
safe	"lock"	false	"the safe"
stove-knobs	"switch"	false	"the stove"
tub-faucet	"switch"	false	"the tub faucet"
keyring	"in the key bowl"	false	"your keychain"
wallet	"in the key bowl"	false	"your wallet"
key bowl	"on the shelf in the foyer"	false	"the key bowl"
taser	"in the dresser"	false	"the taser"
heirloom ring	"in the jewellery box"	false	"the heirloom ring"
silver earrings	"in the jewellery box"	false	"the silver earrings"
tanzanite necklace	"in the jewellery box"	false	"the tanzanite necklace"
jewellery box	"in the dresser"	false	"the jewellery box"
radio	"anywhere but on your person"	false	"the radio"


When Final Sweep begins (this is the clue final sweep rule):
	follow the nothing running rule;
	if rule succeeded:
		complete the "Everything off" goal;
	unless the "Everything off" goal is achieved:
		let overall-list be a list of things;
		repeat through the Table of Things Tutorial Relevant:
			if the correct entry is false, add the item entry to overall-list;
		if the number of entries in overall-list is 1:
			say "Alright, that's the phone plugged in, and you're very nearly ready for bed." (A);
		otherwise:
			say "Alright, that's the phone plugged in. Time for your final sweep, to make sure everything in the apartment is dormant and ready for you to be unconscious for a precious few hours." (B);
		follow the list items to finish sweeping rule.
		
Instead of nounless ruminating during Final Sweep (this is the remember your tasks rule): follow the list items to finish sweeping rule.
			
This is the list items to finish sweeping rule:
	let appliance-list be a list of texts;
	let lock-list be a list of texts;
	let switch-list be a list of texts;
	let tap-list be a list of texts;
	let placed-list be a list of texts;
	let jewelry-list be a list of texts;
	let overall-list be a list of things;
	repeat through the Table of Things Tutorial Relevant:
		if the correct entry is false:
			add the item entry to overall-list;
			if the item entry is a lightswitch:
				add the proxy descriptor entry to switch-list;
			otherwise if the item entry is a tap:
				add the proxy descriptor entry to tap-list;
			otherwise if the item entry is a device:
				add the proxy descriptor entry to appliance-list;
			otherwise if the relevant-property entry is "lock":
				add the proxy descriptor entry to lock-list;
			otherwise if the relevant-property entry is "in the jewellery box":
				add the proxy descriptor entry to jewelry-list;
				add the proxy descriptor entry to placed-list;
			otherwise:
				add the proxy descriptor entry to placed-list, if absent;
	if the number of entries in overall-list is 1:
		let negation-list be a list of texts;
		if appliance-list is empty, add "appliances are running" to negation-list;
		if switch-list is empty, add "lights are on" to negation-list;
		if lock-list is empty, add "things that need to be locked aren't" to negation-list;
		if the number of entries in negation-list is 2:
			say "No [entry 1 of negation-list] and no [entry 2 of negation-list]. [nobr]" (A);
		otherwise:
			say "No appliances are running, no lights are on, and everything that needs to be is locked. [nobr]" (B);
		say "There's just one thing left to do: [nobr]" (C);
		let obj be entry 1 in overall-list;
		choose row with an item of obj in the Table of Things Tutorial Relevant;
		if obj is a device:
			say "switching off [proxy descriptor entry]." (D);
		otherwise if the relevant-property entry is neither "lock" nor "switch":
			say "returning [proxy descriptor entry] to its proper place [relevant-property entry]." (E);
		otherwise:
			say "making sure the [proxy descriptor entry] is closed and locked." (F);
	otherwise:
		let comma-semicolon be indexed text;
		if the number of entries in overall-list < 3:
			now comma-semicolon is "";
		otherwise if the number of entries in lock-list > 2 or the number of entries in switch-list > 2 or the number of entries in tap-list > 2 or the number of entries in appliance-list > 2:
			now comma-semicolon is ";";
		otherwise:
			now comma-semicolon is ",";
		unless appliance-list is empty and switch-list is empty and tap-list is empty and lock-list is empty:
			say "[one of]Off the top of your head, you know[or]Before you can sleep comfortably,[stopping] you need to [nobr]" (G);
		otherwise:
			say "Before you can sleep comfortably, [nobr]" (H);
		unless appliance-list is empty:
			say "turn off [appliance-list][nobr]" (I);
		unless switch-list is empty:
			say "[unless appliance-list is empty][comma-semicolon] [end unless][if tap-list is empty and lock-list is empty and appliance-list is not empty]and [end if]switch off [switch-list][nobr]" (J);
		unless tap-list is empty:
			say "[unless appliance-list is empty and switch-list is empty][comma-semicolon] [end unless][nobr]" (K);
			if lock-list is empty:
				unless appliance-list is empty and switch-list is empty:
					say "and [nobr]" (L);
			say "shut off [tap-list][nobr]" (M);
		unless lock-list is empty:
			say "[unless appliance-list is empty and switch-list is empty and tap-list is empty][comma-semicolon] and [end unless]make sure [lock-list] [if the number of entries in lock-list is 1]is[otherwise]are[end if] shut and locked[nobr]" (N);
		unless placed-list is empty:
			unless appliance-list is empty and switch-list is empty and tap-list is empty and lock-list is empty:
				say ". Additionally, [nobr]" (O);
			repeat with T running through jewelry-list:
				remove T from placed-list, if present;
			if the number of entries in placed-list is 1:
				let thng be entry 1 in placed-list;
				choose row with a proxy descriptor of thng in the Table of Things Tutorial Relevant;
				say "you need to return [proxy descriptor entry] to its proper place [relevant-property entry][nobr]" (P);
			otherwise if placed-list is empty and the number of entries in jewelry-list is 1:
				let thng be entry 1 in jewelry-list;
				choose row with a proxy descriptor of thng in the Table of Things Tutorial Relevant;
				say "you need to return [proxy descriptor entry] to its proper place [relevant-property entry][nobr]" (Q);
			otherwise:
				say "a few things need returning to their proper places: [nobr]" (R);
				unless jewelry-list is empty:
					say "[jewelry-list] go[if the number of entries in jewelry-list is 1]es[end if] in the jewellery box[if the number of entries in jewelry-list is 1],[otherwise];[end if] [nobr]" (S);
					if "the jewellery box" is listed in placed-list and the number of entries in placed-list > 1:
						say "the jewellery box itself goes in the dresser[comma-semicolon] [nobr]" (T);
						remove "the jewellery box" from placed-list, if present;
				repeat with X running from 1 to the number of entries in placed-list:
					let Y be entry X in placed-list;
					choose row with a proxy descriptor of Y in the Table of Things Tutorial Relevant;
					say "[Y] go[unless item entry is silver earrings]es[end unless] [relevant-property entry][if item entry is the taser][first time] (you don't want to risk electrocuting yourself in your sleep)[only][end if][nobr]" (U);
					if the number of entries in placed-list is 2 and X is 1:
						say " and [nobr]" (V);
					otherwise if X is the number of entries in placed-list:
						say "[nobr]" (W);
					otherwise if X is the number of entries in placed-list minus 1:
						say ", and [nobr]" (X);
					otherwise:
						say ", [nobr]" (Y);
		say "." (Z);

When Final Sweep ends, say "That, you think, is the end of it. No appliances are running, no lights are on, and everything that needs to be is locked. Finally, finally, you can go to sleep."

After reading a command (this is the going to bed equates to sleeping rule):
	if the location is Main-Bed:
		if the player's command matches "go to bed":
			change the text of the player's command to "sleep".

Section 7 - Mechanics for making sure all steps are complete

Before entering the bed during Daytime (this is the ensure tutorial completion rule):
	if Final Sweep is happening:
		let overall-list be a list of things;
		repeat through the Table of Things Tutorial Relevant:
			if the correct entry is false, add the item entry to overall-list;
		if the number of entries in overall-list is 1:
			say "You can't go to bed quite yet. [nobr]" (A);
		otherwise:
			say "You haven't yet finished your sweep!" (B);
		follow the list items to finish sweeping rule;
		stop the action;
	otherwise:
		follow the tutorial complete confirmation rule;
		if rule failed:
			follow the tutorial reminder rules;
			stop the action;
	make no decision.
	
This is the tutorial complete confirmation rule:
	repeat through the Table of Tutorial Goals:
		if the achieved entry is false, rule fails;
	rule succeeds.

The tutorial reminder rules are a rulebook.

A tutorial reminder rule (this is the remind about the dishwasher rule):
	if the "Dishwasher empty" goal is not achieved:
		unless the time of day is 9:00 AM:
			say "You still need to unload the dishwasher before you can sleep, even if only to stop it beeping." (A);
		rule fails;
	make no decision.
	
A tutorial reminder rule (this is the remind about the email rule):
	if Checking Email Part B has not ended:
		say "You still need to check your email before you can sleep, in case there's some important new information there." (A);
		rule fails;
	make no decision.
	
The remind about the email rule is listed last in the tutorial reminder rules.

A tutorial reminder rule (this is the redirect to beds only rule):
	if the "Phone dropped" goal is not achieved, follow the beds only rule.
	
The redirect to beds only rule is listed last in the tutorial reminder rules.

A tutorial reminder rule (this is the remind about phone retrieval rule):
	if the "Phone retrieved" goal is not achieved:
		say "You can't sleep without first retrieving your phone." (A);
		rule fails;
	make no decision.
	
The remind about phone retrieval rule is listed last in the tutorial reminder rules.

A tutorial reminder rule (this is the remind about phone charging rule):
	if the "Phone charging" goal is not achieved:
		say "You need to plug your phone in to charge before you can sleep." (A);
		rule fails;
	make no decision.
	
The remind about phone charging rule is listed last in the tutorial reminder rules.

Before entering the bed during Daytime (this is the properly make the bed before sleeping rule):
	if the pillow is not on the bed or the comforter is not on the bed:
		if the player encloses the pillow:
			if the player encloses the comforter:
				say "(first putting the pillow and comforter back on the bed)[command clarification break]" (A);
				move the comforter to the bed;
			otherwise:
				say "(first putting the pillow back on the bed)[command clarification break]" (B);
			move the pillow to the bed;
		otherwise if the player encloses the comforter:
			say "(first putting the comforter back on the bed)[command clarification break]" (C);
			move the comforter to the bed;
	continue the action.
	
Before entering the bed during Daytime (this is the bed must be properly made before sleeping rule):
	if the pillow is not on the bed:
		if the comforter is not on the bed:
			say "It'll be hard to go to sleep without a pillow or a comforter." (A) instead;
		otherwise:
			say "It'll be hard to go to sleep without a pillow." (B) instead;
	otherwise if the comforter is not on the bed:
		say "It'll be hard to go to sleep without the comforter." (C) instead.

The properly make the bed before sleeping rule is listed after the the ensure tutorial completion rule in the before rules.
The bed must be properly made before sleeping rule is listed after the properly make the bed before sleeping rule in the before rules.

Part 2 - Nighttime

Chapter 1 - Scene definitions and beginnings

Nighttime is a recurring scene. Nighttime begins when Daytime ends.

This is the properly update the colors rule:
	if it's Nighttime:
		follow the the set nighttime colors rule;
	otherwise if eveningnum is 0:
		follow the set daytime colors rule;
	otherwise if eveningnum is 1:
		follow the first set the sun rule;
	otherwise:
		follow the second set the sun rule;
		
To say updatecolors: follow the properly update the colors rule;

[The properly update the colors rule is listed first in the turn sequence rules.]
[The properly update the colors rule is listed after the restore the game rule in the carry out restoring the game rulebook.]

listen-hinted is a truth state that varies. listen-hinted is true.

When Nighttime begins (this is the reset the electronics rule):
	now the password-attempts of the laptop-computer is 0;
	now the passcode-attempts of the smartphone is 0;
	now the laptop-computer is unlocked;
	now the laptop-computer is switched off;
	now the laptop-computer is closed;
	now the laptop-computer runs login window;
	now the smartphone is unlocked;
	now the smartphone is switched off;
	now the smartphone runs lockscreen.
	
When Nighttime begins (this is the reset wetness rule):
	now the dishwasher is not wet;
	repeat with basin running through sinks:
		now basin is not wet;
	now the bathtub is not wet.
	
When Nighttime begins (this is the desperate times call for fridgability rule):
	now the bust is fridgable;
	now the bust is freezable;
	now the duct tape is fridgable;
	now the duct tape is freezable;
	now the geode is fridgable;
	now the geode is freezable;
	now the important documents are fridgable;
	now the important documents are freezable;
	now the jewellery box is fridgable;
	now the jewellery box is freezable;
	now the key bowl is fridgable;
	now the key bowl is freezable;
	now the laptop-computer is fridgable;
	now the paperclip is fridgable;
	now the paperclip is freezable;
	now the pill bottles are fridgable;
	now the pill bottles are freezable;
	now the radio is fridgable;
	now the razor is fridgable;
	now the razor is freezable;
	now the screwdriver is fridgable;
	now the screwdriver is freezable;
	now the smartphone is fridgable;
	now the smartphone is freezable;
	now the taser is fridgable;
	now the toothbrush is fridgable;
	now the toothbrush is freezable;
	now the vase is fridgable;
	now the wallet is fridgable;
	now the wallet is freezable;
	repeat with tome running through books:
		now tome is fridgable;
	repeat with slip running through cards:
		now slip is fridgable;
		now slip is freezable;
	repeat with cord running through charging cables:
		now cord is fridgable;
		now cord is freezable;
	repeat with platter running through dishes:
		now platter is fridgable;
	repeat with accessory running through jewelry:
		now accessory is fridgable;
		now accessory is freezable;
	repeat with pass running through latchkeys:
		now pass is fridgable;
		now pass is freezable;
	repeat with utensil running through silverware:
		now utensil is fridgable;
		now utensil is freezable;
	
When Nighttime begins (this is the move the phone before bed rule):
	if the player encloses the smartphone, now the smartphone is on the dresser.

When Nighttime begins (this is the introduce the threat rule):
	follow the set nighttime colors rule;
	clear only the main screen;
	say "You wake up some indeterminate amount of time later. As your mind swims up from the realm of sleep, you recognize that it's now dark out[unicode 8212]as dark as the city gets, at least.
	
	A moment later, you recognize what it was that awoke you: a telltale scratching, squeaking, rustling sound from your front door. You turn your gaze towards it, able to see it without leaving your bed, and see that the light spilling in underneath from the outside hall is broken up by the telltale shadows of feet standing just outside.
	
	Instantly, you are wide awake. Your worst fears are realized: someone is trying to break in.
	
	That this is happening the first night you're actually in an apartment that's been secured for almost two weeks is no coincidence. This person is not here to take just your valuables or your documents, but also your life.
	
	You will have only a few moments to act before the intruder is inside. You'll need to move quickly.
	
	[bracket]PRESS ANY KEY TO CONTINUE[close bracket]";
	wait for any key;
	now the intruder is seen;
	now the time of day is 2:47 AM;
	say paragraph break;
	say banner text;
	now the story tense is future tense;
	autosave the game;
	now listen-hinted is false;
	try looking.
	
Last report looking:
	if it's Nighttime and listen-hinted is false:
		unless we restored from an autosave:
			say "[i][bracket]You can use 'H' as a shorthand for listening.[close bracket][/i][br]";
		now listen-hinted is true.
		
Every turn during Nighttime (this is the update default locations rule):
	if intruder-inside is false:
		repeat with obj running through things:
			now the default location of obj is the holder of obj.
			
Instead of sleeping during Nighttime:
	take no time;
	say "You won't be able to sleep while you're still in danger."

Chapter 2 - When scene ends (regular endings)

Section 1 - Elusively

Nighttime ends elusively when the player is in Down-the-Hall.

When Nighttime ends elusively:
	record "Ending II: Escaped from the apartment building" as an ending;
	let L be a list of things;
	repeat through the Table of Things Stolen:
		unless the player encloses item entry:
			add item entry to L;
	say "You will race down the hallway towards the stairs. You will have done it, escaped[unicode 8212]but not without a cost.";
	say line break;
	if the number of entries in L is 0:
		say "While you will have kept all of your possessions, you can't help but remember that there will still be a man out there who knows where you live and who was willing to break into your apartment to try to kill you. And you won't even know what he looks like. You will have survived this encounter, but with no guarantee that he won't be back[if 911-texted is true]. Your only hope on that front will be for the police to arrive before he leaves[end if].";		
	otherwise:
		let transition-flag be 0;
		if the jewellery box is listed in L or the vase is listed in L:
			say "You will have left behind valuable things[if the jewellery box is listed in L and the vase is listed in L], both sentimentally and literally[otherwise if the jewellery is not listed in L], if only sentimentally[end if]. [nobr]";
			now transition-flag is 1;
		if the taser is listed in L:
			say "You will have left behind your weapon, the thing that was meant to make you feel safe. [nobr]";
			now transition-flag is 2;
		if the important documents is listed in L or the laptop-computer is listed in L or the smartphone is listed in L:
			say "[if transition-flag is 0]You[otherwise]More importantly, you[end if] will have left behind the resources he'll need to find your information. All of the work that went into keeping you safe will have been undone in the span of less than an hour. [nobr]";
		say "And besides [unless transition-flag is 0]all [end if]that, [i]he will still know where you live[/i][if 911-texted is true]. Your only hope on that front will be for the police to arrive before he leaves[end if].";
	say line break;
	say "Do you consider this an acceptable outcome? > [run paragraph on]";
	if the player consents:
		follow the enact the plan rule;
	otherwise:
		follow the reject the plan rule.
	
This is the enact the plan rule:
	say "Okay. Here goes nothing.
	
	Your eyes snap open. The intruder has not yet opened the door. You [actiondesc1], then [actiondesc2].
	
	You can do this.";
	end the story finally saying "Time to begin."
	
This is the reject the plan rule:
	say "No. No, it's not. There must be a better way. You will find a better way.
			
	[i][bracket]Press any key to restart the night.[close bracket][/i]";
	wait for any key;
	clear only the main screen;
	autorestore the game.
	
Section 2 - Fatally

Nighttime ends fatally when the player is dead.

but-then is a truth state that varies. but-then is false.
hear-var is a truth state that varies. hear-var is false.
First before doing something:
	now hear-var is false;
	now but-then is false.
First carry out waiting: now but-then is true.
First carry out closing: now hear-var is true.
First carry out opening: now hear-var is true.
First carry out examining: now hear-var is true.
Before examining yourself: now hear-var is true.

When Nighttime ends fatally (this is the intruder kills you on sight rule):
	say "[if but-then is true]But then, [end if][intro murder], and you will know that it is over. [Hiding admonishment][one of]He will draw the gun in slow motion, its cold metal glinting in the moonlight[or][gun-draw desc][stopping].	
	A click. A bang. A white-hot, searing radiance[unicode 8212]then nothing, nothing, nothing.";
	unless "Ending I: Murdered by the intruder" is a used ending:
		say line break;
		say "In the back of your mind, you know it's unlikely that murdering you is all he'll do, but you refuse to even broach any other possibilities. In your own head, at least, you can be allowed the mercy of a quick death.";
	follow the refuse death rule.
	
To say intro murder:
	if hear-var is true:
		say "[if but-then is true]you[otherwise]You[end if] will hear him behind you";
	otherwise if intruder-slipped-by is true:
		say "[if but-then is true]he[otherwise]He[end if] will catch your arm. [one of]He will chuckle[or]'Nice try, girlie,' he will say[or]You will feel his breath on your neck[as decreasingly likely outcomes]";
	otherwise:
		say "[if but-then is true]he[otherwise]He[end if] will lock eyes with you";
		
To say Hiding admonishment:
	if the player is obscured by the furniture-counter:
		say "Hiding behind something only works when the person you're hiding [i]from[/i] can't see the spot you're hiding [i]in[/i]. ";
	otherwise if the player is obscured by the plush chair or the player is obscured by the worn-in chair:
		say "Hiding behind something only works if the person you're hiding [i]from[/i] can't sneak up behind you. ";
	otherwise:
		do nothing.

To say gun-draw desc:
	say "He will [draw-verb] his gun [draw-adj]. [one of]Your breath will catch in your throat[or]You will not have time to scream[or]He will aim directly between your eyes[or]He will cock it with a [i]click[/i][or]Hw will give you a small, enigmatic smile[or]He will suck in a ragged breath[or]Its cold metal will glint in the moonlight[then at random]".
	
To say draw-verb: say "[one of]procure[or]pull out[or]brandish[or]wield[or]take out[or]pull[or]draw[then at random]".

To say draw-adj: say "[one of]and time will slow to a glutinous crawl[or]faster than your eye can see[or]with a professional dispassion[or]with icy precision[or]without hesitation[or]with a deranged glee[or]in slow motion[then at random]".
	
This is the refuse death rule:
	if "Ending I: Murdered by the intruder" is a used ending:
		say "You are not going to die tonight. There must be a better way. You will find a better way.";
	otherwise:
		say "Which is not to say you're planning on dying tonight. There must be a better way. You will find a better way.";
	say line break;
	say "[i][bracket]Press any key to restart the night.[close bracket][/i]";
	wait for any key;
	record "Ending I: Murdered by the intruder" as an ending;
	clear only the main screen;
	autorestore the game.
	
Section 3 - Incapably

Nighttime ends incapably when the intruder is incapacitated and 911-texted is false.

Before assaulting the intruder with (this is the make ranged attacks work for the player rule):
	if the location of the intruder is not the location:
		now potentially-ranged is true;
	continue the action.

Check assaulting the intruder with (this is the incapacitate instead of assaulting rule):
	if the second noun is incapacitating, try incapacitating the intruder with the second noun instead.

Check throwing something at the intruder (this is the incapacitate instead of throwing rule):
	if the noun is incapacitating:
		now potentially-ranged is true;
		try incapacitating the intruder with the noun instead.
	
The incapacitate instead of throwing rule is listed before the block throwing at rule in the check throwing it at rules.

Incapacitating it with is an action applying to two things.
[NOTE: No grammar for this action, because it's really only being used to simplify writing report rules for results that multiple kinds of actions could concievably lead to.]

After deciding the scope of the player while throwing or incapacitating or assaulting (this is the allow throwing into connected rooms rule):
	follow the scopable connectivity rule.
	
Rule for reaching inside a room (called spot) while assaulting (this is the allow attacking people in nearby spaces rule):
	if spot is adjacent to the location or spot is connected with the location:
		if potentially-ranged is true:
			allow access;
	deny access.

Rule for reaching inside a room (called spot) while throwing or incapacitating (this is the allow throwing at people in nearby spaces rule):
	if spot is adjacent to the location or spot is connected with the location:
		allow access;
	deny access.
	
Carry out incapacitating the intruder with (this is the incapacitate the intruder rule):
	now the intruder is incapacitated.
		
The secondary incapacitator is an object that varies. The secondary incapacitator is nothing.

To randomize the incapacitant:
	let L be { geode, knifeblock, radio, vase };
	repeat with obj running through L:
		unless obj is visible, remove obj from L;
	if the vase is shattered:
		remove the vase from L, if present;
	if L is empty:
		now the secondary incapacitator is nothing;
	otherwise:
		let M be a random number from 1 to the number of entries in L;
		now the secondary incapacitator is entry M of L.

Report incapacitating the intruder with the comforter:
	randomize the incapacitant;
	if potentially-ranged is true:
		say "[We] [throw] the comforter over the intruder's head. [nobr]";
	otherwise:
		say "[We] [wrap] the comforter over the intruder's head. [nobr]";
	say "It will drape over him, concealing him down to his knees. He will let out a cry of outrage and begin to struggle against the new constriction. It won't be enough alone.";
	follow the secondary incapacitation rule.

This is the secondary incapacitation rule:
	if the secondary incapacitator is nothing:
		say "You will kick out his knees from under him and he will topple. His head will slam against the [slam-thing], and he will abruptly lie still.";
	otherwise:
		say "You will look around for something else to use, and spy [the secondary incapacitator]. You will only have a moment to dart over and grab it, but you will make it back before the intruder has freed himself and slam [the secondary incapacitator] into the side of his head.
		
		He will stagger once, and you will whack him again. He will fall to the floor and lie still."
		
To say slam-thing:
	if the location is Main-Sitting:
		say "edge of the glass table";
	otherwise if the location is Main-Office:
		say "edge of the desk";
	otherwise if the location is either Main-By-Counter or Kitchenette:
		say "edge of the counter";
	otherwise if the location is Main-Bed:
		say "edge of the dresser";
	otherwise if the location is Bathroom:
		say "[one of]edge of the sink[or]edge of the tub[or]toilet bowl[or]floor[at random]";
	otherwise:
		say "floor";
	
Report incapacitating the intruder with the geode:
	if potentially-ranged is true:
		say "You will throw the geode, hard. It will strike the intruder in the head. [nobr]";
	otherwise:
		say "You will wind up and strike the intruder hard in the head with the geode. [nobr]";
	say "He will stumble, once, his hands fluttering up to belatedly protect the spot where you struck him. He will turn halfway in an attempt to look at you, then collapse to the floor and lie still."
	
Report incapacitating the intruder with the leather jacket:
	randomize the incapacitant;
	if potentially-ranged is true:
		say "[We] [throw] the leather jacket over the intruder's head. [nobr]";
	otherwise:
		say "Quick as you can, [we] [wrap] the leather jacket over the intruder's head. [nobr]";
	say "It will drape over him, obscuring his vision. He will let out a cry of outrage and go to remove it, but his hands will get caught in the sleeves. Still, it won't be enough alone.";
	follow the secondary incapacitation rule.
	
Report incapacitating the intruder with the radio:
	if potentially-ranged is true:
		say "You will throw the radio, hard. It will shatter against the intruder's head, sending little electronic pieces raining down to the floor. [nobr]";
	otherwise:
		say "You will wind up and strike the intruder hard with the radio. It will shatter against his head, sending little electronic pieces raining down to the floor. [nobr]";
	say "He will stumble, once, his hands fluttering up to belatedly protect the spot where you struck him. He will turn halfway in an attempt to look at you, then collapse to the floor and lie still."
	
Report incapacitating the intruder with the trenchcoat:
	randomize the incapacitant;
	if potentially-ranged is true:
		say "[We] [throw] the trenchcoat over the intruder's head. [nobr]";
	otherwise:
		say "Quick as you can, [we] [wrap] the trenchcoat over the intruder's head. [nobr]";
	say "It will drape over him, covering his head and his shoulders. He will let out a cry of outrage and begin to struggle against the new constriction. It won't be enough alone.";
	follow the secondary incapacitation rule.

Report incapacitating the intruder with the vase:
	if potentially-ranged is true:
		say "You will throw the vase, hard. It will shatter against the intruder's head, its broken shards raining down to the floor. [nobr]";
	otherwise:
		say "You will wind up and strike the intruder hard with the vase. It will shatter against his head, its broken shards raining down to the floor. [nobr]";
	say "He will stumble, once, his hands fluttering up to belatedly protect the spot where you struck him. He will turn halfway in an attempt to look at you, then collapse to the floor and lie still."

When Nighttime ends incapably:
	record "Ending VII: Subdued the intruder" as an ending;
	say "You will crouch down to check his pulse, and find him still alive.
	
	Well, that's alright. [if the player encloses the duct tape]You'll have the duct tape, and can[otherwise]You'll be able to use your duct tape to[end if] tie him to a chair and gag him before he wakes up. You suspect Brookwood will be [i]very[/i] interested in whatever information he can squeeze out of this guy.
	
	Of course, you'll have to worry about keeping him quiet until then, and disposing of him after. Brookwood will be able to help you with that second part, but until he arrives you'll be on your own.
	
	Do you consider this an acceptable outcome? > [run paragraph on]";
	if the player consents:
		follow the enact the plan rule;
	otherwise:
		follow the lukewarm reject the plan rule.
		
This is the lukewarm reject the plan rule:
	say "No. No, there may be a better way. Maybe you can find a better way.
			
	[i][bracket]Press any key to restart the night.[close bracket][/i]";
	wait for any key;
	clear only the main screen;
	autorestore the game.
	
Nighttime ends capably when the intruder is incapacitated and 911-texted is true.

When Nighttime ends capably:
	record "Ending VIII: Subdued the intruder and alerted the police" as an ending;
	say "You will crouch down to check his pulse, and find him still alive.
	
	Well, that's alright. [if the player encloses the duct tape]You'll have the duct tape, and can[otherwise]You'll be able to use your duct tape to[end if] tie him to a chair and gag him before he wakes up.
	
	For tonight, your problem will be the police. Your situation will have changed: you'll no longer be a victim in mortal danger, but instead a woman going by a false name with a man bound and gagged in her apartment. You've talked your way out of tricky situations before, but this will be quite the hill to climb.
	
	Do you consider this an acceptable outcome? > [run paragraph on]";
	if the player consents:
		follow the enact the plan rule;
	otherwise:
		follow the lukewarm reject the plan rule.
	
Section 4 - Larcenously

Nighttime ends larcenously when the intruder is nowhere.
	
When Nighttime ends larcenously:
	record "Ending III: Remained undetected" as an ending;
	if the player is in a backside or the player is in an underside or the location is either Within-Closet or Main-Behind-Shelf:
		say "You will come out of hiding. [nobr]";
	if the count of stolen things is 0:
		say "You will have survived the encounter, and you will have kept all your possessions. You can't help but remember, though, that there will still be a man out there who knows where you live and who was willing to break into your apartment to try to kill you. And you won't even know what he looks like. You will have survived this encounter, but with no guarantee that he won't be back.
		
		Do you consider this an acceptable outcome? > [run paragraph on]";
		if the player consents:
			follow the enact the plan rule;
		otherwise:
			follow the reject the plan rule;
	otherwise:
		let transition-flag be 0;
		say "You will have survived the encounter, but at a great cost. [nobr]";
		if the jewellery box has been stolen or the vase has been stolen:
			say "He will have stolen valuable things from you[if the jewellery box has been stolen and the vase has been stolen], both sentimentally and literally[otherwise if the jewellery box has been stolen], if only sentimentally[end if]. [nobr]";
			now transition-flag is 1;
		if the taser has been stolen:
			say "[if transition-flag is 1]Not to mention, he[otherwise]He[end if] will have taken your weapon, the thing that was meant to make you feel safe. [nobr]";
			now transition-flag is 2;
		if the important documents have been stolen or the laptop-computer has been stolen or the smartphone has been stolen:
			say "[if transition-flag is 0]He[otherwise]More importantly, he[end if] will have your information. All of the work that went into keeping you safe will have been undone in the span of less than an hour. [nobr]";
		say "And besides [unless transition-flag is 0]all [end if]that, [i]he will still know where you live[/i].
		
		Do you consider this an acceptable outcome? > [run paragraph on]";
		if the player consents:
			follow the enact the plan rule;
		otherwise:
			follow the reject the plan rule.

[NOTE: All code dealing with the Table of Things Stolen and its associated functions, similar to the tutorial goals, is adapted from Achievements by Juhana Leinonen]
Table of Things Stolen
item	stolen-flag	verification
important documents	0	documents-stolen rule
jewellery box	0	jewelry-stolen rule
laptop-computer	0	laptop-stolen rule
smartphone	0	smartphone-stolen rule
taser	0	taser-stolen rule
vase	0	vase-stolen rule
wallet	0	wallet-stolen rule

This is the documents-stolen rule: if the important documents are in the rucksack, rule succeeds.
This is the jewelry-stolen rule: if the jewellery box is in the rucksack, rule succeeds.
This is the laptop-stolen rule: if the laptop-computer is in the rucksack, rule succeeds.
This is the smartphone-stolen rule: if the smartphone is in the rucksack, rule succeeds.
This is the taser-stolen rule: if the intruder encloses the taser, rule succeeds.
This is the vase-stolen rule: if the vase is in the rucksack, rule succeeds.
This is the wallet-stolen rule: if the wallet is in the rucksack, rule succeeds.

This is the check for stolen things rule:
	repeat through the Table of Things Stolen:
		if (there is no stolen-flag entry or the stolen-flag entry is 0) and there is a verification entry:
			follow the verification entry;
			if the rule succeeded:
				mark the item entry stolen.
	
The check for stolen things rule is listed last in the turn sequence rules.

To mark the/-- (obj - thing) stolen:
	if there is an item of obj in the Table of Things Stolen:
		choose the row with item of obj in the Table of Things Stolen;
		if there is no stolen-flag entry or the stolen-flag entry is 0:
			now the stolen-flag entry is 1.

To decide whether (obj - thing) has/have been stolen:
	if there is an item of obj in the Table of Things Stolen:
		choose the row with item of obj in the Table of Things Stolen;
		if there is a stolen-flag entry and the stolen-flag entry is 1, decide yes;
		decide no;
	decide no.

To decide which number is the count of stolen things:
	let N be 0;
	repeat through the Table of Things Stolen:
		if the stolen-flag entry is 1:
			increment N;
	decide on N.
	
Section 5 - Litigiously

Nighttime ends litigiously when Officer Raphael is in Entryway.

Police En Route is a scene. Police En Route begins when 911-texted is true. Police En Route ends when Nighttime ends.

When Police En Route begins:
	sirens sound in 20 minutes from now;
	police arrive in 28 minutes from now;
	police announce themselves in 29 minutes from now.
	
At the time when sirens sound: say "You will hear the whoop of a police siren on the street below. They will be near. You'll only have to hold out a little longer."

At the time when police arrive: now Officer Raphael is in down-the-hall.

At the time when police announce themselves: say "A loud voice will call 'POLICE!' from the hallway. Then, 'I'M COMING IN!'"

This is the Raphael barges in rule:
	if Officer Raphael is not in green room:
		have Officer Raphael plan an action for being-in with Officer Raphael and Entryway.
		
The Raphael barges in rule is listed after the advance time rule in the turn sequence rules.

When Nighttime ends litigiously:
	record "Ending IV: Police intervened" as an ending;
	say "A police officer will barge into the apartment and subdue the intruder. In your mind, she will be a woman. You choose not to consider the chance that she will mistake you for the criminal, or that she will enact any extrajudicial violence on either of you. But even if everything goes perfectly, your troubles will not yet be over.
	
	Your situation will have changed: you'll no longer be a victim in mortal danger, but instead a woman going by a false name with a police officer in her apartment. You've talked your way out of tricky situations before, but this will be quite the hill to climb.
	
	Do you consider this an acceptable outcome? > [run paragraph on]";
	if the player consents:
		follow the enact the plan rule;
	otherwise:
		follow the lukewarm reject the plan rule.
	
Section 6 - Murderously & Criminally

Carry out assaulting the intruder with: if the second noun is deadly, now the intruder is dead.

Report assaulting the intruder with a charging cable:
	say "You will sneak up behind him and, quick as a viper, wrap [the second noun] around his neck. He will have size and strength, but you will have the element of surprise and the ability to breathe.
	
	It will not be quick[unicode 8212]you know, even if only intellectually, that real-life suffocation is nothing like it is in the movies. He will write and buck and choke. Blood vessels in his eyes will burst. His hands will grasp and claw at yours, at the cable, at his own face. Your arms will burn and your temple will throb, but you will have no choice but to hold strong.
	
	And then finally, he will be still."

Report assaulting the intruder with the chef's knife: follow the stabbing rule.
Report assaulting the intruder with the paring knife: follow the stabbing rule.

This is the stabbing rule:
	if potentially-ranged is true:
		say "You will line up your shot and throw [the second noun]. It will bounce off of his back point-first, making only the smallest of cuts. He will wheel around with a cry of outrage, but you will already be racing forward. You will retrieve the knife from the ground and thrust it upwards, under his ribs.
		
		You will let go of the handle as he bends over double, some important organ ruptured by the knife. His eyes will lock with yours. This time, though, it will be over for [i]him[/i]. The life will drain from him quickly as his blood seeps out around the blade.
		
		His face will be a mask of shock, but he will make no more noise. He will go limp, collapsing to the floor, and lay still.";
	otherwise:
		say "You will sneak up behind him, brandishing [the second noun]. As silently as you can, you will take him by the shoulder and thrust the knife into his back.
		
		You know it's likely to catch on his ribs, and you know that it will still surprise you when it does. Still, you trust adrenaline to help you wrench it back out. He will cry out only once it leaves his body, then wheel around to face you. His eyes will lock with yours. This time, though, it will be over for [i]him[/i]. You will adjust your grip and plunge the knife into his heart.
		
		His face will be a mask of shock, but he will make no more noise. He will go limp, sliding off of the knife and onto the floor, and lay still."
		
Report assaulting the intruder with the meat cleaver:
	if potentially-ranged is true:
		say "You will line up your shot and throw meat cleaver. It will bounce off of his back, not doing much damage. He will wheel around with a cry of outrage, but you will already be racing forward. You will retrieve the cleaver from the ground and swing it into the back of his knee.
		
		He will crumple to one side even as you draw back and swing again, the blade biting into his neck. Warm blood will spurt over your hand as you hack and hack and hack, deepening the wound. This time, though, it will be over for [i]him[/i]. The life will drain from him quickly as his blood spurts from the gash in his neck.
		
		His face will be a mask of shock, but he will make no more noise. He will go limp, collapsing to the floor, and lay still.";
	otherwise:
		say "You will sneak up behind him, brandishing the meat cleaver. As silently as you can, you will take him by the shoulder and swing the knife into his neck.
		
		You know it will stick a bit in the meat, and you know that it will still surprise you when it does. Still, you trust adrenaline to help you wrench it back out. He will gurgle as it leaves his body, but already will be losing too much blood to do much of anything. You will hack and hack and hack until, finally, you will take his head clean off.
		
		The rest of his body will collapse to the floor, as you hold the head up by the hair. You will turn it towards you. The face will be a mask of shock, the eyes wide and the mouth slack. This time, it will be over for [i]him[/i]."

Report assaulting the intruder with the taser:
	say "You will sneak up behind the intruder, quietly as you can. Once you're in range, you will stick the taser into his neck and switch it on.
	
	His body will seize. You will keep the taser pressed to his neck. His mouth will foam. You will keep the taser right there. You will hold it there until his muffled groans stop, even as his body continues to twitch. Only once you're sure he's good and dead will you let him crumple to the ground."

Report assaulting the intruder with the screwdriver:
	now potentially-ranged is true;
	say "You will sneak up behind the intruder, quietly as you can. Once you're right behind him, you will slip the screwdriver from your back pocket and stab it into his neck.
		
	Blood will spurt from the wound with surprising force. It will coat your face and hands, thick and hot. He will try to scream, but the noise will turn to a gurgle as the blood seeps into his windpipe. He will turn, grasping at the handle but unable to remove it.
	
	His eyes will lock with yours. This time, though, it will be over for [i]him[/i]. They will roll back into his head as he collapses to the floor, twitching. Finally, he will lie still."
	
Report assaulting the intruder with the pillow:
	say "With a roar, you will rush him. He will have the size advantage, but you will have the element of surprise. You will knock him prone and press the pillow to his face.
	
	He will buck and thrash, but you will pin his arms with your knees. The gun will discharge, but miss. It will be so, so hard to hold him down until he falls still, but you will have to.
	
	When you remove the pillow, his lips will be tinged blue. His hand will be frozen curled into claws. His eyes will be wide and full of anger, even in death."

[Report assaulting the intruder with the umbrella:
	if potentially-ranged is true:
		say ".";
	otherwise:
		say "."]

Instead of assaulting the intruder with the stove: try assaulting the intruder with the burners.
Report assaulting the intruder with the burners:
	say "With a roar, you will race up to him. He will have size and strength, but you will have the element of surprise. You will tackle him bodily and slam his face down onto the stovetop.
	
	Your nose will be immediately accosted by the smell of burning flesh. The intruder will scream and thrash, but you will brace your legs against the counter opposite and hold him down.";
	if the number of visible knives > 0:
		let appropriate-knife be a random visible knife;
		let knife-holder be the holder of appropriate-knife;
		now the player carries appropriate-knife;
		now potentially-bloody is true;
		now potentially-ranged is true;
		now the murder weapon is appropriate-knife;
		say "The pain will weaken him and may eventually lead to his death, but no way will they kill him outright. Glancing around the kitchen, you will see [an appropriate-knife] [if knife-holder is a room]discarded on the floor[otherwise][in-on knife-holder][end if]. You will wait for an opportune moment, then surge [if knife-holder is a room]down [end if]to grab it.
		
		As he's still reeling and struggling to stand up, you will take him by the shoulder and plunge [the appropriate-knife] into his chest. You know it's likely to catch on his ribs, and you know that it will still surprise you when it does. Still, you will remove the knife, adjust the angle, and plunge it home.
		
		His eyes will lock with yours. This time, though, it will be over for [i]him[/i]. He will collapse onto the floor, and lie still.";
	otherwise if the player carries the screwdriver:
		now potentially-bloody is true;
		now potentially-ranged is true;
		now the murder weapon is the screwdriver;
		say "The pain will weaken him and may eventually lead to his death, but no way will they kill him outright. Still holding his head down, you will pull the screwdriver from your back pocket and stab it into his neck.
		
		Blood will spurt from the wound with surprising force. It will coat your face and hands, thick and hot. His screams will turn to gurgles as it seeps into his windpipe. He will thrash a moment longer, but his strength will soon wane. Finally, he will lie still.";
	otherwise:
		say "You will hold him there until his skin melts. You will hold him there until his screams cease. You will hold him there until he stops twitching, and then you will let his body slide to the floor."

Report assaulting the intruder with the gun:
	say "You will take careful aim. Beathe in, breathe out, and squeeze.
	
	The rapport will be impossibly loud. Your ears will ring in the moments after, and it will certainly draw the attention of any awake neighbors. But it will only take one shot."
	
The no pushing the intruder rule does nothing when the location is Main-Behind-Shelf and the windows are shattered.
The can't push people rule does nothing when the location is Main-Behind-Shelf and the windows are shattered.

intruder-pushed is a truth state that varies. intruder-pushed is false.

Carry out pushing the intruder:
	now intruder-pushed is true;
	now the intruder is dead.

First report pushing the intruder:
	say "With a roar, you will race up to him and give him a hard shove. His eyes will go wide, his arms pinwheeling comically as he tries to keep his balance. Ultimately, he will fail, and with a long scream he will plummet from the window.
	
	You will peer out of the window and catch the very end of his fall. You will see his body impact on the sidewalk and hear the thud. You will see the initial spray of gore from his head, and watch as blood pools from under his body. He will not move again." instead.

Nighttime ends murderously when the intruder is dead and 911-texted is false.

When Nighttime ends murderously:
	record "Ending V: Murdered the intruder" as an ending;
	if intruder-pushed is false:
		follow the intro murder rule;
	otherwise:
		follow the intro pushed rule;
	say "As for the ones who sent him... they will be a problem for the morning, when Brookwood is around to help you plan. For tonight, you'll need to clean up, re-secure the apartment, and get some much-needed rest.
	
	Do you consider this an acceptable outcome? > [run paragraph on]";
	if the player consents:
		follow the enact the plan rule;
	otherwise:
		follow the lukewarm reject the plan rule.
		
This is the intro murder rule:
	say "You will stand over the corpse, [if the murder weapon is the meat cleaver]its head[otherwise][the murder weapon][end if] still [if potentially-ranged is true]buried in its flesh[otherwise]clutched in your hand[end if].
	
	You will have done it. You will have survived, and killed the man that knew who and where you were.";
	say line break.
	
This is the intro pushed rule:
	say "You will stand before the windows, staring down at that still form for a long, long time.
	
	You will have done it. You will have survived, and killed the man that knew who and where you were.";
	say line break.
	
Nighttime ends criminally when the intruder is dead and 911-texted is true.

When Nighttime ends criminally:
	record "Ending VI: Murdered the intruder and alerted the police" as an ending;
	follow the intro murder rule;
	say "As for the ones who sent him... they will be a problem for the morning, when Brookwood is around to help you plan.
	
	For tonight, your problem will be the police. Your situation will have changed: you'll no longer be a victim in mortal danger, but instead a woman going by a false name with a [if intruder-pushed is false]corpse in her apartment[otherwise]broken window and a man who fell from it lying dead on the street below[end if]. You've talked your way out of tricky situations before, but this will be quite the hill to climb.
	
	Do you consider this an acceptable outcome? > [run paragraph on]";
	if the player consents:
		follow the enact the plan rule;
	otherwise:
		follow the reject the plan rule.
		
Chapter 3 - Secret endings
	
Section 1 - Jumping from the window

player-jumped is a truth state that varies. player-jumped is false.

Check jumping during Nighttime (this is the convert from jumping to jumping out of the windows rule):
	if the location is Main-Behind-Shelf and the windows are shattered:
		now player-jumped is true.
		
The report jumping rule does nothing when player-jumped is true.

After reading a command (this is the simplify jumping out the windows rule):
	if the location is Main-Behind-Shelf and the windows are shattered:
		if the player's command includes "jump" or the player's command includes "leap" or the player's command includes "skip" or the player's command includes "hop" or the player's command includes "fall":
			change the text of the player's command to "jump".

Nighttime ends desperately when player-jumped is true.

When Nighttime ends desperately:
	unless the intruder is around:
		say "The intruder will race around the corner just as you step out of the window and into freefall. [nobr]";
	otherwise:
		say "Before you can think too hard about it, you will step out of the window and into freefall. [nobr]";
	say "The wind will whip through your hair and cause tears to stream from your eyes as you fall one story, then three, then five.
	
	It will occur to you only as you're about to hit the ground that this result will be functionally no different than being slaughtered in your bed, but by that point it will be too late. Seven stories don't care whether you regret it or not.
	
	You are not going to die tonight. There must be a better way. You will find a better way.";
	say line break;
	say "[i](Secret ending I: Freefall)[/i]";
	say paragraph break;
	say "[i][bracket]Press any key to restart the night.[close bracket][/i]";
	wait for any key;
	record "Secret ending I: Freefall" as an ending;
	clear only the main screen;
	autorestore the game.

Section 2 - Recognizing the intruder

Recognizing is an action applying to one thing. Understand "recognize [any thing]" or "recognise [any thing]" or "identify [any thing]" as recognizing.

Rule for reaching inside a room while recognizing (this is the allow distant recognizing rule):
	allow access.

Check recognizing:
	unless the noun is the intruder:
		if the noun is visible, try examining the noun instead;
		otherwise try remembering the noun instead.
		
Check recognizing the intruder:
	if intruder-inside is false:
		take no time;
		say "He won't yet have gotten inside, so you won't have had the chance to get a good look at him." instead.
		
The intruder can be recognized or unrecognized. The intruder is unrecognized.

Carry out recognizing the intruder: now the intruder is recognized.

Nighttime ends awkwardly when the intruder is recognized.

When Nighttime ends awkwardly:
	say "Wait a second.";
	say line break;
	if the intruder is around:
		say "You'll suddenly recognize something about the intruder. Something about the posture, the set of the jaw. Something you'll have seen in a photo, on a real estate website.";
	otherwise:
		say "Something about the intruder will click into place. Something about the way they'll have moved, about the posture, the set of the jaw.";
	say line break;
	if the player is perfectly concealed:
		say "You'll come out of hiding, facing the intruder head-on. 'Camille?' you'll say. 'Camille Harmon?'";
	otherwise if the posture of the player is not standing:
		say "You'll stand up and face the intruder head-on. 'Camille?' you'll say. 'Camille Harmon?'";
	otherwise:
		say "'Camille?' you'll say. 'Camille Harmon?'";
	say line break;
	say "She will jump, startled, and whirl around to face you. Hurriedly, your landlady will lower her hood, revealing her bony face, her auburn hair pulled back in a loose bun. She'll be a small woman[unicode 8212]not nearly the towering, wiry menace you will have been imagining.
	
	'Miss DeCesare!' she'll reply, a notable quaver in her voice. 'I didn't think you were staying here tonight.'
	
	'What are you doing here?' you'll ask, doing your best to keep your own voice steady.
	
	'I just-' she will consider what to say. 'I don't sleep much, and I remembered there were reports of some potential broken glass in the unit, and I just wanted to make sure it was all tidied up for you. I didn't think you would be sleeping here until tomorrow.'
	
	'Yeah, I swept that up earlier,' you will reply.
	
	'Oh! I see,' she'll say. 'Well, then I'd better...' and then, abruptly, she will leave.
	
	You let the fantasy end there, because you know fantasy is all it is. [nobr]";
	if Bed Sought is true:
		say "The intruder's behavior prior to that point won't line up with that story, and Camille would have no reason (as far as you know) to behave the way the intruder will; therefore, it can't be her outside of your door.";
	otherwise:
		say "Even if what she'd say is true, no human being would actually behave that way for that reason. Besides, Camille wouldn't need to pick the lock: she has a key. It can't be her outside of your door.";
	say line break;
	say "You're still in danger, and you can't rely on a deus ex machina to save you. You need to stop messing around, and make a plan for real.";
	say line break;
	say "[i](Secret ending II: A different kind of intrusion)[/i]";
	say paragraph break;
	say "[i][bracket]Press any key to restart the night.[close bracket][/i]";
	wait for any key;
	record "Secret ending II: A different kind of intrusion" as an ending;
	clear only the main screen;
	autorestore the game.
	
Section 3 - Safewording

Safewording is an action applying to nothing. Understand "safeword" or "say safeword" or "safe word" or "say safe word" as safewording.

Check safewording (this is the difficult to stop play before it's begun rule):
	if it's Daytime:
		take no time;
		say "You have no reason to do that right now." (A) instead.

safeword-said is a truth state that varies. safeword-said is false.

Carry out safewording: now safeword-said is true.

Nighttime ends consentually when safeword-said is true.

When Nighttime ends consentually:
	say "You will call out your pre-arranged safeword. [nobr]";
	if intruder-inside is false and the front door is closed:
		say "The noises on the other side of the door will stop immediately.
		
		'Are you alright?' the man on the other side of the door will call.
		
		'Yeah,' you'll respond. 'It's just not working for me the way I hoped it would. Nothing you did, I promise.'
		
		'Okay, yeah,' the voice will reply. 'Should I...?'
		
		'I'm tired,' you'll call, cutting him off.";
	otherwise:
		if the intruder is not around:
			say "The lights will flick on, before the 'intruder' appears around the corner, his hood down. [nobr]";
		otherwise:
			say "The 'intruder' will freeze, then lower his hood. He'll go to flick on the lights before returning. [nobr]";
		say "With the benefit of overhead lighting, you'll see he doesn't much resemble his picture.
		
		'Are you alright?' he'll ask.
		
		'Yeah,' you'll respond. 'It's just not working for me the way I hoped it would. Nothing you did, I promise.'
		
		'Okay, yeah,' he'll reply. 'Should I...?'
		
		'I'm tired,' you'll say, cutting him off.";
	say line break;
	say "'Yeah, sure,' he'll say. 'I guess I'll see you around.' And then he'll leave.
	
	If only. If only this were some sexy roleplay and not a life-or-death situation. As fun as it is to fantasize, now is the time to plan.";
	say line break;
	say "[i](Secret ending III: Blue-balled)[/i]";
	say paragraph break;
	say "[i][bracket]Press any key to restart the night.[close bracket][/i]";
	wait for any key;
	record "Secret ending III: Blue-balled" as an ending;
	clear only the main screen;
	autorestore the game.
	
[TODO:
Secret ending IV: A Room In Which There Are No Others
Secret ending V: Croatoan
Secret ending VI: Seduce Intruder
Secret ending VII: Bribe intruder]

Chapter 4 - Action descriptions for endings
	
Actiondesc1 is some text that varies. Actiondesc1 is "".
Actiondesc2 is some text that varies. Actiondesc2 is "". [For describing the first two things you did for the ending]

[FORMAT: You (actiondesc1), then (actiondesc2)]

First carry out exiting during Nighttime (this is the exiting actiondesc rule):
	if the actor is the player:
		if actiondesc1 is "":
			now actiondesc1 is "slip out of bed";
		otherwise if actiondesc2 is "":
			now actiondesc2 is "slip out of [holder of the player]";
		
First carry out getting off during Nighttime (this is the getting off actiondesc rule):
	if the actor is the player:
		if actiondesc1 is "":
			now actiondesc1 is "slip out of bed";
		otherwise if actiondesc2 is "":
			now actiondesc2 is "slip out of [holder of the player]";
		
Last carry out entering underneath during Nighttime (this is the entering underneath actiondesc rule):
	if the actor is the player:
		if actiondesc1 is "":
			now actiondesc1 is "hide under the bed";
		otherwise if actiondesc2 is "":
			if actiondesc1 matches the text "slip":
				now actiondesc2 is "hide under it";
			otherwise:
				now actiondesc2 is "hide under the bed";
		
Carry out examining during Nighttime (this is the examining actiondesc rule):
	if the actor is the player:
		if actiondesc1 is "":
			now actiondesc1 is "glance at [the noun]";
		otherwise if actiondesc2 is "":
			if actiondesc1 matches the text "glance":
				now actiondesc2 is "at [the noun]";
			otherwise:
				now actiondesc2 is "glance at [the noun]";
			
Carry out opening during Nighttime (this is the opening actiondesc rule):
	if the actor is the player:
		if actiondesc1 is "":
			now actiondesc1 is "open [the noun]";
		otherwise if actiondesc2 is "":
			if actiondesc1 matches the text "open":
				now actiondesc2 is "[the noun]";
			otherwise:
				now actiondesc2 is "open [the noun]";
			
Carry out closing during Nighttime (this is the closing actiondesc rule):
	if the actor is the player:
		if actiondesc1 is "":
			now actiondesc1 is "close [the noun]";
		otherwise if actiondesc2 is "":
			if actiondesc1 matches the text "open":
				now actiondesc2 is "close it";
			otherwise if actiondesc1 matches the text "close":
				now actiondesc2 is "[the noun]";
			otherwise:
				now actiondesc2 is "close [the noun]";
			
Last carry out taking during Nighttime (this is the taking actiondesc rule):
	if the actor is the player:
		if actiondesc1 is "":
			now actiondesc1 is "grab [the noun]";
		otherwise if actiondesc2 is "":
			if actiondesc1 matches the text "grab":
				now actiondesc2 is "[the noun]";
			otherwise:
				now actiondesc2 is "grab [the noun]";
			
Last carry out going during Nighttime (this is the going actiondesc rule):
	if the actor is the player:
		if actiondesc1 is "":
			if the location is Main-By-Counter:
				now actiondesc1 is "head towards the counter";
			otherwise if the location is Main-Behind-Shelf:
				now actiondesc1 is "slip behind the bookshelf";
		otherwise if actiondesc2 is "":
			if the location is Main-By-Counter:
				now actiondesc2 is "head towards the counter";
			otherwise if the location is Main-Behind-Shelf:
				if actiondesc1 matches the text "slip":
					now actiondesc2 is "hide behind the bookshelf";
				otherwise:
					now actiondesc2 is "slip behind the bookshelf";
			otherwise if the location is Main-Bed:
				now actiondesc2 is "back by your bed";
			otherwise if the location is Main-Sitting:
				now actiondesc2 is "out into the sitting area";
			otherwise if the location is Main-Office:
				now actiondesc2 is "over to your office area";
			
Last carry out taking position during Nighttime (this is the position actiondesc rule):
	if the actor is the player:
		if actiondesc1 is "":
			if the posture of the player is crouched:
				now actiondesc1 is "crouch down";
			otherwise if the posture of the player is standing:
				now actiondesc1 is "stand up";
			otherwise if the posture of the player is seated:
				if the holder of the player is the location:
					now actiondesc1 is "sit down";
				otherwise:
					now actiondesc1 is "sit down [in-on holder of the player]";
			otherwise if the posture of the player is reclining:
				if the holder of the player is the location:
					now actiondesc1 is "lie down";
				otherwise:
					now actiondesc1 is "lie down [in-on holder of the player]";
		otherwise if actiondesc2 is "":
			if the posture of the player is crouched:
				now actiondesc2 is "crouch down";
			otherwise if the posture of the player is standing:
				now actiondesc2 is "stand up";
			otherwise if the posture of the player is seated:
				if the holder of the player is the location:
					now actiondesc2 is "sit down";
				otherwise:
					now actiondesc2 is "sit down [in-on holder of the player]";
			otherwise if the posture of the player is reclining:
				if the holder of the player is the location:
					now actiondesc2 is "lie down";
				otherwise:
					now actiondesc2 is "lie down [in-on holder of the player]";
			
[Last every turn during Nighttime:
	say "action 1: [actiondesc1]";
	say line break;
	say "action 2: [actiondesc2]".]
	
Book 4 - Atmosphere

Part 1 - High level rules and values

Atmosphere-appropriate is a truth state that varies. Atmosphere-appropriate is false.

At 9:01 AM (this is the allow atmosphere rule): now atmosphere-appropriate is true.

Atmos is a number that varies. Atmos is 0.

Every turn (this is the make atmosphere happen rule):
	if atmosphere-appropriate is true:
		follow the master atmosphere rules.
		
The master atmosphere rules are a rulebook.

The first master atmosphere rule (this is the atmosphere only happens sometimes rule):
	if a random chance of 1 in 8 succeeds, make no decision;
	rule fails.
	
A master atmosphere rule (this is the randomize atmosphere rule):
	now atmos is a random number between 1 and 10;
	make no decision.
	
A master atmosphere rule (this is the choose appropriate atmosphere rule):
	if Nighttime is happening:
		follow the night atmosphere rule;
	otherwise:
		follow the day atmosphere rule.
		
Part 2 - Daytime atmosphere

This is the day atmosphere rule:
	choose row with an index of atmos in the Table of Day Atmosphere Results;
	say "[result entry][br]".
	
Table of Day Atmosphere Results
index	result
1	"You hear a [if a random chance of 3 in 4 succeeds]siren in the distance[otherwise]helicopter fly by[end if]."
2	"A car alarm goes off [one of]one street over[or]down on the street[or]somewhere nearby[as decreasingly likely outcomes][if a random chance of 1 in 2 succeeds], before being quickly quelled[otherwise][quell shortly][end if]."
3	"Someone shouts indistinctly on the street below."
4	"You hear the footsteps of the tenant above you."
5	"A motorcycle roars by on the street below."
6	"Water rushes through the pipes in your wall."
7	"You are [i]so[/i] exhausted."
8	"A car drives by on the street below, blasting music far too loudly."
9	"Someone walks past your door out in the hallway."
10	"You miss your parents."
	
To say quell shortly:
	now atmosphere-appropriate is false;
	repeat with loc running through rooms:
		increase the ambient noise of loc;
	the alarm continues in 1 minute from now;
	the alarm is quelled in 2 minutes from now.
	
At the time when the alarm continues:
	say "The car alarm [adapt the verb continue from the third person singular]."

At the time when the alarm is quelled:
	say "The car alarm [if it's Daytime]abruptly stops[otherwise]will abruptly stop[end if].";
	repeat with loc running through rooms:
		decrease the ambient noise of loc;
	now atmosphere-appropriate is true.

Part 3 - Nighttime atmosphere

This is the night atmosphere rule:
	choose row with an index of atmos in the Table of Night Atmosphere Results;
	say "[result entry][br]".
	
Table of Night Atmosphere Results
index	result
1	"[one of]A few streets over[or]One street over[or]Somewhere nearby[as decreasingly likely outcomes], a car horn will honk."
2	"A blast of rock music will briefly grow audible as someone leaves a bar down the street."
3	"Your pulse will pound in your ears."
4	"Maybe it'll be raining."
5	"You will hear a burst of laughter from a party on the floor below."
6	"You will hear a helicopter fly by."
7	"A car alarm will go off [one of]one street over[or]down on the street[or]somewhere nearby[as decreasingly likely outcomes][if a random chance of 1 in 2 succeeds], before being quickly quelled[otherwise][quell shortly][end if]."
8	"You will hear water rush through the pipes in your wall."
9	"Your hands will shake."
10	"You miss your parents."

Volume 4 - Virus

Book 1 - The man

Chapter 1 - He himself

The intruder is a man in the green room. Understand "robber/theif" or "murderer/killer" as the intruder. The bulk-capacity of the intruder is 1000.
The description of the intruder is "He will be large. Not bulky, but wiry. Lithe. [if the hoodie-hood is hood-up]His hood will be up, his face obscured. He won't be anyone you've seen before, anyway[otherwise]His hood will be down by that point, his face revealed. Said face will be unremarkable[unicode 8212]no one you know[end if].

He will[first time], of course,[only] be wearing all black: hoodie, jeans, boots. He will have a burlap rucksack in one hand and a gun at his hip."

A ranking rule for the intruder: 
	increase description-rank of the intruder by 8.

Instead of remembering the intruder during Daytime: say "[no time]You aren't yet aware of anyone you'd describe as an intruder."

Check remembering the intruder:
	if intruder-inside is false:
		say "He'll be right outside your front door." instead;
	otherwise if the remembered location of the intruder is nothing:
		say "You'll know he's in the apartment, but won't be quite sure where." instead.
		
First before showing yourself to the intruder: abide by the absolutely not rule.

Before attacking or burning or cutting the intruder:
	take no time;
	say "You won't be able to do much with your bare hands. If you want to try using something as a weapon, you can ATTACK the intruder WITH it." instead.

Instead of emptying the intruder: abide by the absolutely not rule.
Instead of giving something to the intruder: abide by the absolutely not rule.
Instead of kissing or tasting or hugging the intruder: say "[no time]He won't be attractive."
Instead of listening to the intruder: now player-listening is true.
Instead of pulling or turning the intruder: abide by the absolutely not rule.
Instead of pushing the intruder (this is the no pushing the intruder rule): abide by the absolutely not rule.
Instead of pushing the intruder to: abide by the absolutely not rule.
Instead of rubbing or touching or squeezing the intruder: abide by the absolutely not rule.
Instead of searching the intruder: abide by the no detection rule.

Instead of showing something to the intruder:
	if the noun is deadly:
		if the intruder is in the location:
			try assaulting the intruder with the noun;
		otherwise:
			try throwing the noun at the intruder;
	otherwise:
		take no time;
		say "It would probably be better not to draw his attention to you."

Instead of smelling the intruder: say "[no time]You doubt he'll smell good."

Check throwing something at the intruder:
	unless the noun is deadly or the noun is incapacitating:
		take no time;
		say "That would likely be ineffective." instead.

Check tying something to the intruder: unless the noun is a charging cable, abide by the no detection rule.

Instead of verbal behavior when the current action involves the intruder: abide by the absolutely not rule.

This is the absolutely not rule:
	take no time;
	say "That would be a great way to ensure he catches you. Absolutely not." instead.

This is the no detection rule:
	take no time;
	say "There's no way you could do that undetected. Absolutely not." instead.

Rule for disclosing contents of the intruder while looking: do nothing.

After reading a command:
	unless the player's command matches "push intruder":
		if the player's command includes "push intruder":
			change the text of the player's command to "push intruder".

Chapter 2 - Things worn

A description-concealing rule (this is the don't mention the intruder's possessions rule): 
	now everything enclosed by the intruder is not marked for listing.

The intruder wears the black hoodie. Understand "sweatshirt" as the black hoodie.
The description of the black hoodie is "It will [one of][hoodie-also][or][gen-also][stopping]be black. The hood will be [if the hoodie-hood is hood-up]perpetually up, obscuring the intruder's face[otherwise]down[end if]."

Instead of remembering the black hoodie: say "[The intruder] [are] wearing that."

Instead of looking behind or looking under the black hoodie: abide by the no detection rule.
Instead of opening or closing the black hoodie: abide by the no detection rule.
Instead of placing something under the black hoodie: try giving the noun to the intruder.
Instead of taking the black hoodie: abide by the absolutely not rule.

To say hoodie-also:
	if the dark jeans are examined and the combat boots are examined:
		say "[i]also[/i] ";
	otherwise if the dark jeans are examined or the combat boots are examined:
		say "also ";
	otherwise:
		do nothing.
		
To say gen-also:
	if the number of examined things worn by the intruder > 1, say "also ";
	otherwise do nothing.

A hoodie-pocket is a pocket. It is part of the black hoodie. The printed name of the hoodie-pocket is "hoodie's pocket". Understand "hoodie's/hoodies pocket/pockets" or "black hoodie's/hoodies pocket/pockets" as the hoodie-pocket.

After starting the virtual machine (this is the redirect from its pocket to the hoodie rule):
	dispatch everything but { examining action, consulting it about action, emptying action, entering action, giving it to action, looking behind action, looking under action, searching action, inserting it into action, opening action, closing action, placing it under action, pulling action, pushing action, turning action, pushing it to action, putting it on action, removing it from action, showing it to action, stowing it behind action, taking action, throwing it at action, remembering action } for the hoodie-pocket to the black hoodie;
	
Instead of remembering the hoodie-pocket: say "[regarding the noun][Those] [are] part of the intruder's hoodie."
	
The hoodie-hood is part of the black hoodie. The printed name of the hoodie-hood is "hood". Understand "hood" as the hoodie-hood.
The description of the hoodie-hood is "[The hoodie-hood] [are] [if hood-up]up, obscuring the intruder's face[otherwise]down, resting on the intruder's shoulders[end if]."
The hoodie-hood can be hood-up or hood-down. The hoodie-hood is hood-up.

After starting the virtual machine (this is the redirect from its hood to the hoodie rule):
	dispatch everything but { examining action, looking behind action, looking under action, searching action, opening action, closing action, pulling action, pushing action, turning action, pushing it to action, removing it from action, taking action, remembering action } for the hoodie-hood to the black hoodie;
	
Instead of remembering the hoodie-hood: say "[regarding the noun][Those] [are] part of the intruder's hoodie."
	
Instead of looking behind or looking under or searching the hoodie-hood:
	if the hoodie-hood is hood-down:
		say "The hood will be down on the intruder's shoulders, and thus won't be obscuring anything.";
	otherwise:
		say "You won't be able to make out any of the intruder's facial features under the hood."

Instead of opening or closing or pulling or pushing or turning or taking off the hoodie-hood: abide by the no detection rule.
Instead of pushing the hoodie-hood to: try pushing the hoodie-hood.
Instead of removing the hoodie-hood from: try taking the hoodie-hood.
Instead of removing something from the hoodie-hood: try taking the noun.
Instead of taking the hoodie-hood: abide by the absolutely not rule.

The intruder wears some dark jeans. Understand "pants" or "trousers" as the dark jeans.
The description of the dark jeans is "They will [one of][jeans-also][or][gen-also][stopping]be black. Not faded at all[unicode 8212]maybe they'll be new, all the better to leave no evidence behind."

Instead of remembering the dark jeans: say "[The intruder] [are] wearing those."

Instead of looking behind or looking under the dark jeans: abide by the no detection rule.
Instead of opening or closing the dark jeans: abide by the no detection rule.
Instead of placing something under the dark jeans: try giving the noun to the intruder.
Instead of taking the dark jeans: abide by the absolutely not rule.

To say jeans-also:
	if the black hoodie is examined and the combat boots are examined:
		say "[i]also[/i] ";
	otherwise if the black hoodie is examined or the combat boots are examined:
		say "also ";
	otherwise:
		do nothing.

Some jeans-pockets are a pocket. They are part of the dark jeans. The printed name of the jeans-pockets is "jeans pockets".

After starting the virtual machine (this is the redirect from their pockets to the jeans rule):
	dispatch everything but { examining action, consulting it about action, emptying action, entering action, giving it to action, looking behind action, looking under action, searching action, inserting it into action, opening action, closing action, placing it under action, pulling action, pushing action, turning action, pushing it to action, putting it on action, removing it from action, showing it to action, stowing it behind action, taking action, throwing it at action, remembering action } for the jeans-pockets to the dark jeans;
	
Instead of remembering the jeans-pockets: say "[regarding the noun][Those] [are] part of the intruder's jeans."
	
Report an actor inserting something into the jeans-pockets (this is the custom report inserting into the jeans pockets rule):
	if the actor is the player and the action is not silent:
		say "[We] [put] [the noun] into a jeans pocket." (A) instead.

The custom report inserting into the jeans pockets rule is listed after the concise report inserting rule in the report inserting it into rules.

The intruder wears some combat boots. Understand "shoes" as the combat boots.
The description of the combat boots is "They will [one of][boots-also][or][gen-also][stopping]be black. Functional, not fashionable. Almost certainly steel-toed."

Instead of remembering the combat boots: say "[The intruder] [are] wearing those."

Instead of looking behind or looking under the combat boots: abide by the no detection rule.
Instead of opening or closing the combat boots: abide by the absolutely not rule.
Instead of taking the combat boots: abide by the absolutely not rule.

To say boots-also:
	if the black hoodie is examined and the dark jeans are examined:
		say "[i]also[/i] ";
	otherwise if the black hoodie is examined or the dark jeans are examined:
		say "also ";
	otherwise:
		do nothing.

Chapter 3 - Things carried

The rucksack is a container. It is openable, closed, and eclipsing. The intruder carries the rucksack. Understand "sack" or "bag" as the rucksack. The bulk-capacity of the rucksack is 1000.
The description of the rucksack is "You have some idea it will be made of burlap, but all that matters is that it will be able to hold all of your stolen possessions."

A ranking rule for the rucksack: 
	decrease description-rank of the rucksack by 10.

Check closing the rucksack: if the intruder encloses the rucksack, abide by the no detection rule.
Check opening the rucksack: if the intruder encloses the rucksack, abide by the no detection rule.

Instead of remembering the rucksack: say "[The intruder] [are] carrying it."

Instead of giving something to the rucksack: try inserting the noun into the rucksack.
Instead of looking behind or looking under the rucksack: try searching the rucksack.
Instead of placing something under the rucksack: try inserting the noun into the rucksack.
Instead of putting something on the rucksack: try inserting the noun into the rucksack.
Instead of stowing something behind the rucksack: try inserting the noun into the rucksack.

A description-concealing rule (this is the don't need to be informed of the rucksack's contents rule):
	repeat with obj running through things enclosed by the rucksack:
		now obj is not marked for listing.

Instead of remembering or examining or attacking or burning or cutting or drinking or eating or tasting or emptying or kissing or pulling or pushing or turning or rubbing or touching or squeezing or smelling or swinging or waving or taking off or turning or wearing or knocking on something enclosed by the rucksack: say "[regarding the noun][Those] will have been put into the rucksack and lost to you."

The burlap is a material. The burlap is part of the rucksack.
The description of the burlap is "You have no idea [i]why[/i] the rucksack would be burlap, other than that in your mind burlap is the default material for a rucksack to be made of."

After starting the virtual machine (this is the redirect from burlap to rucksack rule):
	dispatch everything but { drinking action, eating action, examining action, kissing action, removing it from action, remembering action, tasting action, taking action } for the burlap to the rucksack;

Instead of drinking or eating or tasting or kissing the burlap: abide by the absolutely not rule.
Instead of remembering the burlap: try remembering the rucksack.
Instead of removing the burlap from: try taking the burlap.
Instead of removing something from the burlap: try taking the noun.
Instead of taking the burlap: abide by the no detection rule.

The intruder carries the gun. The gun is deadly and sharp. Understand "firearm" or "glock" or "handgun" or "revolver" or "pistol" as the gun.
The description of the gun is "A small handgun, but no less deadly for it. Your idea of what make it will be is murky, and so its form will appear amorphous to you."
The gun can be drawn. The gun is not drawn.

Instead of remembering the gun: say "[The intruder] [are] carrying it."

Check taking the gun:
	if the intruder is alive:
		take no time;
		say "There's no way he won't notice you taking his [i][unless the gun is drawn]holstered [end unless]gun[/i]." instead.
		
The holster is a metaphor. It is part of the gun.
Before doing something when the current action involves the holster: say "In your imagination, [one of]you realize[or]you've realized[stopping], there will be no holster[unicode 8212]the gun will just kind of stay in place on his hip. " instead.

The intruder carries the scrap of paper. The scrap of paper is legible.
The description of the scrap of paper is "Half of a piece of lined notebook paper, two of its edges ragged."

Instead of remembering the scrap of paper: say "[The intruder] [are] carrying it."

Report reading the scrap of paper: say "It will have your apartment number and the combination to your safe scribbled on it in a messy hand." instead.

Instead of listening to the scrap of paper: say "[no time]Papers are more traditionally read than listened to."
Instead of opening or closing the scrap of paper: say "[nnt]It [adapt the verb make from the third person singular] little difference."

Chapter 4 - Rules for things worn and carried

Instead of attacking or burning or cutting or drinking or eating or tasting or emptying or kissing or pulling or pushing or turning or rubbing or touching or squeezing or smelling or swinging or waving or taking off or turning or wearing or knocking on something enclosed by the intruder: abide by the absolutely not rule.
Instead of taking something enclosed by the intruder: abide by the no detection rule.
Instead of assaulting something enclosed by the intruder with: try assaulting the intruder with the second noun.
Instead of consulting something enclosed by the intruder about: try examining the noun.
Instead of giving something to something enclosed by the intruder: try inserting the noun into the second noun.
Instead of inserting something into something enclosed by the intruder: abide by the absolutely not rule.
Instead of pushing something enclosed by the intruder to: try touching the noun.
Instead of putting something on something enclosed by the intruder: try inserting the noun into the second noun.
Instead of removing something enclosed by the intruder from: try taking the noun.
Instead of searching something enclosed by the intruder: abide by the no detection rule.
Instead of shooting something enclosed by the intruder: try shooting the intruder.
Instead of throwing something at the something enclosed by the intruder: try throwing the noun at the intruder.
Instead of tying something to something enclosed by the intruder: abide by the absolutely not rule.

Book 2 - Values

Alert level is a kind of value. The alert levels are low, medium, and high.

The intruder has an alert level. The alert level of the intruder is medium.

The last-known locale is a position that varies.

Activity-state is a kind of value. The activity-states are standing-by, cracking-lock, fiddling-with-computer, fiddling-with-phone, checking-garbage, raiding-fridge, raiding-cabinet, on-the-hunt, on-the-move, annoyed, and collecting-valuables.

The intruder has an activity-state. The activity-state of the intruder is standing-by.
[NOTE: For debugging purposes]

The intruder can be position-aware or position-unaware. The intruder is position-unaware.
The intruder can be surroundings-aware or surroundings-unaware. The intruder is surroundings-aware.

The intruder can be ready to act, active, or finished acting. The intruder is ready to act.
[NOTE: Determines at which rule his state machine stops]

First every turn during Nighttime (this is the reset the intruder rule): now the intruder is ready to act.
	
Intruder-inside is a truth state that varies. Intruder-inside is false.

The intruder has a number called the action-repetition. The action-repetition of the intruder is 0.

The intruder has a number called the comment-repetition. The comment-repetition of the intruder is 0.

The intruder-action-num is a number that varies. The intruder-action-num is 0.

The relevant item is an object that varies. The relevant item is nothing.

The intruder can be incapacitated. The intruder is not incapacitated.

The annoyance is an object that varies. The annoyance is nothing.
The former annoyance is an object that varies. The former annoyance is nothing.

debugging-intruder is a truth state that varies. debugging-intruder is false.
To decide whether debugging the intruder:
	if debugging-intruder is true, decide yes;
	decide no.

Book 3 - Descriptions

Rule for writing a paragraph about the intruder (this is the customized intruder room description rule):
	if the location is Within-Closet and the location of the intruder is Entryway:
		do nothing;
	otherwise if the location is Entryway and the location of the intruder is Within-Closet:
		do nothing;
	otherwise if the intruder is surroundings-unaware:
		say "[The intruder] [are] there. He won't yet see you, though, because he will be absorbed [nobr]" (A);
		if the activity-state of the intruder is checking-garbage:
			say "with [one of]scouring [or]inspecting [or][at random]your garbage." (B);
		otherwise if the activity-state of the intruder is cracking-lock:
			say "with unlocking the safe." (C);
		otherwise if the activity-state of the intruder is fiddling-with-computer:
			say "with unlocking your computer." (D);
		otherwise if the activity-state of the intruder is fiddling-with-phone:
			say "with unlocking your phone." (E);
		otherwise if the activity-state of the intruder is raiding-cabinet:
			say "by the contents of the cabinet." (F);
		otherwise if the activity-state of the intruder is raiding-fridge:
			say "by the contents of your fridge." (G);
		otherwise:
			say "with his machinations." (H);
	otherwise:
		say "[The intruder] [are] there." (I);

Book 4 - Behavior

Part 1 - High-level rules

The intruder can be key-armed. The intruder is not key-armed.

When Nighttime begins (this is the bring the intruder onstage rule):
	now the intruder is in Outside Hall;
	the solution arrives in 2 turns from now.
	
At the time when the solution arrives:
	now the lockpick is in Outside Hall;
	now the intruder is key-armed.

Carry out the intruder going to Entryway during Nighttime (this is the he arrives rule):
	if the shadows are in Entryway:
		remove the shadows from play;
	if intruder-inside is false:
		streamline the search;
		now intruder-inside is true.
	
Every turn during Nighttime (this is the run the intruder state machine rule): 
	if intruder-inside is false and the time since Nighttime began > one minute:
		if the front door is locked:
			now the activity-state of the intruder is cracking-lock;
		otherwise:
			now the activity-state of the intruder is on-the-move;
		have the intruder plan an action for being-in with the intruder and Entryway;
	otherwise:
		follow the Intruder State Rules.
		
Planning when the desired relation is being-in and the desired param1 is the planning actor and the desired param2 is a room (this is the advanced travel with best route rule):
	plan 1;
	let here be the location of the planning actor;
	let way be the best route from here to the desired param2, using even locked doors;
	let the next room be the room the way from here;
	let the next door be the door the way from here;
	if the next door is a door and the next door is locked, suggest being-unlocked with the next door;
	if the next room is a room, suggest doing-going with way;
	rule succeeds;
	
The advanced travel with best route rule is listed instead of the basic travel with best route rule in the planning rules.

Planning when the desired relation is being-unlocked and the desired param1 is lockable (this is the intruder's custom unlocking rule):
	plan 1;
	suggest being-carried-by with the lockpick and the planning actor;
	suggest being-touchable-by with the desired param1 and the planning actor;
	suggest doing-unlocking-with with the desired param1 and the lockpick;
	rule succeeds;
	
The intruder's custom unlocking rule is listed instead of the basic unlocking rule in the planning rules.

Remaining Concealed is a recurring scene. Remaining Concealed begins when intruder-inside is true and the player is potentially concealed. Remaining Concealed ends unfortunately when the player is potentially concealed and the time since Remaining Concealed began is 10 minutes. Remaining Concealed ends elusively when the player is not potentially concealed.

When Remaining Concealed ends unfortunately:
	say "[one of]Numb from being still for so long, your leg will spasm and knock against the floor. There'll be no way he won't have heard it[or]You will be unable to suppress a whimper. There'll be no way he won't have heard it[or]Suddenly, your stomach will growl. It won't be very loud, but you'll know it will be enough to alert the intruder to your location[or]Your knee will knock against [the random thing incorporating the holder of the player]. There'll be no way he won't have heard that[or]Surprising yourself as much as anyone, you will let out a fart. It will only be a quiet thing, but you'll know it will be enough to alert the intruder to your location[in random order].";
	now the player is being noisy.
	
Part 2 - Definitions

Definition: a thing is perfectly concealed:
	if it is in an underside, yes;
	if it is in Kitchenette and it is obscured by the furniture-counter and the location of the intruder is neither Kitchenette nor Entryway, yes;
	if it is in behind#counter and the location of the intruder is neither Main-By-Counter nor Main-Bed nor Main-Office, yes;
	if it is in behind#boxes and the location of the intruder is not Main-Behind-Shelf, yes;
	if it is in behind#couch, yes;
	if it is obscured by the shower curtain, yes;
	if it is obscured by the plush chair and the intruder is not in Main-Office, yes;
	if it is obscured by the worn-in chair and the intruder is not in Main-Behind-Shelf, yes;
	no.
	
Definition: a thing is potentially concealed:
	if it is in an underside, yes;
	if it is in a backside, yes;
	if it is obscured by something, yes;
	no.
	
To decide whether (guy - a person) is around:
	if the location of guy is the location, decide yes;
	if the location of guy is connected with the location, decide yes;
	decide no.
	
To decide whether (guy - a person) is not around:
	if guy is around, decide no;
	decide yes.
	
To decide whether the intruder can spot (obj - a thing):
	if the location of the intruder is the location of obj and the intruder is surroundings-aware and obj is not perfectly concealed, decide yes;
	decide no.
	
To decide which position is the relevant spot:
	if the player is on the bed:
		decide on in-bed;
	if the player is in the bathtub:
		decide on in-the-tub;
	if the location is the location of the intruder or the location is connected with the location of the intruder:
		if the player is in an underside or the player is in a backside:
			decide on a random position in the holder of the player;
		otherwise:
			decide on a random position in the location;
	decide on a random position in the location.
[NOTE: Importantly, that last line means he sometimes gets it wrong!]

To decide whether the intruder is alert:
	if the alert level of the intruder is high, decide yes;
	decide no.
	
To decide whether the intruder is not alert:
	if the intruder is alert, decide no;
	decide yes.

The previous-intruder-location is a room that varies.
First carry out going rule: now the previous-intruder-location is the location of the intruder.

vase-streamlined is a truth state that varies. vase-streamlined is false.
wallet-streamlined is a truth state that varies. wallet-streamlined is false.

To streamline the search:
	if the player encloses the vase:
		now vase-streamlined is true;
		now Vase Sought is true;
	if the player encloses the wallet:
		now wallet-streamlined is true;
		now Wallet Sought is true;
		
Carry out dropping the vase: follow the return the vase to the routine rule.
Carry out inserting the vase into: follow the return the vase to the routine rule.
Carry out placing the vase under: follow the return the vase to the routine rule.
Carry out putting the vase on: follow the return the vase to the routine rule.
Carry out stowing the vase behind: follow the return the vase to the routine rule.

This is the return the vase to the routine rule:
	if wallet-streamlined is true:
		now vase-streamlined is false;
		now Vase Sought is false.

Carry out dropping the wallet: follow the return the wallet to the routine rule.
Carry out inserting the wallet into: follow the return the wallet to the routine rule.
Carry out placing the wallet under: follow the return the wallet to the routine rule.
Carry out putting the wallet on: follow the return the wallet to the routine rule.
Carry out stowing the wallet behind: follow the return the wallet to the routine rule.

This is the return the wallet to the routine rule:
	if wallet-streamlined is true:
		now wallet-streamlined is false;
		now Wallet Sought is false.

Part 3 - State machine
	
The Intruder State Rules are a rulebook.

The first Intruder State Rule (this is the intruder's first priority rule):
	follow the Intruder Hunts Rules;
	if the intruder is ready to act:
		make no decision;
	otherwise:
		rule succeeds.
		
An Intruder State Rule (this is the intruder's second priority rule):
	follow the Intruder Researches Rules;
	if the intruder is ready to act:
		make no decision;
	otherwise:
		rule succeeds.
		
An Intruder State Rule (this is the intruder's third priority rule):
	follow the Intruder Pilfers Rules;
	if the intruder is ready to act:
		make no decision;
	otherwise:
		rule succeeds.
		
The intruder's third priority rule is listed after the intruder's second priority rule in the Intruder State Rules.

An Intruder State Rule (this is the intruder's fourth priority rule):
	follow the Intruder Raids Rules;
	if the intruder is ready to act:
		make no decision;
	otherwise:
		rule succeeds.
		
The intruder's fourth priority rule is listed after the intruder's third priority rule in the Intruder State Rules.

The first Intruder State Rule (this is the reset the action number rule):
	now the intruder-action-num is 0;
	make no decision;

[INTRUDERS PRIORITIES
	I. Locate and get player (initially check bed; if not there, move down list until alerted by noise or movement then return to here)
	II. Collect valuables (in the following order if in place; if individual item not in place send it to the bottom of the priority list)
		a) Phone
		b) Computer
		c) Vase
		d) Wallet
		e) Mini-safe
	III. Find info on players potential whereabouts (only if he has never been alerted that the player is in the apartment; spend a max of 5 turns on each task, only do each task of holding appropriate item. If unable to do an individual task, send it to the bottom of the priority list)
		a) Try to check computer - guess at password (locking computer for 30 minutes after 5 failed attempts)
		b) Try to check phone - guess at password (locking phone for 30 minutes after 5 failed attempts)
		c) Check kitchen garbage for clues (3 turns)
		d) Check bathroom garbage for clues (3 turns)
	IV. Misc (only do after everything from II and III is either completed or impossible, and if unaware of player)
		a) raid fridge (3 turns)
		b) raid bathroom cabinet
	V. Leave]

Chapter 1 - Intruder priority 1 is finding and killing the player

The Intruder Hunts Rules are a rulebook.

Bed Sought is a truth state that varies. Bed Sought is false.

door-closed-this-turn is a truth state that varies. door-closed-this-turn is false.
First before: now door-closed-this-turn is false.

Carry out closing the restroom door: now door-closed-this-turn is true.
Carry out closing the front door: now door-closed-this-turn is true.
Carry out closing the closet: now door-closed-this-turn is true.

The first Intruder Hunts rule (this is the alert the intruder rule): [5th]
	if the player is being noisy:
		now intruder-at-desk is false;
		if the ambient noise level of the location of the intruder is not notable:
			now the intruder-action-num is 1;
			now the last-known locale is the relevant spot;
			now the activity-state of the intruder is on-the-hunt;
			now the intruder is position-aware;
			if debugging the intruder, say "<The intruder has taken note of your location.>[ccbr]";
	otherwise if the player is being obvious and the player is not perfectly concealed:
		if the location of the intruder is the location or the location of the intruder is connected with the location:
			now intruder-at-desk is false;
			now the intruder-action-num is 1;
			now the last-known locale is the relevant spot;
			now the activity-state of the intruder is on-the-hunt;
			now the intruder is position-aware;
			if debugging the intruder, say "<The intruder has taken note of your location.>[ccbr]";
		otherwise if the location of the intruder is Entryway or the location of the intruder is connected with Entryway:
			if door-closed-this-turn is true:
				now intruder-at-desk is false;
				now the intruder-action-num is 1;
				now the last-known locale is the relevant spot;
				now the activity-state of the intruder is on-the-hunt;
				now the intruder is position-aware;
				if debugging the intruder, say "<The intruder saw you close that door, and has taken note of your location.>[ccbr]";
	make no decision.
[NOTE: this is usually first, but at the beginning of the night it fires second]

The first Intruder Hunts rule (this is the intruder gets annoyed rule): [4th]
	if the intruder is not position-aware:
		if the annoyance is nothing and the ambient noise level of the location of the intruder is not notable:
			detect a noisemaker;
		abide by the intruder seeks the annoyance rule.
[NOTE: If something besides the player is being noisy, he will go to turn it off]

intruder-slipped-by is a truth state that varies. intruder-slipped-by is false.

The first Intruder Hunts rule (this is the can't slip by the intruder rule): [3rd]
	if the location is the previous-intruder-location and the location of the intruder is the previous location:
		now intruder-slipped-by is true;
		now the player is found;
	follow the intruder murders rule;
	make no decision.
	
The first Intruder Hunts rule (this is the check the bed rule): [2nd]
	if Bed Sought is false:
		now the intruder is active;
		now the activity-state of the intruder is on-the-hunt;
		if the location of the intruder is Main-Office and the intruder can spot the laptop-computer and the laptop-computer is switched on and the intruder is nearby:
			now the intruder-action-num is 24;
		otherwise:
			now the intruder-action-num is 0;
		if the intruder is not in Main-Bed:
			if debugging the intruder, say "<The intruder is headed to the bedroom area to look for you in the bed.>[ccbr]";
			have the intruder plan an action for being-in with the intruder and Main-Bed;
			if the location of the intruder is Main-Bed:
				now the intruder-action-num is 20;
			now the intruder is finished acting;
			rule succeeds;
		otherwise:
			now Bed Sought is true;
			if the player is on the bed and the player is not perfectly concealed:
				if debugging the intruder, say "<The intruder is examining the bed, looking for you.>[ccbr]";
				try the intruder examining the bed;
				now the player is found;
			otherwise:
				now the intruder-action-num is 21;
				if debugging the intruder, say "<The intruder is searching the bed, looking for you.>[ccbr]";
				try the intruder searching the relevant spot;
				if the player is in the relevant spot:
					now the player is found;
			if the player is found:
				follow the intruder murders rule;
			now the intruder is finished acting;
			rule succeeds;
	otherwise:
		make no decision.
[NOTE: the first thing the intruder will do is check the bed. This supercedes everything else.]

The first intruder hunts rule (this is the intruder can see rule): [1st]
	if the intruder is surroundings-aware:
		silently try the intruder looking;
		if the intruder is in the location and the player is not perfectly concealed:
			now the player is found;
		follow the intruder murders rule;
		if the player is found:
			now the intruder is finished acting;
			rule succeeds;
	make no decision.
[NOTE: Just kiddingthe ABSOLUTE first thing he does is look every turn, so if you end your action unconcealed in the same room as him he'll see you.]
		
An intruder hunts rule (this is the no wild goose chases rule): [6th]
	unless the intruder is position-aware, rule succeeds.
[NOTE: Stop this routine here if none of the previous rules let him know where you are]
	
The no wild goose chases rule is listed last in the Intruder Hunts rules.

An intruder hunts rule (this is the actively hunting rule): [7th]
	now the intruder is active.

The actively hunting rule is listed last in the Intruder Hunts rules.
		
An Intruder Hunts rule (this is the intruder investigates noises rule): [8th]
	if the location of the intruder is not the location of the last-known locale and the intruder is active:
		if debugging the intruder, say "<The intruder is heading to [location of the last-known locale], looking for you.>[ccbr]";
		if the intruder is alert and a random chance of 1 in 10 succeeds:
			now the intruder-action-num is 30;
		otherwise:
			now the intruder-action-num is 0;
		have the intruder plan an action for being-in with the intruder and location of the last-known locale;
		now the intruder is finished acting;
		rule succeeds;
	otherwise:
		make no decision.
		
The intruder investigates noises rule is listed last in the Intruder Hunts rules.

The last Intruder Hunts rule (this is the intruder seeks the source of noises rule): [9th]
	if the location of the intruder encloses the last-known locale and the intruder is active:
		now the intruder-action-num is 25;
		if the last-known locale is thingish:
			if debugging the intruder, say "<The intruder is searching [holder of the last-known locale] for you.>[ccbr]";
			try the intruder searching the holder of the last-known locale;
			if the holder of the player is the holder of the last-known locale:
				now the player is found;
				now the intruder-action-num is 0;
			otherwise:
				now the intruder is position-unaware;
				now the activity-state of the intruder is standing-by;
		otherwise:
			if debugging the intruder, say "<The intruder is searching [location of the intruder] for you.>[ccbr]";
			try the intruder looking;
			if the location of the intruder is the location and the player is not perfectly concealed:
				now the player is found;
				now the intruder-action-num is 0;
			otherwise:
				now the intruder is position-unaware;
				now the activity-state of the intruder is standing-by;
		follow the intruder murders rule;
		now the intruder is finished acting;
		rule succeeds;
	otherwise:
		make no decision.
		
The intruder seeks the source of noises rule is listed last in the Intruder Hunts rules.
		
This is the intruder murders rule:
	if the player is found:
		now the player is dead.
		
Section 1 - Intruder priority 1 and a half is turning off noisy things

The List of Noisy Items is a list of things that varies. The List of Noisy Items is { radio, dishwasher, kitchen faucet, stove light, bathroom faucet, tub-faucet }.

To detect a noisemaker:
	let L be a list of things;
	repeat with obj running through the List of Noisy Items:
		if obj is not in the safe:
			if obj is noisemaking, add obj to L;
	if L is empty:
		now the annoyance is nothing;
	otherwise:
		let M be a random number from 1 to the number of entries in L;
		now the annoyance is entry M of L;
		if debugging the intruder, say "<The annoyance is now [the annoyance].>[ccbr]".
		
This is the intruder seeks the annoyance rule:
	if the annoyance is not nothing:
		if the location of the intruder is not the location of the annoyance:
			now the intruder-action-num is 0;
			now the intruder is active;
			now the activity-state of the intruder is on-the-move;
			if debugging the intruder, say "<The intruder is heading to [location of the annoyance] to deal with the annoyance (currently [the annoyance]).>[ccbr]";
			have the intruder plan an action for being-in with the intruder and the location of the annoyance;
		otherwise:
			now the former annoyance is the annoyance;
			now the intruder-action-num is 16;
			now the intruder is active;
			now the activity-state of the intruder is annoyed;
			if the player encloses the annoyance:
				now the player is found;
				follow the intruder murders rule;
			otherwise:
				try the intruder switching off the annoyance;
		if the annoyance is switched off:
			now the annoyance is nothing;
		now the intruder is finished acting;
		rule succeeds;
	otherwise:
		make no decision.

Chapter 2 - Intruder priority 2 is finding out about the player's potential whereabouts

The Intruder Researches Rules are a rulebook.

Computer Sought RE Info is a truth state that varies. Computer Sought RE Info is false.
Computer Loc Known is a truth state that varies. Computer Loc Known is true.

intruder-at-desk is a truth state that varies. intruder-at-desk is false.

An Intruder Researches rule (this is the intruder peruses the computer rule):
	if Computer Sought RE Info is false:
		if the intruder is not in Main-Office:
			if debugging the intruder, say "<The intruder is attempting to access the laptop. He is heading to the office.>[ccbr]";
			if the intruder is alert and a random chance of 1 in 10 succeeds:
				now the intruder-action-num is 30;
			otherwise:
				now the intruder-action-num is 0;
			now the intruder is active;
			now the activity-state of the intruder is on-the-move;
			have the intruder plan an action for being-in with the intruder and Main-Office;
		otherwise:
			if the laptop-computer is enclosed by the desk:
				now intruder-at-desk is true;
			follow the computer in place rule;
			if rule failed:
				make no decision;
			otherwise:
				now the intruder is active;
				now the activity-state of the intruder is fiddling-with-computer;
				unless the intruder is alert:
					now the intruder is surroundings-unaware;
				if the laptop-computer is switched off:
					if debugging the intruder, say "<The intruder is trying to access the laptop. He is switching it on this turn.>[ccbr]";
					now the intruder-action-num is 10;
					try the intruder switching on the laptop-computer;
					now the intruder is finished acting;
					rule succeeds;
				otherwise:
					if the comment-repetition of the intruder is 0:
						now the comment-repetition of the intruder is a random number from 1 to 6;
					increment the action-repetition of the intruder;
					if the laptop-computer is unlocked and the action-repetition of the intruder < 7:
						if debugging the intruder, say "<The intruder is trying to access the laptop. He is spending turn [action-repetition of the intruder] of 7 trying passwords.>[ccbr]";
						if the action-repetition of the intruder is the comment-repetition of the intruder:
							now the intruder-action-num is 17;
						otherwise:
							now the intruder-action-num is 11;
						let N be the action-repetition of the intruder;
						try the intruder typing "[entry N in the list of reasonable computer passwords]" on the laptop-computer; [NOTE: Needs to be text because the typing on action only accepts "the topic understood".]
					otherwise:
						now the intruder-action-num is 12;
						now Computer Sought RE Info is true;
						now the action-repetition of the intruder is 0;
						now the comment-repetition of the intruder is 0;
						now the intruder is surroundings-aware;
						now the activity-state of the intruder is standing-by;
						now the laptop-computer is locked;
						now intruder-at-desk is false;
						if debugging the intruder, say "<The intruder has disabled the laptop.>[ccbr]";
		now the intruder is finished acting;
		rule succeeds;
	otherwise:
		make no decision.
			
This is the computer in place rule:
	if the laptop-computer is not on the desk:
		now Computer Sought RE Info is true;
		now Computer Loc Known is false;
		rule fails;
	otherwise:
		make no decision.
		
The list of reasonable computer passwords is a list of texts that varies. The list of reasonable computer passwords is { "password", "xyzzy", "letmein", "123456", "yankees", "dodgers", "orioles" }.

Phone Sought RE Info is a truth state that varies. Phone Sought RE Info is false.
Phone Loc Known is a truth state that varies. Phone Loc Known is true.

An Intruder Researches rule (this is the intruder peruses the phone rule):
	if Phone Sought RE Info is false:
		if the intruder is not in Main-Bed:
			if debugging the intruder, say "<The intruder is trying to access the phone. He is heading to the bedroom.>[ccbr]";
			if the intruder is alert and a random chance of 1 in 10 succeeds:
				now the intruder-action-num is 30;
			otherwise:
				now the intruder-action-num is 0;
			now the intruder is active;
			now the activity-state of the intruder is on-the-move;
			have the intruder plan an action for being-in with the intruder and Main-Bed;
		otherwise:
			follow the phone in place rule;
			if rule failed:
				make no decision;
			otherwise:
				now the intruder is active;
				unless the intruder is alert:
					now the intruder is surroundings-unaware;
				now the activity-state of the intruder is fiddling-with-phone;
				unless the intruder carries the smartphone:
					if debugging the intruder, say "<The intruder is trying to access the phone. He is picking it up this turn.>[ccbr]";
					try the intruder taking the smartphone;
					now the intruder is finished acting;
					rule succeeds;
				if the smartphone is switched off:
					if debugging the intruder, say "<The intruder is trying to access the phone. He is switching it on this turn.>[ccbr]";
					now the intruder-action-num is 13;
					try the intruder switching on the smartphone;
					now the intruder is finished acting;
					rule succeeds;
				otherwise:
					if the comment-repetition of the intruder is 0:
						now the comment-repetition of the intruder is a random number from 1 to 6;
					increment the action-repetition of the intruder;
					if smartphone is unlocked and the action-repetition of the intruder < 7:
						if debugging the intruder, say "<The intruder is trying to access the phone. He is spending turn [action-repetition of the intruder] of 7 trying passwords.>[ccbr]";
						if the action-repetition of the intruder is the comment-repetition of the intruder:
							now the intruder-action-num is 18;
						otherwise:
							now the intruder-action-num is 14;
						let N be the action-repetition of the intruder;
						try the intruder typing "[entry N in the list of reasonable phone passwords]" on the smartphone; [NOTE: Needs to be text because the typing on action only accepts "the topic understood".]
						now the intruder is finished acting;
						rule succeeds;
					otherwise:
						now the intruder-action-num is 15;
						try the intruder putting the smartphone on the dresser;
						now Phone Sought RE Info is true;
						now the action-repetition of the intruder is 0;
						now the comment-repetition of the intruder is 0;
						now the intruder is surroundings-aware;
						now the activity-state of the intruder is standing-by;
						now the smartphone is locked;
						if debugging the intruder, say "<The intruder has disabled the phone.>[ccbr]";
		now the intruder is finished acting;
		rule succeeds;
	otherwise:
		make no decision.
			
This is the phone in place rule:
	if the intruder carries the smartphone:
		make no decision;
	otherwise if the smartphone is not on the dresser:
		now Phone Sought RE Info is true;
		now Phone Loc Known is false;
		rule fails;
	otherwise:
		make no decision.
		
The intruder peruses the phone rule is listed after the intruder peruses the computer rule in the intruder researches rules.

The list of reasonable phone passwords is a list of numbers that varies. The list of reasonable phone passwords is { 123456, 123123, 555555, 121980, 455010, 000000 }.

Kitchen Garbage Sought is a truth state that varies. Kitchen Garbage Sought is false.

An Intruder Researches rule (this is the intruder peruses the kitchen trash can rule):
	if Kitchen Garbage Sought is false:
		now the intruder is active;
		if the location of the intruder is not Kitchenette:
			if debugging the intruder, say "<The intruder is looking to search the kitchen garbage. He is heading to the kitchenette.>[ccbr]";
			if the intruder is alert and a random chance of 1 in 10 succeeds:
				now the intruder-action-num is 30;
			otherwise:
				now the intruder-action-num is 0;
			now the activity-state of the intruder is on-the-move;
			have the intruder plan an action for being-in with the intruder and Kitchenette;
		otherwise:
			increment the action-repetition of the intruder;
			now the intruder-action-num is 2;
			now the activity-state of the intruder is checking-garbage;
			unless the intruder is alert:
				now the intruder is surroundings-unaware;
			if debugging the intruder, say "<The intruder is spending turn [action-repetition of the intruder] of 3 looking through the kitchen garbage.>[ccbr]";
			try the intruder searching the foot-pedal trash can;
			if the action-repetition of the intruder is 3:
				now Kitchen Garbage Sought is true;
				now the action-repetition of the intruder is 0;
				now the activity-state of the intruder is standing-by;
				now the intruder is surroundings-aware;
		now the intruder is finished acting;
		rule succeeds;
	otherwise:
		make no decision.
		
The intruder peruses the kitchen trash can rule is listed after the intruder peruses the phone rule in the intruder researches rules.

Bathroom Garbage Sought is a truth state that varies. Bathroom Garbage Sought is false.

An Intruder Researches rule (this is the intruder peruses the bathroom trash can rule):
	if Bathroom Garbage Sought is false:
		now the intruder is active;
		if the location of the intruder is not the Bathroom:
			if debugging the intruder, say "<The intruder is looking to search the bathroom garbage. He is heading to the bathroom.>[ccbr]";
			if the intruder is alert and a random chance of 1 in 10 succeeds:
				now the intruder-action-num is 30;
			otherwise:
				now the intruder-action-num is 0;
			now the activity-state of the intruder is on-the-move;
			have the intruder plan an action for being-in with the intruder and Bathroom;
		otherwise:
			increment the action-repetition of the intruder;
			now the intruder-action-num is 2;
			now the activity-state of the intruder is checking-garbage;
			unless the intruder is alert:
				now the intruder is surroundings-unaware;
			if debugging the intruder, say "<The intruder is spending turn [action-repetition of the intruder] of 3 looking through the bathroom garbage.>[ccbr]";
			try the intruder searching the small metal trash can;
			if the action-repetition of the intruder is 3:
				now Bathroom Garbage Sought is true;
				now the action-repetition of the intruder is 0;
				now the activity-state of the intruder is standing-by;
				now the intruder is surroundings-aware;
		now the intruder is finished acting;
		rule succeeds;
	otherwise:
		make no decision.
		
The intruder peruses the bathroom trash can rule is listed after the intruder peruses the kitchen trash can rule in the Intruder Researches rules.

Chapter 3 - Intruder priority 3 is robbing the place

The Intruder Pilfers Rules are a rulebook.

Phone Sought RE Pilfering is a truth state that varies. Phone Sought RE Pilfering is false.

An Intruder Pilfers rule (this is the intruder steals your phone rule):
	if Phone Sought RE Pilfering is false and Phone Loc Known is true and the smartphone is not in the rucksack:
		now the intruder is active;
		if the location of the intruder is not Main-Bed and the intruder does not carry the smartphone:
			if debugging the intruder, say "<The intruder is looking to steal the phone. He is heading to the bedroom.>[ccbr]";
			if the intruder is alert and a random chance of 1 in 10 succeeds:
				now the intruder-action-num is 30;
			otherwise:
				now the intruder-action-num is 0;
			now the activity-state of the intruder is on-the-move;
			have the intruder plan an action for being-in with the intruder and Main-Bed;
			now the intruder is finished acting;
			rule succeeds;
		otherwise:
			now the activity-state of the intruder is collecting-valuables;
			follow the cellular verification rule;
			if Phone Sought RE Pilfering is false:
				if debugging the intruder, say "<The intruder is trying to steal the phone. This should take two turns.>[ccbr]";
				have the intruder plan an action for being-in with the smartphone and the rucksack;
				if the rucksack encloses the smartphone:
					if debugging the intruder, say "<The intruder has stolen the phone.>[ccbr]";
					now the intruder-action-num is 3;
			otherwise:
				note skipping the smartphone;
				unless the intruder is alert:
					follow the indicate high alert level rule;
					now the alert level of the intruder is high;
		follow the cellular verification rule;
		now the intruder is finished acting;
		rule succeeds;
	otherwise:
		make no decision.

This is the cellular verification rule:
	if the location of the intruder is Main-Bed:
		if the smartphone is not enclosed by the location of the intruder or the smartphone is in the rucksack:
			now Phone Sought RE Pilfering is true;
	make no decision.

This is the indicate high alert level rule:
	if the intruder is in the location:
		say "'What the fuck?' you'll hear him say. [nobr]";
	otherwise if the intruder is around:
		say "From [casual descriptor of the location of the intruder], you'll hear the intruder say 'What the fuck?' [nobr]";
	otherwise:
		say "[We] [hear] the intruder say 'What the fuck?' [vague intruder direction]. [nobr]";
	say "He will have noticed something off[unicode 8212]something you changed after he walked in. He'll be on high alert from then on out; it'll be much harder to get the jump on him in any way."

Computer Sought RE Pilfering is a truth state that varies. Computer Sought RE Pilfering is false.

An Intruder Pilfers rule (this is the intruder steals your computer rule):
	if Computer Sought RE Pilfering is false and Computer Loc Known is true and the laptop-computer is not in the rucksack:
		now the intruder is active;
		if the location of the intruder is not Main-Office and the intruder does not carry the laptop-computer:
			if debugging the intruder, say "<The intruder is looking to steal the laptop. He is heading to the office.>[ccbr]";
			if the intruder is alert and a random chance of 1 in 10 succeeds:
				now the intruder-action-num is 30;
			otherwise:
				now the intruder-action-num is 0;
			now the activity-state of the intruder is on-the-move;
			have the intruder plan an action for being-in with the intruder and Main-Office;
			now the intruder is finished acting;
			rule succeeds;
		otherwise:
			now the activity-state of the intruder is collecting-valuables;
			follow the computer verification rule;
			if Computer Sought RE Pilfering is false:
				if debugging the intruder, say "<The intruder is trying to steal the laptop. This should take 2 turns.>[ccbr]";
				have the intruder plan an action for being-in with the laptop-computer and the rucksack;
				if the rucksack encloses the laptop-computer:
					if debugging the intruder, say "<The intruder has stolen the laptop.>[ccbr]";
					now the intruder-action-num is 3;
			otherwise:
				note skipping the laptop-computer;
				unless the intruder is alert:
					follow the indicate high alert level rule;
					now the alert level of the intruder is high;
		follow the computer verification rule;
		now the intruder is finished acting;
		rule succeeds;
	otherwise:
		make no decision.
		
This is the computer verification rule:
	if the location of the intruder is Main-Office:
		if the laptop-computer is not enclosed by the location of the intruder or the laptop-computer is in the rucksack:
			now Computer Sought RE Pilfering is true;
	make no decision.

Vase Sought is a truth state that varies. Vase Sought is false.

An Intruder Pilfers rule (this is the intruder steals the vase rule):
	if the vase is not in the rucksack and Vase Sought is false:
		now the intruder is active;
		if the location of the intruder is neither Kitchenette nor Main-By-Counter and the intruder does not carry the vase:
			if debugging the intruder, say "<The intruder is looking to steal the vase. He is heading to the kitchenette (or to the area by the counter, if he gets there first).>[ccbr]";
			if the intruder is alert and a random chance of 1 in 10 succeeds:
				now the intruder-action-num is 30;
			otherwise:
				now the intruder-action-num is 0;
			now the activity-state of the intruder is on-the-move;
			have the intruder plan an action for being-in with the intruder and Kitchenette;
			now the intruder is finished acting;
			rule succeeds;
		otherwise:
			now the activity-state of the intruder is collecting-valuables;
			follow the vase verification rule;
			if Vase Sought is false:
				if the intruder does not enclose the vase:
					if debugging the intruder, say "<The intruder is trying to steal the vase. He is picking it up this turn.>[ccbr]";
					try the intruder taking the vase;
				otherwise:
					if debugging the intruder, say "<The intruder is trying to steal the vase. He is putting it into the rucksack this turn.>[ccbr]";
					have the intruder plan an action for being-in with the vase and the rucksack;
				if the rucksack encloses the vase:
					if debugging the intruder, say "<The intruder has stolen the vase.>[ccbr]";
					now the intruder-action-num is 3;
				otherwise if the intruder encloses the vase:
					now the intruder-action-num is 4;
			otherwise:
				note skipping the vase;
				unless the intruder is alert:
					follow the indicate high alert level rule;
					now the alert level of the intruder is high;
		follow the vase verification rule;
		now the intruder is finished acting;
		rule succeeds;
	otherwise:
		make no decision.
		
This is the vase verification rule:
	if the location of the intruder is either Kitchenette or Main-By-Counter:
		if the vase is not enclosed by countertop and the vase is not enclosed by the intruder and the vase is not in the rucksack:
			now Vase Sought is true;
		otherwise if the vase is in the rucksack:
			now Vase Sought is true;
	make no decision.
		
Wallet Sought is a truth state that varies. Wallet Sought is false.

An Intruder Pilfers rule (this is the intruder steals your wallet rule):
	if the wallet is not in the rucksack and Wallet Sought is false:
		now the intruder is active;
		if the location of the intruder is not Entryway and the intruder does not carry the wallet:
			if debugging the intruder, say "<The intruder is looking to steal the wallet. He is heading to the entryway.>[ccbr]";
			if the intruder is alert and a random chance of 1 in 10 succeeds:
				now the intruder-action-num is 30;
			otherwise:
				now the intruder-action-num is 0;
			now the activity-state of the intruder is on-the-move;
			have the intruder plan an action for being-in with the intruder and Entryway;
			now the intruder is finished acting;
			rule succeeds;
		otherwise:
			now the activity-state of the intruder is collecting-valuables;
			follow the wallet verification rule;
			if Wallet Sought is false:
				if debugging the intruder, say "<The intruder is trying to steal the wallet. This should take 2 turns.>[ccbr]";
				have the intruder plan an action for being-in with the wallet and the rucksack;
				if the rucksack encloses the wallet:
					if debugging the intruder, say "<The intruder has stolen the wallet.>[ccbr]";
					now the intruder-action-num is 3;
			otherwise:
				note skipping the wallet;
				unless the intruder is alert:
					follow the indicate high alert level rule;
					now the alert level of the intruder is high;
		follow the wallet verification rule;
		now the intruder is finished acting;
		rule succeeds;
	otherwise:
		make no decision.
		
This is the wallet verification rule:
	if the location of the  intruder is Entryway:
		if the wallet is not enclosed by Entryway or the wallet is in the rucksack:
			now Wallet Sought is true;
	make no decision.
	
Safe Sought is a truth state that varies. Safe Sought is false.
Papers Sought is a truth state that varies. Papers Sought is false.

An Intruder Pilfers rule (this is the intruder opens the safe rule):
	if the safe is closed and Safe Sought is false:
		now the intruder is active;
		if the intruder is not in Main-Sitting:
			if debugging the intruder, say "<The intruder is looking to access the safe. He is heading to the sitting area.>[ccbr]";
			if the intruder is alert and a random chance of 1 in 10 succeeds:
				now the intruder-action-num is 30;
			otherwise:
				now the intruder-action-num is 0;
			now the activity-state of the intruder is on-the-move;
			have the intruder plan an action for being-in with the intruder and Main-Sitting;
			now the intruder is finished acting;
			rule succeeds;
		otherwise:
			now the activity-state of the intruder is cracking-lock;
			if the painting is hung-up:
				if debugging the intruder, say "<The intruder is attempting to access the safe. He is about to take the painting.>[ccbr]";
				now the intruder-action-num is 0;
				try the intruder taking the painting;
				now the intruder is finished acting;
				rule succeeds;
			otherwise if the intruder encloses the painting:
				if debugging the intruder, say "<The intruder is attempting to access the safe. He is about to drop the painting.>[ccbr]";
				now the intruder-action-num is 5;
				try the intruder dropping the painting;
				now the intruder is finished acting;
				rule succeeds;
			otherwise:
				if the safe is locked:
					now the intruder-action-num is 6;
					unless the intruder is alert:
						now the intruder is surroundings-unaware;
					increment the action-repetition of the intruder;
					if debugging the intruder, say "<The intruder is attempting to access the safe. He is now spending turn [action-repetition of the intruder] of 4 entering the combination.>[ccbr]";
					if the action-repetition of the intruder is 1:
						now the intruder-action-num is 19;
						truncate the current combination of the safe to the last 3 entries;
						try the intruder spinning the safe to 12;
						add 12 to the current combination of the safe, if absent;
					otherwise if the action-repetition of the intruder is 2:
						truncate the current combination of the safe to the last 3 entries;
						try the intruder spinning the safe to 4;
						add 4 to the current combination of the safe, if absent;
					otherwise if the action-repetition of the intruder is 3:
						truncate the current combination of the safe to the last 3 entries;
						try the intruder spinning the safe to 19;
						add 19 to the current combination of the safe, if absent;
					otherwise if the action-repetition of the intruder is 4:
						truncate the current combination of the safe to the last 3 entries;
						try the intruder spinning the safe to 94;
						add 94 to the current combination of the safe, if absent;
						now the safe is unlocked;
				otherwise:
					if debugging the intruder, say "<The intruder is attempting to access the safe. It is now unlocked.>[ccbr]";
					now Safe Sought is true;
					now the action-repetition of the intruder is 0;
					now the intruder is surroundings-aware;
					make no decision;
		now the intruder is finished acting;
		rule succeeds;
	otherwise:
		make no decision.
		
stalled-alert is a truth state that varies. stalled-alert is false.
		
An Intruder Pilfers rule (this is the intruder steals the documents rule):
	if the important documents are not in the rucksack and Papers Sought is false:
		now the intruder is active;
		if the location of the intruder is not Main-Sitting:
			if the intruder is alert and a random chance of 1 in 10 succeeds:
				now the intruder-action-num is 30;
			otherwise:
				now the intruder-action-num is 0;
			now the activity-state of the intruder is on-the-move;
			have the intruder plan an action for being-in with the intruder and Main-Sitting;
			now the intruder is finished acting;
			rule succeeds;
		otherwise:
			now the activity-state of the intruder is collecting-valuables;
		if the safe is closed:
			if the location of the intruder is Main-Sitting:
				now the intruder-action-num is 7;
				if debugging the intruder, say "<The intruder is attempting to access the safe. He is opening it this turn.>[ccbr]";
			otherwise:
				if debugging the intruder, say "<The intruder is attempting to access the safe. He is heading to the sitting area.>[ccbr]";
			have the intruder plan an action for being-open with the safe and the intruder;
		otherwise:
			follow the document verification rule;
			if Papers Sought is false:
				if debugging the intruder, say "<The intruder is trying to steal the important documents.>[ccbr]";
				have the intruder plan an action for being-in with the important documents and the rucksack;
				if the rucksack encloses the important documents:
					if debugging the intruder, say "<The intruder has stolen the important documents.>[ccbr]";
					now the intruder-action-num is 3;
			otherwise:
				note skipping the important documents;
				now the intruder-action-num is 26;
				unless the intruder is alert:
					now stalled-alert is true;
		follow the document verification rule;
		now the intruder is finished acting;
		rule succeeds;
	otherwise:
		make no decision.
		
This is the document verification rule:
	if the location of the intruder is Main-Sitting:
		if the important documents are not enclosed by Main-Sitting or the important documents are enclosed by the rucksack or the important documents are enclosed by the player:
			now Papers Sought is true;
	make no decision.

Chapter 4 - Intruder priority 4 is less valuable raiding

The Intruder Raids Rules are a rulebook.

Dresser Searched is a truth state that varies. Dresser Searched is false.
Dresser Seqno is a number that varies. Dresser Seqno is 1.

The first Intruder Raids rule (this is the intruder searches your drawers rule):
	if Dresser Searched is false:
		now the intruder is active;
		if the intruder is not in Main-Bed:
			if debugging the intruder, say "<The intruder is looking to search the dresser. He is heading to the bedroom.>[ccbr]";
			if the intruder is alert and a random chance of 1 in 10 succeeds:
				now the intruder-action-num is 30;
			otherwise:
				now the intruder-action-num is 0;
			now the activity-state of the intruder is on-the-move;
			have the intruder plan an action for being-in with the intruder and Main-Bed;
		otherwise:
			if Dresser Seqno is 1:
				if debugging the intruder, say "<The intruder is trying to search the dresser. He is opening the first drawer.>[ccbr]";
				now the intruder-action-num is 7;
				try the intruder opening first dresser drawer;
			otherwise if Dresser Seqno is 2:
				if debugging the intruder, say "<The intruder is trying to search the dresser. He is closing the first drawer.>[ccbr]";
				now the intruder-action-num is 8;
				try the intruder closing first dresser drawer;
			otherwise if Dresser Seqno is 3:
				if debugging the intruder, say "<The intruder is trying to search the dresser. He is opening the second drawer.>[ccbr]";
				now the intruder-action-num is 7;
				try the intruder opening second dresser drawer;
			otherwise if Dresser Seqno is 4:
				if debugging the intruder, say "<The intruder is trying to search the dresser. He is closing the second drawer.>[ccbr]";
				now the intruder-action-num is 8;
				try the intruder closing second dresser drawer;
			otherwise if Dresser Seqno is 5:
				if debugging the intruder, say "<The intruder is trying to search the dresser. He is opening the third drawer.>[ccbr]";
				now the intruder-action-num is 22;
				try the intruder opening third dresser drawer;
			otherwise if Dresser Seqno is 6:
				if the taser is in third dresser drawer:
					if debugging the intruder, say "<The intruder is trying to search the dresser. He has found and is attempting to take the taser.>[ccbr]";
					try the intruder taking the taser;
				otherwise:
					if debugging the intruder, say "<The intruder is trying to search the dresser. He is looking through the third drawer.>[ccbr]";
					try the intruder searching third dresser drawer;
			otherwise if Dresser Seqno is 7:
				if debugging the intruder, say "<The intruder is trying to search the dresser. He is closing the third drawer.>[ccbr]";
				now the intruder-action-num is 23;
				try the intruder closing third dresser drawer;
			otherwise:
				if fourth dresser drawer is closed:
					if debugging the intruder, say "<The intruder is trying to search the dresser. He is opening the fourth drawer.>[ccbr]";
					now the intruder-action-num is 7;
				otherwise:
					if debugging the intruder, say "<The intruder is trying to steal the jewellery box.>[ccbr]";
				have the intruder plan an action for being-in with the jewellery box and the rucksack;
				if the rucksack encloses the jewellery box:
					if debugging the intruder, say "<The intruder has stolen the jewellery box.>[ccbr]";
					now the intruder-action-num is 3;
			follow the jewelry verification rule;
			unless rule succeeded:
				increment Dresser Seqno;
		now the intruder is finished acting;
		rule succeeds;
	otherwise:
		make no decision.
		
This is the jewelry verification rule:
	if the intruder is in Main-Bed:
		if fourth dresser drawer is open:
			if the jewellery box is not in Main-Bed or the jewellery box is in the rucksack:
				now Dresser Searched is true;
				rule succeeds;
	make no decision.

Fridge Sought is a truth state that varies. Fridge Sought is false.

An Intruder Raids rule (this is the intruder empties your fridge rule):
	if Fridge Sought is false:
		now the intruder is active;
		if the intruder is not in Kitchenette:
			if debugging the intruder, say "<The intruder is looking to raid the refrigerator. He is heading to the kitchenette.>[ccbr]";
			if the intruder is alert and a random chance of 1 in 10 succeeds:
				now the intruder-action-num is 30;
			otherwise:
				now the intruder-action-num is 0;
			now the activity-state of the intruder is on-the-move;
			have the intruder plan an action for being-in with the intruder and Kitchenette;
		otherwise:
			now the activity-state of the intruder is raiding-fridge;
			unless the intruder is alert:
				now the intruder is surroundings-unaware;
			if the refrigerator is closed:
				if debugging the intruder, say "<The intruder is trying to raid the refrigerator. He is opening it this turn.>[ccbr]";
				now the intruder-action-num is 7;
				try the intruder opening the refrigerator;
				now the intruder is finished acting;
				rule succeeds;
			otherwise:
				increment the action-repetition of the intruder;
				if the action-repetition of the intruder < 5:
					if debugging the intruder, say "<The intruder is spending turn [action-repetition of the intruder] of 4 looking through the refrigerator.>[ccbr]";
					now the intruder-action-num is 9;
					try the intruder searching the refrigerator;
				otherwise:
					if debugging the intruder, say "<The intruder has finished raiding the refrigerator. He is closing it this turn.>[ccbr]";
					now the intruder-action-num is 8;
					try the intruder closing the refrigerator;
					now Fridge Sought is true;
					now the activity-state of the intruder is standing-by;
					now the action-repetition of the intruder is 0;
					now the intruder is surroundings-aware;
		now the intruder is finished acting;
		rule succeeds;
	otherwise:
		make no decision.

Cabinet Sought is a truth state that varies. Cabinet Sought is false.

An Intruder Raids rule (this is the intruder empties your cabinet rule):
	if Cabinet Sought is false:
		now the intruder is active;
		if the intruder is not in Bathroom:
			if debugging the intruder, say "<The intruder is looking to raid the bathroom cabinet. He is heading to the bathroom.>[ccbr]";
			if the intruder is alert and a random chance of 1 in 10 succeeds:
				now the intruder-action-num is 30;
			otherwise:
				now the intruder-action-num is 0;
			now the activity-state of the intruder is on-the-move;
			have the intruder plan an action for being-in with the intruder and Bathroom;
		otherwise:
			now the activity-state of the intruder is raiding-cabinet;
			unless the intruder is alert:
				now the intruder is surroundings-unaware;
			if the bathroom-cabinet is closed:
				if debugging the intruder, say "<The intruder is trying to raid the bathroom cabinet. He is opening it this turn.>[ccbr]";
				now the intruder-action-num is 7;
				try the intruder opening the bathroom-cabinet;
				now the intruder is finished acting;
				rule succeeds;
			otherwise:
				increment the action-repetition of the intruder;
				if the action-repetition of the intruder < 5:
					if debugging the intruder, say "<The intruder is spending turn [action-repetition of the intruder] of 4 looking through the bathroom cabinet.>[ccbr]";
					now the intruder-action-num is 9;
					try the intruder searching the bathroom-cabinet;
				otherwise:
					if debugging the intruder, say "<The intruder has finished raiding the bathroom cabinet. He is closing it this turn.>[ccbr]";
					now the intruder-action-num is 8;
					try the intruder closing the bathroom-cabinet;
					now Cabinet Sought is true;
					now the activity-state of the intruder is standing-by;
					now the action-repetition of the intruder is 0;
					now the intruder is surroundings-aware;
		now the intruder is finished acting;
		rule succeeds;
	otherwise:
		make no decision.
		
Chapter 5 - After all that's done, the intruder leaves

The last Intruder State Rule (this is the intruder gives up rule):
	if intruder-inside is true and the intruder is in Outside Hall:
		if debugging the intruder, say "<The intruder has left the apartment.>[ccbr]";
		now the activity-state of the intruder is standing-by;
		remove the intruder from play;
	otherwise:
		if debugging the intruder, say "<The intruder has achieved all of his programmed goals. He is now attempting to leave the apartment (heading to Outside Hall).>[ccbr]";
		now the intruder-action-num is 0;
		now the intruder is active;
		now the activity-state of the intruder is on-the-move;
		have the intruder plan an action for being-in with the intruder and Outside Hall;
		now the intruder is finished acting;
		rule succeeds.
		
Chapter 6 - Reactiveness to seeing pilferable things

Table of Things Pilferable
item	skipped	purloined
important documents	false	false
laptop-computer	false	false
smartphone	false	false
vase	false	false
wallet	false	false

Definition: a thing is pilferable if it is an item listed in the Table of Things Pilferable.
		
The record purloining rule is listed after the run the intruder state machine rule in the every turn rules.
		
This is the record purloining rule:
	repeat with N running from 1 to the number of rows in the Table of Things Pilferable:
		choose row N in the Table of Things Pilferable;
		if the rucksack encloses the item entry:
			if the skipped entry is true:
				now the skipped entry is false;
			if the purloined entry is false:
				now the purloined entry is true.

To note skipping the/-- (obj - a thing):
	if obj is pilferable:
		choose row with an item of obj in the Table of Things Pilferable;
		if the skipped entry is false:
			now the skipped entry is true.
			
To decide whether the/-- (obj - a thing) has/have been skipped:
	if obj is pilferable:
		choose row with an item of obj in the Table of Things Pilferable;
		if the skipped entry is true, decide yes;
	decide no.
	
This is the delayed pilfering the important documents rule:
	if the important documents have been skipped and the intruder can spot the important documents and the player does not enclose the important documents:
		if debugging the intruder, say "<The intruder has noticed the important documents and is attempting to steal them.>[ccbr]";
		have the intruder plan an action for being-in with the important documents and the rucksack;
		if the rucksack encloses the important documents:
			if debugging the intruder, say "<The intruder has stolen the important documents.>[ccbr]";
			now the intruder-action-num is 3;
		otherwise if the intruder encloses the important documents:
			now the intruder-action-num is 4;
		now the intruder is finished acting;
		rule succeeds;
	make no decision;
	
The delayed pilfering the important documents rule is listed after the intruder steals the documents rule in the Intruder Pilfers rulebook.
	
This is the delayed pilfering the laptop rule:
	if the laptop-computer has been skipped and the intruder can spot the laptop-computer and the player does not enclose the laptop-computer:
		if debugging the intruder, say "<The intruder has noticed your laptop and is attempting to steal it.>[ccbr]";
		have the intruder plan an action for being-in with the laptop-computer and the rucksack;
		if the rucksack encloses the laptop-computer:
			if debugging the intruder, say "<The intruder has stolen your laptop.>[ccbr]";
			now the intruder-action-num is 3;
		otherwise if the intruder encloses the laptop-computer:
			now the intruder-action-num is 4;
		now the intruder is finished acting;
		rule succeeds;
	make no decision;
	
The delayed pilfering the laptop rule is listed before the intruder steals the vase rule in the Intruder Pilfers rulebook.
	
This is the delayed pilfering the smartphone rule:
	if the smartphone has been skipped and the intruder can spot the smartphone and the player does not enclose the smartphone:
		if debugging the intruder, say "<The intruder has noticed your phone and is attempting to steal it.>[ccbr]";
		have the intruder plan an action for being-in with the smartphone and the rucksack;
		if the rucksack encloses the smartphone:
			if debugging the intruder, say "<The intruder has stolen your phone.>[ccbr]";
			now the intruder-action-num is 3;
		otherwise if the intruder encloses the smartphone:
			now the intruder-action-num is 4;
		now the intruder is finished acting;
		rule succeeds;
	make no decision;
	
The delayed pilfering the smartphone rule is listed before the intruder steals your computer rule in the Intruder Pilfers rulebook.
	
This is the delayed pilfering the vase rule:
	if the vase has been skipped and the intruder can spot the vase and the player does not enclose the vase:
		if debugging the intruder, say "<The intruder has noticed the vase and is attempting to steal it.>[ccbr]";
		have the intruder plan an action for being-in with the vase and the rucksack;
		if the rucksack encloses the vase:
			if debugging the intruder, say "<The intruder has stolen the vase.>[ccbr]";
			now the intruder-action-num is 3;
		otherwise if the intruder encloses the vase:
			now the intruder-action-num is 4;
		now the intruder is finished acting;
		rule succeeds;
	make no decision;
	
The delayed pilfering the vase rule is listed before the intruder steals your wallet rule in the Intruder Pilfers rulebook.
	
This is the delayed pilfering the wallet rule:
	if the wallet has been skipped and the intruder can spot the wallet and the player does not enclose the wallet:
		if debugging the intruder, say "<The intruder has noticed the wallet and is attempting to steal it.>[ccbr]";
		have the intruder plan an action for being-in with the wallet and the rucksack;
		if the rucksack encloses the wallet:
			if debugging the intruder, say "<The intruder has stolen the wallet.>[ccbr]";
			now the intruder-action-num is 3;
		otherwise if the intruder encloses the wallet:
			now the intruder-action-num is 4;
		now the intruder is finished acting;
		rule succeeds;
	make no decision;
	
The delayed pilfering the wallet rule is listed before the intruder opens the safe rule in the Intruder Pilfers rulebook.
	
Part 4 - Reporting his actions

Chapter 1 - Restrictions and allowances for reporting

A player's action awareness rule (this is the player aware of noise rule):
	if the player is not the actor and the actor is being noisy, rule succeeds.
	
A player's action awareness rule (this is the player aware of nearby people rule):
	if the player is not the actor and the actor is around [and the actor is being obvious], rule succeeds.

Chapter 2 - General action reporting

intruder-action-reported is a truth state that varies. intruder-action-reported is false.
First before: now intruder-action-reported is false.

To say in-by intruder locale descriptor:
	if the location of the intruder is either Main-Behind-Shelf or Main-By-Counter:
		say "by [nobr]";
	otherwise:
		say "in [nobr]";
	say the casual descriptor of the location of the intruder.
	
to say noise-mod:
	if the location of the intruder is not the location:
		if the location is Entryway:
			if the location of the intruder is Bathroom:
				say noise-modifier of Bathroom;
			otherwise if the location of the intruder is Outside Hall:
				say noise-modifier of Outside Hall;
			otherwise if the location of the intruder is Within-Closet:
				say noise-modifier of Within-Closet;
		otherwise if the location is Bathroom or the location of the intruder is Bathroom:
			say noise-modifier of Bathroom;
		otherwise if the location is Outside Hall or the location of the intruder is Outside Hall:
			say noise-modifier of Outside Hall;
		otherwise if the location is Within-Closet or the location of the intruder is Within-Closet:
			say noise-modifier of Within-Closet.
	
To say vague intruder direction:
	let loc be the location of the intruder;
	if loc is the location:
		say "nearby";
	otherwise:
		choose a row with an other place of loc in the relative direction set of the location;
		say "[descriptor entry]".
	
To say intruder locale descriptor: say the casual descriptor of the location of the intruder.

This is the effective listening closely rule:
	if player-listening is true, follow the listening closely rules.
	
The effective listening closely rule is listed after the run the intruder state machine rule in the every turn rules.

The listening closely rules are a rulebook.

intended-act is a kind of value. The intended-acts are computer-typing, dial-spinning, going-place, inserting-in, letting-drop, lockpicking, looking-around, looking-through, opening-up, peering-behind, peering-under, phone-typing, picking-up, putting-upon, shutting-it, staring-at, turning-on, placeholder-action.

The intruder has an intended-act called the intended-action. The intended-action of the intruder is placeholder-action.

The first listening closely rule (this is the fiddling with the lock rule):
	if intruder-inside is false:
		if the front door is unlocked:
			say "You will hold your breath and listen intently. In the silence, you will hear the front door creaking open.";
		otherwise:
			say "You will hold your breath and listen intently. In the silence, you will faintly hear whoever is outside fiddling with the front door's lock.";
		now player-listening is false;
		rule succeeds;
	make no decision.
	
player-listening is a truth state that varies. player-listening is false.
	
A listening closely rule (this is the force reporting rule):
	unless the intruder is in the location, now player-listening is true.

[TODO: Test and refine]
	
The last listening closely rule (this is the won't hear anything rule):
	if player-listening is false:
		say "You will hold your breath and listen intently, but won't be able to make out any clear noises."
	
This is the reward listening closely rule:
	if Nighttime is happening and player-listening is true:
		if the intended-action of the intruder is dial-spinning:
			say "[We] [hear][noise-mod] a clicking sound [vague intruder direction].";
		otherwise if the intended-action of the intruder is going-place:
			say "[We] [hear][noise-mod] [the intruder] moving around [vague intruder direction].";
		otherwise if the intended-action of the intruder is inserting-in:
			say "[We] [hear][noise-mod] a faint rustling [vague intruder direction].";
		otherwise if the intended-action of the intruder is letting-drop:
			say "[We] [hear][noise-mod] something fall to the ground [vague intruder direction].";
		otherwise if the intended-action of the intruder is lockpicking:
			say "[We] [hear][noise-mod] something unlocking [vague intruder direction].";
		otherwise if the intended-action of the intruder is opening-up:
			say "[We] [hear][noise-mod] something open [vague intruder direction].";
		otherwise if the intended-action of the intruder is putting-upon:
			say "[We] [hear][noise-mod] a faint impact [vague intruder direction].";
		otherwise if the intended-action of the intruder is shutting-it:
			say "[We] [hear][noise-mod] something close [vague intruder direction].";
		otherwise if the intended-action of the intruder is turning-on:
			say "[We] [hear][noise-mod] something switch on [vague intruder direction].";
		otherwise if the intended-action of the intruder is computer-typing:
			say "[We] [hear][noise-mod] a typing sound [vague intruder direction].";
		otherwise if the intended-action of the intruder is phone-typing:
			say "[We] [hear][noise-mod] a tapping sound [vague intruder direction].";
		otherwise if the intruder-action-num is 0:
			say "You will hold your breath and listen intently, but won't be able to make out any clear noises.";
		otherwise if intruder-action-reported is false:
			follow the Faraway Reporting rulebook for the intruder-action-num;
	now the intended-action of the intruder is placeholder-action.
	
This is the reset listening rule: now player-listening is false.
	
The reward listening closely rule is listed before the advance time rule in the turn sequence rules.
The reset listening rule is listed after the reward listening closely rule in the turn sequence rules.

Instead of listening to nothing: try listening to the location.

First every turn: now the relevant item is nothing.

Carry out the intruder closing (this is the set intruder's intention to close rule):
	now the relevant item is the noun;
	if the location of the intruder is not the location and the intruder is not around, now the intended-action of the intruder is shutting-it.

Report the intruder closing something (called the tomb) (this is the extended report the intruder closing rule):
	now intruder-action-reported is true;
	if the location of the intruder is the location:
		say "[The intruder] [one of][close] [the tomb][or][close] [the tomb][or][shut] [the tomb][or][swing] [the tomb] closed[as decreasingly likely outcomes]." (A) instead;
	otherwise if the intruder is around:
		say "Over [in-by intruder locale descriptor], [the intruder] [one of][close] [the tomb][or][close] [the tomb][or][shut] [the tomb][or][swing] [the tomb] closed[as decreasingly likely outcomes]." (B) instead;
	otherwise:
		say "[We] [hear][noise-mod] something close [vague intruder direction]." (C) instead.
		
Carry out the intruder dropping (this is the set intruder's intention to drop rule):
	now the relevant item is the noun;
	if the location of the intruder is not the location and the intruder is not around, now the intended-action of the intruder is letting-drop.
	
First report the intruder dropping the painting (this is the customized report intruder dropping the painting rule):
	now intruder-action-reported is true;
	if the location of the intruder is the location:
		say "The [nobr]" (A);
	otherwise:
		say "Over [in-by intruder locale descriptor], the [nobr]" (B);
	say "[intruder] [one of][drop] the painting[or][let] the painting fall to the ground[or][drop] the painting on the ground[or][drop] the painting on the floor[at random] with a thud[first time]. You wince at the thought[only]." (C) instead;

Report the intruder dropping something (called the trash) (this is the extended report the intruder dropping rule):
	now intruder-action-reported is true;
	if the location of the intruder is the location:
		say "The [nobr]" (A);
	otherwise:
		say "Over [in-by intruder locale descriptor], the [nobr]" (B);
	say "[intruder] [one of][drop] [the trash][or][let] [the trash] fall to the ground[or][discard] [the trash] onto the floor[or][drop] [the trash] on the ground[or][drop] [the trash] on the floor[or][discard] [the trash][at random]." (C) instead;
	
Carry out the intruder examining (this is the set intruder's intention to examine rule):
	now the relevant item is the noun;
	if the location of the intruder is not the location and the intruder is not around, now the intended-action of the intruder is staring-at.
		
Report the intruder examining something (called the clue) (this is the extended report the intruder examining rule):
	now intruder-action-reported is true;
	if the location of the intruder is the location:
		say "[The intruder] [one of][inspect] [the clue][or][look] closely at [the clue][or][examine] [the clue][as decreasingly likely outcomes]." (A) instead;
	otherwise:
		say "Over [in-by intruder locale descriptor], [the intruder] [one of][inspect] [the clue][or][look] closely at [the clue][or][examine] [the clue][as decreasingly likely outcomes]." (B) instead.
		
Carry out the intruder going (this is the set intruder's intention to go rule):
	if the location of the intruder is not the location and the intruder is not around, now the intended-action of the intruder is going-place.

Report the intruder going a direction (called the way) (this is the extended report the intruder going rule):
	now intruder-action-reported is true;
	if the room gone from is Within-Closet:
		if the location is Within-Closet:
			say "[The intruder] will exit the closet." (A) instead;
		otherwise:
			say "[The intruder] will emerge from the closet[if the room gone to is the location and the player is not perfectly concealed]. He won't yet have seen you[unicode 8212]you'll still have time to move away or hide[end unless]." (B) instead;
	otherwise if the room gone to is the location:
		if the location is Within-Closet:
			say "[The intruder] will shoulder his way into the closet." (C) instead;
		otherwise if the player is perfectly concealed:
			say "[The intruder] [one of][approach][or][come] [into your area][or][stalk] [into your area][at random] from [the opposite of the way]." (D) instead;
		otherwise:
			say "[The intruder] [one of][approach][or][come] [into your area][or][stalk] [into your area][at random] from [the opposite of the way]. He won't yet have seen you[unicode 8212]you'll still have time to move away or hide." (E) instead;
	otherwise if the room gone from is the location:
		say "[The intruder] [one of][head][or][stalk][or][go][at random] [way], [prepositional entrance descriptor of the location of the intruder]." (F) instead;
	otherwise:
		if the room gone from is connected with the location:
			if the room gone to is connected with the location:
				say "[The intruder] [one of][head][or][stalk][or][go][at random] [way], [prepositional exit descriptor of the room gone from] and [prepositional entrance descriptor of the location of the intruder]." (G) instead;
			otherwise:
				say "[The intruder] [one of][head][or][stalk][or][go][at random] [way], disappearing from view." (H) instead;
		otherwise if the room gone to is connected with the location:
			if the room gone to is Main-By-Counter:
				say "[The intruder] [one of]will [sudden-descriptor]appear [in-by intruder locale descriptor][or]will [sudden-descriptor]stalk [prepositional entrance descriptor of the location of the intruder][at random] from [the opposite of way]." (I) instead;
			otherwise:
				say "[The intruder] [one of]will [sudden-descriptor]appear [in-by intruder locale descriptor][or]will [sudden-descriptor]stalk [prepositional entrance descriptor of the location of the intruder][or]will [sudden-descriptor]arrive [in-by intruder locale descriptor][at random] from [the opposite of way]." (J) instead;
		otherwise if player-listening is false:
			say "[We] [hear][noise-mod] [the intruder] moving around [vague intruder direction]." (K) instead.
			
To say into your area:
	if the location is in Open Space:
		say "into the same area as you";
	otherwise if the location is in Hallway:
		say "into the hallway";
	otherwise:
		say "into the room".
			
To say sudden-descriptor: say "[one of][or]suddenly [or]abruptly [as decreasingly likely outcomes]".

Carry out the intruder inserting something into (this is the set intruder's intention to insert rule):
	now the relevant item is the second noun;
	if the location of the intruder is not the location and the intruder is not around, now the intended-action of the intruder is inserting-in.
	
Report the intruder inserting something (called the peg) into something (called the hole) (this is the extended report the intruder inserting into rule):
	now intruder-action-reported is true;
	if the location of the intruder is the location:
		say "[The intruder] [one of][put] [the peg] into [the hole][or][put] [the peg] in [the hole][or][put] [the peg] inside of [the hole][or][place] [the peg] into [the hole][or][place] [the peg] in [the hole][or][place] [the peg] inside of [the hole][at random]." (A) instead;
	otherwise:
		say "Over [in-by intruder locale descriptor], [the intruder] [one of][put] [the peg] into [the hole][or][put] [the peg] in [the hole][or][put] [the peg] inside of [the hole][or][place] [the peg] into [the hole][or][place] [the peg] in [the hole][or][place] [the peg] inside of [the hole][at random]." (B) instead.
		
Carry out the intruder looking (this is the set intruder's intention to look rule):
	if the location of the intruder is not the location and the intruder is not around, now the intended-action of the intruder is looking-around.
	
Report the intruder looking (this is the extended report the intruder looking rule):
	now intruder-action-reported is true;
	if the location of the intruder is the location:
		say "[The intruder] [one of][turn] sharply and look around[or][look] around[or][survey] the area[or][peer] around[at random][if a random chance of 1 in 3 succeeds] himself[end if]." (A) instead;
	otherwise:
		say "Out of the corner of your eye, [we] [see] movement [in-by intruder locale descriptor]. The intruder [one of]will have turned sharply and looked around[or]will be looking around[or]will be surveying the area[or]will be peering around[at random][if a random chance of 1 in 3 succeeds] himself[end if]." (B) instead.
		
Carry out the intruder opening (this is the set intruder's intention to open rule):
	now the relevant item is the noun;
	if the location of the intruder is not the location and the intruder is not around, now the intended-action of the intruder is opening-up.

Report the intruder opening something (called the gift) (this is the extended report the intruder opening rule):
	now intruder-action-reported is true;
	if the location of the intruder is the location:
		say "[The intruder] [open] [the gift]." (A) instead;
	otherwise if the intruder is around:
		say "Over [in-by intruder locale descriptor], [the intruder] [open] [the gift]." (B) instead;
	otherwise if player-listening is false:
		say "[We] [hear][noise-mod] something open [vague intruder direction]." (C) instead.

Carry out the intruder putting something on (this is the set intruder's intention to put something on rule):
	now the relevant item is the second noun;
	if the location of the intruder is not the location and the intruder is not around, now the intended-action of the intruder is putting-upon.

Report the intruder putting something (called the top) on something (called the bottom) (this is the extended report the intruder putting on rule):
	now intruder-action-reported is true;
	if the location of the intruder is the location:
		say "[The intruder] [one of][put] [the top] on [the bottom][or][place] [the top] on [the bottom][or][put] [the top] onto [the bottom][or][set] [the top] on top of [the bottom][at random]." (A) instead;
	otherwise:
		say "Over [in-by intruder locale descriptor], [the intruder] [one of][put] [the top] on [the bottom][or][place] [the top] on [the bottom][or][put] [the top] onto [the bottom][or][set] [the top] on top of [the bottom][at random]." (B) instead.
		
Carry out the intruder searching (this is the set intruder's intention to search rule):
	now the relevant item is the noun;
	if the location of the intruder is not the location and the intruder is not around, now the intended-action of the intruder is looking-through.

Report the intruder searching something (called the enigma) (this is the extended report the intruder searching rule):
	now intruder-action-reported is true;
	if the enigma is the holder of the player:
		say "[The intruder] [if the enigma is a backside or the enigma is an underside][look][otherwise][search][end if] [the enigma], and all will be lost." (A) instead;
	otherwise if the location of the intruder is the location:
		say "[The intruder] [if the enigma is a backside or the enigma is an underside][look][otherwise][search][end if] [the enigma]." (B) instead;
	otherwise:
		say "Over [in-by intruder locale descriptor], [the intruder] [if the enigma is a backside or the enigma is an underside][look][otherwise][search][end if] [the enigma]." (C) instead.
		
Carry out the intruder spinning something to (this is the set intruder's intention to spin something to rule):
	now the relevant item is the noun;
	if the location of the intruder is not the location and the intruder is not around, now the intended-action of the intruder is dial-spinning.

Report the intruder spinning something to (this is the extended report the intruder spinning to rule):
	now intruder-action-reported is true;
	say "[if the location of the intruder is the location][The intruder][otherwise]Over [in-by intruder locale descriptor], [the intruder][end if] will be fiddling with the safe." (A) instead;
	
Carry out the intruder switching on (this is the set intruder's intention to switch on rule):
	now the relevant item is the noun;
	if the location of the intruder is not the location and the intruder is not around, now the intended-action of the intruder is turning-on.

Report the intruder switching on something (called the toggle) (this is the extended report the intruder switching on rule):
	now intruder-action-reported is true;
	if the location of the intruder is the location:
		if the toggle incorporates a screen:
			say "[The intruder] [one of][switch] on [the toggle][or][switch] [the toggle] on[or][turn] on [the toggle][or][turn] [the toggle] on[at random], causing [regarding the toggle][their] screen to brighten." (A) instead;
		otherwise:
			say "[The intruder] [one of][switch] on [the toggle][or][switch] [the toggle] on[or][turn] on [the toggle][or][turn] [the toggle] on[at random]." (B) instead;
	otherwise if the intruder is around:
		if the toggle incorporates a screen:
			say "Over [in-by intruder locale descriptor], [the intruder] [one of][switch] on [the toggle][or][switch] [the toggle] on[or][turn] on [the toggle][or][turn] [the toggle] on[at random], causing [regarding the toggle][their] screen to brighten." (C) instead;
		otherwise:
			say "Over [in-by intruder locale descriptor], [the intruder] [one of][switch] on [the toggle][or][switch] [the toggle] on[or][turn] on [the toggle][or][turn] [the toggle] on[at random]." (D) instead;
	otherwise if player-listening is false:
		say "[We] [hear][noise-mod] something switch on [vague intruder direction]." (E) instead.
		
Carry out the intruder taking (this is the set intruder's intention to take rule):
	now the relevant item is the noun;
	if the location of the intruder is not the location and the intruder is not around, now the intended-action of the intruder is picking-up.

Report the intruder taking something (called the contraband) (this is the extended report the intruder taking rule):
	now intruder-action-reported is true;
	if the location of the intruder is the location:
		say "[The intruder] [one of][take] [the contraband][or][pick] up [the contraband][or][pick] [the contraband] up[or][snatch] up [the contraband][or][snatch] [the contraband] up[or][seize] [the contraband][at random]." (A) instead;
	otherwise:
		say "Over [in-by intruder locale descriptor], [the intruder] [one of][take] [the contraband][or][pick] up [the contraband][or][pick] [the contraband] up[or][snatch] up [the contraband][or][snatch] [the contraband] up[or][seize] [the contraband][at random]." (B) instead.
		
Carry out the intruder unlocking something with (this is the set intruder's intention to unlock rule):
	now the relevant item is the noun;
	if the location of the intruder is not the location and the intruder is not around, now the intended-action of the intruder is lockpicking.

Report the intruder unlocking something (called the obstacle) with something (called the solution) (this is the extended report the intruder unlocking rule): 
	now intruder-action-reported is true;
	if the location of the intruder is the location:
		say "[The intruder] [insert] [the solution] into [one of]the lock of [the obstacle][or][the obstacle][']s lock[at random] and, with a bit of maneuvering, [regarding the intruder][unlock] [regarding the obstacle][them]." (A) instead;
	otherwise if the intruder is around:
		say "Over [in-by intruder locale descriptor], [the intruder] [insert] [the solution] into [one of]the lock of [the obstacle][or][the obstacle][']s lock[at random] and, with a bit of maneuvering, [regarding the intruder][unlock] [regarding the obstacle][them]." (B) instead;
	otherwise if player-listening is false:
		say "[We] [hear][noise-mod] something unlocking [vague intruder direction]." (C) instead.
		
Report the intruder unlocking for the first time (this is the report the intruder gaining access rule):
	now intruder-action-reported is true;
	now player-listening is false;
	say "[if listened-this-turn is true]Then, that noise will stop, and[otherwise]Just then,[end if] you will hear the telltale sound of the front door's lock snicking open." (A) instead.

Carry out the intruder typing the topic understood on the laptop-computer (this is the set intruder's intention to type on the computer rule):
	now the relevant item is the laptop-computer;
	if the location of the intruder is not the location and the intruder is not around, now the intended-action of the intruder is computer-typing.

Report the intruder typing the topic understood on the laptop-computer (this is the extended report the intruder typing on the laptop rule):
	now intruder-action-reported is true;
	if the location of the intruder is the location:
		say "[The intruder] [type] [if a random chance of 2 in 3 succeeds]something on[otherwise][one of]on[or]at[as decreasingly likely outcomes][end if] your laptop, before [one of]frowning[or]making a noise of frustration[or]grimacing[or]growling[or]grinding his teeth[cycling]." (A) instead;
	otherwise if the intruder is around:
		say "Over [in-by intruder locale descriptor], [the intruder] [type] [if a random chance of 2 in 3 succeeds]something on[otherwise][one of]on[or]at[as decreasingly likely outcomes][end if] your laptop, before [one of]frowning[or]making a noise of frustration[or]grimacing[or]growling[or]grinding his teeth[cycling]." (B) instead;
	otherwise if player-listening is false:
		say "[We] [hear][noise-mod] a typing sound [vague intruder direction]." (C) instead.
		
Carry out the intruder typing the topic understood on the smartphone (this is the set intruder's intention to type on the phone rule):
	now the relevant item is the smartphone;
	if the location of the intruder is not the location and the intruder is not around, now the intended-action of the intruder is phone-typing.

Report the intruder typing the topic understood on the smartphone (this is the extended report the intruder typing on the smartphone rule):
	now intruder-action-reported is true;
	if the location of the intruder is the location:
		say "[The intruder] [type] [if a random chance of 2 in 3 succeeds]something on[otherwise][one of]on[or]at[as decreasingly likely outcomes][end if] your phone, before [one of]frowning[or]making a noise of frustration[or]grimacing[or]growling[or]grinding his teeth[cycling]." (A) instead;
	otherwise if the intruder is around:
		say "Over [in-by intruder locale descriptor], [the intruder] [type] [if a random chance of 2 in 3 succeeds]something on[otherwise][one of]on[or]at[as decreasingly likely outcomes][end if] your phone, before [one of]frowning[or]making a noise of frustration[or]grimacing[or]growling[or]grinding his teeth[cycling]." (B) instead;
	otherwise if player-listening is false:
		say "[We] [hear][noise-mod] a tapping sound [vague intruder direction]." (C) instead.
		
Section 1 - Faraway Reporting

This is the report faraway actions rule:
	if it's Nighttime and intruder-action-reported is false:
		unless player-listening is true:
			follow the Faraway Reporting rulebook for the intruder-action-num.

The report faraway actions rule is listed after the run the intruder state machine rule in the every turn rules.
		
Faraway Reporting is a number based rulebook.

[TO TAKE INTO ACCOUNT:
	- variations for in the location, around, elsewhere
	- variations for when hidden under/behind things]

Faraway Reporting 0: make no decision.
[NOTE: 0 is for anything that doesn't make noise (doing nothing, looking, etc); moving around; lockpicking the front door]

Faraway Reporting 1:
	if the intruder is around:
		say "The intruder's head will whip around, his eyes searching.";
	otherwise:
		say "[We] [hear][noise-mod] [one of]a sharp intake of breath[or]a huffing laugh[or]a concerning absence of noise[as decreasingly likely outcomes] [vague intruder direction]."
[NOTE: 1 is used to alert the player that they've caught the intruder's attention]

Faraway Reporting 2:
	say "[We] [hear] [one of]a rustling[or]an indistinct[or]a clinking[or]a banging[or]an unidentifiable[or]a hollow[cycling] noise [vague intruder direction]."
[NOTE: 2 is for searching a trash can]

Faraway Reporting 3:
	say "[We] [hear][noise-mod] a rustling noise [vague intruder direction]."
[NOTE: 3 is for putting things in the rucksack]

Faraway Reporting 4:
	say "[We] [hear][noise-mod] a clink [vague intruder direction]."
[NOTE: 4 is for picking up the vase]

Faraway Reporting 5:
	say "[We] [hear][noise-mod] a soft thump [vague intruder direction]."
[NOTE: 5 is for dropping things]

Faraway Reporting 6:
	say "[We] [hear][noise-mod] a clicking noise [vague intruder direction]."
[NOTE: 6 is for spinning the safe dial]

Faraway Reporting 7:
	say "[We] [hear][noise-mod] something open [vague intruder direction]."
[NOTE: 7 is for opening things]

Faraway Reporting 8:
	say "[We] [hear][noise-mod] something close [vague intruder direction]."
[NOTE: 8 is for closing things]

Faraway Reporting 9:
	say "[We] [hear][noise-mod] something rustling around [vague intruder direction]."
[NOTE: 9 is for searching things generally]

Faraway Reporting 10:
	say "[We] [hear][noise-mod] something switch on [vague intruder direction]."
[NOTE: 10 is for switching on the laptop]

Faraway Reporting 11:
	say "[We] [hear][noise-mod] a typing sound [vague intruder direction]."
[NOTE: 11 is for typing on the laptop]

Faraway Reporting 12:
	say "[We] [hear][noise-mod] a typing sound [vague intruder direction], followed by a growl of frustration."
[NOTE: 12 is for expressing frustration when the laptop becomes locked]

Faraway Reporting 13:
	say "[We] [hear][noise-mod] something switch on [vague intruder direction]."
[NOTE: 13 is for switching on the smartphone]

Faraway Reporting 14:
	if the intruder is around:
		say "[We] [hear][noise-mod] a tapping sound as the intruder types on the smartphone.";
	otherwise:
		say "[We] [hear][noise-mod] a tapping sound [vague intruder direction]."
[NOTE: 14 is for typing on the smartphone]

Faraway Reporting 15:
	say "[We] [hear][noise-mod] a tapping sound [vague intruder direction], followed by a growl of frustration and a soft thump."
[NOTE: 15 is for expressing frustration when the smartphone becomes locked, then setting it on the dresser]

Faraway Reporting 16:
	say "[We] [hear][noise-mod] [if the former annoyance is the stove light]stove hood fan[otherwise][the former annoyance][end if] switch off [vague intruder direction]."
[NOTE: 16 is for switching off noisy things]

Faraway Reporting 17:
	if the intruder is around:
		say "The intruder will let out a noise of frustration. 'Don't tell me this is the [i]one[/i] fuckin['] password that isn't her birthday,' he'll growl.";
	otherwise:
		say "The intruder will let out a noise of frustration, then mutter something to himself."
[NOTE: 17 is for commenting to himself about your laptop's passoword]

Faraway Reporting 18:
	if the intruder is around:
		say "The intruder will scoff. 'You have to be [i]fucking[/i] kidding,' he'll mutter. 'How many more ways can you organize a birth date?'";
	otherwise:
		say "The intruder will scoff, then mutter something to himself."
[NOTE: 18 is for expressing frustration while trying to unlock your phone]

Faraway Reporting 19:
	if the intruder is around:
		say "'You better not give me any trouble, now,' the intruder will grumble to the safe.";
	otherwise:
		say "The intruder will grumble something."
[NOTE: 19 is for grumbling about the safe]

Faraway Reporting 20:
	if the intruder is around:
		say "You'll hear him mutter 'Here, kitty, kitty' under his breath.";
	otherwise:
		say "You'll hear him mutter something under his breath."
[NOTE: 20 is for a specific line when he looks at the bed for the first time]

Faraway Reporting 21:
	if the intruder is around:
		say "'Fuck,' he will say, full-throated and with feeling.";
	otherwise:
		say "You'll hear the intruder say 'Fuck.'"
[NOTE: 21 is for another specific line when he looks at the bed for the first time]

Faraway Reporting 22:
	if the intruder is around:
		say "The third dresser drawer will squeak as the intruder opens it.";
	otherwise:
		say "You will hear the third dresser drawer squeak as it opens."
[NOTE: 22 is for opening the third dresser drawer]

Faraway Reporting 23:
	if the intruder is around:
		say "The third dresser drawer will squeak as the intruder closes it.";
	otherwise:
		say "You will hear the third dresser drawer squeak as it closes."
[NOTE: 23 is for closing the third dresser drawer]

Faraway Reporting 24:
	say "The intruder will pause and stare at the glowing laptop screen for a moment, before continuing."
[NOTE: 24 is for noting that the laptop is switched on the first time he sees it]

Faraway Reporting 25:
	if the intruder is around:
		say "'[one of]Oh, what the fuck?[or]Goddammit,[or]Huh,[or]One of these times...[or]Oh, you [i]slippery[/i] bitch,[in random order]' he will mutter under his breath.";
	otherwise:
		say "You will hear him make a noise of frustration."
[NOTE: 25 is for searching the last-known locale and not finding the player]

Faraway Reporting 26:
	if stalled-alert is false:
		say "'Oh, you've gotta be [i]fucking[/i] kidding,' [if the intruder is around]the intruder will[otherwise]you will hear the intruder[end if] cry.";
	otherwise:
		now stalled-alert is false;
		say "Oh, you've gotta be [i]fucking[/i] kidding,' [if the intruder is around]the intruder will[otherwise]you will hear the intruder[end if] cry. He will have noticed something off[unicode 8212]something you changed after he walked in. He'll be on high alert from then on out; it'll be much harder to get the jump on him in any way.";
		now the alert level of the intruder is high;
[NOTE: 26 is for if you manage to take the important documents after he's seen that they're in the safe]

The taunt-num is a number that varies. The taunt-num is 0.
The list of taunts is a list of texts that varies.
First when Nighttime begins: sort the list of taunts in random order.
The list of taunts is { 
"'I know you're here,' the intruder will [if the intruder is not around]call[otherwise][creepy-say][end if]. 'And it's only a matter of time before I find you.'", 
"'You can't hide forever,' the intruder will [if the intruder is not around]call[otherwise][creepy-say][end if].",
"'Daisy, Daisy, give me your answer, do,' the intruder will sing, with intentional malice.",
"'How are you liking California?' the intruder will call[if the intruder is around], aparently unaware of exactly how close you are[end if]. 'Is the welcome wagon everything you hoped?'",
"'Shoulda stayed in New York,' the intruder will [if the intruder is around][one of]call, aparently unaware of exactly how close you are[or][creepy-say][at random][otherwise]call[end if]. 'Woulda saved a lot of people a lot of trouble.'",
"'Your brother's already dead, you know,' the intruder will [if the intruder is not around]call[otherwise][creepy-say][end if]. 'Your sister probably is, too, by now. And your parents won't be far behind.'",
"'The longer you hide, the worse it'll be for you,' the intruder will [if the intruder is not around]call[otherwise][creepy-say][end if]. 'That's a [i]promise[/i].'",
"'[unless the intruder is around]Hey, you[otherwise]You[end unless] should know,' the intruder will [if the intruder is not around]call[otherwise][creepy-say][end if]. 'That what will happen here tonight isn't your fault. It's just business.'",
"[if the intruder is around]'Where the fuck is she?' the intruder will growl[otherwise]The intruder will growl something[end if] to himself.",
"'Come out, come out, wherever you are,' the intruder will [if the intruder is not around]call[otherwise][creepy-say][end if].",
"[if the intruder is around]'Why do I always get the difficult ones?' the intruder will mutter[otherwise]The intruder will mutter something[end if] to himself." }.

To say creepy-say: say "[one of]croon[or]murmur[or]mutter[or]hiss[or]whisper[as decreasingly likely outcomes]".

Faraway Reporting 30:
	increment the taunt-num;
	if the taunt-num is greater than the number of entries in the list of taunts:
		now the taunt-num is 1;
	let N be the taunt-num;
	say "[entry N of the list of taunts]";
	say line break;
[NOTE: 30 is for taunts when he's aware you're in the apartment]

Chapter 3 - Reactiveness

Last carry out the intruder going (this is the intruder notes surroundings on going rule): unless the player is dead, follow the note surroundings rules.
Last carry out the intruder looking (this is the intruder notes surroundings on looking rule): unless the player is dead, follow the note surroundings rules.

The note surroundings rules are a rulebook.

Table of Known Thing Locations
item (a thing)	seen-flag	known-location (an object)	in-place-flag	taken-flag
geode	0	--	1	0
laptop-charger	0	--	1	0
laptop-computer	0	--	1	0
painting	0	--	1	0
phone charger	0	--	1	0
pill bottles	0	--	1	0
smartphone	0	--	1	0
vase	0	--	1	0
wallet	0	--	1	0

Definition: a thing is notable if it is an item listed in the Table of Known Thing Locations.

A note surroundings rule (this is the intruder takes note of object locations rule):
	repeat with N running from 1 to the number of rows in the Table of Known Thing Locations:
		choose row N in the Table of Known Thing Locations;
		if the intruder can spot the item entry:
			if the seen-flag entry is 0:
				now the seen-flag entry is 1;
				now the known-location entry is the holder of the item entry;
			otherwise:
				if the in-place-flag entry is 0 and the taken-flag entry is 0:
					unless the intruder is alert:
						if debugging the intruder:
							say "<PLEASE NOTE: the intruder has noticed the [item entry] out of place.>[command clarification break]";
						follow the indicate high alert level rule;
						now the alert level of the intruder is high.
						
Carry out an actor taking something notable (this is the notable removing rule):
	if the actor is the player:
		choose row with an item of noun in the Table of Known Thing Locations;
		if the seen-flag entry is 1:
			now the in-place-flag entry is 0;
	otherwise:
		choose row with an item of noun in the Table of Known Thing Locations;
		now the taken-flag entry is 1.
		
Carry out an actor putting the painting on the nail (this is the note returning the painting rule):
	choose row with an item of painting in the Table of Known Thing Locations;
	if the seen-flag entry is 1 and the known-location entry is the nail:
		now the in-place-flag entry is 1.
		
Table of Known Open or Closedness
item (a thing)	seen-flag	open-flag	recorded-open-flag (a number)
closet	0	0	--
dishwasher	0	0	--
first desk drawer	0	0	--
second desk drawer	0	0	--
first dresser drawer	0	0	--
second dresser drawer	0	0	--
third dresser drawer	0	0	--
fourth dresser drawer	0	0	--
freezer	0	0	--
front door	0	0	--
kitchen-cabinets	0	0	--
oven-door	0	0	--
refrigerator	0	0	--
restroom door	0	0	--
safe	0	0	--
stack of moving boxes	0	0	--

Definition: a thing is notably openable if it is an item listed in the Table of Known Open or Closedness.

A note surroundings rule (this is the intruder takes note of openness and closedness rule):
	repeat with N running from 1 to the number of rows in the Table of Known Open or Closedness:
		choose row N in the Table of Known Open or Closedness;
		if the intruder can spot the item entry:
			if the seen-flag entry is 0:
				now the seen-flag entry is 1;
				now the recorded-open-flag entry is the open-flag entry;
			otherwise:
				if the recorded-open-flag entry is not the open-flag entry:
					unless the intruder is alert:
						if debugging the intruder:
							say "<PLEASE NOTE: the intruder has noticed the [item entry] was suspiciously [if the open-flag entry is 1]open[otherwise]closed[end if].>[command clarification break]";
						follow the indicate high alert level rule;
						now the alert level of the intruder is high.

Carry out an actor opening something notably openable (this is the notable opening rule):
	choose row with an item of noun in the Table of Known Open or Closedness;
	now the open-flag entry is 1;
	if the actor is the intruder:
		now the recorded-open-flag entry is 1.
	
Carry out an actor closing something notably openable (this is the notable closing rule):
	choose row with an item of noun in the Table of Known Open or Closedness;
	now the open-flag entry is 0;
	if the actor is the intruder:
		now the recorded-open-flag entry is 0.
		
Table of Known On or Offness
item (a thing)	seen-flag	on-flag	recorded-on-flag (a number)
bathroom faucet	0	0	--
dishwasher	0	0	--
kitchen faucet	0	0	--
laptop-computer	0	0	--
oven-switch	0	0	--
smartphone	0	0	--
stove-knobs	0	0	--

Definition: a thing is notably switchable if it is an item listed in the Table of Known On or Offness.

A note surroundings rule (this is the intruder takes note of onness and offness rule):
	repeat with N running from 1 to the number of rows in the Table of Known On or Offness:
		choose row N in the Table of Known On or Offness;
		if the intruder can spot the item entry:
			if the seen-flag entry is 0:
				now the seen-flag entry is 1;
				now the recorded-on-flag entry is the on-flag entry;
			otherwise:
				if the recorded-on-flag entry is not the on-flag entry:
					unless the intruder is alert:
						if debugging the intruder:
							say "<PLEASE NOTE: the intruder has noticed the [item entry] was suspiciously switched [if the on-flag entry is 1]on[otherwise]off[end if].>[command clarification break]";
						follow the indicate high alert level rule;
						now the alert level of the intruder is high.

Carry out an actor switching on something notably switchable (this is the notable switching on rule):
	choose row with an item of noun in the Table of Known On or Offness;
	now the on-flag entry is 1;
	if the actor is the intruder:
		now the recorded-on-flag entry is 1.
		
Carry out the intruder opening the laptop-computer (this is the note opening the laptop rule):
	choose row with an item of laptop-computer in the Table of Known On or Offness;
	now the on-flag entry is 1;
	now the recorded-on-flag entry is 1.
	
Carry out an actor switching off something notably switchable (this is the notable switching off rule):
	choose row with an item of noun in the Table of Known On or Offness;
	now the on-flag entry is 0;
	if the actor is the intruder:
		now the recorded-on-flag entry is 0.
		
Carry out the intruder closing the laptop-computer (this is the note closing the laptop rule):
	choose row with an item of laptop-computer in the Table of Known On or Offness;
	now the on-flag entry is 0;
	now the recorded-on-flag entry is 0.
	
Table of Known Pseudo-On or Offness
item (a thing)	seen-flag	on-flag	recorded-on-flag (a number)	previous-flag
overhead lights	0	1	--	1
foyer light	0	1	--	1
stove light	0	0	--	0
bathroom light	0	0	--	0

Definition: a thing is notably pseudo-switchable if it is an item listed in the Table of Known Pseudo-On or Offness.

immediate-alert-indicated is a truth state that varies. immediate-alert-indicated is false.

A note surroundings rule (this is the intruder takes note of pseudo-onness and offness rule):
	repeat with N running from 1 to the number of rows in the Table of Known Pseudo-On or Offness:
		choose row N in the Table of Known Pseudo-On or Offness;
		if the intruder can spot the item entry:
			if the seen-flag entry is 0:
				now the seen-flag entry is 1;
				now the recorded-on-flag entry is the on-flag entry;
			otherwise:
				if the recorded-on-flag entry is not the on-flag entry:
					if debugging the intruder:
						say "<PLEASE NOTE: the intruder has noticed the [item entry] was suspiciously switched [if the on-flag entry is 1]on[otherwise]off[end if].>[command clarification break]";
					if the previous-flag entry is not the on-flag entry and immediate-alert-indicated is false:
						follow the immediate indicate high alert level rule;
					otherwise if the intruder is not alert:
						follow the indicate high alert level rule;
					now the alert level of the intruder is high.
					
This is the immediate indicate high alert level rule:
	now immediate-alert-indicated is true;
	if the intruder is in the location:
		say "The intruder will start. 'What the fuck?' you'll hear him say. [nobr]";
	otherwise if the intruder is around:
		say "From [casual descriptor of the location of the intruder], you'll hear the intruder say 'What the fuck?' [nobr]";
	otherwise:
		say "[We] [hear] the intruder say 'What the fuck?' [vague intruder direction]. [nobr]";
	say "He will have seen the lights flicking on. He'll be on high alert from then on out; it'll be much harder to get the jump on him in any way."
						
Carry out an actor switching off main-room-lightswitch:
	choose row with an item of overhead lights in the Table of Known Pseudo-On or Offness;
	now the on-flag entry is 0;
	the overhead flag updates in one turn from now;
	if the actor is the intruder:
		now the recorded-on-flag entry is 0.
		
Carry out an actor switching on main-room-lightswitch:
	choose row with an item of overhead lights in the Table of Known Pseudo-On or Offness;
	now the on-flag entry is 1;
	the overhead flag updates in one turn from now;
	if the actor is the intruder:
		now the recorded-on-flag entry is 1.
		
At the time when the overhead flag updates:
	choose row with an item of overhead lights in the Table of Known Pseudo-On or Offness;
	if the previous-flag entry is not the on-flag entry:
		now the previous-flag entry is the on-flag entry.
		
Carry out an actor switching off foyer-lightswitch:
	choose row with an item of foyer light in the Table of Known Pseudo-On or Offness;
	now the on-flag entry is 0;
	the foyer flag updates in one turn from now;
	if the actor is the intruder:
		now the recorded-on-flag entry is 0.
		
Carry out an actor switching on foyer-lightswitch:
	choose row with an item of foyer light in the Table of Known Pseudo-On or Offness;
	now the on-flag entry is 1;
	the foyer flag updates in one turn from now;
	if the actor is the intruder:
		now the recorded-on-flag entry is 1.
		
At the time when the foyer flag updates:
	choose row with an item of foyer light in the Table of Known Pseudo-On or Offness;
	if the previous-flag entry is not the on-flag entry:
		now the previous-flag entry is the on-flag entry.
		
Carry out an actor switching off hood-switch:
	choose row with an item of stove light in the Table of Known Pseudo-On or Offness;
	now the on-flag entry is 0;
	the hood flag updates in one turn from now;
	if the actor is the intruder:
		now the recorded-on-flag entry is 0.
		
Carry out an actor switching on hood-switch:
	choose row with an item of stove light in the Table of Known Pseudo-On or Offness;
	now the on-flag entry is 1;
	the hood flag updates in one turn from now;
	if the actor is the intruder:
		now the recorded-on-flag entry is 1.
		
At the time when the hood flag updates:
	choose row with an item of stove light in the Table of Known Pseudo-On or Offness;
	if the previous-flag entry is not the on-flag entry:
		now the previous-flag entry is the on-flag entry.
		
Carry out an actor switching off bathroom-lightswitch:
	choose row with an item of bathroom light in the Table of Known Pseudo-On or Offness;
	now the on-flag entry is 0;
	the bathroom flag updates in one turn from now;
	if the actor is the intruder:
		now the recorded-on-flag entry is 0.
		
Carry out an actor switching on bathroom-lightswitch:
	choose row with an item of bathroom light in the Table of Known Pseudo-On or Offness;
	now the on-flag entry is 1;
	the bathroom flag updates in one turn from now;
	if the actor is the intruder:
		now the recorded-on-flag entry is 1.
		
At the time when the bathroom flag updates:
	choose row with an item of bathroom light in the Table of Known Pseudo-On or Offness;
	if the previous-flag entry is not the on-flag entry:
		now the previous-flag entry is the on-flag entry.

Volume 5 - Testing (not for release)

Book 1 - Object Response Tests

Include Object Response Tests by Juhana Leinonen.

When play begins:
	remove the test buying rule;
	
Table of analyzing actions (continued)
topic	testing rule
"calling"	test calling rule
"crouching behind"	test crouching behind rule
"crouching on"	test crouching on rule
"entering underneath"	test entering underneath rule
"flushing"	test flushing rule
"locking keylessly"	test locking keylessly rule
"unlocking keylessly"	test unlocking keylessly rule
"looking behind"	test looking behind rule
"lying behind"	test lying behind rule
"lying on"	test lying on rule
"reading"	test reading rule
"rebooting"	test rebooting rule
"sitting behind"	test sitting behind rule
"sitting on"	test sitting on rule
"slipping behind"	test slipping behind rule
"standing up on"	test standing up on rule
"washing"	test washing rule
"remembering"	test remembering rule

This is the test calling rule:
	announce tests for "calling [the noun]";
	try the test-actor calling the noun.
	
This is the test crouching behind rule:
	announce tests for "crouching behind [the noun]";
	try the test-actor crouching behind the noun.

This is the test crouching on rule:
	announce tests for "crouching on [the noun]";
	try the test-actor crouching on the noun.
	
This is the test entering underneath rule:
	announce tests for "entering underneath [the noun]";
	try the test-actor entering underneath the noun.
	
This is the test flushing rule:
	announce tests for "flushing [the noun]";
	try the test-actor flushing the noun.

This is the test locking keylessly rule:
	announce tests for "kocking leylessly [the noun]";
	try the test-actor locking keylessly the noun.
	
This is the test looking behind rule:
	announce tests for "looking behind [the noun]";
	try the test-actor looking behind the noun.
	
This is the test lying behind rule:
	announce tests for "lying behind [the noun]";
	try the test-actor lying behind the noun.

This is the test lying on rule:
	announce tests for "lying on [the noun]";
	try the test-actor lying on the noun.
	
This is the test reading rule:
	announce tests for "reading [the noun]";
	try the test-actor reading the noun.
	
This is the test rebooting rule:
	announce tests for "rebooting [the noun]";
	try the test-actor rebooting the noun.

This is the test remembering rule:
	announce tests for "remembering [the noun]";
	try the test-actor remembering the noun.
	
This is the test sitting behind rule:
	announce tests for "sitting behind [the noun]";
	try the test-actor sitting behind the noun.
	
This is the test sitting on rule:
	announce tests for "sitting on [the noun]";
	try the test-actor sitting on the noun.
	
This is the test slipping behind rule:
	announce tests for "slipping behind [the noun]";
	try the test-actor slipping behind the noun.
	
This is the test standing up on rule:
	announce tests for "standing up on [the noun]";
	try the test-actor standing up on the noun.
	
[This is the test texting rule:
	announce tests for "texting [the noun]";
	try the test-actor texting the noun.]
	
This is the test unlocking keylessly rule:
	announce tests for "unlocking keylessly [the noun]";
	try the test-actor unlocking keylessly the noun.
	
This is the test washing rule:
	announce tests for "washing [the noun]";
	try the test-actor washing the noun.

Book 2 - Beta testing commands & reports

After reading a command (this is the ignore beta-comments rule):
	if the player's command matches the regular expression "^\p":
		say "(Noted.)";
		reject the player's command.
		
Before ringing: say "([the phone number understood])[command clarification break]".
Before buzzing: say "([the telephone number understood])[command clarification break]".

[A player's action awareness rule (this is the player aware of the intruder rule):
	if the actor is the intruder and intruder-inside is true, rule succeeds.]
	
[NOTE: The below code is by otistdog, and was posted publicly on the Intfiction forums]
First reaching outside something:
	say "<reaching outside of [container in question]>"; ["container in question" also works for supporters]
	make no decision.

First reaching inside something:
	say "<reaching inside of [container in question]>";
	make no decision.
		
Book 3 - Cheat commands

Part 1 - Opening and closing

Cheat-opening is an action out of world applying to one thing. Understand "zap open [any thing]" as cheat-opening.

Check cheat-opening: unless the noun provides the property open, say "[i][bracket][The noun] cannot be opened.[close bracket][/i]" instead.

Check cheat-opening: if the noun is open, say "[i][bracket][The noun] [adapt the verb are in the present tense] already open.[close bracket][/i]" instead.

Carry out cheat-opening: now the noun is open.

Report cheat-opening: say "[i][bracket][The noun] has been opened.[close bracket][/i]".

Cheat-closing is an action out of world applying to one thing. Understand "zap close/closed [any thing]" as cheat-closing.

Check cheat-opening: unless the noun provides the property open, say "[i][bracket][The noun] cannot be closed.[close bracket][/i]" instead.

Check cheat-closing: if the noun is closed, say "[i][bracket][The noun] [adapt the verb are in the present tense] already closed.[close bracket][/i]" instead.

Carry out cheat-closing: now the noun is closed.

Report cheat-opening: say "[i][bracket][The noun] has been closed.[close bracket][/i]".

Part 2 - On-ing and Offing

Cheat-oning is an action out of world applying to one thing. Understand "zap on [any thing]" as cheat-oning.

Check cheat-oning: unless the noun provides the property switched on, say "[i][bracket][The noun] cannot be switched on.[close bracket][/i]" instead.

Check cheat-oning: if the noun is switched on, say "[i][bracket][The noun] [adapt the verb are in the present tense] already switched on.[close bracket][/i]" instead.

Carry out cheat-oning: now the noun is switched on.

Carry out cheat-oning the radio: increase the ambient noise of the location of the radio.
Carry out cheat-oning the dishwasher-switch: increase the ambient noise of Kitchenette.
Carry out cheat-oning the kitchen faucet: increase the ambient noise of Kitchenette.
Carry out cheat-oning the hood-switch: increase the ambient noise of Kitchenette.
Carry out cheat-oning the bathroom faucet: increase the ambient noise of Bathroom.
Carry out cheat-oning the tub-faucet: increase the ambient noise of Bathroom.

Report cheat-oning: say "[i][bracket][The noun] has been switched on.[close bracket][/i]".

Cheat-offing is an action out of world applying to one thing. Understand "zap off [any thing]" as cheat-offing.

Check cheat-offing: unless the noun provides the property switched on, say "[i][bracket][The noun] cannot be switched off.[close bracket][/i]" instead.

Check cheat-offing: if the noun is switched off, say "[i][bracket][The noun] [adapt the verb are in the present tense] already switched off.[close bracket][/i]" instead.

Carry out cheat-offing: now the noun is switched off.

Carry out cheat-offing the radio: decrease the ambient noise of the location of the radio.
Carry out cheat-offing the dishwasher-switch: decrease the ambient noise of Kitchenette.
Carry out cheat-offing the kitchen faucet: decrease the ambient noise of Kitchenette.
Carry out cheat-offing the hood-switch: decrease the ambient noise of Kitchenette.
Carry out cheat-offing the bathroom faucet: decrease the ambient noise of Bathroom.
Carry out cheat-offing the tub-faucet: decrease the ambient noise of Bathroom.

Report cheat-offing: say "[i][bracket][The noun] has been switched off.[close bracket][/i]".

Part 3 - Intruder debugging

intruder-debugging is an action out of world. Understand "debug intruder" as intruder-debugging.

Carry out intruder-debugging:
	if debugging-intruder is false:
		now debugging-intruder is true;
	otherwise:
		now debugging-intruder is false.
		
Report intruder-debugging:
	if debugging-intruder is false, say "<intruder debugging off>";
	otherwise say "<intruder debugging on>".

Book 4 - Test shorthand

Test tutorial1 with "n / w / n / e / open dishwasher / empty dishwasher / put knives in knifeblock / open cabinets / put spoons in holder / put forks in holder / put knives in holder / put dishes in cabinets".

Test tutorial2 with "w / s / open laptop / s / take painting / drop painting / test safeunlock / open safe / x documents / read them / close safe / put painting on hook / n / type vanessa on laptop / click email".

Test tutorial3a with "s / look behind couch / look under couch / take phone / go under couch / take phone / out / s / e".

Test tutorial3b with "w / s / look under bed / take phone / go under bed / take phone / out".

Test tutorial4 with "plug charger into phone / plug charger into outlet".

Test tutorial5 with "n / w / switch off lights / n / switch off lights / s / e / s / sleep".

Test tutorial with "test tutorial1 / test tutorial2 / test tutorial3a / test tutorial4 / test tutorial5".
Test partialtut with "test tutorial1 / test tutorial2 / test tutorial3a / test tutorial4".

Test safeunlock with "spin safe to 12 / spin safe to 4 / spin safe to 19 / spin safe to 94".
Test quicksafeunlock with "set safe to 12 4 19 94".
